(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))m(p);new MutationObserver(p=>{for(const b of p)if(b.type==="childList")for(const j of b.addedNodes)j.tagName==="LINK"&&j.rel==="modulepreload"&&m(j)}).observe(document,{childList:!0,subtree:!0});function f(p){const b={};return p.integrity&&(b.integrity=p.integrity),p.referrerPolicy&&(b.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?b.credentials="include":p.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function m(p){if(p.ep)return;p.ep=!0;const b=f(p);fetch(p.href,b)}})();function ah(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Rd={exports:{}},Ur={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xp;function f_(){if(xp)return Ur;xp=1;var r=Symbol.for("react.transitional.element"),d=Symbol.for("react.fragment");function f(m,p,b){var j=null;if(b!==void 0&&(j=""+b),p.key!==void 0&&(j=""+p.key),"key"in p){b={};for(var C in p)C!=="key"&&(b[C]=p[C])}else b=p;return p=b.ref,{$$typeof:r,type:m,key:j,ref:p!==void 0?p:null,props:b}}return Ur.Fragment=d,Ur.jsx=f,Ur.jsxs=f,Ur}var bp;function m_(){return bp||(bp=1,Rd.exports=f_()),Rd.exports}var i=m_(),Od={exports:{}},Ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jp;function p_(){if(jp)return Ye;jp=1;var r=Symbol.for("react.transitional.element"),d=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),j=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),A=Symbol.iterator;function k(T){return T===null||typeof T!="object"?null:(T=A&&T[A]||T["@@iterator"],typeof T=="function"?T:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,I={};function R(T,Q,le){this.props=T,this.context=Q,this.refs=I,this.updater=le||z}R.prototype.isReactComponent={},R.prototype.setState=function(T,Q){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,Q,"setState")},R.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function D(){}D.prototype=R.prototype;function $(T,Q,le){this.props=T,this.context=Q,this.refs=I,this.updater=le||z}var G=$.prototype=new D;G.constructor=$,Z(G,R.prototype),G.isPureReactComponent=!0;var X=Array.isArray;function ve(){}var F={H:null,A:null,T:null,S:null},ue=Object.prototype.hasOwnProperty;function U(T,Q,le){var he=le.ref;return{$$typeof:r,type:T,key:Q,ref:he!==void 0?he:null,props:le}}function xe(T,Q){return U(T.type,Q,T.props)}function je(T){return typeof T=="object"&&T!==null&&T.$$typeof===r}function Ce(T){var Q={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(le){return Q[le]})}var qe=/\/+/g;function Ze(T,Q){return typeof T=="object"&&T!==null&&T.key!=null?Ce(""+T.key):Q.toString(36)}function Ie(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(ve,ve):(T.status="pending",T.then(function(Q){T.status==="pending"&&(T.status="fulfilled",T.value=Q)},function(Q){T.status==="pending"&&(T.status="rejected",T.reason=Q)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function J(T,Q,le,he,_e){var be=typeof T;(be==="undefined"||be==="boolean")&&(T=null);var Le=!1;if(T===null)Le=!0;else switch(be){case"bigint":case"string":case"number":Le=!0;break;case"object":switch(T.$$typeof){case r:case d:Le=!0;break;case E:return Le=T._init,J(Le(T._payload),Q,le,he,_e)}}if(Le)return _e=_e(T),Le=he===""?"."+Ze(T,0):he,X(_e)?(le="",Le!=null&&(le=Le.replace(qe,"$&/")+"/"),J(_e,Q,le,"",function(st){return st})):_e!=null&&(je(_e)&&(_e=xe(_e,le+(_e.key==null||T&&T.key===_e.key?"":(""+_e.key).replace(qe,"$&/")+"/")+Le)),Q.push(_e)),1;Le=0;var we=he===""?".":he+":";if(X(T))for(var Oe=0;Oe<T.length;Oe++)he=T[Oe],be=we+Ze(he,Oe),Le+=J(he,Q,le,be,_e);else if(Oe=k(T),typeof Oe=="function")for(T=Oe.call(T),Oe=0;!(he=T.next()).done;)he=he.value,be=we+Ze(he,Oe++),Le+=J(he,Q,le,be,_e);else if(be==="object"){if(typeof T.then=="function")return J(Ie(T),Q,le,he,_e);throw Q=String(T),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return Le}function B(T,Q,le){if(T==null)return T;var he=[],_e=0;return J(T,he,"","",function(be){return Q.call(le,be,_e++)}),he}function ee(T){if(T._status===-1){var Q=T._result;Q=Q(),Q.then(function(le){(T._status===0||T._status===-1)&&(T._status=1,T._result=le)},function(le){(T._status===0||T._status===-1)&&(T._status=2,T._result=le)}),T._status===-1&&(T._status=0,T._result=Q)}if(T._status===1)return T._result.default;throw T._result}var K=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},P={map:B,forEach:function(T,Q,le){B(T,function(){Q.apply(this,arguments)},le)},count:function(T){var Q=0;return B(T,function(){Q++}),Q},toArray:function(T){return B(T,function(Q){return Q})||[]},only:function(T){if(!je(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return Ye.Activity=S,Ye.Children=P,Ye.Component=R,Ye.Fragment=f,Ye.Profiler=p,Ye.PureComponent=$,Ye.StrictMode=m,Ye.Suspense=y,Ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,Ye.__COMPILER_RUNTIME={__proto__:null,c:function(T){return F.H.useMemoCache(T)}},Ye.cache=function(T){return function(){return T.apply(null,arguments)}},Ye.cacheSignal=function(){return null},Ye.cloneElement=function(T,Q,le){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var he=Z({},T.props),_e=T.key;if(Q!=null)for(be in Q.key!==void 0&&(_e=""+Q.key),Q)!ue.call(Q,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&Q.ref===void 0||(he[be]=Q[be]);var be=arguments.length-2;if(be===1)he.children=le;else if(1<be){for(var Le=Array(be),we=0;we<be;we++)Le[we]=arguments[we+2];he.children=Le}return U(T.type,_e,he)},Ye.createContext=function(T){return T={$$typeof:j,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:b,_context:T},T},Ye.createElement=function(T,Q,le){var he,_e={},be=null;if(Q!=null)for(he in Q.key!==void 0&&(be=""+Q.key),Q)ue.call(Q,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(_e[he]=Q[he]);var Le=arguments.length-2;if(Le===1)_e.children=le;else if(1<Le){for(var we=Array(Le),Oe=0;Oe<Le;Oe++)we[Oe]=arguments[Oe+2];_e.children=we}if(T&&T.defaultProps)for(he in Le=T.defaultProps,Le)_e[he]===void 0&&(_e[he]=Le[he]);return U(T,be,_e)},Ye.createRef=function(){return{current:null}},Ye.forwardRef=function(T){return{$$typeof:C,render:T}},Ye.isValidElement=je,Ye.lazy=function(T){return{$$typeof:E,_payload:{_status:-1,_result:T},_init:ee}},Ye.memo=function(T,Q){return{$$typeof:x,type:T,compare:Q===void 0?null:Q}},Ye.startTransition=function(T){var Q=F.T,le={};F.T=le;try{var he=T(),_e=F.S;_e!==null&&_e(le,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(ve,K)}catch(be){K(be)}finally{Q!==null&&le.types!==null&&(Q.types=le.types),F.T=Q}},Ye.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},Ye.use=function(T){return F.H.use(T)},Ye.useActionState=function(T,Q,le){return F.H.useActionState(T,Q,le)},Ye.useCallback=function(T,Q){return F.H.useCallback(T,Q)},Ye.useContext=function(T){return F.H.useContext(T)},Ye.useDebugValue=function(){},Ye.useDeferredValue=function(T,Q){return F.H.useDeferredValue(T,Q)},Ye.useEffect=function(T,Q){return F.H.useEffect(T,Q)},Ye.useEffectEvent=function(T){return F.H.useEffectEvent(T)},Ye.useId=function(){return F.H.useId()},Ye.useImperativeHandle=function(T,Q,le){return F.H.useImperativeHandle(T,Q,le)},Ye.useInsertionEffect=function(T,Q){return F.H.useInsertionEffect(T,Q)},Ye.useLayoutEffect=function(T,Q){return F.H.useLayoutEffect(T,Q)},Ye.useMemo=function(T,Q){return F.H.useMemo(T,Q)},Ye.useOptimistic=function(T,Q){return F.H.useOptimistic(T,Q)},Ye.useReducer=function(T,Q,le){return F.H.useReducer(T,Q,le)},Ye.useRef=function(T){return F.H.useRef(T)},Ye.useState=function(T){return F.H.useState(T)},Ye.useSyncExternalStore=function(T,Q,le){return F.H.useSyncExternalStore(T,Q,le)},Ye.useTransition=function(){return F.H.useTransition()},Ye.version="19.2.0",Ye}var wp;function ih(){return wp||(wp=1,Od.exports=p_()),Od.exports}var g=ih();const Dl=ah(g);var Dd={exports:{}},Hr={},Bd={exports:{}},Pd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sp;function g_(){return Sp||(Sp=1,(function(r){function d(J,B){var ee=J.length;J.push(B);e:for(;0<ee;){var K=ee-1>>>1,P=J[K];if(0<p(P,B))J[K]=B,J[ee]=P,ee=K;else break e}}function f(J){return J.length===0?null:J[0]}function m(J){if(J.length===0)return null;var B=J[0],ee=J.pop();if(ee!==B){J[0]=ee;e:for(var K=0,P=J.length,T=P>>>1;K<T;){var Q=2*(K+1)-1,le=J[Q],he=Q+1,_e=J[he];if(0>p(le,ee))he<P&&0>p(_e,le)?(J[K]=_e,J[he]=ee,K=he):(J[K]=le,J[Q]=ee,K=Q);else if(he<P&&0>p(_e,ee))J[K]=_e,J[he]=ee,K=he;else break e}}return B}function p(J,B){var ee=J.sortIndex-B.sortIndex;return ee!==0?ee:J.id-B.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var b=performance;r.unstable_now=function(){return b.now()}}else{var j=Date,C=j.now();r.unstable_now=function(){return j.now()-C}}var y=[],x=[],E=1,S=null,A=3,k=!1,z=!1,Z=!1,I=!1,R=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function G(J){for(var B=f(x);B!==null;){if(B.callback===null)m(x);else if(B.startTime<=J)m(x),B.sortIndex=B.expirationTime,d(y,B);else break;B=f(x)}}function X(J){if(Z=!1,G(J),!z)if(f(y)!==null)z=!0,ve||(ve=!0,Ce());else{var B=f(x);B!==null&&Ie(X,B.startTime-J)}}var ve=!1,F=-1,ue=5,U=-1;function xe(){return I?!0:!(r.unstable_now()-U<ue)}function je(){if(I=!1,ve){var J=r.unstable_now();U=J;var B=!0;try{e:{z=!1,Z&&(Z=!1,D(F),F=-1),k=!0;var ee=A;try{t:{for(G(J),S=f(y);S!==null&&!(S.expirationTime>J&&xe());){var K=S.callback;if(typeof K=="function"){S.callback=null,A=S.priorityLevel;var P=K(S.expirationTime<=J);if(J=r.unstable_now(),typeof P=="function"){S.callback=P,G(J),B=!0;break t}S===f(y)&&m(y),G(J)}else m(y);S=f(y)}if(S!==null)B=!0;else{var T=f(x);T!==null&&Ie(X,T.startTime-J),B=!1}}break e}finally{S=null,A=ee,k=!1}B=void 0}}finally{B?Ce():ve=!1}}}var Ce;if(typeof $=="function")Ce=function(){$(je)};else if(typeof MessageChannel<"u"){var qe=new MessageChannel,Ze=qe.port2;qe.port1.onmessage=je,Ce=function(){Ze.postMessage(null)}}else Ce=function(){R(je,0)};function Ie(J,B){F=R(function(){J(r.unstable_now())},B)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(J){J.callback=null},r.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ue=0<J?Math.floor(1e3/J):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_next=function(J){switch(A){case 1:case 2:case 3:var B=3;break;default:B=A}var ee=A;A=B;try{return J()}finally{A=ee}},r.unstable_requestPaint=function(){I=!0},r.unstable_runWithPriority=function(J,B){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ee=A;A=J;try{return B()}finally{A=ee}},r.unstable_scheduleCallback=function(J,B,ee){var K=r.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?K+ee:K):ee=K,J){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=ee+P,J={id:E++,callback:B,priorityLevel:J,startTime:ee,expirationTime:P,sortIndex:-1},ee>K?(J.sortIndex=ee,d(x,J),f(y)===null&&J===f(x)&&(Z?(D(F),F=-1):Z=!0,Ie(X,ee-K))):(J.sortIndex=P,d(y,J),z||k||(z=!0,ve||(ve=!0,Ce()))),J},r.unstable_shouldYield=xe,r.unstable_wrapCallback=function(J){var B=A;return function(){var ee=A;A=B;try{return J.apply(this,arguments)}finally{A=ee}}}})(Pd)),Pd}var Np;function v_(){return Np||(Np=1,Bd.exports=g_()),Bd.exports}var Ud={exports:{}},Nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cp;function __(){if(Cp)return Nn;Cp=1;var r=ih();function d(y){var x="https://react.dev/errors/"+y;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)x+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+y+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function f(){}var m={d:{f,r:function(){throw Error(d(522))},D:f,C:f,L:f,m:f,X:f,S:f,M:f},p:0,findDOMNode:null},p=Symbol.for("react.portal");function b(y,x,E){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:p,key:S==null?null:""+S,children:y,containerInfo:x,implementation:E}}var j=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function C(y,x){if(y==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=m,Nn.createPortal=function(y,x){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(d(299));return b(y,x,null,E)},Nn.flushSync=function(y){var x=j.T,E=m.p;try{if(j.T=null,m.p=2,y)return y()}finally{j.T=x,m.p=E,m.d.f()}},Nn.preconnect=function(y,x){typeof y=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,m.d.C(y,x))},Nn.prefetchDNS=function(y){typeof y=="string"&&m.d.D(y)},Nn.preinit=function(y,x){if(typeof y=="string"&&x&&typeof x.as=="string"){var E=x.as,S=C(E,x.crossOrigin),A=typeof x.integrity=="string"?x.integrity:void 0,k=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;E==="style"?m.d.S(y,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:S,integrity:A,fetchPriority:k}):E==="script"&&m.d.X(y,{crossOrigin:S,integrity:A,fetchPriority:k,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Nn.preinitModule=function(y,x){if(typeof y=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var E=C(x.as,x.crossOrigin);m.d.M(y,{crossOrigin:E,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&m.d.M(y)},Nn.preload=function(y,x){if(typeof y=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var E=x.as,S=C(E,x.crossOrigin);m.d.L(y,E,{crossOrigin:S,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Nn.preloadModule=function(y,x){if(typeof y=="string")if(x){var E=C(x.as,x.crossOrigin);m.d.m(y,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:E,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else m.d.m(y)},Nn.requestFormReset=function(y){m.d.r(y)},Nn.unstable_batchedUpdates=function(y,x){return y(x)},Nn.useFormState=function(y,x,E){return j.H.useFormState(y,x,E)},Nn.useFormStatus=function(){return j.H.useHostTransitionStatus()},Nn.version="19.2.0",Nn}var Ep;function vg(){if(Ep)return Ud.exports;Ep=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(d){console.error(d)}}return r(),Ud.exports=__(),Ud.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tp;function y_(){if(Tp)return Hr;Tp=1;var r=v_(),d=ih(),f=vg();function m(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function p(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function b(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function j(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function C(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function y(e){if(b(e)!==e)throw Error(m(188))}function x(e){var t=e.alternate;if(!t){if(t=b(e),t===null)throw Error(m(188));return t!==e?null:e}for(var a=e,l=t;;){var c=a.return;if(c===null)break;var u=c.alternate;if(u===null){if(l=c.return,l!==null){a=l;continue}break}if(c.child===u.child){for(u=c.child;u;){if(u===a)return y(c),e;if(u===l)return y(c),t;u=u.sibling}throw Error(m(188))}if(a.return!==l.return)a=c,l=u;else{for(var _=!1,N=c.child;N;){if(N===a){_=!0,a=c,l=u;break}if(N===l){_=!0,l=c,a=u;break}N=N.sibling}if(!_){for(N=u.child;N;){if(N===a){_=!0,a=u,l=c;break}if(N===l){_=!0,l=u,a=c;break}N=N.sibling}if(!_)throw Error(m(189))}}if(a.alternate!==l)throw Error(m(190))}if(a.tag!==3)throw Error(m(188));return a.stateNode.current===a?e:t}function E(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=E(e),t!==null)return t;e=e.sibling}return null}var S=Object.assign,A=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),$=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),ve=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),ue=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),xe=Symbol.for("react.memo_cache_sentinel"),je=Symbol.iterator;function Ce(e){return e===null||typeof e!="object"?null:(e=je&&e[je]||e["@@iterator"],typeof e=="function"?e:null)}var qe=Symbol.for("react.client.reference");function Ze(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===qe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Z:return"Fragment";case R:return"Profiler";case I:return"StrictMode";case X:return"Suspense";case ve:return"SuspenseList";case U:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case z:return"Portal";case $:return e.displayName||"Context";case D:return(e._context.displayName||"Context")+".Consumer";case G:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case F:return t=e.displayName||null,t!==null?t:Ze(e.type)||"Memo";case ue:t=e._payload,e=e._init;try{return Ze(e(t))}catch{}}return null}var Ie=Array.isArray,J=d.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=f.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},K=[],P=-1;function T(e){return{current:e}}function Q(e){0>P||(e.current=K[P],K[P]=null,P--)}function le(e,t){P++,K[P]=e.current,e.current=t}var he=T(null),_e=T(null),be=T(null),Le=T(null);function we(e,t){switch(le(be,t),le(_e,e),le(he,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Gm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Gm(t),e=qm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Q(he),le(he,e)}function Oe(){Q(he),Q(_e),Q(be)}function st(e){e.memoizedState!==null&&le(Le,e);var t=he.current,a=qm(t,e.type);t!==a&&(le(_e,e),le(he,a))}function Wt(e){_e.current===e&&(Q(he),Q(_e)),Le.current===e&&(Q(Le),Or._currentValue=ee)}var De,Je;function jt(e){if(De===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);De=t&&t[1]||"",Je=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+De+e+Je}var sn=!1;function Vt(e,t){if(!e||sn)return"";sn=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(ce){var se=ce}Reflect.construct(e,[],pe)}else{try{pe.call()}catch(ce){se=ce}e.call(pe.prototype)}}else{try{throw Error()}catch(ce){se=ce}(pe=e())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(ce){if(ce&&se&&typeof ce.stack=="string")return[ce.stack,se.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=l.DetermineComponentFrameRoot(),_=u[0],N=u[1];if(_&&N){var O=_.split(`
`),ne=N.split(`
`);for(c=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;c<ne.length&&!ne[c].includes("DetermineComponentFrameRoot");)c++;if(l===O.length||c===ne.length)for(l=O.length-1,c=ne.length-1;1<=l&&0<=c&&O[l]!==ne[c];)c--;for(;1<=l&&0<=c;l--,c--)if(O[l]!==ne[c]){if(l!==1||c!==1)do if(l--,c--,0>c||O[l]!==ne[c]){var de=`
`+O[l].replace(" at new "," at ");return e.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",e.displayName)),de}while(1<=l&&0<=c);break}}}finally{sn=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?jt(a):""}function ca(e,t){switch(e.tag){case 26:case 27:case 5:return jt(e.type);case 16:return jt("Lazy");case 13:return e.child!==t&&t!==null?jt("Suspense Fallback"):jt("Suspense");case 19:return jt("SuspenseList");case 0:case 15:return Vt(e.type,!1);case 11:return Vt(e.type.render,!1);case 1:return Vt(e.type,!0);case 31:return jt("Activity");default:return""}}function un(e){try{var t="",a=null;do t+=ca(e,a),a=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Zt=Object.prototype.hasOwnProperty,dn=r.unstable_scheduleCallback,hn=r.unstable_cancelCallback,Jt=r.unstable_shouldYield,Na=r.unstable_requestPaint,Ot=r.unstable_now,Ha=r.unstable_getCurrentPriorityLevel,Rn=r.unstable_ImmediatePriority,en=r.unstable_UserBlockingPriority,Tt=r.unstable_NormalPriority,Za=r.unstable_LowPriority,Ia=r.unstable_IdlePriority,li=r.log,Ca=r.unstable_setDisableYieldValue,En=null,It=null;function yn(e){if(typeof li=="function"&&Ca(e),It&&typeof It.setStrictMode=="function")try{It.setStrictMode(En,e)}catch{}}var Gt=Math.clz32?Math.clz32:jn,xn=Math.log,bn=Math.LN2;function jn(e){return e>>>=0,e===0?32:31-(xn(e)/bn|0)|0}var Fn=256,Kn=262144,fn=4194304;function et(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ea(e,t,a){var l=e.pendingLanes;if(l===0)return 0;var c=0,u=e.suspendedLanes,_=e.pingedLanes;e=e.warmLanes;var N=l&134217727;return N!==0?(l=N&~u,l!==0?c=et(l):(_&=N,_!==0?c=et(_):a||(a=N&~e,a!==0&&(c=et(a))))):(N=l&~u,N!==0?c=et(N):_!==0?c=et(_):a||(a=l&~e,a!==0&&(c=et(a)))),c===0?0:t!==0&&t!==c&&(t&u)===0&&(u=c&-c,a=t&-t,u>=a||u===32&&(a&4194048)!==0)?t:c}function Ta(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function fs(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Li(){var e=fn;return fn<<=1,(fn&62914560)===0&&(fn=4194304),e}function ri(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Xn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ms(e,t,a,l,c,u){var _=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var N=e.entanglements,O=e.expirationTimes,ne=e.hiddenUpdates;for(a=_&~a;0<a;){var de=31-Gt(a),pe=1<<de;N[de]=0,O[de]=-1;var se=ne[de];if(se!==null)for(ne[de]=null,de=0;de<se.length;de++){var ce=se[de];ce!==null&&(ce.lane&=-536870913)}a&=~pe}l!==0&&ki(e,l,0),u!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=u&~(_&~t))}function ki(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-Gt(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function Aa(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var l=31-Gt(a),c=1<<l;c&t|e[l]&t&&(e[l]|=t),a&=~c}}function ua(e,t){var a=t&-t;return a=(a&42)!==0?1:qt(a),(a&(e.suspendedLanes|t))!==0?0:a}function qt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ke(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ga(){var e=B.p;return e!==0?e:(e=window.event,e===void 0?32:fp(e.type))}function qa(e,t){var a=B.p;try{return B.p=e,t()}finally{B.p=a}}var Tn=Math.random().toString(36).slice(2),Lt="__reactFiber$"+Tn,kt="__reactProps$"+Tn,Qn="__reactContainer$"+Tn,On="__reactEvents$"+Tn,V="__reactListeners$"+Tn,oe="__reactHandles$"+Tn,Te="__reactResources$"+Tn,ae="__reactMarker$"+Tn;function Be(e){delete e[Lt],delete e[kt],delete e[On],delete e[V],delete e[oe]}function Ue(e){var t=e[Lt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Qn]||a[Lt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Qm(e);e!==null;){if(a=e[Lt])return a;e=Qm(e)}return t}e=a,a=e.parentNode}return null}function Ae(e){if(e=e[Lt]||e[Qn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Ee(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(m(33))}function _t(e){var t=e[Te];return t||(t=e[Te]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ze(e){e[ae]=!0}var ln=new Set,An={};function mn(e,t){tt(e,t),tt(e+"Capture",t)}function tt(e,t){for(An[e]=t,e=0;e<t.length;e++)ln.add(t[e])}var mt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$a={},ps={};function oi(e){return Zt.call(ps,e)?!0:Zt.call($a,e)?!1:mt.test(e)?ps[e]=!0:($a[e]=!0,!1)}function Qe(e,t,a){if(oi(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function gt(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function W(e,t,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+l)}}function re(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ye(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Se(e,t,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var c=l.get,u=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(_){a=""+_,u.call(this,_)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ge(e){if(!e._valueTracker){var t=ye(e)?"checked":"value";e._valueTracker=Se(e,t,""+e[t])}}function Ve(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),l="";return e&&(l=ye(e)?e.checked?"true":"false":e.value),e=l,e!==a?(t.setValue(e),!0):!1}function Dt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Dn=/[\n"\\]/g;function We(e){return e.replace(Dn,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function ql(e,t,a,l,c,u,_,N){e.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.type=_:e.removeAttribute("type"),t!=null?_==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+re(t)):e.value!==""+re(t)&&(e.value=""+re(t)):_!=="submit"&&_!=="reset"||e.removeAttribute("value"),t!=null?La(e,_,re(t)):a!=null?La(e,_,re(a)):l!=null&&e.removeAttribute("value"),c==null&&u!=null&&(e.defaultChecked=!!u),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?e.name=""+re(N):e.removeAttribute("name")}function gs(e,t,a,l,c,u,_,N){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||a!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){ge(e);return}a=a!=null?""+re(a):"",t=t!=null?""+re(t):a,N||t===e.value||(e.value=t),e.defaultValue=t}l=l??c,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=N?e.checked:!!l,e.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(e.name=_),ge(e)}function La(e,t,a){t==="number"&&Dt(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ct(e,t,a,l){if(e=e.options,t){t={};for(var c=0;c<a.length;c++)t["$"+a[c]]=!0;for(a=0;a<e.length;a++)c=t.hasOwnProperty("$"+e[a].value),e[a].selected!==c&&(e[a].selected=c),c&&l&&(e[a].defaultSelected=!0)}else{for(a=""+re(a),t=null,c=0;c<e.length;c++){if(e[c].value===a){e[c].selected=!0,l&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Ya(e,t,a){if(t!=null&&(t=""+re(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+re(a):""}function Mi(e,t,a,l){if(t==null){if(l!=null){if(a!=null)throw Error(m(92));if(Ie(l)){if(1<l.length)throw Error(m(93));l=l[0]}a=l}a==null&&(a=""),t=a}a=re(t),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),ge(e)}function da(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var $l=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zi(e,t,a){var l=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,a):typeof a!="number"||a===0||$l.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Ks(e,t,a){if(t!=null&&typeof t!="object")throw Error(m(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var c in t)l=t[c],t.hasOwnProperty(c)&&a[c]!==l&&zi(e,c,l)}else for(var u in t)t.hasOwnProperty(u)&&zi(e,u,t[u])}function vs(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xs=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ri(e){return Yl.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Bn(){}var Qs=null;function _s(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Oi=null,$e=null;function Wn(e){var t=Ae(e);if(t&&(e=t.stateNode)){var a=e[kt]||null;e:switch(e=t.stateNode,t.type){case"input":if(ql(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+We(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var l=a[t];if(l!==e&&l.form===e.form){var c=l[kt]||null;if(!c)throw Error(m(90));ql(l,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<a.length;t++)l=a[t],l.form===e.form&&Ve(l)}break e;case"textarea":Ya(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Ct(e,!!a.multiple,t,!1)}}}var vt=!1;function Vl(e,t,a){if(vt)return e(t,a);vt=!0;try{var l=e(t);return l}finally{if(vt=!1,(Oi!==null||$e!==null)&&(Ko(),Oi&&(t=Oi,e=$e,$e=Oi=null,Wn(t),e)))for(t=0;t<e.length;t++)Wn(e[t])}}function ci(e,t){var a=e.stateNode;if(a===null)return null;var l=a[kt]||null;if(l===null)return null;a=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(m(231,t,typeof a));return a}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ys=!1;if(Jn)try{var ea={};Object.defineProperty(ea,"passive",{get:function(){ys=!0}}),window.addEventListener("test",ea,ea),window.removeEventListener("test",ea,ea)}catch{ys=!1}var ha=null,ui=null,Bt=null;function Va(){if(Bt)return Bt;var e,t=ui,a=t.length,l,c="value"in ha?ha.value:ha.textContent,u=c.length;for(e=0;e<a&&t[e]===c[e];e++);var _=a-e;for(l=1;l<=_&&t[a-l]===c[u-l];l++);return Bt=c.slice(e,1<l?1-l:void 0)}function xs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function bs(){return!0}function Jr(){return!1}function pn(e){function t(a,l,c,u,_){this._reactName=a,this._targetInst=c,this.type=l,this.nativeEvent=u,this.target=_,this.currentTarget=null;for(var N in e)e.hasOwnProperty(N)&&(a=e[N],this[N]=a?a(u):u[N]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?bs:Jr,this.isPropagationStopped=Jr,this}return S(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=bs)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=bs)},persist:function(){},isPersistent:bs}),t}var ka={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ws=pn(ka),Di=S({},ka,{view:0,detail:0}),lt=pn(Di),Fl,Ln,Ma,js=S({},Di,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:er,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ma&&(Ma&&e.type==="mousemove"?(Fl=e.screenX-Ma.screenX,Ln=e.screenY-Ma.screenY):Ln=Fl=0,Ma=e),Fl)},movementY:function(e){return"movementY"in e?e.movementY:Ln}}),eo=pn(js),Kl=S({},js,{dataTransfer:0}),qc=pn(Kl),to=S({},Di,{relatedTarget:0}),Xl=pn(to),$c=S({},ka,{animationName:0,elapsedTime:0,pseudoElement:0}),Ql=pn($c),Yc=S({},ka,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fa=pn(Yc),Vc=S({},ka,{data:0}),Wl=pn(Vc),Fa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},no={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ao={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jl(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ao[e])?!!t[e]:!1}function er(){return Jl}var io=S({},Di,{key:function(e){if(e.key){var t=Fa[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=xs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?no[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:er,charCode:function(e){return e.type==="keypress"?xs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?xs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),so=pn(io),Fc=S({},js,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lo=pn(Fc),tr=S({},Di,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:er}),Kc=pn(tr),ro=S({},ka,{propertyName:0,elapsedTime:0,pseudoElement:0}),oo=pn(ro),Js=S({},js,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),di=pn(Js),Xc=S({},ka,{newState:0,oldState:0}),ws=pn(Xc),Pn=[9,13,27,32],el=Jn&&"CompositionEvent"in window,Bi=null;Jn&&"documentMode"in document&&(Bi=document.documentMode);var Qc=Jn&&"TextEvent"in window&&!Bi,tl=Jn&&(!el||Bi&&8<Bi&&11>=Bi),nl=" ",co=!1;function uo(e,t){switch(e){case"keyup":return Pn.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nr(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pi=!1;function ta(e,t){switch(e){case"compositionend":return nr(t);case"keypress":return t.which!==32?null:(co=!0,nl);case"textInput":return e=t.data,e===nl&&co?null:e;default:return null}}function Ui(e,t){if(Pi)return e==="compositionend"||!el&&uo(e,t)?(e=Va(),Bt=ui=ha=null,Pi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return tl&&t.locale!=="ko"?null:t.data;default:return null}}var Wc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ma(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Wc[e.type]:t==="textarea"}function ho(e,t,a,l){Oi?$e?$e.push(l):$e=[l]:Oi=l,t=nc(t,"onChange"),0<t.length&&(a=new Ws("onChange","change",null,a,l),e.push({event:a,listeners:t}))}var pa=null,Ss=null;function Ns(e){Bm(e,0)}function Cs(e){var t=Ee(e);if(Ve(t))return e}function Es(e,t){if(e==="change")return t}var fo=!1;if(Jn){var ga;if(Jn){var Hi="oninput"in document;if(!Hi){var mo=document.createElement("div");mo.setAttribute("oninput","return;"),Hi=typeof mo.oninput=="function"}ga=Hi}else ga=!1;fo=ga&&(!document.documentMode||9<document.documentMode)}function al(){pa&&(pa.detachEvent("onpropertychange",po),Ss=pa=null)}function po(e){if(e.propertyName==="value"&&Cs(Ss)){var t=[];ho(t,Ss,e,_s(e)),Vl(Ns,t)}}function za(e,t,a){e==="focusin"?(al(),pa=t,Ss=a,pa.attachEvent("onpropertychange",po)):e==="focusout"&&al()}function Jc(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Cs(Ss)}function Zi(e,t){if(e==="click")return Cs(t)}function eu(e,t){if(e==="input"||e==="change")return Cs(t)}function Ra(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rn=typeof Object.is=="function"?Object.is:Ra;function Ii(e,t){if(rn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),l=Object.keys(t);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var c=a[l];if(!Zt.call(t,c)||!rn(e[c],t[c]))return!1}return!0}function il(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ts(e,t){var a=il(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=t&&l>=t)return{node:a,offset:t-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=il(a)}}function sl(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?sl(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function As(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Dt(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Dt(e.document)}return t}function Ka(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var ll=Jn&&"documentMode"in document&&11>=document.documentMode,Xa=null,rl=null,Ls=null,Gi=!1;function go(e,t,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Gi||Xa==null||Xa!==Dt(l)||(l=Xa,"selectionStart"in l&&Ka(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ls&&Ii(Ls,l)||(Ls=l,l=nc(rl,"onSelect"),0<l.length&&(t=new Ws("onSelect","select",null,t,a),e.push({event:t,listeners:l}),t.target=Xa)))}function Qa(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var qi={animationend:Qa("Animation","AnimationEnd"),animationiteration:Qa("Animation","AnimationIteration"),animationstart:Qa("Animation","AnimationStart"),transitionrun:Qa("Transition","TransitionRun"),transitionstart:Qa("Transition","TransitionStart"),transitioncancel:Qa("Transition","TransitionCancel"),transitionend:Qa("Transition","TransitionEnd")},ol={},vo={};Jn&&(vo=document.createElement("div").style,"AnimationEvent"in window||(delete qi.animationend.animation,delete qi.animationiteration.animation,delete qi.animationstart.animation),"TransitionEvent"in window||delete qi.transitionend.transition);function on(e){if(ol[e])return ol[e];if(!qi[e])return e;var t=qi[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in vo)return ol[e]=t[a];return e}var ks=on("animationend"),_o=on("animationiteration"),Ms=on("animationstart"),tu=on("transitionrun"),yo=on("transitionstart"),nu=on("transitioncancel"),$i=on("transitionend"),xo=new Map,Wa="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wa.push("scrollEnd");function Un(e,t){xo.set(e,t),mn(t,[e])}var zs=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Hn=[],wn=0,cl=0;function Rs(){for(var e=wn,t=cl=wn=0;t<e;){var a=Hn[t];Hn[t++]=null;var l=Hn[t];Hn[t++]=null;var c=Hn[t];Hn[t++]=null;var u=Hn[t];if(Hn[t++]=null,l!==null&&c!==null){var _=l.pending;_===null?c.next=c:(c.next=_.next,_.next=c),l.pending=c}u!==0&&Yi(a,c,u)}}function Ja(e,t,a,l){Hn[wn++]=e,Hn[wn++]=t,Hn[wn++]=a,Hn[wn++]=l,cl|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function ar(e,t,a,l){return Ja(e,t,a,l),Os(e)}function va(e,t){return Ja(e,null,null,t),Os(e)}function Yi(e,t,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var c=!1,u=e.return;u!==null;)u.childLanes|=a,l=u.alternate,l!==null&&(l.childLanes|=a),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(c=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,c&&t!==null&&(c=31-Gt(a),e=u.hiddenUpdates,l=e[c],l===null?e[c]=[t]:l.push(t),t.lane=a|536870912),u):null}function Os(e){if(50<Tr)throw Tr=0,id=null,Error(m(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var hi={};function au(e,t,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(e,t,a,l){return new au(e,t,a,l)}function ul(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _a(e,t){var a=e.alternate;return a===null?(a=Sn(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function ir(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ds(e,t,a,l,c,u){var _=0;if(l=e,typeof e=="function")ul(e)&&(_=1);else if(typeof e=="string")_=t_(e,a,he.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case U:return e=Sn(31,a,t,c),e.elementType=U,e.lanes=u,e;case Z:return fi(a.children,c,u,t);case I:_=8,c|=24;break;case R:return e=Sn(12,a,t,c|2),e.elementType=R,e.lanes=u,e;case X:return e=Sn(13,a,t,c),e.elementType=X,e.lanes=u,e;case ve:return e=Sn(19,a,t,c),e.elementType=ve,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $:_=10;break e;case D:_=9;break e;case G:_=11;break e;case F:_=14;break e;case ue:_=16,l=null;break e}_=29,a=Error(m(130,e===null?"null":typeof e,"")),l=null}return t=Sn(_,a,t,c),t.elementType=e,t.type=l,t.lanes=u,t}function fi(e,t,a,l){return e=Sn(7,e,l,t),e.lanes=a,e}function dl(e,t,a){return e=Sn(6,e,null,t),e.lanes=a,e}function sr(e){var t=Sn(18,null,null,0);return t.stateNode=e,t}function lr(e,t,a){return t=Sn(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var n=new WeakMap;function s(e,t){if(typeof e=="object"&&e!==null){var a=n.get(e);return a!==void 0?a:(t={value:e,source:t,stack:un(t)},n.set(e,t),t)}return{value:e,source:t,stack:un(t)}}var o=[],h=0,v=null,w=0,M=[],Y=0,ie=null,me=1,Ne="";function Pe(e,t){o[h++]=w,o[h++]=v,v=e,w=t}function Ke(e,t,a){M[Y++]=me,M[Y++]=Ne,M[Y++]=ie,ie=e;var l=me;e=Ne;var c=32-Gt(l)-1;l&=~(1<<c),a+=1;var u=32-Gt(t)+c;if(30<u){var _=c-c%5;u=(l&(1<<_)-1).toString(32),l>>=_,c-=_,me=1<<32-Gt(t)+c|a<<c|l,Ne=u+e}else me=1<<u|a<<c|l,Ne=e}function tn(e){e.return!==null&&(Pe(e,1),Ke(e,1,0))}function Pt(e){for(;e===v;)v=o[--h],o[h]=null,w=o[--h],o[h]=null;for(;e===ie;)ie=M[--Y],M[Y]=null,Ne=M[--Y],M[Y]=null,me=M[--Y],M[Y]=null}function kn(e,t){M[Y++]=me,M[Y++]=Ne,M[Y++]=ie,me=t.id,Ne=t.overflow,ie=e}var ct=null,ut=null,nt=!1,ei=null,Zn=!1,hl=Error(m(519));function ti(e){var t=Error(m(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Bs(s(t,e)),hl}function rr(e){var t=e.stateNode,a=e.type,l=e.memoizedProps;switch(t[Lt]=e,t[kt]=l,a){case"dialog":it("cancel",t),it("close",t);break;case"iframe":case"object":case"embed":it("load",t);break;case"video":case"audio":for(a=0;a<Lr.length;a++)it(Lr[a],t);break;case"source":it("error",t);break;case"img":case"image":case"link":it("error",t),it("load",t);break;case"details":it("toggle",t);break;case"input":it("invalid",t),gs(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":it("invalid",t);break;case"textarea":it("invalid",t),Mi(t,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||l.suppressHydrationWarning===!0||Zm(t.textContent,a)?(l.popover!=null&&(it("beforetoggle",t),it("toggle",t)),l.onScroll!=null&&it("scroll",t),l.onScrollEnd!=null&&it("scrollend",t),l.onClick!=null&&(t.onclick=Bn),t=!0):t=!1,t||ti(e,!0)}function Rt(e){for(ct=e.return;ct;)switch(ct.tag){case 5:case 31:case 13:Zn=!1;return;case 27:case 3:Zn=!0;return;default:ct=ct.return}}function Oa(e){if(e!==ct)return!1;if(!nt)return Rt(e),nt=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||yd(e.type,e.memoizedProps)),a=!a),a&&ut&&ti(e),Rt(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(m(317));ut=Xm(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(m(317));ut=Xm(e)}else t===27?(t=ut,ls(e.type)?(e=Sd,Sd=null,ut=e):ut=t):ut=ct?xa(e.stateNode.nextSibling):null;return!0}function mi(){ut=ct=null,nt=!1}function or(){var e=ei;return e!==null&&($n===null?$n=e:$n.push.apply($n,e),ei=null),e}function Bs(e){ei===null?ei=[e]:ei.push(e)}var Ps=T(null),ni=null,Da=null;function Vi(e,t,a){le(Ps,t._currentValue),t._currentValue=a}function pi(e){e._currentValue=Ps.current,Q(Ps)}function iu(e,t,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===a)break;e=e.return}}function su(e,t,a,l){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var u=c.dependencies;if(u!==null){var _=c.child;u=u.firstContext;e:for(;u!==null;){var N=u;u=c;for(var O=0;O<t.length;O++)if(N.context===t[O]){u.lanes|=a,N=u.alternate,N!==null&&(N.lanes|=a),iu(u.return,a,e),l||(_=null);break e}u=N.next}}else if(c.tag===18){if(_=c.return,_===null)throw Error(m(341));_.lanes|=a,u=_.alternate,u!==null&&(u.lanes|=a),iu(_,a,e),_=null}else _=c.child;if(_!==null)_.return=c;else for(_=c;_!==null;){if(_===e){_=null;break}if(c=_.sibling,c!==null){c.return=_.return,_=c;break}_=_.return}c=_}}function fl(e,t,a,l){e=null;for(var c=t,u=!1;c!==null;){if(!u){if((c.flags&524288)!==0)u=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var _=c.alternate;if(_===null)throw Error(m(387));if(_=_.memoizedProps,_!==null){var N=c.type;rn(c.pendingProps.value,_.value)||(e!==null?e.push(N):e=[N])}}else if(c===Le.current){if(_=c.alternate,_===null)throw Error(m(387));_.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(Or):e=[Or])}c=c.return}e!==null&&su(t,e,a,l),t.flags|=262144}function bo(e){for(e=e.firstContext;e!==null;){if(!rn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Us(e){ni=e,Da=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function gn(e){return Nh(ni,e)}function jo(e,t){return ni===null&&Us(e),Nh(e,t)}function Nh(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Da===null){if(e===null)throw Error(m(308));Da=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Da=Da.next=t;return a}var Qg=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},Wg=r.unstable_scheduleCallback,Jg=r.unstable_NormalPriority,Ft={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lu(){return{controller:new Qg,data:new Map,refCount:0}}function cr(e){e.refCount--,e.refCount===0&&Wg(Jg,function(){e.controller.abort()})}var ur=null,ru=0,ml=0,pl=null;function ev(e,t){if(ur===null){var a=ur=[];ru=0,ml=ud(),pl={status:"pending",value:void 0,then:function(l){a.push(l)}}}return ru++,t.then(Ch,Ch),t}function Ch(){if(--ru===0&&ur!==null){pl!==null&&(pl.status="fulfilled");var e=ur;ur=null,ml=0,pl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function tv(e,t){var a=[],l={status:"pending",value:null,reason:null,then:function(c){a.push(c)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var c=0;c<a.length;c++)(0,a[c])(t)},function(c){for(l.status="rejected",l.reason=c,c=0;c<a.length;c++)(0,a[c])(void 0)}),l}var Eh=J.S;J.S=function(e,t){dm=Ot(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&ev(e,t),Eh!==null&&Eh(e,t)};var Hs=T(null);function ou(){var e=Hs.current;return e!==null?e:Et.pooledCache}function wo(e,t){t===null?le(Hs,Hs.current):le(Hs,t.pool)}function Th(){var e=ou();return e===null?null:{parent:Ft._currentValue,pool:e}}var gl=Error(m(460)),cu=Error(m(474)),So=Error(m(542)),No={then:function(){}};function Ah(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Lh(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Bn,Bn),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Mh(e),e;default:if(typeof t.status=="string")t.then(Bn,Bn);else{if(e=Et,e!==null&&100<e.shellSuspendCounter)throw Error(m(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=l}},function(l){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Mh(e),e}throw Is=t,gl}}function Zs(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Is=a,gl):a}}var Is=null;function kh(){if(Is===null)throw Error(m(459));var e=Is;return Is=null,e}function Mh(e){if(e===gl||e===So)throw Error(m(483))}var vl=null,dr=0;function Co(e){var t=dr;return dr+=1,vl===null&&(vl=[]),Lh(vl,e,t)}function hr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Eo(e,t){throw t.$$typeof===A?Error(m(525)):(e=Object.prototype.toString.call(t),Error(m(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function zh(e){function t(q,H){if(e){var te=q.deletions;te===null?(q.deletions=[H],q.flags|=16):te.push(H)}}function a(q,H){if(!e)return null;for(;H!==null;)t(q,H),H=H.sibling;return null}function l(q){for(var H=new Map;q!==null;)q.key!==null?H.set(q.key,q):H.set(q.index,q),q=q.sibling;return H}function c(q,H){return q=_a(q,H),q.index=0,q.sibling=null,q}function u(q,H,te){return q.index=te,e?(te=q.alternate,te!==null?(te=te.index,te<H?(q.flags|=67108866,H):te):(q.flags|=67108866,H)):(q.flags|=1048576,H)}function _(q){return e&&q.alternate===null&&(q.flags|=67108866),q}function N(q,H,te,fe){return H===null||H.tag!==6?(H=dl(te,q.mode,fe),H.return=q,H):(H=c(H,te),H.return=q,H)}function O(q,H,te,fe){var He=te.type;return He===Z?de(q,H,te.props.children,fe,te.key):H!==null&&(H.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===ue&&Zs(He)===H.type)?(H=c(H,te.props),hr(H,te),H.return=q,H):(H=Ds(te.type,te.key,te.props,null,q.mode,fe),hr(H,te),H.return=q,H)}function ne(q,H,te,fe){return H===null||H.tag!==4||H.stateNode.containerInfo!==te.containerInfo||H.stateNode.implementation!==te.implementation?(H=lr(te,q.mode,fe),H.return=q,H):(H=c(H,te.children||[]),H.return=q,H)}function de(q,H,te,fe,He){return H===null||H.tag!==7?(H=fi(te,q.mode,fe,He),H.return=q,H):(H=c(H,te),H.return=q,H)}function pe(q,H,te){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=dl(""+H,q.mode,te),H.return=q,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case k:return te=Ds(H.type,H.key,H.props,null,q.mode,te),hr(te,H),te.return=q,te;case z:return H=lr(H,q.mode,te),H.return=q,H;case ue:return H=Zs(H),pe(q,H,te)}if(Ie(H)||Ce(H))return H=fi(H,q.mode,te,null),H.return=q,H;if(typeof H.then=="function")return pe(q,Co(H),te);if(H.$$typeof===$)return pe(q,jo(q,H),te);Eo(q,H)}return null}function se(q,H,te,fe){var He=H!==null?H.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return He!==null?null:N(q,H,""+te,fe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case k:return te.key===He?O(q,H,te,fe):null;case z:return te.key===He?ne(q,H,te,fe):null;case ue:return te=Zs(te),se(q,H,te,fe)}if(Ie(te)||Ce(te))return He!==null?null:de(q,H,te,fe,null);if(typeof te.then=="function")return se(q,H,Co(te),fe);if(te.$$typeof===$)return se(q,H,jo(q,te),fe);Eo(q,te)}return null}function ce(q,H,te,fe,He){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return q=q.get(te)||null,N(H,q,""+fe,He);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case k:return q=q.get(fe.key===null?te:fe.key)||null,O(H,q,fe,He);case z:return q=q.get(fe.key===null?te:fe.key)||null,ne(H,q,fe,He);case ue:return fe=Zs(fe),ce(q,H,te,fe,He)}if(Ie(fe)||Ce(fe))return q=q.get(te)||null,de(H,q,fe,He,null);if(typeof fe.then=="function")return ce(q,H,te,Co(fe),He);if(fe.$$typeof===$)return ce(q,H,te,jo(H,fe),He);Eo(H,fe)}return null}function Me(q,H,te,fe){for(var He=null,dt=null,Re=H,Xe=H=0,ot=null;Re!==null&&Xe<te.length;Xe++){Re.index>Xe?(ot=Re,Re=null):ot=Re.sibling;var ht=se(q,Re,te[Xe],fe);if(ht===null){Re===null&&(Re=ot);break}e&&Re&&ht.alternate===null&&t(q,Re),H=u(ht,H,Xe),dt===null?He=ht:dt.sibling=ht,dt=ht,Re=ot}if(Xe===te.length)return a(q,Re),nt&&Pe(q,Xe),He;if(Re===null){for(;Xe<te.length;Xe++)Re=pe(q,te[Xe],fe),Re!==null&&(H=u(Re,H,Xe),dt===null?He=Re:dt.sibling=Re,dt=Re);return nt&&Pe(q,Xe),He}for(Re=l(Re);Xe<te.length;Xe++)ot=ce(Re,q,Xe,te[Xe],fe),ot!==null&&(e&&ot.alternate!==null&&Re.delete(ot.key===null?Xe:ot.key),H=u(ot,H,Xe),dt===null?He=ot:dt.sibling=ot,dt=ot);return e&&Re.forEach(function(ds){return t(q,ds)}),nt&&Pe(q,Xe),He}function Ge(q,H,te,fe){if(te==null)throw Error(m(151));for(var He=null,dt=null,Re=H,Xe=H=0,ot=null,ht=te.next();Re!==null&&!ht.done;Xe++,ht=te.next()){Re.index>Xe?(ot=Re,Re=null):ot=Re.sibling;var ds=se(q,Re,ht.value,fe);if(ds===null){Re===null&&(Re=ot);break}e&&Re&&ds.alternate===null&&t(q,Re),H=u(ds,H,Xe),dt===null?He=ds:dt.sibling=ds,dt=ds,Re=ot}if(ht.done)return a(q,Re),nt&&Pe(q,Xe),He;if(Re===null){for(;!ht.done;Xe++,ht=te.next())ht=pe(q,ht.value,fe),ht!==null&&(H=u(ht,H,Xe),dt===null?He=ht:dt.sibling=ht,dt=ht);return nt&&Pe(q,Xe),He}for(Re=l(Re);!ht.done;Xe++,ht=te.next())ht=ce(Re,q,Xe,ht.value,fe),ht!==null&&(e&&ht.alternate!==null&&Re.delete(ht.key===null?Xe:ht.key),H=u(ht,H,Xe),dt===null?He=ht:dt.sibling=ht,dt=ht);return e&&Re.forEach(function(h_){return t(q,h_)}),nt&&Pe(q,Xe),He}function Nt(q,H,te,fe){if(typeof te=="object"&&te!==null&&te.type===Z&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case k:e:{for(var He=te.key;H!==null;){if(H.key===He){if(He=te.type,He===Z){if(H.tag===7){a(q,H.sibling),fe=c(H,te.props.children),fe.return=q,q=fe;break e}}else if(H.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===ue&&Zs(He)===H.type){a(q,H.sibling),fe=c(H,te.props),hr(fe,te),fe.return=q,q=fe;break e}a(q,H);break}else t(q,H);H=H.sibling}te.type===Z?(fe=fi(te.props.children,q.mode,fe,te.key),fe.return=q,q=fe):(fe=Ds(te.type,te.key,te.props,null,q.mode,fe),hr(fe,te),fe.return=q,q=fe)}return _(q);case z:e:{for(He=te.key;H!==null;){if(H.key===He)if(H.tag===4&&H.stateNode.containerInfo===te.containerInfo&&H.stateNode.implementation===te.implementation){a(q,H.sibling),fe=c(H,te.children||[]),fe.return=q,q=fe;break e}else{a(q,H);break}else t(q,H);H=H.sibling}fe=lr(te,q.mode,fe),fe.return=q,q=fe}return _(q);case ue:return te=Zs(te),Nt(q,H,te,fe)}if(Ie(te))return Me(q,H,te,fe);if(Ce(te)){if(He=Ce(te),typeof He!="function")throw Error(m(150));return te=He.call(te),Ge(q,H,te,fe)}if(typeof te.then=="function")return Nt(q,H,Co(te),fe);if(te.$$typeof===$)return Nt(q,H,jo(q,te),fe);Eo(q,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,H!==null&&H.tag===6?(a(q,H.sibling),fe=c(H,te),fe.return=q,q=fe):(a(q,H),fe=dl(te,q.mode,fe),fe.return=q,q=fe),_(q)):a(q,H)}return function(q,H,te,fe){try{dr=0;var He=Nt(q,H,te,fe);return vl=null,He}catch(Re){if(Re===gl||Re===So)throw Re;var dt=Sn(29,Re,null,q.mode);return dt.lanes=fe,dt.return=q,dt}finally{}}}var Gs=zh(!0),Rh=zh(!1),Fi=!1;function uu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function du(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ki(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Xi(e,t,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(pt&2)!==0){var c=l.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),l.pending=t,t=Os(e),Yi(e,null,a),t}return Ja(e,l,t,a),Os(e)}function fr(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,Aa(e,a)}}function hu(e,t){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var c=null,u=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};u===null?c=u=_:u=u.next=_,a=a.next}while(a!==null);u===null?c=u=t:u=u.next=t}else c=u=t;a={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:u,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var fu=!1;function mr(){if(fu){var e=pl;if(e!==null)throw e}}function pr(e,t,a,l){fu=!1;var c=e.updateQueue;Fi=!1;var u=c.firstBaseUpdate,_=c.lastBaseUpdate,N=c.shared.pending;if(N!==null){c.shared.pending=null;var O=N,ne=O.next;O.next=null,_===null?u=ne:_.next=ne,_=O;var de=e.alternate;de!==null&&(de=de.updateQueue,N=de.lastBaseUpdate,N!==_&&(N===null?de.firstBaseUpdate=ne:N.next=ne,de.lastBaseUpdate=O))}if(u!==null){var pe=c.baseState;_=0,de=ne=O=null,N=u;do{var se=N.lane&-536870913,ce=se!==N.lane;if(ce?(rt&se)===se:(l&se)===se){se!==0&&se===ml&&(fu=!0),de!==null&&(de=de.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Me=e,Ge=N;se=t;var Nt=a;switch(Ge.tag){case 1:if(Me=Ge.payload,typeof Me=="function"){pe=Me.call(Nt,pe,se);break e}pe=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=Ge.payload,se=typeof Me=="function"?Me.call(Nt,pe,se):Me,se==null)break e;pe=S({},pe,se);break e;case 2:Fi=!0}}se=N.callback,se!==null&&(e.flags|=64,ce&&(e.flags|=8192),ce=c.callbacks,ce===null?c.callbacks=[se]:ce.push(se))}else ce={lane:se,tag:N.tag,payload:N.payload,callback:N.callback,next:null},de===null?(ne=de=ce,O=pe):de=de.next=ce,_|=se;if(N=N.next,N===null){if(N=c.shared.pending,N===null)break;ce=N,N=ce.next,ce.next=null,c.lastBaseUpdate=ce,c.shared.pending=null}}while(!0);de===null&&(O=pe),c.baseState=O,c.firstBaseUpdate=ne,c.lastBaseUpdate=de,u===null&&(c.shared.lanes=0),ts|=_,e.lanes=_,e.memoizedState=pe}}function Oh(e,t){if(typeof e!="function")throw Error(m(191,e));e.call(t)}function Dh(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Oh(a[e],t)}var _l=T(null),To=T(0);function Bh(e,t){e=Si,le(To,e),le(_l,t),Si=e|t.baseLanes}function mu(){le(To,Si),le(_l,_l.current)}function pu(){Si=To.current,Q(_l),Q(To)}var na=T(null),ya=null;function Qi(e){var t=e.alternate;le($t,$t.current&1),le(na,e),ya===null&&(t===null||_l.current!==null||t.memoizedState!==null)&&(ya=e)}function gu(e){le($t,$t.current),le(na,e),ya===null&&(ya=e)}function Ph(e){e.tag===22?(le($t,$t.current),le(na,e),ya===null&&(ya=e)):Wi()}function Wi(){le($t,$t.current),le(na,na.current)}function aa(e){Q(na),ya===e&&(ya=null),Q($t)}var $t=T(0);function Ao(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||jd(a)||wd(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var gi=0,Fe=null,wt=null,Kt=null,Lo=!1,yl=!1,qs=!1,ko=0,gr=0,xl=null,nv=0;function Ut(){throw Error(m(321))}function vu(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!rn(e[a],t[a]))return!1;return!0}function _u(e,t,a,l,c,u){return gi=u,Fe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,J.H=e===null||e.memoizedState===null?jf:zu,qs=!1,u=a(l,c),qs=!1,yl&&(u=Hh(t,a,l,c)),Uh(e),u}function Uh(e){J.H=yr;var t=wt!==null&&wt.next!==null;if(gi=0,Kt=wt=Fe=null,Lo=!1,gr=0,xl=null,t)throw Error(m(300));e===null||Xt||(e=e.dependencies,e!==null&&bo(e)&&(Xt=!0))}function Hh(e,t,a,l){Fe=e;var c=0;do{if(yl&&(xl=null),gr=0,yl=!1,25<=c)throw Error(m(301));if(c+=1,Kt=wt=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}J.H=wf,u=t(a,l)}while(yl);return u}function av(){var e=J.H,t=e.useState()[0];return t=typeof t.then=="function"?vr(t):t,e=e.useState()[0],(wt!==null?wt.memoizedState:null)!==e&&(Fe.flags|=1024),t}function yu(){var e=ko!==0;return ko=0,e}function xu(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function bu(e){if(Lo){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Lo=!1}gi=0,Kt=wt=Fe=null,yl=!1,gr=ko=0,xl=null}function Mn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?Fe.memoizedState=Kt=e:Kt=Kt.next=e,Kt}function Yt(){if(wt===null){var e=Fe.alternate;e=e!==null?e.memoizedState:null}else e=wt.next;var t=Kt===null?Fe.memoizedState:Kt.next;if(t!==null)Kt=t,wt=e;else{if(e===null)throw Fe.alternate===null?Error(m(467)):Error(m(310));wt=e,e={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},Kt===null?Fe.memoizedState=Kt=e:Kt=Kt.next=e}return Kt}function Mo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vr(e){var t=gr;return gr+=1,xl===null&&(xl=[]),e=Lh(xl,e,t),t=Fe,(Kt===null?t.memoizedState:Kt.next)===null&&(t=t.alternate,J.H=t===null||t.memoizedState===null?jf:zu),e}function zo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return vr(e);if(e.$$typeof===$)return gn(e)}throw Error(m(438,String(e)))}function ju(e){var t=null,a=Fe.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var l=Fe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Mo(),Fe.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),l=0;l<e;l++)a[l]=xe;return t.index++,a}function vi(e,t){return typeof t=="function"?t(e):t}function Ro(e){var t=Yt();return wu(t,wt,e)}function wu(e,t,a){var l=e.queue;if(l===null)throw Error(m(311));l.lastRenderedReducer=a;var c=e.baseQueue,u=l.pending;if(u!==null){if(c!==null){var _=c.next;c.next=u.next,u.next=_}t.baseQueue=c=u,l.pending=null}if(u=e.baseState,c===null)e.memoizedState=u;else{t=c.next;var N=_=null,O=null,ne=t,de=!1;do{var pe=ne.lane&-536870913;if(pe!==ne.lane?(rt&pe)===pe:(gi&pe)===pe){var se=ne.revertLane;if(se===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),pe===ml&&(de=!0);else if((gi&se)===se){ne=ne.next,se===ml&&(de=!0);continue}else pe={lane:0,revertLane:ne.revertLane,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},O===null?(N=O=pe,_=u):O=O.next=pe,Fe.lanes|=se,ts|=se;pe=ne.action,qs&&a(u,pe),u=ne.hasEagerState?ne.eagerState:a(u,pe)}else se={lane:pe,revertLane:ne.revertLane,gesture:ne.gesture,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},O===null?(N=O=se,_=u):O=O.next=se,Fe.lanes|=pe,ts|=pe;ne=ne.next}while(ne!==null&&ne!==t);if(O===null?_=u:O.next=N,!rn(u,e.memoizedState)&&(Xt=!0,de&&(a=pl,a!==null)))throw a;e.memoizedState=u,e.baseState=_,e.baseQueue=O,l.lastRenderedState=u}return c===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Su(e){var t=Yt(),a=t.queue;if(a===null)throw Error(m(311));a.lastRenderedReducer=e;var l=a.dispatch,c=a.pending,u=t.memoizedState;if(c!==null){a.pending=null;var _=c=c.next;do u=e(u,_.action),_=_.next;while(_!==c);rn(u,t.memoizedState)||(Xt=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),a.lastRenderedState=u}return[u,l]}function Zh(e,t,a){var l=Fe,c=Yt(),u=nt;if(u){if(a===void 0)throw Error(m(407));a=a()}else a=t();var _=!rn((wt||c).memoizedState,a);if(_&&(c.memoizedState=a,Xt=!0),c=c.queue,Eu(qh.bind(null,l,c,e),[e]),c.getSnapshot!==t||_||Kt!==null&&Kt.memoizedState.tag&1){if(l.flags|=2048,bl(9,{destroy:void 0},Gh.bind(null,l,c,a,t),null),Et===null)throw Error(m(349));u||(gi&127)!==0||Ih(l,t,a)}return a}function Ih(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=Fe.updateQueue,t===null?(t=Mo(),Fe.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Gh(e,t,a,l){t.value=a,t.getSnapshot=l,$h(t)&&Yh(e)}function qh(e,t,a){return a(function(){$h(t)&&Yh(e)})}function $h(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!rn(e,a)}catch{return!0}}function Yh(e){var t=va(e,2);t!==null&&Yn(t,e,2)}function Nu(e){var t=Mn();if(typeof e=="function"){var a=e;if(e=a(),qs){yn(!0);try{a()}finally{yn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:e},t}function Vh(e,t,a,l){return e.baseState=a,wu(e,wt,typeof l=="function"?l:vi)}function iv(e,t,a,l,c){if(Bo(e))throw Error(m(485));if(e=t.action,e!==null){var u={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){u.listeners.push(_)}};J.T!==null?a(!0):u.isTransition=!1,l(u),a=t.pending,a===null?(u.next=t.pending=u,Fh(t,u)):(u.next=a.next,t.pending=a.next=u)}}function Fh(e,t){var a=t.action,l=t.payload,c=e.state;if(t.isTransition){var u=J.T,_={};J.T=_;try{var N=a(c,l),O=J.S;O!==null&&O(_,N),Kh(e,t,N)}catch(ne){Cu(e,t,ne)}finally{u!==null&&_.types!==null&&(u.types=_.types),J.T=u}}else try{u=a(c,l),Kh(e,t,u)}catch(ne){Cu(e,t,ne)}}function Kh(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Xh(e,t,l)},function(l){return Cu(e,t,l)}):Xh(e,t,a)}function Xh(e,t,a){t.status="fulfilled",t.value=a,Qh(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Fh(e,a)))}function Cu(e,t,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=a,Qh(t),t=t.next;while(t!==l)}e.action=null}function Qh(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Wh(e,t){return t}function Jh(e,t){if(nt){var a=Et.formState;if(a!==null){e:{var l=Fe;if(nt){if(ut){t:{for(var c=ut,u=Zn;c.nodeType!==8;){if(!u){c=null;break t}if(c=xa(c.nextSibling),c===null){c=null;break t}}u=c.data,c=u==="F!"||u==="F"?c:null}if(c){ut=xa(c.nextSibling),l=c.data==="F!";break e}}ti(l)}l=!1}l&&(t=a[0])}}return a=Mn(),a.memoizedState=a.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wh,lastRenderedState:t},a.queue=l,a=yf.bind(null,Fe,l),l.dispatch=a,l=Nu(!1),u=Mu.bind(null,Fe,!1,l.queue),l=Mn(),c={state:t,dispatch:null,action:e,pending:null},l.queue=c,a=iv.bind(null,Fe,c,u,a),c.dispatch=a,l.memoizedState=e,[t,a,!1]}function ef(e){var t=Yt();return tf(t,wt,e)}function tf(e,t,a){if(t=wu(e,t,Wh)[0],e=Ro(vi)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=vr(t)}catch(_){throw _===gl?So:_}else l=t;t=Yt();var c=t.queue,u=c.dispatch;return a!==t.memoizedState&&(Fe.flags|=2048,bl(9,{destroy:void 0},sv.bind(null,c,a),null)),[l,u,e]}function sv(e,t){e.action=t}function nf(e){var t=Yt(),a=wt;if(a!==null)return tf(t,a,e);Yt(),t=t.memoizedState,a=Yt();var l=a.queue.dispatch;return a.memoizedState=e,[t,l,!1]}function bl(e,t,a,l){return e={tag:e,create:a,deps:l,inst:t,next:null},t=Fe.updateQueue,t===null&&(t=Mo(),Fe.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,t.lastEffect=e),e}function af(){return Yt().memoizedState}function Oo(e,t,a,l){var c=Mn();Fe.flags|=e,c.memoizedState=bl(1|t,{destroy:void 0},a,l===void 0?null:l)}function Do(e,t,a,l){var c=Yt();l=l===void 0?null:l;var u=c.memoizedState.inst;wt!==null&&l!==null&&vu(l,wt.memoizedState.deps)?c.memoizedState=bl(t,u,a,l):(Fe.flags|=e,c.memoizedState=bl(1|t,u,a,l))}function sf(e,t){Oo(8390656,8,e,t)}function Eu(e,t){Do(2048,8,e,t)}function lv(e){Fe.flags|=4;var t=Fe.updateQueue;if(t===null)t=Mo(),Fe.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function lf(e){var t=Yt().memoizedState;return lv({ref:t,nextImpl:e}),function(){if((pt&2)!==0)throw Error(m(440));return t.impl.apply(void 0,arguments)}}function rf(e,t){return Do(4,2,e,t)}function of(e,t){return Do(4,4,e,t)}function cf(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function uf(e,t,a){a=a!=null?a.concat([e]):null,Do(4,4,cf.bind(null,t,e),a)}function Tu(){}function df(e,t){var a=Yt();t=t===void 0?null:t;var l=a.memoizedState;return t!==null&&vu(t,l[1])?l[0]:(a.memoizedState=[e,t],e)}function hf(e,t){var a=Yt();t=t===void 0?null:t;var l=a.memoizedState;if(t!==null&&vu(t,l[1]))return l[0];if(l=e(),qs){yn(!0);try{e()}finally{yn(!1)}}return a.memoizedState=[l,t],l}function Au(e,t,a){return a===void 0||(gi&1073741824)!==0&&(rt&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=fm(),Fe.lanes|=e,ts|=e,a)}function ff(e,t,a,l){return rn(a,t)?a:_l.current!==null?(e=Au(e,a,l),rn(e,t)||(Xt=!0),e):(gi&42)===0||(gi&1073741824)!==0&&(rt&261930)===0?(Xt=!0,e.memoizedState=a):(e=fm(),Fe.lanes|=e,ts|=e,t)}function mf(e,t,a,l,c){var u=B.p;B.p=u!==0&&8>u?u:8;var _=J.T,N={};J.T=N,Mu(e,!1,t,a);try{var O=c(),ne=J.S;if(ne!==null&&ne(N,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var de=tv(O,l);_r(e,t,de,la(e))}else _r(e,t,l,la(e))}catch(pe){_r(e,t,{then:function(){},status:"rejected",reason:pe},la())}finally{B.p=u,_!==null&&N.types!==null&&(_.types=N.types),J.T=_}}function rv(){}function Lu(e,t,a,l){if(e.tag!==5)throw Error(m(476));var c=pf(e).queue;mf(e,c,t,ee,a===null?rv:function(){return gf(e),a(l)})}function pf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:ee},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function gf(e){var t=pf(e);t.next===null&&(t=e.alternate.memoizedState),_r(e,t.next.queue,{},la())}function ku(){return gn(Or)}function vf(){return Yt().memoizedState}function _f(){return Yt().memoizedState}function ov(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=la();e=Ki(a);var l=Xi(t,e,a);l!==null&&(Yn(l,t,a),fr(l,t,a)),t={cache:lu()},e.payload=t;return}t=t.return}}function cv(e,t,a){var l=la();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Bo(e)?xf(t,a):(a=ar(e,t,a,l),a!==null&&(Yn(a,e,l),bf(a,t,l)))}function yf(e,t,a){var l=la();_r(e,t,a,l)}function _r(e,t,a,l){var c={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Bo(e))xf(t,c);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var _=t.lastRenderedState,N=u(_,a);if(c.hasEagerState=!0,c.eagerState=N,rn(N,_))return Ja(e,t,c,0),Et===null&&Rs(),!1}catch{}finally{}if(a=ar(e,t,c,l),a!==null)return Yn(a,e,l),bf(a,t,l),!0}return!1}function Mu(e,t,a,l){if(l={lane:2,revertLane:ud(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Bo(e)){if(t)throw Error(m(479))}else t=ar(e,a,l,2),t!==null&&Yn(t,e,2)}function Bo(e){var t=e.alternate;return e===Fe||t!==null&&t===Fe}function xf(e,t){yl=Lo=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function bf(e,t,a){if((a&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,Aa(e,a)}}var yr={readContext:gn,use:zo,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useLayoutEffect:Ut,useInsertionEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useSyncExternalStore:Ut,useId:Ut,useHostTransitionStatus:Ut,useFormState:Ut,useActionState:Ut,useOptimistic:Ut,useMemoCache:Ut,useCacheRefresh:Ut};yr.useEffectEvent=Ut;var jf={readContext:gn,use:zo,useCallback:function(e,t){return Mn().memoizedState=[e,t===void 0?null:t],e},useContext:gn,useEffect:sf,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Oo(4194308,4,cf.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Oo(4194308,4,e,t)},useInsertionEffect:function(e,t){Oo(4,2,e,t)},useMemo:function(e,t){var a=Mn();t=t===void 0?null:t;var l=e();if(qs){yn(!0);try{e()}finally{yn(!1)}}return a.memoizedState=[l,t],l},useReducer:function(e,t,a){var l=Mn();if(a!==void 0){var c=a(t);if(qs){yn(!0);try{a(t)}finally{yn(!1)}}}else c=t;return l.memoizedState=l.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},l.queue=e,e=e.dispatch=cv.bind(null,Fe,e),[l.memoizedState,e]},useRef:function(e){var t=Mn();return e={current:e},t.memoizedState=e},useState:function(e){e=Nu(e);var t=e.queue,a=yf.bind(null,Fe,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Tu,useDeferredValue:function(e,t){var a=Mn();return Au(a,e,t)},useTransition:function(){var e=Nu(!1);return e=mf.bind(null,Fe,e.queue,!0,!1),Mn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var l=Fe,c=Mn();if(nt){if(a===void 0)throw Error(m(407));a=a()}else{if(a=t(),Et===null)throw Error(m(349));(rt&127)!==0||Ih(l,t,a)}c.memoizedState=a;var u={value:a,getSnapshot:t};return c.queue=u,sf(qh.bind(null,l,u,e),[e]),l.flags|=2048,bl(9,{destroy:void 0},Gh.bind(null,l,u,a,t),null),a},useId:function(){var e=Mn(),t=Et.identifierPrefix;if(nt){var a=Ne,l=me;a=(l&~(1<<32-Gt(l)-1)).toString(32)+a,t="_"+t+"R_"+a,a=ko++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=nv++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ku,useFormState:Jh,useActionState:Jh,useOptimistic:function(e){var t=Mn();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Mu.bind(null,Fe,!0,a),a.dispatch=t,[e,t]},useMemoCache:ju,useCacheRefresh:function(){return Mn().memoizedState=ov.bind(null,Fe)},useEffectEvent:function(e){var t=Mn(),a={impl:e};return t.memoizedState=a,function(){if((pt&2)!==0)throw Error(m(440));return a.impl.apply(void 0,arguments)}}},zu={readContext:gn,use:zo,useCallback:df,useContext:gn,useEffect:Eu,useImperativeHandle:uf,useInsertionEffect:rf,useLayoutEffect:of,useMemo:hf,useReducer:Ro,useRef:af,useState:function(){return Ro(vi)},useDebugValue:Tu,useDeferredValue:function(e,t){var a=Yt();return ff(a,wt.memoizedState,e,t)},useTransition:function(){var e=Ro(vi)[0],t=Yt().memoizedState;return[typeof e=="boolean"?e:vr(e),t]},useSyncExternalStore:Zh,useId:vf,useHostTransitionStatus:ku,useFormState:ef,useActionState:ef,useOptimistic:function(e,t){var a=Yt();return Vh(a,wt,e,t)},useMemoCache:ju,useCacheRefresh:_f};zu.useEffectEvent=lf;var wf={readContext:gn,use:zo,useCallback:df,useContext:gn,useEffect:Eu,useImperativeHandle:uf,useInsertionEffect:rf,useLayoutEffect:of,useMemo:hf,useReducer:Su,useRef:af,useState:function(){return Su(vi)},useDebugValue:Tu,useDeferredValue:function(e,t){var a=Yt();return wt===null?Au(a,e,t):ff(a,wt.memoizedState,e,t)},useTransition:function(){var e=Su(vi)[0],t=Yt().memoizedState;return[typeof e=="boolean"?e:vr(e),t]},useSyncExternalStore:Zh,useId:vf,useHostTransitionStatus:ku,useFormState:nf,useActionState:nf,useOptimistic:function(e,t){var a=Yt();return wt!==null?Vh(a,wt,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:ju,useCacheRefresh:_f};wf.useEffectEvent=lf;function Ru(e,t,a,l){t=e.memoizedState,a=a(l,t),a=a==null?t:S({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Ou={enqueueSetState:function(e,t,a){e=e._reactInternals;var l=la(),c=Ki(l);c.payload=t,a!=null&&(c.callback=a),t=Xi(e,c,l),t!==null&&(Yn(t,e,l),fr(t,e,l))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var l=la(),c=Ki(l);c.tag=1,c.payload=t,a!=null&&(c.callback=a),t=Xi(e,c,l),t!==null&&(Yn(t,e,l),fr(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=la(),l=Ki(a);l.tag=2,t!=null&&(l.callback=t),t=Xi(e,l,a),t!==null&&(Yn(t,e,a),fr(t,e,a))}};function Sf(e,t,a,l,c,u,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,u,_):t.prototype&&t.prototype.isPureReactComponent?!Ii(a,l)||!Ii(c,u):!0}function Nf(e,t,a,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,l),t.state!==e&&Ou.enqueueReplaceState(t,t.state,null)}function $s(e,t){var a=t;if("ref"in t){a={};for(var l in t)l!=="ref"&&(a[l]=t[l])}if(e=e.defaultProps){a===t&&(a=S({},a));for(var c in e)a[c]===void 0&&(a[c]=e[c])}return a}function Cf(e){zs(e)}function Ef(e){console.error(e)}function Tf(e){zs(e)}function Po(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function Af(e,t,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Du(e,t,a){return a=Ki(a),a.tag=3,a.payload={element:null},a.callback=function(){Po(e,t)},a}function Lf(e){return e=Ki(e),e.tag=3,e}function kf(e,t,a,l){var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var u=l.value;e.payload=function(){return c(u)},e.callback=function(){Af(t,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(e.callback=function(){Af(t,a,l),typeof c!="function"&&(ns===null?ns=new Set([this]):ns.add(this));var N=l.stack;this.componentDidCatch(l.value,{componentStack:N!==null?N:""})})}function uv(e,t,a,l,c){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=a.alternate,t!==null&&fl(t,a,c,!0),a=na.current,a!==null){switch(a.tag){case 31:case 13:return ya===null?Xo():a.alternate===null&&Ht===0&&(Ht=3),a.flags&=-257,a.flags|=65536,a.lanes=c,l===No?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([l]):t.add(l),rd(e,l,c)),!1;case 22:return a.flags|=65536,l===No?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([l]):a.add(l)),rd(e,l,c)),!1}throw Error(m(435,a.tag))}return rd(e,l,c),Xo(),!1}if(nt)return t=na.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,l!==hl&&(e=Error(m(422),{cause:l}),Bs(s(e,a)))):(l!==hl&&(t=Error(m(423),{cause:l}),Bs(s(t,a))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,l=s(l,a),c=Du(e.stateNode,l,c),hu(e,c),Ht!==4&&(Ht=2)),!1;var u=Error(m(520),{cause:l});if(u=s(u,a),Er===null?Er=[u]:Er.push(u),Ht!==4&&(Ht=2),t===null)return!0;l=s(l,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=c&-c,a.lanes|=e,e=Du(a.stateNode,l,e),hu(a,e),!1;case 1:if(t=a.type,u=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(ns===null||!ns.has(u))))return a.flags|=65536,c&=-c,a.lanes|=c,c=Lf(c),kf(c,e,a,l),hu(a,c),!1}a=a.return}while(a!==null);return!1}var Bu=Error(m(461)),Xt=!1;function vn(e,t,a,l){t.child=e===null?Rh(t,null,a,l):Gs(t,e.child,a,l)}function Mf(e,t,a,l,c){a=a.render;var u=t.ref;if("ref"in l){var _={};for(var N in l)N!=="ref"&&(_[N]=l[N])}else _=l;return Us(t),l=_u(e,t,a,_,u,c),N=yu(),e!==null&&!Xt?(xu(e,t,c),_i(e,t,c)):(nt&&N&&tn(t),t.flags|=1,vn(e,t,l,c),t.child)}function zf(e,t,a,l,c){if(e===null){var u=a.type;return typeof u=="function"&&!ul(u)&&u.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=u,Rf(e,t,u,l,c)):(e=Ds(a.type,null,l,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!$u(e,c)){var _=u.memoizedProps;if(a=a.compare,a=a!==null?a:Ii,a(_,l)&&e.ref===t.ref)return _i(e,t,c)}return t.flags|=1,e=_a(u,l),e.ref=t.ref,e.return=t,t.child=e}function Rf(e,t,a,l,c){if(e!==null){var u=e.memoizedProps;if(Ii(u,l)&&e.ref===t.ref)if(Xt=!1,t.pendingProps=l=u,$u(e,c))(e.flags&131072)!==0&&(Xt=!0);else return t.lanes=e.lanes,_i(e,t,c)}return Pu(e,t,a,l,c)}function Of(e,t,a,l){var c=l.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|a:a,e!==null){for(l=t.child=e.child,c=0;l!==null;)c=c|l.lanes|l.childLanes,l=l.sibling;l=c&~u}else l=0,t.child=null;return Df(e,t,u,a,l)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&wo(t,u!==null?u.cachePool:null),u!==null?Bh(t,u):mu(),Ph(t);else return l=t.lanes=536870912,Df(e,t,u!==null?u.baseLanes|a:a,a,l)}else u!==null?(wo(t,u.cachePool),Bh(t,u),Wi(),t.memoizedState=null):(e!==null&&wo(t,null),mu(),Wi());return vn(e,t,c,a),t.child}function xr(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Df(e,t,a,l,c){var u=ou();return u=u===null?null:{parent:Ft._currentValue,pool:u},t.memoizedState={baseLanes:a,cachePool:u},e!==null&&wo(t,null),mu(),Ph(t),e!==null&&fl(e,t,l,!0),t.childLanes=c,null}function Uo(e,t){return t=Zo({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Bf(e,t,a){return Gs(t,e.child,null,a),e=Uo(t,t.pendingProps),e.flags|=2,aa(t),t.memoizedState=null,e}function dv(e,t,a){var l=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(nt){if(l.mode==="hidden")return e=Uo(t,l),t.lanes=536870912,xr(null,e);if(gu(t),(e=ut)?(e=Km(e,Zn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ie!==null?{id:me,overflow:Ne}:null,retryLane:536870912,hydrationErrors:null},a=sr(e),a.return=t,t.child=a,ct=t,ut=null)):e=null,e===null)throw ti(t);return t.lanes=536870912,null}return Uo(t,l)}var u=e.memoizedState;if(u!==null){var _=u.dehydrated;if(gu(t),c)if(t.flags&256)t.flags&=-257,t=Bf(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(m(558));else if(Xt||fl(e,t,a,!1),c=(a&e.childLanes)!==0,Xt||c){if(l=Et,l!==null&&(_=ua(l,a),_!==0&&_!==u.retryLane))throw u.retryLane=_,va(e,_),Yn(l,e,_),Bu;Xo(),t=Bf(e,t,a)}else e=u.treeContext,ut=xa(_.nextSibling),ct=t,nt=!0,ei=null,Zn=!1,e!==null&&kn(t,e),t=Uo(t,l),t.flags|=4096;return t}return e=_a(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Ho(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(m(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Pu(e,t,a,l,c){return Us(t),a=_u(e,t,a,l,void 0,c),l=yu(),e!==null&&!Xt?(xu(e,t,c),_i(e,t,c)):(nt&&l&&tn(t),t.flags|=1,vn(e,t,a,c),t.child)}function Pf(e,t,a,l,c,u){return Us(t),t.updateQueue=null,a=Hh(t,l,a,c),Uh(e),l=yu(),e!==null&&!Xt?(xu(e,t,u),_i(e,t,u)):(nt&&l&&tn(t),t.flags|=1,vn(e,t,a,u),t.child)}function Uf(e,t,a,l,c){if(Us(t),t.stateNode===null){var u=hi,_=a.contextType;typeof _=="object"&&_!==null&&(u=gn(_)),u=new a(l,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Ou,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=l,u.state=t.memoizedState,u.refs={},uu(t),_=a.contextType,u.context=typeof _=="object"&&_!==null?gn(_):hi,u.state=t.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Ru(t,a,_,l),u.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(_=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),_!==u.state&&Ou.enqueueReplaceState(u,u.state,null),pr(t,l,u,c),mr(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){u=t.stateNode;var N=t.memoizedProps,O=$s(a,N);u.props=O;var ne=u.context,de=a.contextType;_=hi,typeof de=="object"&&de!==null&&(_=gn(de));var pe=a.getDerivedStateFromProps;de=typeof pe=="function"||typeof u.getSnapshotBeforeUpdate=="function",N=t.pendingProps!==N,de||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(N||ne!==_)&&Nf(t,u,l,_),Fi=!1;var se=t.memoizedState;u.state=se,pr(t,l,u,c),mr(),ne=t.memoizedState,N||se!==ne||Fi?(typeof pe=="function"&&(Ru(t,a,pe,l),ne=t.memoizedState),(O=Fi||Sf(t,a,O,l,se,ne,_))?(de||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=ne),u.props=l,u.state=ne,u.context=_,l=O):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{u=t.stateNode,du(e,t),_=t.memoizedProps,de=$s(a,_),u.props=de,pe=t.pendingProps,se=u.context,ne=a.contextType,O=hi,typeof ne=="object"&&ne!==null&&(O=gn(ne)),N=a.getDerivedStateFromProps,(ne=typeof N=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(_!==pe||se!==O)&&Nf(t,u,l,O),Fi=!1,se=t.memoizedState,u.state=se,pr(t,l,u,c),mr();var ce=t.memoizedState;_!==pe||se!==ce||Fi||e!==null&&e.dependencies!==null&&bo(e.dependencies)?(typeof N=="function"&&(Ru(t,a,N,l),ce=t.memoizedState),(de=Fi||Sf(t,a,de,l,se,ce,O)||e!==null&&e.dependencies!==null&&bo(e.dependencies))?(ne||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(l,ce,O),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(l,ce,O)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||_===e.memoizedProps&&se===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&se===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=ce),u.props=l,u.state=ce,u.context=O,l=de):(typeof u.componentDidUpdate!="function"||_===e.memoizedProps&&se===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&se===e.memoizedState||(t.flags|=1024),l=!1)}return u=l,Ho(e,t),l=(t.flags&128)!==0,u||l?(u=t.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&l?(t.child=Gs(t,e.child,null,c),t.child=Gs(t,null,a,c)):vn(e,t,a,c),t.memoizedState=u.state,e=t.child):e=_i(e,t,c),e}function Hf(e,t,a,l){return mi(),t.flags|=256,vn(e,t,a,l),t.child}var Uu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hu(e){return{baseLanes:e,cachePool:Th()}}function Zu(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=sa),e}function Zf(e,t,a){var l=t.pendingProps,c=!1,u=(t.flags&128)!==0,_;if((_=u)||(_=e!==null&&e.memoizedState===null?!1:($t.current&2)!==0),_&&(c=!0,t.flags&=-129),_=(t.flags&32)!==0,t.flags&=-33,e===null){if(nt){if(c?Qi(t):Wi(),(e=ut)?(e=Km(e,Zn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ie!==null?{id:me,overflow:Ne}:null,retryLane:536870912,hydrationErrors:null},a=sr(e),a.return=t,t.child=a,ct=t,ut=null)):e=null,e===null)throw ti(t);return wd(e)?t.lanes=32:t.lanes=536870912,null}var N=l.children;return l=l.fallback,c?(Wi(),c=t.mode,N=Zo({mode:"hidden",children:N},c),l=fi(l,c,a,null),N.return=t,l.return=t,N.sibling=l,t.child=N,l=t.child,l.memoizedState=Hu(a),l.childLanes=Zu(e,_,a),t.memoizedState=Uu,xr(null,l)):(Qi(t),Iu(t,N))}var O=e.memoizedState;if(O!==null&&(N=O.dehydrated,N!==null)){if(u)t.flags&256?(Qi(t),t.flags&=-257,t=Gu(e,t,a)):t.memoizedState!==null?(Wi(),t.child=e.child,t.flags|=128,t=null):(Wi(),N=l.fallback,c=t.mode,l=Zo({mode:"visible",children:l.children},c),N=fi(N,c,a,null),N.flags|=2,l.return=t,N.return=t,l.sibling=N,t.child=l,Gs(t,e.child,null,a),l=t.child,l.memoizedState=Hu(a),l.childLanes=Zu(e,_,a),t.memoizedState=Uu,t=xr(null,l));else if(Qi(t),wd(N)){if(_=N.nextSibling&&N.nextSibling.dataset,_)var ne=_.dgst;_=ne,l=Error(m(419)),l.stack="",l.digest=_,Bs({value:l,source:null,stack:null}),t=Gu(e,t,a)}else if(Xt||fl(e,t,a,!1),_=(a&e.childLanes)!==0,Xt||_){if(_=Et,_!==null&&(l=ua(_,a),l!==0&&l!==O.retryLane))throw O.retryLane=l,va(e,l),Yn(_,e,l),Bu;jd(N)||Xo(),t=Gu(e,t,a)}else jd(N)?(t.flags|=192,t.child=e.child,t=null):(e=O.treeContext,ut=xa(N.nextSibling),ct=t,nt=!0,ei=null,Zn=!1,e!==null&&kn(t,e),t=Iu(t,l.children),t.flags|=4096);return t}return c?(Wi(),N=l.fallback,c=t.mode,O=e.child,ne=O.sibling,l=_a(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,ne!==null?N=_a(ne,N):(N=fi(N,c,a,null),N.flags|=2),N.return=t,l.return=t,l.sibling=N,t.child=l,xr(null,l),l=t.child,N=e.child.memoizedState,N===null?N=Hu(a):(c=N.cachePool,c!==null?(O=Ft._currentValue,c=c.parent!==O?{parent:O,pool:O}:c):c=Th(),N={baseLanes:N.baseLanes|a,cachePool:c}),l.memoizedState=N,l.childLanes=Zu(e,_,a),t.memoizedState=Uu,xr(e.child,l)):(Qi(t),a=e.child,e=a.sibling,a=_a(a,{mode:"visible",children:l.children}),a.return=t,a.sibling=null,e!==null&&(_=t.deletions,_===null?(t.deletions=[e],t.flags|=16):_.push(e)),t.child=a,t.memoizedState=null,a)}function Iu(e,t){return t=Zo({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Zo(e,t){return e=Sn(22,e,null,t),e.lanes=0,e}function Gu(e,t,a){return Gs(t,e.child,null,a),e=Iu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function If(e,t,a){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),iu(e.return,t,a)}function qu(e,t,a,l,c,u){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:c,treeForkCount:u}:(_.isBackwards=t,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=c,_.treeForkCount=u)}function Gf(e,t,a){var l=t.pendingProps,c=l.revealOrder,u=l.tail;l=l.children;var _=$t.current,N=(_&2)!==0;if(N?(_=_&1|2,t.flags|=128):_&=1,le($t,_),vn(e,t,l,a),l=nt?w:0,!N&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&If(e,a,t);else if(e.tag===19)If(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(a=t.child,c=null;a!==null;)e=a.alternate,e!==null&&Ao(e)===null&&(c=a),a=a.sibling;a=c,a===null?(c=t.child,t.child=null):(c=a.sibling,a.sibling=null),qu(t,!1,c,a,u,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Ao(e)===null){t.child=c;break}e=c.sibling,c.sibling=a,a=c,c=e}qu(t,!0,a,null,u,l);break;case"together":qu(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function _i(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),ts|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(fl(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(m(153));if(t.child!==null){for(e=t.child,a=_a(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=_a(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function $u(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&bo(e)))}function hv(e,t,a){switch(t.tag){case 3:we(t,t.stateNode.containerInfo),Vi(t,Ft,e.memoizedState.cache),mi();break;case 27:case 5:st(t);break;case 4:we(t,t.stateNode.containerInfo);break;case 10:Vi(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,gu(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Qi(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Zf(e,t,a):(Qi(t),e=_i(e,t,a),e!==null?e.sibling:null);Qi(t);break;case 19:var c=(e.flags&128)!==0;if(l=(a&t.childLanes)!==0,l||(fl(e,t,a,!1),l=(a&t.childLanes)!==0),c){if(l)return Gf(e,t,a);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),le($t,$t.current),l)break;return null;case 22:return t.lanes=0,Of(e,t,a,t.pendingProps);case 24:Vi(t,Ft,e.memoizedState.cache)}return _i(e,t,a)}function qf(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Xt=!0;else{if(!$u(e,a)&&(t.flags&128)===0)return Xt=!1,hv(e,t,a);Xt=(e.flags&131072)!==0}else Xt=!1,nt&&(t.flags&1048576)!==0&&Ke(t,w,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=Zs(t.elementType),t.type=e,typeof e=="function")ul(e)?(l=$s(e,l),t.tag=1,t=Uf(null,t,e,l,a)):(t.tag=0,t=Pu(null,t,e,l,a));else{if(e!=null){var c=e.$$typeof;if(c===G){t.tag=11,t=Mf(null,t,e,l,a);break e}else if(c===F){t.tag=14,t=zf(null,t,e,l,a);break e}}throw t=Ze(e)||e,Error(m(306,t,""))}}return t;case 0:return Pu(e,t,t.type,t.pendingProps,a);case 1:return l=t.type,c=$s(l,t.pendingProps),Uf(e,t,l,c,a);case 3:e:{if(we(t,t.stateNode.containerInfo),e===null)throw Error(m(387));l=t.pendingProps;var u=t.memoizedState;c=u.element,du(e,t),pr(t,l,null,a);var _=t.memoizedState;if(l=_.cache,Vi(t,Ft,l),l!==u.cache&&su(t,[Ft],a,!0),mr(),l=_.element,u.isDehydrated)if(u={element:l,isDehydrated:!1,cache:_.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=Hf(e,t,l,a);break e}else if(l!==c){c=s(Error(m(424)),t),Bs(c),t=Hf(e,t,l,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ut=xa(e.firstChild),ct=t,nt=!0,ei=null,Zn=!0,a=Rh(t,null,l,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(mi(),l===c){t=_i(e,t,a);break e}vn(e,t,l,a)}t=t.child}return t;case 26:return Ho(e,t),e===null?(a=tp(t.type,null,t.pendingProps,null))?t.memoizedState=a:nt||(a=t.type,e=t.pendingProps,l=ac(be.current).createElement(a),l[Lt]=t,l[kt]=e,_n(l,a,e),ze(l),t.stateNode=l):t.memoizedState=tp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return st(t),e===null&&nt&&(l=t.stateNode=Wm(t.type,t.pendingProps,be.current),ct=t,Zn=!0,c=ut,ls(t.type)?(Sd=c,ut=xa(l.firstChild)):ut=c),vn(e,t,t.pendingProps.children,a),Ho(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&nt&&((c=l=ut)&&(l=Iv(l,t.type,t.pendingProps,Zn),l!==null?(t.stateNode=l,ct=t,ut=xa(l.firstChild),Zn=!1,c=!0):c=!1),c||ti(t)),st(t),c=t.type,u=t.pendingProps,_=e!==null?e.memoizedProps:null,l=u.children,yd(c,u)?l=null:_!==null&&yd(c,_)&&(t.flags|=32),t.memoizedState!==null&&(c=_u(e,t,av,null,null,a),Or._currentValue=c),Ho(e,t),vn(e,t,l,a),t.child;case 6:return e===null&&nt&&((e=a=ut)&&(a=Gv(a,t.pendingProps,Zn),a!==null?(t.stateNode=a,ct=t,ut=null,e=!0):e=!1),e||ti(t)),null;case 13:return Zf(e,t,a);case 4:return we(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Gs(t,null,l,a):vn(e,t,l,a),t.child;case 11:return Mf(e,t,t.type,t.pendingProps,a);case 7:return vn(e,t,t.pendingProps,a),t.child;case 8:return vn(e,t,t.pendingProps.children,a),t.child;case 12:return vn(e,t,t.pendingProps.children,a),t.child;case 10:return l=t.pendingProps,Vi(t,t.type,l.value),vn(e,t,l.children,a),t.child;case 9:return c=t.type._context,l=t.pendingProps.children,Us(t),c=gn(c),l=l(c),t.flags|=1,vn(e,t,l,a),t.child;case 14:return zf(e,t,t.type,t.pendingProps,a);case 15:return Rf(e,t,t.type,t.pendingProps,a);case 19:return Gf(e,t,a);case 31:return dv(e,t,a);case 22:return Of(e,t,a,t.pendingProps);case 24:return Us(t),l=gn(Ft),e===null?(c=ou(),c===null&&(c=Et,u=lu(),c.pooledCache=u,u.refCount++,u!==null&&(c.pooledCacheLanes|=a),c=u),t.memoizedState={parent:l,cache:c},uu(t),Vi(t,Ft,c)):((e.lanes&a)!==0&&(du(e,t),pr(t,null,null,a),mr()),c=e.memoizedState,u=t.memoizedState,c.parent!==l?(c={parent:l,cache:l},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),Vi(t,Ft,l)):(l=u.cache,Vi(t,Ft,l),l!==c.cache&&su(t,[Ft],a,!0))),vn(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(m(156,t.tag))}function yi(e){e.flags|=4}function Yu(e,t,a,l,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(vm())e.flags|=8192;else throw Is=No,cu}else e.flags&=-16777217}function $f(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!lp(t))if(vm())e.flags|=8192;else throw Is=No,cu}function Io(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Li():536870912,e.lanes|=t,Nl|=t)}function br(e,t){if(!nt)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function At(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(t)for(var c=e.child;c!==null;)a|=c.lanes|c.childLanes,l|=c.subtreeFlags&65011712,l|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)a|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=l,e.childLanes=a,t}function fv(e,t,a){var l=t.pendingProps;switch(Pt(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(t),null;case 1:return At(t),null;case 3:return a=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),pi(Ft),Oe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Oa(t)?yi(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,or())),At(t),null;case 26:var c=t.type,u=t.memoizedState;return e===null?(yi(t),u!==null?(At(t),$f(t,u)):(At(t),Yu(t,c,null,l,a))):u?u!==e.memoizedState?(yi(t),At(t),$f(t,u)):(At(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&yi(t),At(t),Yu(t,c,e,l,a)),null;case 27:if(Wt(t),a=be.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&yi(t);else{if(!l){if(t.stateNode===null)throw Error(m(166));return At(t),null}e=he.current,Oa(t)?rr(t):(e=Wm(c,l,a),t.stateNode=e,yi(t))}return At(t),null;case 5:if(Wt(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&yi(t);else{if(!l){if(t.stateNode===null)throw Error(m(166));return At(t),null}if(u=he.current,Oa(t))rr(t);else{var _=ac(be.current);switch(u){case 1:u=_.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:u=_.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":u=_.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":u=_.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":u=_.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?u.multiple=!0:l.size&&(u.size=l.size);break;default:u=typeof l.is=="string"?_.createElement(c,{is:l.is}):_.createElement(c)}}u[Lt]=t,u[kt]=l;e:for(_=t.child;_!==null;){if(_.tag===5||_.tag===6)u.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===t)break e;for(;_.sibling===null;){if(_.return===null||_.return===t)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}t.stateNode=u;e:switch(_n(u,c,l),c){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&yi(t)}}return At(t),Yu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&yi(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(m(166));if(e=be.current,Oa(t)){if(e=t.stateNode,a=t.memoizedProps,l=null,c=ct,c!==null)switch(c.tag){case 27:case 5:l=c.memoizedProps}e[Lt]=t,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Zm(e.nodeValue,a)),e||ti(t,!0)}else e=ac(e).createTextNode(l),e[Lt]=t,t.stateNode=e}return At(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(l=Oa(t),a!==null){if(e===null){if(!l)throw Error(m(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(m(557));e[Lt]=t}else mi(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;At(t),e=!1}else a=or(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(aa(t),t):(aa(t),null);if((t.flags&128)!==0)throw Error(m(558))}return At(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=Oa(t),l!==null&&l.dehydrated!==null){if(e===null){if(!c)throw Error(m(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(m(317));c[Lt]=t}else mi(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;At(t),c=!1}else c=or(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(aa(t),t):(aa(t),null)}return aa(t),(t.flags&128)!==0?(t.lanes=a,t):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=t.child,c=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(c=l.alternate.memoizedState.cachePool.pool),u=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(u=l.memoizedState.cachePool.pool),u!==c&&(l.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),Io(t,t.updateQueue),At(t),null);case 4:return Oe(),e===null&&md(t.stateNode.containerInfo),At(t),null;case 10:return pi(t.type),At(t),null;case 19:if(Q($t),l=t.memoizedState,l===null)return At(t),null;if(c=(t.flags&128)!==0,u=l.rendering,u===null)if(c)br(l,!1);else{if(Ht!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=Ao(e),u!==null){for(t.flags|=128,br(l,!1),e=u.updateQueue,t.updateQueue=e,Io(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)ir(a,e),a=a.sibling;return le($t,$t.current&1|2),nt&&Pe(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&Ot()>Vo&&(t.flags|=128,c=!0,br(l,!1),t.lanes=4194304)}else{if(!c)if(e=Ao(u),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,Io(t,e),br(l,!0),l.tail===null&&l.tailMode==="hidden"&&!u.alternate&&!nt)return At(t),null}else 2*Ot()-l.renderingStartTime>Vo&&a!==536870912&&(t.flags|=128,c=!0,br(l,!1),t.lanes=4194304);l.isBackwards?(u.sibling=t.child,t.child=u):(e=l.last,e!==null?e.sibling=u:t.child=u,l.last=u)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Ot(),e.sibling=null,a=$t.current,le($t,c?a&1|2:a&1),nt&&Pe(t,l.treeForkCount),e):(At(t),null);case 22:case 23:return aa(t),pu(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(a&536870912)!==0&&(t.flags&128)===0&&(At(t),t.subtreeFlags&6&&(t.flags|=8192)):At(t),a=t.updateQueue,a!==null&&Io(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==a&&(t.flags|=2048),e!==null&&Q(Hs),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),pi(Ft),At(t),null;case 25:return null;case 30:return null}throw Error(m(156,t.tag))}function mv(e,t){switch(Pt(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return pi(Ft),Oe(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Wt(t),null;case 31:if(t.memoizedState!==null){if(aa(t),t.alternate===null)throw Error(m(340));mi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(aa(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(m(340));mi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Q($t),null;case 4:return Oe(),null;case 10:return pi(t.type),null;case 22:case 23:return aa(t),pu(),e!==null&&Q(Hs),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return pi(Ft),null;case 25:return null;default:return null}}function Yf(e,t){switch(Pt(t),t.tag){case 3:pi(Ft),Oe();break;case 26:case 27:case 5:Wt(t);break;case 4:Oe();break;case 31:t.memoizedState!==null&&aa(t);break;case 13:aa(t);break;case 19:Q($t);break;case 10:pi(t.type);break;case 22:case 23:aa(t),pu(),e!==null&&Q(Hs);break;case 24:pi(Ft)}}function jr(e,t){try{var a=t.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var c=l.next;a=c;do{if((a.tag&e)===e){l=void 0;var u=a.create,_=a.inst;l=u(),_.destroy=l}a=a.next}while(a!==c)}}catch(N){xt(t,t.return,N)}}function Ji(e,t,a){try{var l=t.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var u=c.next;l=u;do{if((l.tag&e)===e){var _=l.inst,N=_.destroy;if(N!==void 0){_.destroy=void 0,c=t;var O=a,ne=N;try{ne()}catch(de){xt(c,O,de)}}}l=l.next}while(l!==u)}}catch(de){xt(t,t.return,de)}}function Vf(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Dh(t,a)}catch(l){xt(e,e.return,l)}}}function Ff(e,t,a){a.props=$s(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){xt(e,t,l)}}function wr(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(c){xt(e,t,c)}}function ai(e,t){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(c){xt(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(c){xt(e,t,c)}else a.current=null}function Kf(e){var t=e.type,a=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(c){xt(e,e.return,c)}}function Vu(e,t,a){try{var l=e.stateNode;Dv(l,e.type,a,t),l[kt]=t}catch(c){xt(e,e.return,c)}}function Xf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ls(e.type)||e.tag===4}function Fu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Xf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ls(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ku(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Bn));else if(l!==4&&(l===27&&ls(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Ku(e,t,a),e=e.sibling;e!==null;)Ku(e,t,a),e=e.sibling}function Go(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(l!==4&&(l===27&&ls(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Go(e,t,a),e=e.sibling;e!==null;)Go(e,t,a),e=e.sibling}function Qf(e){var t=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);_n(t,l,a),t[Lt]=e,t[kt]=a}catch(u){xt(e,e.return,u)}}var xi=!1,Qt=!1,Xu=!1,Wf=typeof WeakSet=="function"?WeakSet:Set,cn=null;function pv(e,t){if(e=e.containerInfo,vd=uc,e=As(e),Ka(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var c=l.anchorOffset,u=l.focusNode;l=l.focusOffset;try{a.nodeType,u.nodeType}catch{a=null;break e}var _=0,N=-1,O=-1,ne=0,de=0,pe=e,se=null;t:for(;;){for(var ce;pe!==a||c!==0&&pe.nodeType!==3||(N=_+c),pe!==u||l!==0&&pe.nodeType!==3||(O=_+l),pe.nodeType===3&&(_+=pe.nodeValue.length),(ce=pe.firstChild)!==null;)se=pe,pe=ce;for(;;){if(pe===e)break t;if(se===a&&++ne===c&&(N=_),se===u&&++de===l&&(O=_),(ce=pe.nextSibling)!==null)break;pe=se,se=pe.parentNode}pe=ce}a=N===-1||O===-1?null:{start:N,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(_d={focusedElem:e,selectionRange:a},uc=!1,cn=t;cn!==null;)if(t=cn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,cn=e;else for(;cn!==null;){switch(t=cn,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)c=e[a],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,a=t,c=u.memoizedProps,u=u.memoizedState,l=a.stateNode;try{var Me=$s(a.type,c);e=l.getSnapshotBeforeUpdate(Me,u),l.__reactInternalSnapshotBeforeUpdate=e}catch(Ge){xt(a,a.return,Ge)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)bd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":bd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(m(163))}if(e=t.sibling,e!==null){e.return=t.return,cn=e;break}cn=t.return}}function Jf(e,t,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ji(e,a),l&4&&jr(5,a);break;case 1:if(ji(e,a),l&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(_){xt(a,a.return,_)}else{var c=$s(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(_){xt(a,a.return,_)}}l&64&&Vf(a),l&512&&wr(a,a.return);break;case 3:if(ji(e,a),l&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Dh(e,t)}catch(_){xt(a,a.return,_)}}break;case 27:t===null&&l&4&&Qf(a);case 26:case 5:ji(e,a),t===null&&l&4&&Kf(a),l&512&&wr(a,a.return);break;case 12:ji(e,a);break;case 31:ji(e,a),l&4&&nm(e,a);break;case 13:ji(e,a),l&4&&am(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Sv.bind(null,a),qv(e,a))));break;case 22:if(l=a.memoizedState!==null||xi,!l){t=t!==null&&t.memoizedState!==null||Qt,c=xi;var u=Qt;xi=l,(Qt=t)&&!u?wi(e,a,(a.subtreeFlags&8772)!==0):ji(e,a),xi=c,Qt=u}break;case 30:break;default:ji(e,a)}}function em(e){var t=e.alternate;t!==null&&(e.alternate=null,em(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Be(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Mt=null,In=!1;function bi(e,t,a){for(a=a.child;a!==null;)tm(e,t,a),a=a.sibling}function tm(e,t,a){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(En,a)}catch{}switch(a.tag){case 26:Qt||ai(a,t),bi(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Qt||ai(a,t);var l=Mt,c=In;ls(a.type)&&(Mt=a.stateNode,In=!1),bi(e,t,a),Mr(a.stateNode),Mt=l,In=c;break;case 5:Qt||ai(a,t);case 6:if(l=Mt,c=In,Mt=null,bi(e,t,a),Mt=l,In=c,Mt!==null)if(In)try{(Mt.nodeType===9?Mt.body:Mt.nodeName==="HTML"?Mt.ownerDocument.body:Mt).removeChild(a.stateNode)}catch(u){xt(a,t,u)}else try{Mt.removeChild(a.stateNode)}catch(u){xt(a,t,u)}break;case 18:Mt!==null&&(In?(e=Mt,Vm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),zl(e)):Vm(Mt,a.stateNode));break;case 4:l=Mt,c=In,Mt=a.stateNode.containerInfo,In=!0,bi(e,t,a),Mt=l,In=c;break;case 0:case 11:case 14:case 15:Ji(2,a,t),Qt||Ji(4,a,t),bi(e,t,a);break;case 1:Qt||(ai(a,t),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Ff(a,t,l)),bi(e,t,a);break;case 21:bi(e,t,a);break;case 22:Qt=(l=Qt)||a.memoizedState!==null,bi(e,t,a),Qt=l;break;default:bi(e,t,a)}}function nm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{zl(e)}catch(a){xt(t,t.return,a)}}}function am(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{zl(e)}catch(a){xt(t,t.return,a)}}function gv(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Wf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Wf),t;default:throw Error(m(435,e.tag))}}function qo(e,t){var a=gv(e);t.forEach(function(l){if(!a.has(l)){a.add(l);var c=Nv.bind(null,e,l);l.then(c,c)}})}function Gn(e,t){var a=t.deletions;if(a!==null)for(var l=0;l<a.length;l++){var c=a[l],u=e,_=t,N=_;e:for(;N!==null;){switch(N.tag){case 27:if(ls(N.type)){Mt=N.stateNode,In=!1;break e}break;case 5:Mt=N.stateNode,In=!1;break e;case 3:case 4:Mt=N.stateNode.containerInfo,In=!0;break e}N=N.return}if(Mt===null)throw Error(m(160));tm(u,_,c),Mt=null,In=!1,u=c.alternate,u!==null&&(u.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)im(t,e),t=t.sibling}var Ba=null;function im(e,t){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Gn(t,e),qn(e),l&4&&(Ji(3,e,e.return),jr(3,e),Ji(5,e,e.return));break;case 1:Gn(t,e),qn(e),l&512&&(Qt||a===null||ai(a,a.return)),l&64&&xi&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var c=Ba;if(Gn(t,e),qn(e),l&512&&(Qt||a===null||ai(a,a.return)),l&4){var u=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){e:{l=e.type,a=e.memoizedProps,c=c.ownerDocument||c;t:switch(l){case"title":u=c.getElementsByTagName("title")[0],(!u||u[ae]||u[Lt]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=c.createElement(l),c.head.insertBefore(u,c.querySelector("head > title"))),_n(u,l,a),u[Lt]=e,ze(u),l=u;break e;case"link":var _=ip("link","href",c).get(l+(a.href||""));if(_){for(var N=0;N<_.length;N++)if(u=_[N],u.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&u.getAttribute("rel")===(a.rel==null?null:a.rel)&&u.getAttribute("title")===(a.title==null?null:a.title)&&u.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(N,1);break t}}u=c.createElement(l),_n(u,l,a),c.head.appendChild(u);break;case"meta":if(_=ip("meta","content",c).get(l+(a.content||""))){for(N=0;N<_.length;N++)if(u=_[N],u.getAttribute("content")===(a.content==null?null:""+a.content)&&u.getAttribute("name")===(a.name==null?null:a.name)&&u.getAttribute("property")===(a.property==null?null:a.property)&&u.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&u.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(N,1);break t}}u=c.createElement(l),_n(u,l,a),c.head.appendChild(u);break;default:throw Error(m(468,l))}u[Lt]=e,ze(u),l=u}e.stateNode=l}else sp(c,e.type,e.stateNode);else e.stateNode=ap(c,l,e.memoizedProps);else u!==l?(u===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):u.count--,l===null?sp(c,e.type,e.stateNode):ap(c,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Vu(e,e.memoizedProps,a.memoizedProps)}break;case 27:Gn(t,e),qn(e),l&512&&(Qt||a===null||ai(a,a.return)),a!==null&&l&4&&Vu(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Gn(t,e),qn(e),l&512&&(Qt||a===null||ai(a,a.return)),e.flags&32){c=e.stateNode;try{da(c,"")}catch(Me){xt(e,e.return,Me)}}l&4&&e.stateNode!=null&&(c=e.memoizedProps,Vu(e,c,a!==null?a.memoizedProps:c)),l&1024&&(Xu=!0);break;case 6:if(Gn(t,e),qn(e),l&4){if(e.stateNode===null)throw Error(m(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(Me){xt(e,e.return,Me)}}break;case 3:if(lc=null,c=Ba,Ba=ic(t.containerInfo),Gn(t,e),Ba=c,qn(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{zl(t.containerInfo)}catch(Me){xt(e,e.return,Me)}Xu&&(Xu=!1,sm(e));break;case 4:l=Ba,Ba=ic(e.stateNode.containerInfo),Gn(t,e),qn(e),Ba=l;break;case 12:Gn(t,e),qn(e);break;case 31:Gn(t,e),qn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,qo(e,l)));break;case 13:Gn(t,e),qn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Yo=Ot()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,qo(e,l)));break;case 22:c=e.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,ne=xi,de=Qt;if(xi=ne||c,Qt=de||O,Gn(t,e),Qt=de,xi=ne,qn(e),l&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(a===null||O||xi||Qt||Ys(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){O=a=t;try{if(u=O.stateNode,c)_=u.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{N=O.stateNode;var pe=O.memoizedProps.style,se=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;N.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(Me){xt(O,O.return,Me)}}}else if(t.tag===6){if(a===null){O=t;try{O.stateNode.nodeValue=c?"":O.memoizedProps}catch(Me){xt(O,O.return,Me)}}}else if(t.tag===18){if(a===null){O=t;try{var ce=O.stateNode;c?Fm(ce,!0):Fm(O.stateNode,!1)}catch(Me){xt(O,O.return,Me)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,qo(e,a))));break;case 19:Gn(t,e),qn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,qo(e,l)));break;case 30:break;case 21:break;default:Gn(t,e),qn(e)}}function qn(e){var t=e.flags;if(t&2){try{for(var a,l=e.return;l!==null;){if(Xf(l)){a=l;break}l=l.return}if(a==null)throw Error(m(160));switch(a.tag){case 27:var c=a.stateNode,u=Fu(e);Go(e,u,c);break;case 5:var _=a.stateNode;a.flags&32&&(da(_,""),a.flags&=-33);var N=Fu(e);Go(e,N,_);break;case 3:case 4:var O=a.stateNode.containerInfo,ne=Fu(e);Ku(e,ne,O);break;default:throw Error(m(161))}}catch(de){xt(e,e.return,de)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function sm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;sm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ji(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Jf(e,t.alternate,t),t=t.sibling}function Ys(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ji(4,t,t.return),Ys(t);break;case 1:ai(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Ff(t,t.return,a),Ys(t);break;case 27:Mr(t.stateNode);case 26:case 5:ai(t,t.return),Ys(t);break;case 22:t.memoizedState===null&&Ys(t);break;case 30:Ys(t);break;default:Ys(t)}e=e.sibling}}function wi(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,c=e,u=t,_=u.flags;switch(u.tag){case 0:case 11:case 15:wi(c,u,a),jr(4,u);break;case 1:if(wi(c,u,a),l=u,c=l.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(ne){xt(l,l.return,ne)}if(l=u,c=l.updateQueue,c!==null){var N=l.stateNode;try{var O=c.shared.hiddenCallbacks;if(O!==null)for(c.shared.hiddenCallbacks=null,c=0;c<O.length;c++)Oh(O[c],N)}catch(ne){xt(l,l.return,ne)}}a&&_&64&&Vf(u),wr(u,u.return);break;case 27:Qf(u);case 26:case 5:wi(c,u,a),a&&l===null&&_&4&&Kf(u),wr(u,u.return);break;case 12:wi(c,u,a);break;case 31:wi(c,u,a),a&&_&4&&nm(c,u);break;case 13:wi(c,u,a),a&&_&4&&am(c,u);break;case 22:u.memoizedState===null&&wi(c,u,a),wr(u,u.return);break;case 30:break;default:wi(c,u,a)}t=t.sibling}}function Qu(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&cr(a))}function Wu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&cr(e))}function Pa(e,t,a,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)lm(e,t,a,l),t=t.sibling}function lm(e,t,a,l){var c=t.flags;switch(t.tag){case 0:case 11:case 15:Pa(e,t,a,l),c&2048&&jr(9,t);break;case 1:Pa(e,t,a,l);break;case 3:Pa(e,t,a,l),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&cr(e)));break;case 12:if(c&2048){Pa(e,t,a,l),e=t.stateNode;try{var u=t.memoizedProps,_=u.id,N=u.onPostCommit;typeof N=="function"&&N(_,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(O){xt(t,t.return,O)}}else Pa(e,t,a,l);break;case 31:Pa(e,t,a,l);break;case 13:Pa(e,t,a,l);break;case 23:break;case 22:u=t.stateNode,_=t.alternate,t.memoizedState!==null?u._visibility&2?Pa(e,t,a,l):Sr(e,t):u._visibility&2?Pa(e,t,a,l):(u._visibility|=2,jl(e,t,a,l,(t.subtreeFlags&10256)!==0||!1)),c&2048&&Qu(_,t);break;case 24:Pa(e,t,a,l),c&2048&&Wu(t.alternate,t);break;default:Pa(e,t,a,l)}}function jl(e,t,a,l,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,_=t,N=a,O=l,ne=_.flags;switch(_.tag){case 0:case 11:case 15:jl(u,_,N,O,c),jr(8,_);break;case 23:break;case 22:var de=_.stateNode;_.memoizedState!==null?de._visibility&2?jl(u,_,N,O,c):Sr(u,_):(de._visibility|=2,jl(u,_,N,O,c)),c&&ne&2048&&Qu(_.alternate,_);break;case 24:jl(u,_,N,O,c),c&&ne&2048&&Wu(_.alternate,_);break;default:jl(u,_,N,O,c)}t=t.sibling}}function Sr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,l=t,c=l.flags;switch(l.tag){case 22:Sr(a,l),c&2048&&Qu(l.alternate,l);break;case 24:Sr(a,l),c&2048&&Wu(l.alternate,l);break;default:Sr(a,l)}t=t.sibling}}var Nr=8192;function wl(e,t,a){if(e.subtreeFlags&Nr)for(e=e.child;e!==null;)rm(e,t,a),e=e.sibling}function rm(e,t,a){switch(e.tag){case 26:wl(e,t,a),e.flags&Nr&&e.memoizedState!==null&&n_(a,Ba,e.memoizedState,e.memoizedProps);break;case 5:wl(e,t,a);break;case 3:case 4:var l=Ba;Ba=ic(e.stateNode.containerInfo),wl(e,t,a),Ba=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Nr,Nr=16777216,wl(e,t,a),Nr=l):wl(e,t,a));break;default:wl(e,t,a)}}function om(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Cr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];cn=l,um(l,e)}om(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)cm(e),e=e.sibling}function cm(e){switch(e.tag){case 0:case 11:case 15:Cr(e),e.flags&2048&&Ji(9,e,e.return);break;case 3:Cr(e);break;case 12:Cr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,$o(e)):Cr(e);break;default:Cr(e)}}function $o(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];cn=l,um(l,e)}om(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ji(8,t,t.return),$o(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,$o(t));break;default:$o(t)}e=e.sibling}}function um(e,t){for(;cn!==null;){var a=cn;switch(a.tag){case 0:case 11:case 15:Ji(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:cr(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,cn=l;else e:for(a=e;cn!==null;){l=cn;var c=l.sibling,u=l.return;if(em(l),l===a){cn=null;break e}if(c!==null){c.return=u,cn=c;break e}cn=u}}}var vv={getCacheForType:function(e){var t=gn(Ft),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return gn(Ft).controller.signal}},_v=typeof WeakMap=="function"?WeakMap:Map,pt=0,Et=null,at=null,rt=0,yt=0,ia=null,es=!1,Sl=!1,Ju=!1,Si=0,Ht=0,ts=0,Vs=0,ed=0,sa=0,Nl=0,Er=null,$n=null,td=!1,Yo=0,dm=0,Vo=1/0,Fo=null,ns=null,nn=0,as=null,Cl=null,Ni=0,nd=0,ad=null,hm=null,Tr=0,id=null;function la(){return(pt&2)!==0&&rt!==0?rt&-rt:J.T!==null?ud():Ga()}function fm(){if(sa===0)if((rt&536870912)===0||nt){var e=Kn;Kn<<=1,(Kn&3932160)===0&&(Kn=262144),sa=e}else sa=536870912;return e=na.current,e!==null&&(e.flags|=32),sa}function Yn(e,t,a){(e===Et&&(yt===2||yt===9)||e.cancelPendingCommit!==null)&&(El(e,0),is(e,rt,sa,!1)),Xn(e,a),((pt&2)===0||e!==Et)&&(e===Et&&((pt&2)===0&&(Vs|=a),Ht===4&&is(e,rt,sa,!1)),ii(e))}function mm(e,t,a){if((pt&6)!==0)throw Error(m(327));var l=!a&&(t&127)===0&&(t&e.expiredLanes)===0||Ta(e,t),c=l?bv(e,t):ld(e,t,!0),u=l;do{if(c===0){Sl&&!l&&is(e,t,0,!1);break}else{if(a=e.current.alternate,u&&!yv(a)){c=ld(e,t,!1),u=!1;continue}if(c===2){if(u=t,e.errorRecoveryDisabledLanes&u)var _=0;else _=e.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){t=_;e:{var N=e;c=Er;var O=N.current.memoizedState.isDehydrated;if(O&&(El(N,_).flags|=256),_=ld(N,_,!1),_!==2){if(Ju&&!O){N.errorRecoveryDisabledLanes|=u,Vs|=u,c=4;break e}u=$n,$n=c,u!==null&&($n===null?$n=u:$n.push.apply($n,u))}c=_}if(u=!1,c!==2)continue}}if(c===1){El(e,0),is(e,t,0,!0);break}e:{switch(l=e,u=c,u){case 0:case 1:throw Error(m(345));case 4:if((t&4194048)!==t)break;case 6:is(l,t,sa,!es);break e;case 2:$n=null;break;case 3:case 5:break;default:throw Error(m(329))}if((t&62914560)===t&&(c=Yo+300-Ot(),10<c)){if(is(l,t,sa,!es),Ea(l,0,!0)!==0)break e;Ni=t,l.timeoutHandle=$m(pm.bind(null,l,a,$n,Fo,td,t,sa,Vs,Nl,es,u,"Throttled",-0,0),c);break e}pm(l,a,$n,Fo,td,t,sa,Vs,Nl,es,u,null,-0,0)}}break}while(!0);ii(e)}function pm(e,t,a,l,c,u,_,N,O,ne,de,pe,se,ce){if(e.timeoutHandle=-1,pe=t.subtreeFlags,pe&8192||(pe&16785408)===16785408){pe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Bn},rm(t,u,pe);var Me=(u&62914560)===u?Yo-Ot():(u&4194048)===u?dm-Ot():0;if(Me=a_(pe,Me),Me!==null){Ni=u,e.cancelPendingCommit=Me(wm.bind(null,e,t,u,a,l,c,_,N,O,de,pe,null,se,ce)),is(e,u,_,!ne);return}}wm(e,t,u,a,l,c,_,N,O)}function yv(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var c=a[l],u=c.getSnapshot;c=c.value;try{if(!rn(u(),c))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function is(e,t,a,l){t&=~ed,t&=~Vs,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var c=t;0<c;){var u=31-Gt(c),_=1<<u;l[u]=-1,c&=~_}a!==0&&ki(e,a,t)}function Ko(){return(pt&6)===0?(Ar(0),!1):!0}function sd(){if(at!==null){if(yt===0)var e=at.return;else e=at,Da=ni=null,bu(e),vl=null,dr=0,e=at;for(;e!==null;)Yf(e.alternate,e),e=e.return;at=null}}function El(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Uv(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Ni=0,sd(),Et=e,at=a=_a(e.current,null),rt=t,yt=0,ia=null,es=!1,Sl=Ta(e,t),Ju=!1,Nl=sa=ed=Vs=ts=Ht=0,$n=Er=null,td=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var c=31-Gt(l),u=1<<c;t|=e[c],l&=~u}return Si=t,Rs(),a}function gm(e,t){Fe=null,J.H=yr,t===gl||t===So?(t=kh(),yt=3):t===cu?(t=kh(),yt=4):yt=t===Bu?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,ia=t,at===null&&(Ht=1,Po(e,s(t,e.current)))}function vm(){var e=na.current;return e===null?!0:(rt&4194048)===rt?ya===null:(rt&62914560)===rt||(rt&536870912)!==0?e===ya:!1}function _m(){var e=J.H;return J.H=yr,e===null?yr:e}function ym(){var e=J.A;return J.A=vv,e}function Xo(){Ht=4,es||(rt&4194048)!==rt&&na.current!==null||(Sl=!0),(ts&134217727)===0&&(Vs&134217727)===0||Et===null||is(Et,rt,sa,!1)}function ld(e,t,a){var l=pt;pt|=2;var c=_m(),u=ym();(Et!==e||rt!==t)&&(Fo=null,El(e,t)),t=!1;var _=Ht;e:do try{if(yt!==0&&at!==null){var N=at,O=ia;switch(yt){case 8:sd(),_=6;break e;case 3:case 2:case 9:case 6:na.current===null&&(t=!0);var ne=yt;if(yt=0,ia=null,Tl(e,N,O,ne),a&&Sl){_=0;break e}break;default:ne=yt,yt=0,ia=null,Tl(e,N,O,ne)}}xv(),_=Ht;break}catch(de){gm(e,de)}while(!0);return t&&e.shellSuspendCounter++,Da=ni=null,pt=l,J.H=c,J.A=u,at===null&&(Et=null,rt=0,Rs()),_}function xv(){for(;at!==null;)xm(at)}function bv(e,t){var a=pt;pt|=2;var l=_m(),c=ym();Et!==e||rt!==t?(Fo=null,Vo=Ot()+500,El(e,t)):Sl=Ta(e,t);e:do try{if(yt!==0&&at!==null){t=at;var u=ia;t:switch(yt){case 1:yt=0,ia=null,Tl(e,t,u,1);break;case 2:case 9:if(Ah(u)){yt=0,ia=null,bm(t);break}t=function(){yt!==2&&yt!==9||Et!==e||(yt=7),ii(e)},u.then(t,t);break e;case 3:yt=7;break e;case 4:yt=5;break e;case 7:Ah(u)?(yt=0,ia=null,bm(t)):(yt=0,ia=null,Tl(e,t,u,7));break;case 5:var _=null;switch(at.tag){case 26:_=at.memoizedState;case 5:case 27:var N=at;if(_?lp(_):N.stateNode.complete){yt=0,ia=null;var O=N.sibling;if(O!==null)at=O;else{var ne=N.return;ne!==null?(at=ne,Qo(ne)):at=null}break t}}yt=0,ia=null,Tl(e,t,u,5);break;case 6:yt=0,ia=null,Tl(e,t,u,6);break;case 8:sd(),Ht=6;break e;default:throw Error(m(462))}}jv();break}catch(de){gm(e,de)}while(!0);return Da=ni=null,J.H=l,J.A=c,pt=a,at!==null?0:(Et=null,rt=0,Rs(),Ht)}function jv(){for(;at!==null&&!Jt();)xm(at)}function xm(e){var t=qf(e.alternate,e,Si);e.memoizedProps=e.pendingProps,t===null?Qo(e):at=t}function bm(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Pf(a,t,t.pendingProps,t.type,void 0,rt);break;case 11:t=Pf(a,t,t.pendingProps,t.type.render,t.ref,rt);break;case 5:bu(t);default:Yf(a,t),t=at=ir(t,Si),t=qf(a,t,Si)}e.memoizedProps=e.pendingProps,t===null?Qo(e):at=t}function Tl(e,t,a,l){Da=ni=null,bu(t),vl=null,dr=0;var c=t.return;try{if(uv(e,c,t,a,rt)){Ht=1,Po(e,s(a,e.current)),at=null;return}}catch(u){if(c!==null)throw at=c,u;Ht=1,Po(e,s(a,e.current)),at=null;return}t.flags&32768?(nt||l===1?e=!0:Sl||(rt&536870912)!==0?e=!1:(es=e=!0,(l===2||l===9||l===3||l===6)&&(l=na.current,l!==null&&l.tag===13&&(l.flags|=16384))),jm(t,e)):Qo(t)}function Qo(e){var t=e;do{if((t.flags&32768)!==0){jm(t,es);return}e=t.return;var a=fv(t.alternate,t,Si);if(a!==null){at=a;return}if(t=t.sibling,t!==null){at=t;return}at=t=e}while(t!==null);Ht===0&&(Ht=5)}function jm(e,t){do{var a=mv(e.alternate,e);if(a!==null){a.flags&=32767,at=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){at=e;return}at=e=a}while(e!==null);Ht=6,at=null}function wm(e,t,a,l,c,u,_,N,O){e.cancelPendingCommit=null;do Wo();while(nn!==0);if((pt&6)!==0)throw Error(m(327));if(t!==null){if(t===e.current)throw Error(m(177));if(u=t.lanes|t.childLanes,u|=cl,ms(e,a,u,_,N,O),e===Et&&(at=Et=null,rt=0),Cl=t,as=e,Ni=a,nd=u,ad=c,hm=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Cv(Tt,function(){return Tm(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=J.T,J.T=null,c=B.p,B.p=2,_=pt,pt|=4;try{pv(e,t,a)}finally{pt=_,B.p=c,J.T=l}}nn=1,Sm(),Nm(),Cm()}}function Sm(){if(nn===1){nn=0;var e=as,t=Cl,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=J.T,J.T=null;var l=B.p;B.p=2;var c=pt;pt|=4;try{im(t,e);var u=_d,_=As(e.containerInfo),N=u.focusedElem,O=u.selectionRange;if(_!==N&&N&&N.ownerDocument&&sl(N.ownerDocument.documentElement,N)){if(O!==null&&Ka(N)){var ne=O.start,de=O.end;if(de===void 0&&(de=ne),"selectionStart"in N)N.selectionStart=ne,N.selectionEnd=Math.min(de,N.value.length);else{var pe=N.ownerDocument||document,se=pe&&pe.defaultView||window;if(se.getSelection){var ce=se.getSelection(),Me=N.textContent.length,Ge=Math.min(O.start,Me),Nt=O.end===void 0?Ge:Math.min(O.end,Me);!ce.extend&&Ge>Nt&&(_=Nt,Nt=Ge,Ge=_);var q=Ts(N,Ge),H=Ts(N,Nt);if(q&&H&&(ce.rangeCount!==1||ce.anchorNode!==q.node||ce.anchorOffset!==q.offset||ce.focusNode!==H.node||ce.focusOffset!==H.offset)){var te=pe.createRange();te.setStart(q.node,q.offset),ce.removeAllRanges(),Ge>Nt?(ce.addRange(te),ce.extend(H.node,H.offset)):(te.setEnd(H.node,H.offset),ce.addRange(te))}}}}for(pe=[],ce=N;ce=ce.parentNode;)ce.nodeType===1&&pe.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<pe.length;N++){var fe=pe[N];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}uc=!!vd,_d=vd=null}finally{pt=c,B.p=l,J.T=a}}e.current=t,nn=2}}function Nm(){if(nn===2){nn=0;var e=as,t=Cl,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=J.T,J.T=null;var l=B.p;B.p=2;var c=pt;pt|=4;try{Jf(e,t.alternate,t)}finally{pt=c,B.p=l,J.T=a}}nn=3}}function Cm(){if(nn===4||nn===3){nn=0,Na();var e=as,t=Cl,a=Ni,l=hm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?nn=5:(nn=0,Cl=as=null,Em(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(ns=null),ke(a),t=t.stateNode,It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(En,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=J.T,c=B.p,B.p=2,J.T=null;try{for(var u=e.onRecoverableError,_=0;_<l.length;_++){var N=l[_];u(N.value,{componentStack:N.stack})}}finally{J.T=t,B.p=c}}(Ni&3)!==0&&Wo(),ii(e),c=e.pendingLanes,(a&261930)!==0&&(c&42)!==0?e===id?Tr++:(Tr=0,id=e):Tr=0,Ar(0)}}function Em(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,cr(t)))}function Wo(){return Sm(),Nm(),Cm(),Tm()}function Tm(){if(nn!==5)return!1;var e=as,t=nd;nd=0;var a=ke(Ni),l=J.T,c=B.p;try{B.p=32>a?32:a,J.T=null,a=ad,ad=null;var u=as,_=Ni;if(nn=0,Cl=as=null,Ni=0,(pt&6)!==0)throw Error(m(331));var N=pt;if(pt|=4,cm(u.current),lm(u,u.current,_,a),pt=N,Ar(0,!1),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(En,u)}catch{}return!0}finally{B.p=c,J.T=l,Em(e,t)}}function Am(e,t,a){t=s(a,t),t=Du(e.stateNode,t,2),e=Xi(e,t,2),e!==null&&(Xn(e,2),ii(e))}function xt(e,t,a){if(e.tag===3)Am(e,e,a);else for(;t!==null;){if(t.tag===3){Am(t,e,a);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ns===null||!ns.has(l))){e=s(a,e),a=Lf(2),l=Xi(t,a,2),l!==null&&(kf(a,l,t,e),Xn(l,2),ii(l));break}}t=t.return}}function rd(e,t,a){var l=e.pingCache;if(l===null){l=e.pingCache=new _v;var c=new Set;l.set(t,c)}else c=l.get(t),c===void 0&&(c=new Set,l.set(t,c));c.has(a)||(Ju=!0,c.add(a),e=wv.bind(null,e,t,a),t.then(e,e))}function wv(e,t,a){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Et===e&&(rt&a)===a&&(Ht===4||Ht===3&&(rt&62914560)===rt&&300>Ot()-Yo?(pt&2)===0&&El(e,0):ed|=a,Nl===rt&&(Nl=0)),ii(e)}function Lm(e,t){t===0&&(t=Li()),e=va(e,t),e!==null&&(Xn(e,t),ii(e))}function Sv(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Lm(e,a)}function Nv(e,t){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,c=e.memoizedState;c!==null&&(a=c.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(m(314))}l!==null&&l.delete(t),Lm(e,a)}function Cv(e,t){return dn(e,t)}var Jo=null,Al=null,od=!1,ec=!1,cd=!1,ss=0;function ii(e){e!==Al&&e.next===null&&(Al===null?Jo=Al=e:Al=Al.next=e),ec=!0,od||(od=!0,Tv())}function Ar(e,t){if(!cd&&ec){cd=!0;do for(var a=!1,l=Jo;l!==null;){if(e!==0){var c=l.pendingLanes;if(c===0)var u=0;else{var _=l.suspendedLanes,N=l.pingedLanes;u=(1<<31-Gt(42|e)+1)-1,u&=c&~(_&~N),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(a=!0,Rm(l,u))}else u=rt,u=Ea(l,l===Et?u:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(u&3)===0||Ta(l,u)||(a=!0,Rm(l,u));l=l.next}while(a);cd=!1}}function Ev(){km()}function km(){ec=od=!1;var e=0;ss!==0&&Pv()&&(e=ss);for(var t=Ot(),a=null,l=Jo;l!==null;){var c=l.next,u=Mm(l,t);u===0?(l.next=null,a===null?Jo=c:a.next=c,c===null&&(Al=a)):(a=l,(e!==0||(u&3)!==0)&&(ec=!0)),l=c}nn!==0&&nn!==5||Ar(e),ss!==0&&(ss=0)}function Mm(e,t){for(var a=e.suspendedLanes,l=e.pingedLanes,c=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var _=31-Gt(u),N=1<<_,O=c[_];O===-1?((N&a)===0||(N&l)!==0)&&(c[_]=fs(N,t)):O<=t&&(e.expiredLanes|=N),u&=~N}if(t=Et,a=rt,a=Ea(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===t&&(yt===2||yt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&hn(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Ta(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(l!==null&&hn(l),ke(a)){case 2:case 8:a=en;break;case 32:a=Tt;break;case 268435456:a=Ia;break;default:a=Tt}return l=zm.bind(null,e),a=dn(a,l),e.callbackPriority=t,e.callbackNode=a,t}return l!==null&&l!==null&&hn(l),e.callbackPriority=2,e.callbackNode=null,2}function zm(e,t){if(nn!==0&&nn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Wo()&&e.callbackNode!==a)return null;var l=rt;return l=Ea(e,e===Et?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(mm(e,l,t),Mm(e,Ot()),e.callbackNode!=null&&e.callbackNode===a?zm.bind(null,e):null)}function Rm(e,t){if(Wo())return null;mm(e,t,!0)}function Tv(){Hv(function(){(pt&6)!==0?dn(Rn,Ev):km()})}function ud(){if(ss===0){var e=ml;e===0&&(e=Fn,Fn<<=1,(Fn&261888)===0&&(Fn=256)),ss=e}return ss}function Om(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ri(""+e)}function Dm(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function Av(e,t,a,l,c){if(t==="submit"&&a&&a.stateNode===c){var u=Om((c[kt]||null).action),_=l.submitter;_&&(t=(t=_[kt]||null)?Om(t.formAction):_.getAttribute("formAction"),t!==null&&(u=t,_=null));var N=new Ws("action","action",null,l,c);e.push({event:N,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ss!==0){var O=_?Dm(c,_):new FormData(c);Lu(a,{pending:!0,data:O,method:c.method,action:u},null,O)}}else typeof u=="function"&&(N.preventDefault(),O=_?Dm(c,_):new FormData(c),Lu(a,{pending:!0,data:O,method:c.method,action:u},u,O))},currentTarget:c}]})}}for(var dd=0;dd<Wa.length;dd++){var hd=Wa[dd],Lv=hd.toLowerCase(),kv=hd[0].toUpperCase()+hd.slice(1);Un(Lv,"on"+kv)}Un(ks,"onAnimationEnd"),Un(_o,"onAnimationIteration"),Un(Ms,"onAnimationStart"),Un("dblclick","onDoubleClick"),Un("focusin","onFocus"),Un("focusout","onBlur"),Un(tu,"onTransitionRun"),Un(yo,"onTransitionStart"),Un(nu,"onTransitionCancel"),Un($i,"onTransitionEnd"),tt("onMouseEnter",["mouseout","mouseover"]),tt("onMouseLeave",["mouseout","mouseover"]),tt("onPointerEnter",["pointerout","pointerover"]),tt("onPointerLeave",["pointerout","pointerover"]),mn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mn("onBeforeInput",["compositionend","keypress","textInput","paste"]),mn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lr));function Bm(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],c=l.event;l=l.listeners;e:{var u=void 0;if(t)for(var _=l.length-1;0<=_;_--){var N=l[_],O=N.instance,ne=N.currentTarget;if(N=N.listener,O!==u&&c.isPropagationStopped())break e;u=N,c.currentTarget=ne;try{u(c)}catch(de){zs(de)}c.currentTarget=null,u=O}else for(_=0;_<l.length;_++){if(N=l[_],O=N.instance,ne=N.currentTarget,N=N.listener,O!==u&&c.isPropagationStopped())break e;u=N,c.currentTarget=ne;try{u(c)}catch(de){zs(de)}c.currentTarget=null,u=O}}}}function it(e,t){var a=t[On];a===void 0&&(a=t[On]=new Set);var l=e+"__bubble";a.has(l)||(Pm(t,e,2,!1),a.add(l))}function fd(e,t,a){var l=0;t&&(l|=4),Pm(a,e,l,t)}var tc="_reactListening"+Math.random().toString(36).slice(2);function md(e){if(!e[tc]){e[tc]=!0,ln.forEach(function(a){a!=="selectionchange"&&(Mv.has(a)||fd(a,!1,e),fd(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[tc]||(t[tc]=!0,fd("selectionchange",!1,t))}}function Pm(e,t,a,l){switch(fp(t)){case 2:var c=l_;break;case 8:c=r_;break;default:c=Ad}a=c.bind(null,t,a,e),c=void 0,!ys||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),l?c!==void 0?e.addEventListener(t,a,{capture:!0,passive:c}):e.addEventListener(t,a,!0):c!==void 0?e.addEventListener(t,a,{passive:c}):e.addEventListener(t,a,!1)}function pd(e,t,a,l,c){var u=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var N=l.stateNode.containerInfo;if(N===c)break;if(_===4)for(_=l.return;_!==null;){var O=_.tag;if((O===3||O===4)&&_.stateNode.containerInfo===c)return;_=_.return}for(;N!==null;){if(_=Ue(N),_===null)return;if(O=_.tag,O===5||O===6||O===26||O===27){l=u=_;continue e}N=N.parentNode}}l=l.return}Vl(function(){var ne=u,de=_s(a),pe=[];e:{var se=xo.get(e);if(se!==void 0){var ce=Ws,Me=e;switch(e){case"keypress":if(xs(a)===0)break e;case"keydown":case"keyup":ce=so;break;case"focusin":Me="focus",ce=Xl;break;case"focusout":Me="blur",ce=Xl;break;case"beforeblur":case"afterblur":ce=Xl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=eo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=qc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=Kc;break;case ks:case _o:case Ms:ce=Ql;break;case $i:ce=oo;break;case"scroll":case"scrollend":ce=lt;break;case"wheel":ce=di;break;case"copy":case"cut":case"paste":ce=fa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=lo;break;case"toggle":case"beforetoggle":ce=ws}var Ge=(t&4)!==0,Nt=!Ge&&(e==="scroll"||e==="scrollend"),q=Ge?se!==null?se+"Capture":null:se;Ge=[];for(var H=ne,te;H!==null;){var fe=H;if(te=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||te===null||q===null||(fe=ci(H,q),fe!=null&&Ge.push(kr(H,fe,te))),Nt)break;H=H.return}0<Ge.length&&(se=new ce(se,Me,null,a,de),pe.push({event:se,listeners:Ge}))}}if((t&7)===0){e:{if(se=e==="mouseover"||e==="pointerover",ce=e==="mouseout"||e==="pointerout",se&&a!==Qs&&(Me=a.relatedTarget||a.fromElement)&&(Ue(Me)||Me[Qn]))break e;if((ce||se)&&(se=de.window===de?de:(se=de.ownerDocument)?se.defaultView||se.parentWindow:window,ce?(Me=a.relatedTarget||a.toElement,ce=ne,Me=Me?Ue(Me):null,Me!==null&&(Nt=b(Me),Ge=Me.tag,Me!==Nt||Ge!==5&&Ge!==27&&Ge!==6)&&(Me=null)):(ce=null,Me=ne),ce!==Me)){if(Ge=eo,fe="onMouseLeave",q="onMouseEnter",H="mouse",(e==="pointerout"||e==="pointerover")&&(Ge=lo,fe="onPointerLeave",q="onPointerEnter",H="pointer"),Nt=ce==null?se:Ee(ce),te=Me==null?se:Ee(Me),se=new Ge(fe,H+"leave",ce,a,de),se.target=Nt,se.relatedTarget=te,fe=null,Ue(de)===ne&&(Ge=new Ge(q,H+"enter",Me,a,de),Ge.target=te,Ge.relatedTarget=Nt,fe=Ge),Nt=fe,ce&&Me)t:{for(Ge=zv,q=ce,H=Me,te=0,fe=q;fe;fe=Ge(fe))te++;fe=0;for(var He=H;He;He=Ge(He))fe++;for(;0<te-fe;)q=Ge(q),te--;for(;0<fe-te;)H=Ge(H),fe--;for(;te--;){if(q===H||H!==null&&q===H.alternate){Ge=q;break t}q=Ge(q),H=Ge(H)}Ge=null}else Ge=null;ce!==null&&Um(pe,se,ce,Ge,!1),Me!==null&&Nt!==null&&Um(pe,Nt,Me,Ge,!0)}}e:{if(se=ne?Ee(ne):window,ce=se.nodeName&&se.nodeName.toLowerCase(),ce==="select"||ce==="input"&&se.type==="file")var dt=Es;else if(ma(se))if(fo)dt=eu;else{dt=Jc;var Re=za}else ce=se.nodeName,!ce||ce.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?ne&&vs(ne.elementType)&&(dt=Es):dt=Zi;if(dt&&(dt=dt(e,ne))){ho(pe,dt,a,de);break e}Re&&Re(e,se,ne),e==="focusout"&&ne&&se.type==="number"&&ne.memoizedProps.value!=null&&La(se,"number",se.value)}switch(Re=ne?Ee(ne):window,e){case"focusin":(ma(Re)||Re.contentEditable==="true")&&(Xa=Re,rl=ne,Ls=null);break;case"focusout":Ls=rl=Xa=null;break;case"mousedown":Gi=!0;break;case"contextmenu":case"mouseup":case"dragend":Gi=!1,go(pe,a,de);break;case"selectionchange":if(ll)break;case"keydown":case"keyup":go(pe,a,de)}var Xe;if(el)e:{switch(e){case"compositionstart":var ot="onCompositionStart";break e;case"compositionend":ot="onCompositionEnd";break e;case"compositionupdate":ot="onCompositionUpdate";break e}ot=void 0}else Pi?uo(e,a)&&(ot="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(ot="onCompositionStart");ot&&(tl&&a.locale!=="ko"&&(Pi||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&Pi&&(Xe=Va()):(ha=de,ui="value"in ha?ha.value:ha.textContent,Pi=!0)),Re=nc(ne,ot),0<Re.length&&(ot=new Wl(ot,e,null,a,de),pe.push({event:ot,listeners:Re}),Xe?ot.data=Xe:(Xe=nr(a),Xe!==null&&(ot.data=Xe)))),(Xe=Qc?ta(e,a):Ui(e,a))&&(ot=nc(ne,"onBeforeInput"),0<ot.length&&(Re=new Wl("onBeforeInput","beforeinput",null,a,de),pe.push({event:Re,listeners:ot}),Re.data=Xe)),Av(pe,e,ne,a,de)}Bm(pe,t)})}function kr(e,t,a){return{instance:e,listener:t,currentTarget:a}}function nc(e,t){for(var a=t+"Capture",l=[];e!==null;){var c=e,u=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||u===null||(c=ci(e,a),c!=null&&l.unshift(kr(e,c,u)),c=ci(e,t),c!=null&&l.push(kr(e,c,u))),e.tag===3)return l;e=e.return}return[]}function zv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Um(e,t,a,l,c){for(var u=t._reactName,_=[];a!==null&&a!==l;){var N=a,O=N.alternate,ne=N.stateNode;if(N=N.tag,O!==null&&O===l)break;N!==5&&N!==26&&N!==27||ne===null||(O=ne,c?(ne=ci(a,u),ne!=null&&_.unshift(kr(a,ne,O))):c||(ne=ci(a,u),ne!=null&&_.push(kr(a,ne,O)))),a=a.return}_.length!==0&&e.push({event:t,listeners:_})}var Rv=/\r\n?/g,Ov=/\u0000|\uFFFD/g;function Hm(e){return(typeof e=="string"?e:""+e).replace(Rv,`
`).replace(Ov,"")}function Zm(e,t){return t=Hm(t),Hm(e)===t}function St(e,t,a,l,c,u){switch(a){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||da(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&da(e,""+l);break;case"className":gt(e,"class",l);break;case"tabIndex":gt(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":gt(e,a,l);break;case"style":Ks(e,l,u);break;case"data":if(t!=="object"){gt(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Ri(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(a==="formAction"?(t!=="input"&&St(e,t,"name",c.name,c,null),St(e,t,"formEncType",c.formEncType,c,null),St(e,t,"formMethod",c.formMethod,c,null),St(e,t,"formTarget",c.formTarget,c,null)):(St(e,t,"encType",c.encType,c,null),St(e,t,"method",c.method,c,null),St(e,t,"target",c.target,c,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Ri(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=Bn);break;case"onScroll":l!=null&&it("scroll",e);break;case"onScrollEnd":l!=null&&it("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(m(61));if(a=l.__html,a!=null){if(c.children!=null)throw Error(m(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=Ri(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":it("beforetoggle",e),it("toggle",e),Qe(e,"popover",l);break;case"xlinkActuate":W(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":W(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":W(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":W(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":W(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":W(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":W(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":W(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":W(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Qe(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Xs.get(a)||a,Qe(e,a,l))}}function gd(e,t,a,l,c,u){switch(a){case"style":Ks(e,l,u);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(m(61));if(a=l.__html,a!=null){if(c.children!=null)throw Error(m(60));e.innerHTML=a}}break;case"children":typeof l=="string"?da(e,l):(typeof l=="number"||typeof l=="bigint")&&da(e,""+l);break;case"onScroll":l!=null&&it("scroll",e);break;case"onScrollEnd":l!=null&&it("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Bn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!An.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(c=a.endsWith("Capture"),t=a.slice(2,c?a.length-7:void 0),u=e[kt]||null,u=u!=null?u[a]:null,typeof u=="function"&&e.removeEventListener(t,u,c),typeof l=="function")){typeof u!="function"&&u!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,l,c);break e}a in e?e[a]=l:l===!0?e.setAttribute(a,""):Qe(e,a,l)}}}function _n(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":it("error",e),it("load",e);var l=!1,c=!1,u;for(u in a)if(a.hasOwnProperty(u)){var _=a[u];if(_!=null)switch(u){case"src":l=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(m(137,t));default:St(e,t,u,_,a,null)}}c&&St(e,t,"srcSet",a.srcSet,a,null),l&&St(e,t,"src",a.src,a,null);return;case"input":it("invalid",e);var N=u=_=c=null,O=null,ne=null;for(l in a)if(a.hasOwnProperty(l)){var de=a[l];if(de!=null)switch(l){case"name":c=de;break;case"type":_=de;break;case"checked":O=de;break;case"defaultChecked":ne=de;break;case"value":u=de;break;case"defaultValue":N=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(m(137,t));break;default:St(e,t,l,de,a,null)}}gs(e,u,N,O,ne,_,c,!1);return;case"select":it("invalid",e),l=_=u=null;for(c in a)if(a.hasOwnProperty(c)&&(N=a[c],N!=null))switch(c){case"value":u=N;break;case"defaultValue":_=N;break;case"multiple":l=N;default:St(e,t,c,N,a,null)}t=u,a=_,e.multiple=!!l,t!=null?Ct(e,!!l,t,!1):a!=null&&Ct(e,!!l,a,!0);return;case"textarea":it("invalid",e),u=c=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(N=a[_],N!=null))switch(_){case"value":l=N;break;case"defaultValue":c=N;break;case"children":u=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(m(91));break;default:St(e,t,_,N,a,null)}Mi(e,l,c,u);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(l=a[O],l!=null))switch(O){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:St(e,t,O,l,a,null)}return;case"dialog":it("beforetoggle",e),it("toggle",e),it("cancel",e),it("close",e);break;case"iframe":case"object":it("load",e);break;case"video":case"audio":for(l=0;l<Lr.length;l++)it(Lr[l],e);break;case"image":it("error",e),it("load",e);break;case"details":it("toggle",e);break;case"embed":case"source":case"link":it("error",e),it("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in a)if(a.hasOwnProperty(ne)&&(l=a[ne],l!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(m(137,t));default:St(e,t,ne,l,a,null)}return;default:if(vs(t)){for(de in a)a.hasOwnProperty(de)&&(l=a[de],l!==void 0&&gd(e,t,de,l,a,void 0));return}}for(N in a)a.hasOwnProperty(N)&&(l=a[N],l!=null&&St(e,t,N,l,a,null))}function Dv(e,t,a,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,u=null,_=null,N=null,O=null,ne=null,de=null;for(ce in a){var pe=a[ce];if(a.hasOwnProperty(ce)&&pe!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":O=pe;default:l.hasOwnProperty(ce)||St(e,t,ce,null,l,pe)}}for(var se in l){var ce=l[se];if(pe=a[se],l.hasOwnProperty(se)&&(ce!=null||pe!=null))switch(se){case"type":u=ce;break;case"name":c=ce;break;case"checked":ne=ce;break;case"defaultChecked":de=ce;break;case"value":_=ce;break;case"defaultValue":N=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(m(137,t));break;default:ce!==pe&&St(e,t,se,ce,l,pe)}}ql(e,_,N,O,ne,de,u,c);return;case"select":ce=_=N=se=null;for(u in a)if(O=a[u],a.hasOwnProperty(u)&&O!=null)switch(u){case"value":break;case"multiple":ce=O;default:l.hasOwnProperty(u)||St(e,t,u,null,l,O)}for(c in l)if(u=l[c],O=a[c],l.hasOwnProperty(c)&&(u!=null||O!=null))switch(c){case"value":se=u;break;case"defaultValue":N=u;break;case"multiple":_=u;default:u!==O&&St(e,t,c,u,l,O)}t=N,a=_,l=ce,se!=null?Ct(e,!!a,se,!1):!!l!=!!a&&(t!=null?Ct(e,!!a,t,!0):Ct(e,!!a,a?[]:"",!1));return;case"textarea":ce=se=null;for(N in a)if(c=a[N],a.hasOwnProperty(N)&&c!=null&&!l.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:St(e,t,N,null,l,c)}for(_ in l)if(c=l[_],u=a[_],l.hasOwnProperty(_)&&(c!=null||u!=null))switch(_){case"value":se=c;break;case"defaultValue":ce=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(m(91));break;default:c!==u&&St(e,t,_,c,l,u)}Ya(e,se,ce);return;case"option":for(var Me in a)if(se=a[Me],a.hasOwnProperty(Me)&&se!=null&&!l.hasOwnProperty(Me))switch(Me){case"selected":e.selected=!1;break;default:St(e,t,Me,null,l,se)}for(O in l)if(se=l[O],ce=a[O],l.hasOwnProperty(O)&&se!==ce&&(se!=null||ce!=null))switch(O){case"selected":e.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:St(e,t,O,se,l,ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ge in a)se=a[Ge],a.hasOwnProperty(Ge)&&se!=null&&!l.hasOwnProperty(Ge)&&St(e,t,Ge,null,l,se);for(ne in l)if(se=l[ne],ce=a[ne],l.hasOwnProperty(ne)&&se!==ce&&(se!=null||ce!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(m(137,t));break;default:St(e,t,ne,se,l,ce)}return;default:if(vs(t)){for(var Nt in a)se=a[Nt],a.hasOwnProperty(Nt)&&se!==void 0&&!l.hasOwnProperty(Nt)&&gd(e,t,Nt,void 0,l,se);for(de in l)se=l[de],ce=a[de],!l.hasOwnProperty(de)||se===ce||se===void 0&&ce===void 0||gd(e,t,de,se,l,ce);return}}for(var q in a)se=a[q],a.hasOwnProperty(q)&&se!=null&&!l.hasOwnProperty(q)&&St(e,t,q,null,l,se);for(pe in l)se=l[pe],ce=a[pe],!l.hasOwnProperty(pe)||se===ce||se==null&&ce==null||St(e,t,pe,se,l,ce)}function Im(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Bv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var c=a[l],u=c.transferSize,_=c.initiatorType,N=c.duration;if(u&&N&&Im(_)){for(_=0,N=c.responseEnd,l+=1;l<a.length;l++){var O=a[l],ne=O.startTime;if(ne>N)break;var de=O.transferSize,pe=O.initiatorType;de&&Im(pe)&&(O=O.responseEnd,_+=de*(O<N?1:(N-ne)/(O-ne)))}if(--l,t+=8*(u+_)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var vd=null,_d=null;function ac(e){return e.nodeType===9?e:e.ownerDocument}function Gm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function yd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var xd=null;function Pv(){var e=window.event;return e&&e.type==="popstate"?e===xd?!1:(xd=e,!0):(xd=null,!1)}var $m=typeof setTimeout=="function"?setTimeout:void 0,Uv=typeof clearTimeout=="function"?clearTimeout:void 0,Ym=typeof Promise=="function"?Promise:void 0,Hv=typeof queueMicrotask=="function"?queueMicrotask:typeof Ym<"u"?function(e){return Ym.resolve(null).then(e).catch(Zv)}:$m;function Zv(e){setTimeout(function(){throw e})}function ls(e){return e==="head"}function Vm(e,t){var a=t,l=0;do{var c=a.nextSibling;if(e.removeChild(a),c&&c.nodeType===8)if(a=c.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(c),zl(t);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Mr(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Mr(a);for(var u=a.firstChild;u;){var _=u.nextSibling,N=u.nodeName;u[ae]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&u.rel.toLowerCase()==="stylesheet"||a.removeChild(u),u=_}}else a==="body"&&Mr(e.ownerDocument.body);a=c}while(a);zl(t)}function Fm(e,t){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function bd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":bd(a),Be(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Iv(e,t,a,l){for(;e.nodeType===1;){var c=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[ae])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=xa(e.nextSibling),e===null)break}return null}function Gv(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=xa(e.nextSibling),e===null))return null;return e}function Km(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=xa(e.nextSibling),e===null))return null;return e}function jd(e){return e.data==="$?"||e.data==="$~"}function wd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function qv(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var l=function(){t(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function xa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Sd=null;function Xm(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return xa(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function Qm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function Wm(e,t,a){switch(t=ac(a),e){case"html":if(e=t.documentElement,!e)throw Error(m(452));return e;case"head":if(e=t.head,!e)throw Error(m(453));return e;case"body":if(e=t.body,!e)throw Error(m(454));return e;default:throw Error(m(451))}}function Mr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Be(e)}var ba=new Map,Jm=new Set;function ic(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ci=B.d;B.d={f:$v,r:Yv,D:Vv,C:Fv,L:Kv,m:Xv,X:Wv,S:Qv,M:Jv};function $v(){var e=Ci.f(),t=Ko();return e||t}function Yv(e){var t=Ae(e);t!==null&&t.tag===5&&t.type==="form"?gf(t):Ci.r(e)}var Ll=typeof document>"u"?null:document;function ep(e,t,a){var l=Ll;if(l&&typeof t=="string"&&t){var c=We(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof a=="string"&&(c+='[crossorigin="'+a+'"]'),Jm.has(c)||(Jm.add(c),e={rel:e,crossOrigin:a,href:t},l.querySelector(c)===null&&(t=l.createElement("link"),_n(t,"link",e),ze(t),l.head.appendChild(t)))}}function Vv(e){Ci.D(e),ep("dns-prefetch",e,null)}function Fv(e,t){Ci.C(e,t),ep("preconnect",e,t)}function Kv(e,t,a){Ci.L(e,t,a);var l=Ll;if(l&&e&&t){var c='link[rel="preload"][as="'+We(t)+'"]';t==="image"&&a&&a.imageSrcSet?(c+='[imagesrcset="'+We(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(c+='[imagesizes="'+We(a.imageSizes)+'"]')):c+='[href="'+We(e)+'"]';var u=c;switch(t){case"style":u=kl(e);break;case"script":u=Ml(e)}ba.has(u)||(e=S({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),ba.set(u,e),l.querySelector(c)!==null||t==="style"&&l.querySelector(zr(u))||t==="script"&&l.querySelector(Rr(u))||(t=l.createElement("link"),_n(t,"link",e),ze(t),l.head.appendChild(t)))}}function Xv(e,t){Ci.m(e,t);var a=Ll;if(a&&e){var l=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+We(l)+'"][href="'+We(e)+'"]',u=c;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=Ml(e)}if(!ba.has(u)&&(e=S({rel:"modulepreload",href:e},t),ba.set(u,e),a.querySelector(c)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Rr(u)))return}l=a.createElement("link"),_n(l,"link",e),ze(l),a.head.appendChild(l)}}}function Qv(e,t,a){Ci.S(e,t,a);var l=Ll;if(l&&e){var c=_t(l).hoistableStyles,u=kl(e);t=t||"default";var _=c.get(u);if(!_){var N={loading:0,preload:null};if(_=l.querySelector(zr(u)))N.loading=5;else{e=S({rel:"stylesheet",href:e,"data-precedence":t},a),(a=ba.get(u))&&Nd(e,a);var O=_=l.createElement("link");ze(O),_n(O,"link",e),O._p=new Promise(function(ne,de){O.onload=ne,O.onerror=de}),O.addEventListener("load",function(){N.loading|=1}),O.addEventListener("error",function(){N.loading|=2}),N.loading|=4,sc(_,t,l)}_={type:"stylesheet",instance:_,count:1,state:N},c.set(u,_)}}}function Wv(e,t){Ci.X(e,t);var a=Ll;if(a&&e){var l=_t(a).hoistableScripts,c=Ml(e),u=l.get(c);u||(u=a.querySelector(Rr(c)),u||(e=S({src:e,async:!0},t),(t=ba.get(c))&&Cd(e,t),u=a.createElement("script"),ze(u),_n(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},l.set(c,u))}}function Jv(e,t){Ci.M(e,t);var a=Ll;if(a&&e){var l=_t(a).hoistableScripts,c=Ml(e),u=l.get(c);u||(u=a.querySelector(Rr(c)),u||(e=S({src:e,async:!0,type:"module"},t),(t=ba.get(c))&&Cd(e,t),u=a.createElement("script"),ze(u),_n(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},l.set(c,u))}}function tp(e,t,a,l){var c=(c=be.current)?ic(c):null;if(!c)throw Error(m(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=kl(a.href),a=_t(c).hoistableStyles,l=a.get(t),l||(l={type:"style",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=kl(a.href);var u=_t(c).hoistableStyles,_=u.get(e);if(_||(c=c.ownerDocument||c,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,_),(u=c.querySelector(zr(e)))&&!u._p&&(_.instance=u,_.state.loading=5),ba.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ba.set(e,a),u||e_(c,e,a,_.state))),t&&l===null)throw Error(m(528,""));return _}if(t&&l!==null)throw Error(m(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ml(a),a=_t(c).hoistableScripts,l=a.get(t),l||(l={type:"script",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(m(444,e))}}function kl(e){return'href="'+We(e)+'"'}function zr(e){return'link[rel="stylesheet"]['+e+"]"}function np(e){return S({},e,{"data-precedence":e.precedence,precedence:null})}function e_(e,t,a,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),_n(t,"link",a),ze(t),e.head.appendChild(t))}function Ml(e){return'[src="'+We(e)+'"]'}function Rr(e){return"script[async]"+e}function ap(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+We(a.href)+'"]');if(l)return t.instance=l,ze(l),l;var c=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),ze(l),_n(l,"style",c),sc(l,a.precedence,e),t.instance=l;case"stylesheet":c=kl(a.href);var u=e.querySelector(zr(c));if(u)return t.state.loading|=4,t.instance=u,ze(u),u;l=np(a),(c=ba.get(c))&&Nd(l,c),u=(e.ownerDocument||e).createElement("link"),ze(u);var _=u;return _._p=new Promise(function(N,O){_.onload=N,_.onerror=O}),_n(u,"link",l),t.state.loading|=4,sc(u,a.precedence,e),t.instance=u;case"script":return u=Ml(a.src),(c=e.querySelector(Rr(u)))?(t.instance=c,ze(c),c):(l=a,(c=ba.get(u))&&(l=S({},a),Cd(l,c)),e=e.ownerDocument||e,c=e.createElement("script"),ze(c),_n(c,"link",l),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(m(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,sc(l,a.precedence,e));return t.instance}function sc(e,t,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=l.length?l[l.length-1]:null,u=c,_=0;_<l.length;_++){var N=l[_];if(N.dataset.precedence===t)u=N;else if(u!==c)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Nd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Cd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var lc=null;function ip(e,t,a){if(lc===null){var l=new Map,c=lc=new Map;c.set(a,l)}else c=lc,l=c.get(a),l||(l=new Map,c.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),c=0;c<a.length;c++){var u=a[c];if(!(u[ae]||u[Lt]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var _=u.getAttribute(t)||"";_=e+_;var N=l.get(_);N?N.push(u):l.set(_,[u])}}return l}function sp(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function t_(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function lp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function n_(e,t,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var c=kl(l.href),u=t.querySelector(zr(c));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=rc.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=u,ze(u);return}u=t.ownerDocument||t,l=np(l),(c=ba.get(c))&&Nd(l,c),u=u.createElement("link"),ze(u);var _=u;_._p=new Promise(function(N,O){_.onload=N,_.onerror=O}),_n(u,"link",l),a.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=rc.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var Ed=0;function a_(e,t){return e.stylesheets&&e.count===0&&cc(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&cc(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&Ed===0&&(Ed=62500*Bv());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&cc(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>Ed?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(c)}}:null}function rc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)cc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var oc=null;function cc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,oc=new Map,t.forEach(i_,e),oc=null,rc.call(e))}function i_(e,t){if(!(t.state.loading&4)){var a=oc.get(e);if(a)var l=a.get(null);else{a=new Map,oc.set(e,a);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<c.length;u++){var _=c[u];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}c=t.instance,_=c.getAttribute("data-precedence"),u=a.get(_)||l,u===l&&a.set(null,c),a.set(_,c),this.count++,l=rc.bind(this),c.addEventListener("load",l),c.addEventListener("error",l),u?u.parentNode.insertBefore(c,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var Or={$$typeof:$,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function s_(e,t,a,l,c,u,_,N,O){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ri(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ri(0),this.hiddenUpdates=ri(null),this.identifierPrefix=l,this.onUncaughtError=c,this.onCaughtError=u,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function rp(e,t,a,l,c,u,_,N,O,ne,de,pe){return e=new s_(e,t,a,_,O,ne,de,pe,N),t=1,u===!0&&(t|=24),u=Sn(3,null,null,t),e.current=u,u.stateNode=e,t=lu(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:l,isDehydrated:a,cache:t},uu(u),e}function op(e){return e?(e=hi,e):hi}function cp(e,t,a,l,c,u){c=op(c),l.context===null?l.context=c:l.pendingContext=c,l=Ki(t),l.payload={element:a},u=u===void 0?null:u,u!==null&&(l.callback=u),a=Xi(e,l,t),a!==null&&(Yn(a,e,t),fr(a,e,t))}function up(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Td(e,t){up(e,t),(e=e.alternate)&&up(e,t)}function dp(e){if(e.tag===13||e.tag===31){var t=va(e,67108864);t!==null&&Yn(t,e,67108864),Td(e,67108864)}}function hp(e){if(e.tag===13||e.tag===31){var t=la();t=qt(t);var a=va(e,t);a!==null&&Yn(a,e,t),Td(e,t)}}var uc=!0;function l_(e,t,a,l){var c=J.T;J.T=null;var u=B.p;try{B.p=2,Ad(e,t,a,l)}finally{B.p=u,J.T=c}}function r_(e,t,a,l){var c=J.T;J.T=null;var u=B.p;try{B.p=8,Ad(e,t,a,l)}finally{B.p=u,J.T=c}}function Ad(e,t,a,l){if(uc){var c=Ld(l);if(c===null)pd(e,t,l,dc,a),mp(e,l);else if(c_(c,e,t,a,l))l.stopPropagation();else if(mp(e,l),t&4&&-1<o_.indexOf(e)){for(;c!==null;){var u=Ae(c);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var _=et(u.pendingLanes);if(_!==0){var N=u;for(N.pendingLanes|=2,N.entangledLanes|=2;_;){var O=1<<31-Gt(_);N.entanglements[1]|=O,_&=~O}ii(u),(pt&6)===0&&(Vo=Ot()+500,Ar(0))}}break;case 31:case 13:N=va(u,2),N!==null&&Yn(N,u,2),Ko(),Td(u,2)}if(u=Ld(l),u===null&&pd(e,t,l,dc,a),u===c)break;c=u}c!==null&&l.stopPropagation()}else pd(e,t,l,null,a)}}function Ld(e){return e=_s(e),kd(e)}var dc=null;function kd(e){if(dc=null,e=Ue(e),e!==null){var t=b(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=j(t),e!==null)return e;e=null}else if(a===31){if(e=C(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return dc=e,null}function fp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ha()){case Rn:return 2;case en:return 8;case Tt:case Za:return 32;case Ia:return 268435456;default:return 32}default:return 32}}var Md=!1,rs=null,os=null,cs=null,Dr=new Map,Br=new Map,us=[],o_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mp(e,t){switch(e){case"focusin":case"focusout":rs=null;break;case"dragenter":case"dragleave":os=null;break;case"mouseover":case"mouseout":cs=null;break;case"pointerover":case"pointerout":Dr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Br.delete(t.pointerId)}}function Pr(e,t,a,l,c,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:a,eventSystemFlags:l,nativeEvent:u,targetContainers:[c]},t!==null&&(t=Ae(t),t!==null&&dp(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function c_(e,t,a,l,c){switch(t){case"focusin":return rs=Pr(rs,e,t,a,l,c),!0;case"dragenter":return os=Pr(os,e,t,a,l,c),!0;case"mouseover":return cs=Pr(cs,e,t,a,l,c),!0;case"pointerover":var u=c.pointerId;return Dr.set(u,Pr(Dr.get(u)||null,e,t,a,l,c)),!0;case"gotpointercapture":return u=c.pointerId,Br.set(u,Pr(Br.get(u)||null,e,t,a,l,c)),!0}return!1}function pp(e){var t=Ue(e.target);if(t!==null){var a=b(t);if(a!==null){if(t=a.tag,t===13){if(t=j(a),t!==null){e.blockedOn=t,qa(e.priority,function(){hp(a)});return}}else if(t===31){if(t=C(a),t!==null){e.blockedOn=t,qa(e.priority,function(){hp(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Ld(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Qs=l,a.target.dispatchEvent(l),Qs=null}else return t=Ae(a),t!==null&&dp(t),e.blockedOn=a,!1;t.shift()}return!0}function gp(e,t,a){hc(e)&&a.delete(t)}function u_(){Md=!1,rs!==null&&hc(rs)&&(rs=null),os!==null&&hc(os)&&(os=null),cs!==null&&hc(cs)&&(cs=null),Dr.forEach(gp),Br.forEach(gp)}function fc(e,t){e.blockedOn===t&&(e.blockedOn=null,Md||(Md=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,u_)))}var mc=null;function vp(e){mc!==e&&(mc=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){mc===e&&(mc=null);for(var t=0;t<e.length;t+=3){var a=e[t],l=e[t+1],c=e[t+2];if(typeof l!="function"){if(kd(l||a)===null)continue;break}var u=Ae(a);u!==null&&(e.splice(t,3),t-=3,Lu(u,{pending:!0,data:c,method:a.method,action:l},l,c))}}))}function zl(e){function t(O){return fc(O,e)}rs!==null&&fc(rs,e),os!==null&&fc(os,e),cs!==null&&fc(cs,e),Dr.forEach(t),Br.forEach(t);for(var a=0;a<us.length;a++){var l=us[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<us.length&&(a=us[0],a.blockedOn===null);)pp(a),a.blockedOn===null&&us.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var c=a[l],u=a[l+1],_=c[kt]||null;if(typeof u=="function")_||vp(a);else if(_){var N=null;if(u&&u.hasAttribute("formAction")){if(c=u,_=u[kt]||null)N=_.formAction;else if(kd(c)!==null)continue}else N=_.action;typeof N=="function"?a[l+1]=N:(a.splice(l,3),l-=3),vp(a)}}}function _p(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(_){return c=_})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function zd(e){this._internalRoot=e}pc.prototype.render=zd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(m(409));var a=t.current,l=la();cp(a,l,e,t,null,null)},pc.prototype.unmount=zd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;cp(e.current,2,null,e,null,null),Ko(),t[Qn]=null}};function pc(e){this._internalRoot=e}pc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ga();e={blockedOn:null,target:e,priority:t};for(var a=0;a<us.length&&t!==0&&t<us[a].priority;a++);us.splice(a,0,e),a===0&&pp(e)}};var yp=d.version;if(yp!=="19.2.0")throw Error(m(527,yp,"19.2.0"));B.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(m(188)):(e=Object.keys(e).join(","),Error(m(268,e)));return e=x(t),e=e!==null?E(e):null,e=e===null?null:e.stateNode,e};var d_={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gc.isDisabled&&gc.supportsFiber)try{En=gc.inject(d_),It=gc}catch{}}return Hr.createRoot=function(e,t){if(!p(e))throw Error(m(299));var a=!1,l="",c=Cf,u=Ef,_=Tf;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(_=t.onRecoverableError)),t=rp(e,1,!1,null,null,a,l,null,c,u,_,_p),e[Qn]=t.current,md(e),new zd(t)},Hr.hydrateRoot=function(e,t,a){if(!p(e))throw Error(m(299));var l=!1,c="",u=Cf,_=Ef,N=Tf,O=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(u=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(N=a.onRecoverableError),a.formState!==void 0&&(O=a.formState)),t=rp(e,1,!0,t,a??null,l,c,O,u,_,N,_p),t.context=op(null),a=t.current,l=la(),l=qt(l),c=Ki(l),c.callback=null,Xi(a,c,l),a=l,t.current.lanes=a,Xn(t,a),ii(t),e[Qn]=t.current,md(e),new pc(t)},Hr.version="19.2.0",Hr}var Ap;function x_(){if(Ap)return Dd.exports;Ap=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(d){console.error(d)}}return r(),Dd.exports=y_(),Dd.exports}var b_=x_();const j_=ah(b_);/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Lp="popstate";function w_(r={}){function d(m,p){let{pathname:b,search:j,hash:C}=m.location;return zc("",{pathname:b,search:j,hash:C},p.state&&p.state.usr||null,p.state&&p.state.key||"default")}function f(m,p){return typeof p=="string"?p:Bl(p)}return _g(d,f,null,r)}function S_(r={}){function d(p,b){let{pathname:j="/",search:C="",hash:y=""}=Fs(p.location.hash.substring(1));return!j.startsWith("/")&&!j.startsWith(".")&&(j="/"+j),zc("",{pathname:j,search:C,hash:y},b.state&&b.state.usr||null,b.state&&b.state.key||"default")}function f(p,b){let j=p.document.querySelector("base"),C="";if(j&&j.getAttribute("href")){let y=p.location.href,x=y.indexOf("#");C=x===-1?y:y.slice(0,x)}return C+"#"+(typeof b=="string"?b:Bl(b))}function m(p,b){oa(p.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(b)})`)}return _g(d,f,m,r)}function zt(r,d){if(r===!1||r===null||typeof r>"u")throw new Error(d)}function oa(r,d){if(!r){typeof console<"u"&&console.warn(d);try{throw new Error(d)}catch{}}}function N_(){return Math.random().toString(36).substring(2,10)}function kp(r,d){return{usr:r.state,key:r.key,idx:d}}function zc(r,d,f=null,m){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof d=="string"?Fs(d):d,state:f,key:d&&d.key||m||N_()}}function Bl({pathname:r="/",search:d="",hash:f=""}){return d&&d!=="?"&&(r+=d.charAt(0)==="?"?d:"?"+d),f&&f!=="#"&&(r+=f.charAt(0)==="#"?f:"#"+f),r}function Fs(r){let d={};if(r){let f=r.indexOf("#");f>=0&&(d.hash=r.substring(f),r=r.substring(0,f));let m=r.indexOf("?");m>=0&&(d.search=r.substring(m),r=r.substring(0,m)),r&&(d.pathname=r)}return d}function _g(r,d,f,m={}){let{window:p=document.defaultView,v5Compat:b=!1}=m,j=p.history,C="POP",y=null,x=E();x==null&&(x=0,j.replaceState({...j.state,idx:x},""));function E(){return(j.state||{idx:null}).idx}function S(){C="POP";let I=E(),R=I==null?null:I-x;x=I,y&&y({action:C,location:Z.location,delta:R})}function A(I,R){C="PUSH";let D=zc(Z.location,I,R);f&&f(D,I),x=E()+1;let $=kp(D,x),G=Z.createHref(D);try{j.pushState($,"",G)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;p.location.assign(G)}b&&y&&y({action:C,location:Z.location,delta:1})}function k(I,R){C="REPLACE";let D=zc(Z.location,I,R);f&&f(D,I),x=E();let $=kp(D,x),G=Z.createHref(D);j.replaceState($,"",G),b&&y&&y({action:C,location:Z.location,delta:0})}function z(I){return C_(I)}let Z={get action(){return C},get location(){return r(p,j)},listen(I){if(y)throw new Error("A history only accepts one active listener");return p.addEventListener(Lp,S),y=I,()=>{p.removeEventListener(Lp,S),y=null}},createHref(I){return d(p,I)},createURL:z,encodeLocation(I){let R=z(I);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:A,replace:k,go(I){return j.go(I)}};return Z}function C_(r,d=!1){let f="http://localhost";typeof window<"u"&&(f=window.location.origin!=="null"?window.location.origin:window.location.href),zt(f,"No window.location.(origin|href) available to create URL");let m=typeof r=="string"?r:Bl(r);return m=m.replace(/ $/,"%20"),!d&&m.startsWith("//")&&(m=f+m),new URL(m,f)}function yg(r,d,f="/"){return E_(r,d,f,!1)}function E_(r,d,f,m){let p=typeof d=="string"?Fs(d):d,b=Ti(p.pathname||"/",f);if(b==null)return null;let j=xg(r);T_(j);let C=null;for(let y=0;C==null&&y<j.length;++y){let x=U_(b);C=B_(j[y],x,m)}return C}function xg(r,d=[],f=[],m="",p=!1){let b=(j,C,y=p,x)=>{let E={relativePath:x===void 0?j.path||"":x,caseSensitive:j.caseSensitive===!0,childrenIndex:C,route:j};if(E.relativePath.startsWith("/")){if(!E.relativePath.startsWith(m)&&y)return;zt(E.relativePath.startsWith(m),`Absolute route path "${E.relativePath}" nested under path "${m}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),E.relativePath=E.relativePath.slice(m.length)}let S=Ei([m,E.relativePath]),A=f.concat(E);j.children&&j.children.length>0&&(zt(j.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${S}".`),xg(j.children,d,A,S,y)),!(j.path==null&&!j.index)&&d.push({path:S,score:O_(S,j.index),routesMeta:A})};return r.forEach((j,C)=>{if(j.path===""||!j.path?.includes("?"))b(j,C);else for(let y of bg(j.path))b(j,C,!0,y)}),d}function bg(r){let d=r.split("/");if(d.length===0)return[];let[f,...m]=d,p=f.endsWith("?"),b=f.replace(/\?$/,"");if(m.length===0)return p?[b,""]:[b];let j=bg(m.join("/")),C=[];return C.push(...j.map(y=>y===""?b:[b,y].join("/"))),p&&C.push(...j),C.map(y=>r.startsWith("/")&&y===""?"/":y)}function T_(r){r.sort((d,f)=>d.score!==f.score?f.score-d.score:D_(d.routesMeta.map(m=>m.childrenIndex),f.routesMeta.map(m=>m.childrenIndex)))}var A_=/^:[\w-]+$/,L_=3,k_=2,M_=1,z_=10,R_=-2,Mp=r=>r==="*";function O_(r,d){let f=r.split("/"),m=f.length;return f.some(Mp)&&(m+=R_),d&&(m+=k_),f.filter(p=>!Mp(p)).reduce((p,b)=>p+(A_.test(b)?L_:b===""?M_:z_),m)}function D_(r,d){return r.length===d.length&&r.slice(0,-1).every((m,p)=>m===d[p])?r[r.length-1]-d[d.length-1]:0}function B_(r,d,f=!1){let{routesMeta:m}=r,p={},b="/",j=[];for(let C=0;C<m.length;++C){let y=m[C],x=C===m.length-1,E=b==="/"?d:d.slice(b.length)||"/",S=Rc({path:y.relativePath,caseSensitive:y.caseSensitive,end:x},E),A=y.route;if(!S&&x&&f&&!m[m.length-1].route.index&&(S=Rc({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},E)),!S)return null;Object.assign(p,S.params),j.push({params:p,pathname:Ei([b,S.pathname]),pathnameBase:q_(Ei([b,S.pathnameBase])),route:A}),S.pathnameBase!=="/"&&(b=Ei([b,S.pathnameBase]))}return j}function Rc(r,d){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[f,m]=P_(r.path,r.caseSensitive,r.end),p=d.match(f);if(!p)return null;let b=p[0],j=b.replace(/(.)\/+$/,"$1"),C=p.slice(1);return{params:m.reduce((x,{paramName:E,isOptional:S},A)=>{if(E==="*"){let z=C[A]||"";j=b.slice(0,b.length-z.length).replace(/(.)\/+$/,"$1")}const k=C[A];return S&&!k?x[E]=void 0:x[E]=(k||"").replace(/%2F/g,"/"),x},{}),pathname:b,pathnameBase:j,pattern:r}}function P_(r,d=!1,f=!0){oa(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let m=[],p="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(j,C,y)=>(m.push({paramName:C,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(m.push({paramName:"*"}),p+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):f?p+="\\/*$":r!==""&&r!=="/"&&(p+="(?:(?=\\/|$))"),[new RegExp(p,d?void 0:"i"),m]}function U_(r){try{return r.split("/").map(d=>decodeURIComponent(d).replace(/\//g,"%2F")).join("/")}catch(d){return oa(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${d}).`),r}}function Ti(r,d){if(d==="/")return r;if(!r.toLowerCase().startsWith(d.toLowerCase()))return null;let f=d.endsWith("/")?d.length-1:d.length,m=r.charAt(f);return m&&m!=="/"?null:r.slice(f)||"/"}var H_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Z_=r=>H_.test(r);function I_(r,d="/"){let{pathname:f,search:m="",hash:p=""}=typeof r=="string"?Fs(r):r,b;if(f)if(Z_(f))b=f;else{if(f.includes("//")){let j=f;f=f.replace(/\/\/+/g,"/"),oa(!1,`Pathnames cannot have embedded double slashes - normalizing ${j} -> ${f}`)}f.startsWith("/")?b=zp(f.substring(1),"/"):b=zp(f,d)}else b=d;return{pathname:b,search:$_(m),hash:Y_(p)}}function zp(r,d){let f=d.replace(/\/+$/,"").split("/");return r.split("/").forEach(p=>{p===".."?f.length>1&&f.pop():p!=="."&&f.push(p)}),f.length>1?f.join("/"):"/"}function Hd(r,d,f,m){return`Cannot include a '${r}' character in a manually specified \`to.${d}\` field [${JSON.stringify(m)}].  Please separate it out to the \`to.${f}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function G_(r){return r.filter((d,f)=>f===0||d.route.path&&d.route.path.length>0)}function sh(r){let d=G_(r);return d.map((f,m)=>m===d.length-1?f.pathname:f.pathnameBase)}function lh(r,d,f,m=!1){let p;typeof r=="string"?p=Fs(r):(p={...r},zt(!p.pathname||!p.pathname.includes("?"),Hd("?","pathname","search",p)),zt(!p.pathname||!p.pathname.includes("#"),Hd("#","pathname","hash",p)),zt(!p.search||!p.search.includes("#"),Hd("#","search","hash",p)));let b=r===""||p.pathname==="",j=b?"/":p.pathname,C;if(j==null)C=f;else{let S=d.length-1;if(!m&&j.startsWith("..")){let A=j.split("/");for(;A[0]==="..";)A.shift(),S-=1;p.pathname=A.join("/")}C=S>=0?d[S]:"/"}let y=I_(p,C),x=j&&j!=="/"&&j.endsWith("/"),E=(b||j===".")&&f.endsWith("/");return!y.pathname.endsWith("/")&&(x||E)&&(y.pathname+="/"),y}var Ei=r=>r.join("/").replace(/\/\/+/g,"/"),q_=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),$_=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Y_=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function V_(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var jg=["POST","PUT","PATCH","DELETE"];new Set(jg);var F_=["GET",...jg];new Set(F_);var Hl=g.createContext(null);Hl.displayName="DataRouter";var Oc=g.createContext(null);Oc.displayName="DataRouterState";g.createContext(!1);var wg=g.createContext({isTransitioning:!1});wg.displayName="ViewTransition";var K_=g.createContext(new Map);K_.displayName="Fetchers";var X_=g.createContext(null);X_.displayName="Await";var Ua=g.createContext(null);Ua.displayName="Navigation";var Xr=g.createContext(null);Xr.displayName="Location";var Sa=g.createContext({outlet:null,matches:[],isDataRoute:!1});Sa.displayName="Route";var rh=g.createContext(null);rh.displayName="RouteError";function Q_(r,{relative:d}={}){zt(Zl(),"useHref() may be used only in the context of a <Router> component.");let{basename:f,navigator:m}=g.useContext(Ua),{hash:p,pathname:b,search:j}=Qr(r,{relative:d}),C=b;return f!=="/"&&(C=b==="/"?f:Ei([f,b])),m.createHref({pathname:C,search:j,hash:p})}function Zl(){return g.useContext(Xr)!=null}function si(){return zt(Zl(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(Xr).location}var Sg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ng(r){g.useContext(Ua).static||g.useLayoutEffect(r)}function Ai(){let{isDataRoute:r}=g.useContext(Sa);return r?hy():W_()}function W_(){zt(Zl(),"useNavigate() may be used only in the context of a <Router> component.");let r=g.useContext(Hl),{basename:d,navigator:f}=g.useContext(Ua),{matches:m}=g.useContext(Sa),{pathname:p}=si(),b=JSON.stringify(sh(m)),j=g.useRef(!1);return Ng(()=>{j.current=!0}),g.useCallback((y,x={})=>{if(oa(j.current,Sg),!j.current)return;if(typeof y=="number"){f.go(y);return}let E=lh(y,JSON.parse(b),p,x.relative==="path");r==null&&d!=="/"&&(E.pathname=E.pathname==="/"?d:Ei([d,E.pathname])),(x.replace?f.replace:f.push)(E,x.state,x)},[d,f,b,p,r])}var J_=g.createContext(null);function ey(r){let d=g.useContext(Sa).outlet;return g.useMemo(()=>d&&g.createElement(J_.Provider,{value:r},d),[d,r])}function oh(){let{matches:r}=g.useContext(Sa),d=r[r.length-1];return d?d.params:{}}function Qr(r,{relative:d}={}){let{matches:f}=g.useContext(Sa),{pathname:m}=si(),p=JSON.stringify(sh(f));return g.useMemo(()=>lh(r,JSON.parse(p),m,d==="path"),[r,p,m,d])}function ty(r,d){return Cg(r,d)}function Cg(r,d,f,m,p){zt(Zl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:b}=g.useContext(Ua),{matches:j}=g.useContext(Sa),C=j[j.length-1],y=C?C.params:{},x=C?C.pathname:"/",E=C?C.pathnameBase:"/",S=C&&C.route;{let D=S&&S.path||"";Eg(x,!S||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let A=si(),k;if(d){let D=typeof d=="string"?Fs(d):d;zt(E==="/"||D.pathname?.startsWith(E),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${D.pathname}" was given in the \`location\` prop.`),k=D}else k=A;let z=k.pathname||"/",Z=z;if(E!=="/"){let D=E.replace(/^\//,"").split("/");Z="/"+z.replace(/^\//,"").split("/").slice(D.length).join("/")}let I=yg(r,{pathname:Z});oa(S||I!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),oa(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=ly(I&&I.map(D=>Object.assign({},D,{params:Object.assign({},y,D.params),pathname:Ei([E,b.encodeLocation?b.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?E:Ei([E,b.encodeLocation?b.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),j,f,m,p);return d&&R?g.createElement(Xr.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...k},navigationType:"POP"}},R):R}function ny(){let r=dy(),d=V_(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),f=r instanceof Error?r.stack:null,m="rgba(200,200,200, 0.5)",p={padding:"0.5rem",backgroundColor:m},b={padding:"2px 4px",backgroundColor:m},j=null;return console.error("Error handled by React Router default ErrorBoundary:",r),j=g.createElement(g.Fragment,null,g.createElement("p",null," Hey developer "),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:b},"ErrorBoundary")," or"," ",g.createElement("code",{style:b},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},d),f?g.createElement("pre",{style:p},f):null,j)}var ay=g.createElement(ny,null),iy=class extends g.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,d){return d.location!==r.location||d.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:d.error,location:d.location,revalidation:r.revalidation||d.revalidation}}componentDidCatch(r,d){this.props.onError?this.props.onError(r,d):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?g.createElement(Sa.Provider,{value:this.props.routeContext},g.createElement(rh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function sy({routeContext:r,match:d,children:f}){let m=g.useContext(Hl);return m&&m.static&&m.staticContext&&(d.route.errorElement||d.route.ErrorBoundary)&&(m.staticContext._deepestRenderedBoundaryId=d.route.id),g.createElement(Sa.Provider,{value:r},f)}function ly(r,d=[],f=null,m=null,p=null){if(r==null){if(!f)return null;if(f.errors)r=f.matches;else if(d.length===0&&!f.initialized&&f.matches.length>0)r=f.matches;else return null}let b=r,j=f?.errors;if(j!=null){let E=b.findIndex(S=>S.route.id&&j?.[S.route.id]!==void 0);zt(E>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(j).join(",")}`),b=b.slice(0,Math.min(b.length,E+1))}let C=!1,y=-1;if(f)for(let E=0;E<b.length;E++){let S=b[E];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(y=E),S.route.id){let{loaderData:A,errors:k}=f,z=S.route.loader&&!A.hasOwnProperty(S.route.id)&&(!k||k[S.route.id]===void 0);if(S.route.lazy||z){C=!0,y>=0?b=b.slice(0,y+1):b=[b[0]];break}}}let x=f&&m?(E,S)=>{m(E,{location:f.location,params:f.matches?.[0]?.params??{},errorInfo:S})}:void 0;return b.reduceRight((E,S,A)=>{let k,z=!1,Z=null,I=null;f&&(k=j&&S.route.id?j[S.route.id]:void 0,Z=S.route.errorElement||ay,C&&(y<0&&A===0?(Eg("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),z=!0,I=null):y===A&&(z=!0,I=S.route.hydrateFallbackElement||null)));let R=d.concat(b.slice(0,A+1)),D=()=>{let $;return k?$=Z:z?$=I:S.route.Component?$=g.createElement(S.route.Component,null):S.route.element?$=S.route.element:$=E,g.createElement(sy,{match:S,routeContext:{outlet:E,matches:R,isDataRoute:f!=null},children:$})};return f&&(S.route.ErrorBoundary||S.route.errorElement||A===0)?g.createElement(iy,{location:f.location,revalidation:f.revalidation,component:Z,error:k,children:D(),routeContext:{outlet:null,matches:R,isDataRoute:!0},onError:x}):D()},null)}function ch(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ry(r){let d=g.useContext(Hl);return zt(d,ch(r)),d}function oy(r){let d=g.useContext(Oc);return zt(d,ch(r)),d}function cy(r){let d=g.useContext(Sa);return zt(d,ch(r)),d}function uh(r){let d=cy(r),f=d.matches[d.matches.length-1];return zt(f.route.id,`${r} can only be used on routes that contain a unique "id"`),f.route.id}function uy(){return uh("useRouteId")}function dy(){let r=g.useContext(rh),d=oy("useRouteError"),f=uh("useRouteError");return r!==void 0?r:d.errors?.[f]}function hy(){let{router:r}=ry("useNavigate"),d=uh("useNavigate"),f=g.useRef(!1);return Ng(()=>{f.current=!0}),g.useCallback(async(p,b={})=>{oa(f.current,Sg),f.current&&(typeof p=="number"?r.navigate(p):await r.navigate(p,{fromRouteId:d,...b}))},[r,d])}var Rp={};function Eg(r,d,f){!d&&!Rp[r]&&(Rp[r]=!0,oa(!1,f))}g.memo(fy);function fy({routes:r,future:d,state:f,unstable_onError:m}){return Cg(r,void 0,f,m,d)}function Op({to:r,replace:d,state:f,relative:m}){zt(Zl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:p}=g.useContext(Ua);oa(!p,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:b}=g.useContext(Sa),{pathname:j}=si(),C=Ai(),y=lh(r,sh(b),j,m==="path"),x=JSON.stringify(y);return g.useEffect(()=>{C(JSON.parse(x),{replace:d,state:f,relative:m})},[C,x,m,d,f]),null}function my(r){return ey(r.context)}function ft(r){zt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Tg({basename:r="/",children:d=null,location:f,navigationType:m="POP",navigator:p,static:b=!1}){zt(!Zl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let j=r.replace(/^\/*/,"/"),C=g.useMemo(()=>({basename:j,navigator:p,static:b,future:{}}),[j,p,b]);typeof f=="string"&&(f=Fs(f));let{pathname:y="/",search:x="",hash:E="",state:S=null,key:A="default"}=f,k=g.useMemo(()=>{let z=Ti(y,j);return z==null?null:{location:{pathname:z,search:x,hash:E,state:S,key:A},navigationType:m}},[j,y,x,E,S,A,m]);return oa(k!=null,`<Router basename="${j}"> is not able to match the URL "${y}${x}${E}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:g.createElement(Ua.Provider,{value:C},g.createElement(Xr.Provider,{children:d,value:k}))}function Ag({children:r,location:d}){return ty(Qd(r),d)}function Qd(r,d=[]){let f=[];return g.Children.forEach(r,(m,p)=>{if(!g.isValidElement(m))return;let b=[...d,p];if(m.type===g.Fragment){f.push.apply(f,Qd(m.props.children,b));return}zt(m.type===ft,`[${typeof m.type=="string"?m.type:m.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),zt(!m.props.index||!m.props.children,"An index route cannot have child routes.");let j={id:m.props.id||b.join("-"),caseSensitive:m.props.caseSensitive,element:m.props.element,Component:m.props.Component,index:m.props.index,path:m.props.path,middleware:m.props.middleware,loader:m.props.loader,action:m.props.action,hydrateFallbackElement:m.props.hydrateFallbackElement,HydrateFallback:m.props.HydrateFallback,errorElement:m.props.errorElement,ErrorBoundary:m.props.ErrorBoundary,hasErrorBoundary:m.props.hasErrorBoundary===!0||m.props.ErrorBoundary!=null||m.props.errorElement!=null,shouldRevalidate:m.props.shouldRevalidate,handle:m.props.handle,lazy:m.props.lazy};m.props.children&&(j.children=Qd(m.props.children,b)),f.push(j)}),f}var Ec="get",Tc="application/x-www-form-urlencoded";function Dc(r){return r!=null&&typeof r.tagName=="string"}function py(r){return Dc(r)&&r.tagName.toLowerCase()==="button"}function gy(r){return Dc(r)&&r.tagName.toLowerCase()==="form"}function vy(r){return Dc(r)&&r.tagName.toLowerCase()==="input"}function _y(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function yy(r,d){return r.button===0&&(!d||d==="_self")&&!_y(r)}var vc=null;function xy(){if(vc===null)try{new FormData(document.createElement("form"),0),vc=!1}catch{vc=!0}return vc}var by=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Zd(r){return r!=null&&!by.has(r)?(oa(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Tc}"`),null):r}function jy(r,d){let f,m,p,b,j;if(gy(r)){let C=r.getAttribute("action");m=C?Ti(C,d):null,f=r.getAttribute("method")||Ec,p=Zd(r.getAttribute("enctype"))||Tc,b=new FormData(r)}else if(py(r)||vy(r)&&(r.type==="submit"||r.type==="image")){let C=r.form;if(C==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=r.getAttribute("formaction")||C.getAttribute("action");if(m=y?Ti(y,d):null,f=r.getAttribute("formmethod")||C.getAttribute("method")||Ec,p=Zd(r.getAttribute("formenctype"))||Zd(C.getAttribute("enctype"))||Tc,b=new FormData(C,r),!xy()){let{name:x,type:E,value:S}=r;if(E==="image"){let A=x?`${x}.`:"";b.append(`${A}x`,"0"),b.append(`${A}y`,"0")}else x&&b.append(x,S)}}else{if(Dc(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');f=Ec,m=null,p=Tc,j=r}return b&&p==="text/plain"&&(j=b,b=void 0),{action:m,method:f.toLowerCase(),encType:p,formData:b,body:j}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function dh(r,d){if(r===!1||r===null||typeof r>"u")throw new Error(d)}function wy(r,d,f){let m=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return m.pathname==="/"?m.pathname=`_root.${f}`:d&&Ti(m.pathname,d)==="/"?m.pathname=`${d.replace(/\/$/,"")}/_root.${f}`:m.pathname=`${m.pathname.replace(/\/$/,"")}.${f}`,m}async function Sy(r,d){if(r.id in d)return d[r.id];try{let f=await import(r.module);return d[r.id]=f,f}catch(f){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(f),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ny(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function Cy(r,d,f){let m=await Promise.all(r.map(async p=>{let b=d.routes[p.route.id];if(b){let j=await Sy(b,f);return j.links?j.links():[]}return[]}));return Ly(m.flat(1).filter(Ny).filter(p=>p.rel==="stylesheet"||p.rel==="preload").map(p=>p.rel==="stylesheet"?{...p,rel:"prefetch",as:"style"}:{...p,rel:"prefetch"}))}function Dp(r,d,f,m,p,b){let j=(y,x)=>f[x]?y.route.id!==f[x].route.id:!0,C=(y,x)=>f[x].pathname!==y.pathname||f[x].route.path?.endsWith("*")&&f[x].params["*"]!==y.params["*"];return b==="assets"?d.filter((y,x)=>j(y,x)||C(y,x)):b==="data"?d.filter((y,x)=>{let E=m.routes[y.route.id];if(!E||!E.hasLoader)return!1;if(j(y,x)||C(y,x))return!0;if(y.route.shouldRevalidate){let S=y.route.shouldRevalidate({currentUrl:new URL(p.pathname+p.search+p.hash,window.origin),currentParams:f[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function Ey(r,d,{includeHydrateFallback:f}={}){return Ty(r.map(m=>{let p=d.routes[m.route.id];if(!p)return[];let b=[p.module];return p.clientActionModule&&(b=b.concat(p.clientActionModule)),p.clientLoaderModule&&(b=b.concat(p.clientLoaderModule)),f&&p.hydrateFallbackModule&&(b=b.concat(p.hydrateFallbackModule)),p.imports&&(b=b.concat(p.imports)),b}).flat(1))}function Ty(r){return[...new Set(r)]}function Ay(r){let d={},f=Object.keys(r).sort();for(let m of f)d[m]=r[m];return d}function Ly(r,d){let f=new Set;return new Set(d),r.reduce((m,p)=>{let b=JSON.stringify(Ay(p));return f.has(b)||(f.add(b),m.push({key:b,link:p})),m},[])}function Lg(){let r=g.useContext(Hl);return dh(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function ky(){let r=g.useContext(Oc);return dh(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var hh=g.createContext(void 0);hh.displayName="FrameworkContext";function kg(){let r=g.useContext(hh);return dh(r,"You must render this element inside a <HydratedRouter> element"),r}function My(r,d){let f=g.useContext(hh),[m,p]=g.useState(!1),[b,j]=g.useState(!1),{onFocus:C,onBlur:y,onMouseEnter:x,onMouseLeave:E,onTouchStart:S}=d,A=g.useRef(null);g.useEffect(()=>{if(r==="render"&&j(!0),r==="viewport"){let Z=R=>{R.forEach(D=>{j(D.isIntersecting)})},I=new IntersectionObserver(Z,{threshold:.5});return A.current&&I.observe(A.current),()=>{I.disconnect()}}},[r]),g.useEffect(()=>{if(m){let Z=setTimeout(()=>{j(!0)},100);return()=>{clearTimeout(Z)}}},[m]);let k=()=>{p(!0)},z=()=>{p(!1),j(!1)};return f?r!=="intent"?[b,A,{}]:[b,A,{onFocus:Zr(C,k),onBlur:Zr(y,z),onMouseEnter:Zr(x,k),onMouseLeave:Zr(E,z),onTouchStart:Zr(S,k)}]:[!1,A,{}]}function Zr(r,d){return f=>{r&&r(f),f.defaultPrevented||d(f)}}function zy({page:r,...d}){let{router:f}=Lg(),m=g.useMemo(()=>yg(f.routes,r,f.basename),[f.routes,r,f.basename]);return m?g.createElement(Oy,{page:r,matches:m,...d}):null}function Ry(r){let{manifest:d,routeModules:f}=kg(),[m,p]=g.useState([]);return g.useEffect(()=>{let b=!1;return Cy(r,d,f).then(j=>{b||p(j)}),()=>{b=!0}},[r,d,f]),m}function Oy({page:r,matches:d,...f}){let m=si(),{manifest:p,routeModules:b}=kg(),{basename:j}=Lg(),{loaderData:C,matches:y}=ky(),x=g.useMemo(()=>Dp(r,d,y,p,m,"data"),[r,d,y,p,m]),E=g.useMemo(()=>Dp(r,d,y,p,m,"assets"),[r,d,y,p,m]),S=g.useMemo(()=>{if(r===m.pathname+m.search+m.hash)return[];let z=new Set,Z=!1;if(d.forEach(R=>{let D=p.routes[R.route.id];!D||!D.hasLoader||(!x.some($=>$.route.id===R.route.id)&&R.route.id in C&&b[R.route.id]?.shouldRevalidate||D.hasClientLoader?Z=!0:z.add(R.route.id))}),z.size===0)return[];let I=wy(r,j,"data");return Z&&z.size>0&&I.searchParams.set("_routes",d.filter(R=>z.has(R.route.id)).map(R=>R.route.id).join(",")),[I.pathname+I.search]},[j,C,m,p,x,d,r,b]),A=g.useMemo(()=>Ey(E,p),[E,p]),k=Ry(E);return g.createElement(g.Fragment,null,S.map(z=>g.createElement("link",{key:z,rel:"prefetch",as:"fetch",href:z,...f})),A.map(z=>g.createElement("link",{key:z,rel:"modulepreload",href:z,...f})),k.map(({key:z,link:Z})=>g.createElement("link",{key:z,nonce:f.nonce,...Z})))}function Dy(...r){return d=>{r.forEach(f=>{typeof f=="function"?f(d):f!=null&&(f.current=d)})}}var Mg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Mg&&(window.__reactRouterVersion="7.9.6")}catch{}function By({basename:r,children:d,window:f}){let m=g.useRef();m.current==null&&(m.current=w_({window:f,v5Compat:!0}));let p=m.current,[b,j]=g.useState({action:p.action,location:p.location}),C=g.useCallback(y=>{g.startTransition(()=>j(y))},[j]);return g.useLayoutEffect(()=>p.listen(C),[p,C]),g.createElement(Tg,{basename:r,children:d,location:b.location,navigationType:b.action,navigator:p})}function Py({basename:r,children:d,window:f}){let m=g.useRef();m.current==null&&(m.current=S_({window:f,v5Compat:!0}));let p=m.current,[b,j]=g.useState({action:p.action,location:p.location}),C=g.useCallback(y=>{g.startTransition(()=>j(y))},[j]);return g.useLayoutEffect(()=>p.listen(C),[p,C]),g.createElement(Tg,{basename:r,children:d,location:b.location,navigationType:b.action,navigator:p})}var zg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vn=g.forwardRef(function({onClick:d,discover:f="render",prefetch:m="none",relative:p,reloadDocument:b,replace:j,state:C,target:y,to:x,preventScrollReset:E,viewTransition:S,...A},k){let{basename:z}=g.useContext(Ua),Z=typeof x=="string"&&zg.test(x),I,R=!1;if(typeof x=="string"&&Z&&(I=x,Mg))try{let U=new URL(window.location.href),xe=x.startsWith("//")?new URL(U.protocol+x):new URL(x),je=Ti(xe.pathname,z);xe.origin===U.origin&&je!=null?x=je+xe.search+xe.hash:R=!0}catch{oa(!1,`<Link to="${x}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=Q_(x,{relative:p}),[$,G,X]=My(m,A),ve=Zy(x,{replace:j,state:C,target:y,preventScrollReset:E,relative:p,viewTransition:S});function F(U){d&&d(U),U.defaultPrevented||ve(U)}let ue=g.createElement("a",{...A,...X,href:I||D,onClick:R||b?d:F,ref:Dy(k,G),target:y,"data-discover":!Z&&f==="render"?"true":void 0});return $&&!Z?g.createElement(g.Fragment,null,ue,g.createElement(zy,{page:D})):ue});Vn.displayName="Link";var Ac=g.forwardRef(function({"aria-current":d="page",caseSensitive:f=!1,className:m="",end:p=!1,style:b,to:j,viewTransition:C,children:y,...x},E){let S=Qr(j,{relative:x.relative}),A=si(),k=g.useContext(Oc),{navigator:z,basename:Z}=g.useContext(Ua),I=k!=null&&Yy(S)&&C===!0,R=z.encodeLocation?z.encodeLocation(S).pathname:S.pathname,D=A.pathname,$=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;f||(D=D.toLowerCase(),$=$?$.toLowerCase():null,R=R.toLowerCase()),$&&Z&&($=Ti($,Z)||$);const G=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let X=D===R||!p&&D.startsWith(R)&&D.charAt(G)==="/",ve=$!=null&&($===R||!p&&$.startsWith(R)&&$.charAt(R.length)==="/"),F={isActive:X,isPending:ve,isTransitioning:I},ue=X?d:void 0,U;typeof m=="function"?U=m(F):U=[m,X?"active":null,ve?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let xe=typeof b=="function"?b(F):b;return g.createElement(Vn,{...x,"aria-current":ue,className:U,ref:E,style:xe,to:j,viewTransition:C},typeof y=="function"?y(F):y)});Ac.displayName="NavLink";var Uy=g.forwardRef(({discover:r="render",fetcherKey:d,navigate:f,reloadDocument:m,replace:p,state:b,method:j=Ec,action:C,onSubmit:y,relative:x,preventScrollReset:E,viewTransition:S,...A},k)=>{let z=qy(),Z=$y(C,{relative:x}),I=j.toLowerCase()==="get"?"get":"post",R=typeof C=="string"&&zg.test(C),D=$=>{if(y&&y($),$.defaultPrevented)return;$.preventDefault();let G=$.nativeEvent.submitter,X=G?.getAttribute("formmethod")||j;z(G||$.currentTarget,{fetcherKey:d,method:X,navigate:f,replace:p,state:b,relative:x,preventScrollReset:E,viewTransition:S})};return g.createElement("form",{ref:k,method:I,action:Z,onSubmit:m?y:D,...A,"data-discover":!R&&r==="render"?"true":void 0})});Uy.displayName="Form";function Hy(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Rg(r){let d=g.useContext(Hl);return zt(d,Hy(r)),d}function Zy(r,{target:d,replace:f,state:m,preventScrollReset:p,relative:b,viewTransition:j}={}){let C=Ai(),y=si(),x=Qr(r,{relative:b});return g.useCallback(E=>{if(yy(E,d)){E.preventDefault();let S=f!==void 0?f:Bl(y)===Bl(x);C(r,{replace:S,state:m,preventScrollReset:p,relative:b,viewTransition:j})}},[y,C,x,f,m,d,r,p,b,j])}var Iy=0,Gy=()=>`__${String(++Iy)}__`;function qy(){let{router:r}=Rg("useSubmit"),{basename:d}=g.useContext(Ua),f=uy();return g.useCallback(async(m,p={})=>{let{action:b,method:j,encType:C,formData:y,body:x}=jy(m,d);if(p.navigate===!1){let E=p.fetcherKey||Gy();await r.fetch(E,f,p.action||b,{preventScrollReset:p.preventScrollReset,formData:y,body:x,formMethod:p.method||j,formEncType:p.encType||C,flushSync:p.flushSync})}else await r.navigate(p.action||b,{preventScrollReset:p.preventScrollReset,formData:y,body:x,formMethod:p.method||j,formEncType:p.encType||C,replace:p.replace,state:p.state,fromRouteId:f,flushSync:p.flushSync,viewTransition:p.viewTransition})},[r,d,f])}function $y(r,{relative:d}={}){let{basename:f}=g.useContext(Ua),m=g.useContext(Sa);zt(m,"useFormAction must be used inside a RouteContext");let[p]=m.matches.slice(-1),b={...Qr(r||".",{relative:d})},j=si();if(r==null){b.search=j.search;let C=new URLSearchParams(b.search),y=C.getAll("index");if(y.some(E=>E==="")){C.delete("index"),y.filter(S=>S).forEach(S=>C.append("index",S));let E=C.toString();b.search=E?`?${E}`:""}}return(!r||r===".")&&p.route.index&&(b.search=b.search?b.search.replace(/^\?/,"?index&"):"?index"),f!=="/"&&(b.pathname=b.pathname==="/"?f:Ei([f,b.pathname])),Bl(b)}function Yy(r,{relative:d}={}){let f=g.useContext(wg);zt(f!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:m}=Rg("useViewTransitionState"),p=Qr(r,{relative:d});if(!f.isTransitioning)return!1;let b=Ti(f.currentLocation.pathname,m)||f.currentLocation.pathname,j=Ti(f.nextLocation.pathname,m)||f.nextLocation.pathname;return Rc(p.pathname,j)!=null||Rc(p.pathname,b)!=null}var Vy=vg();function Og(r,d){const f=g.useRef(d);g.useEffect(function(){d!==f.current&&r.attributionControl!=null&&(f.current!=null&&r.attributionControl.removeAttribution(f.current),d!=null&&r.attributionControl.addAttribution(d)),f.current=d},[r,d])}const Fy=1;function Ky(r){return Object.freeze({__version:Fy,map:r})}function fh(r,d){return Object.freeze({...r,...d})}const mh=g.createContext(null);function Bc(){const r=g.use(mh);if(r==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return r}function Dg(r){function d(f,m){const{instance:p,context:b}=r(f).current;g.useImperativeHandle(m,()=>p);const{children:j}=f;return j==null?null:Dl.createElement(mh,{value:b},j)}return g.forwardRef(d)}function Xy(r){function d(f,m){const[p,b]=g.useState(!1),{instance:j}=r(f,b).current;g.useImperativeHandle(m,()=>j),g.useEffect(function(){p&&j.update()},[j,p,f.children]);const C=j._contentNode;return C?Vy.createPortal(f.children,C):null}return g.forwardRef(d)}function ph(r,d){const f=g.useRef(void 0);g.useEffect(function(){return d!=null&&r.instance.on(d),f.current=d,function(){f.current!=null&&r.instance.off(f.current),f.current=null}},[r,d])}function gh(r,d){const f=r.pane??d.pane;return f?{...r,pane:f}:r}function Qy(r,d){return function(m,p){const b=Bc(),j=r(gh(m,b),b);return Og(b.map,m.attribution),ph(j.current,m.eventHandlers),d(j.current,b,m,p),j}}var Fr={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var Wy=Fr.exports,Bp;function Jy(){return Bp||(Bp=1,(function(r,d){(function(f,m){m(d)})(Wy,(function(f){var m="1.9.4";function p(n){var s,o,h,v;for(o=1,h=arguments.length;o<h;o++){v=arguments[o];for(s in v)n[s]=v[s]}return n}var b=Object.create||(function(){function n(){}return function(s){return n.prototype=s,new n}})();function j(n,s){var o=Array.prototype.slice;if(n.bind)return n.bind.apply(n,o.call(arguments,1));var h=o.call(arguments,2);return function(){return n.apply(s,h.length?h.concat(o.call(arguments)):arguments)}}var C=0;function y(n){return"_leaflet_id"in n||(n._leaflet_id=++C),n._leaflet_id}function x(n,s,o){var h,v,w,M;return M=function(){h=!1,v&&(w.apply(o,v),v=!1)},w=function(){h?v=arguments:(n.apply(o,arguments),setTimeout(M,s),h=!0)},w}function E(n,s,o){var h=s[1],v=s[0],w=h-v;return n===h&&o?n:((n-v)%w+w)%w+v}function S(){return!1}function A(n,s){if(s===!1)return n;var o=Math.pow(10,s===void 0?6:s);return Math.round(n*o)/o}function k(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function z(n){return k(n).split(/\s+/)}function Z(n,s){Object.prototype.hasOwnProperty.call(n,"options")||(n.options=n.options?b(n.options):{});for(var o in s)n.options[o]=s[o];return n.options}function I(n,s,o){var h=[];for(var v in n)h.push(encodeURIComponent(o?v.toUpperCase():v)+"="+encodeURIComponent(n[v]));return(!s||s.indexOf("?")===-1?"?":"&")+h.join("&")}var R=/\{ *([\w_ -]+) *\}/g;function D(n,s){return n.replace(R,function(o,h){var v=s[h];if(v===void 0)throw new Error("No value provided for variable "+o);return typeof v=="function"&&(v=v(s)),v})}var $=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function G(n,s){for(var o=0;o<n.length;o++)if(n[o]===s)return o;return-1}var X="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ve(n){return window["webkit"+n]||window["moz"+n]||window["ms"+n]}var F=0;function ue(n){var s=+new Date,o=Math.max(0,16-(s-F));return F=s+o,window.setTimeout(n,o)}var U=window.requestAnimationFrame||ve("RequestAnimationFrame")||ue,xe=window.cancelAnimationFrame||ve("CancelAnimationFrame")||ve("CancelRequestAnimationFrame")||function(n){window.clearTimeout(n)};function je(n,s,o){if(o&&U===ue)n.call(s);else return U.call(window,j(n,s))}function Ce(n){n&&xe.call(window,n)}var qe={__proto__:null,extend:p,create:b,bind:j,get lastId(){return C},stamp:y,throttle:x,wrapNum:E,falseFn:S,formatNum:A,trim:k,splitWords:z,setOptions:Z,getParamString:I,template:D,isArray:$,indexOf:G,emptyImageUrl:X,requestFn:U,cancelFn:xe,requestAnimFrame:je,cancelAnimFrame:Ce};function Ze(){}Ze.extend=function(n){var s=function(){Z(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=s.__super__=this.prototype,h=b(o);h.constructor=s,s.prototype=h;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(s[v]=this[v]);return n.statics&&p(s,n.statics),n.includes&&(Ie(n.includes),p.apply(null,[h].concat(n.includes))),p(h,n),delete h.statics,delete h.includes,h.options&&(h.options=o.options?b(o.options):{},p(h.options,n.options)),h._initHooks=[],h.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,M=h._initHooks.length;w<M;w++)h._initHooks[w].call(this)}},s},Ze.include=function(n){var s=this.prototype.options;return p(this.prototype,n),n.options&&(this.prototype.options=s,this.mergeOptions(n.options)),this},Ze.mergeOptions=function(n){return p(this.prototype.options,n),this},Ze.addInitHook=function(n){var s=Array.prototype.slice.call(arguments,1),o=typeof n=="function"?n:function(){this[n].apply(this,s)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(o),this};function Ie(n){if(!(typeof L>"u"||!L||!L.Mixin)){n=$(n)?n:[n];for(var s=0;s<n.length;s++)n[s]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var J={on:function(n,s,o){if(typeof n=="object")for(var h in n)this._on(h,n[h],s);else{n=z(n);for(var v=0,w=n.length;v<w;v++)this._on(n[v],s,o)}return this},off:function(n,s,o){if(!arguments.length)delete this._events;else if(typeof n=="object")for(var h in n)this._off(h,n[h],s);else{n=z(n);for(var v=arguments.length===1,w=0,M=n.length;w<M;w++)v?this._off(n[w]):this._off(n[w],s,o)}return this},_on:function(n,s,o,h){if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}if(this._listens(n,s,o)===!1){o===this&&(o=void 0);var v={fn:s,ctx:o};h&&(v.once=!0),this._events=this._events||{},this._events[n]=this._events[n]||[],this._events[n].push(v)}},_off:function(n,s,o){var h,v,w;if(this._events&&(h=this._events[n],!!h)){if(arguments.length===1){if(this._firingCount)for(v=0,w=h.length;v<w;v++)h[v].fn=S;delete this._events[n];return}if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}var M=this._listens(n,s,o);if(M!==!1){var Y=h[M];this._firingCount&&(Y.fn=S,this._events[n]=h=h.slice()),h.splice(M,1)}}},fire:function(n,s,o){if(!this.listens(n,o))return this;var h=p({},s,{type:n,target:this,sourceTarget:s&&s.sourceTarget||this});if(this._events){var v=this._events[n];if(v){this._firingCount=this._firingCount+1||1;for(var w=0,M=v.length;w<M;w++){var Y=v[w],ie=Y.fn;Y.once&&this.off(n,ie,Y.ctx),ie.call(Y.ctx||this,h)}this._firingCount--}}return o&&this._propagateEvent(h),this},listens:function(n,s,o,h){typeof n!="string"&&console.warn('"string" type argument expected');var v=s;typeof s!="function"&&(h=!!s,v=void 0,o=void 0);var w=this._events&&this._events[n];if(w&&w.length&&this._listens(n,v,o)!==!1)return!0;if(h){for(var M in this._eventParents)if(this._eventParents[M].listens(n,s,o,h))return!0}return!1},_listens:function(n,s,o){if(!this._events)return!1;var h=this._events[n]||[];if(!s)return!!h.length;o===this&&(o=void 0);for(var v=0,w=h.length;v<w;v++)if(h[v].fn===s&&h[v].ctx===o)return v;return!1},once:function(n,s,o){if(typeof n=="object")for(var h in n)this._on(h,n[h],s,!0);else{n=z(n);for(var v=0,w=n.length;v<w;v++)this._on(n[v],s,o,!0)}return this},addEventParent:function(n){return this._eventParents=this._eventParents||{},this._eventParents[y(n)]=n,this},removeEventParent:function(n){return this._eventParents&&delete this._eventParents[y(n)],this},_propagateEvent:function(n){for(var s in this._eventParents)this._eventParents[s].fire(n.type,p({layer:n.target,propagatedFrom:n.target},n),!0)}};J.addEventListener=J.on,J.removeEventListener=J.clearAllEventListeners=J.off,J.addOneTimeEventListener=J.once,J.fireEvent=J.fire,J.hasEventListeners=J.listens;var B=Ze.extend(J);function ee(n,s,o){this.x=o?Math.round(n):n,this.y=o?Math.round(s):s}var K=Math.trunc||function(n){return n>0?Math.floor(n):Math.ceil(n)};ee.prototype={clone:function(){return new ee(this.x,this.y)},add:function(n){return this.clone()._add(P(n))},_add:function(n){return this.x+=n.x,this.y+=n.y,this},subtract:function(n){return this.clone()._subtract(P(n))},_subtract:function(n){return this.x-=n.x,this.y-=n.y,this},divideBy:function(n){return this.clone()._divideBy(n)},_divideBy:function(n){return this.x/=n,this.y/=n,this},multiplyBy:function(n){return this.clone()._multiplyBy(n)},_multiplyBy:function(n){return this.x*=n,this.y*=n,this},scaleBy:function(n){return new ee(this.x*n.x,this.y*n.y)},unscaleBy:function(n){return new ee(this.x/n.x,this.y/n.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=K(this.x),this.y=K(this.y),this},distanceTo:function(n){n=P(n);var s=n.x-this.x,o=n.y-this.y;return Math.sqrt(s*s+o*o)},equals:function(n){return n=P(n),n.x===this.x&&n.y===this.y},contains:function(n){return n=P(n),Math.abs(n.x)<=Math.abs(this.x)&&Math.abs(n.y)<=Math.abs(this.y)},toString:function(){return"Point("+A(this.x)+", "+A(this.y)+")"}};function P(n,s,o){return n instanceof ee?n:$(n)?new ee(n[0],n[1]):n==null?n:typeof n=="object"&&"x"in n&&"y"in n?new ee(n.x,n.y):new ee(n,s,o)}function T(n,s){if(n)for(var o=s?[n,s]:n,h=0,v=o.length;h<v;h++)this.extend(o[h])}T.prototype={extend:function(n){var s,o;if(!n)return this;if(n instanceof ee||typeof n[0]=="number"||"x"in n)s=o=P(n);else if(n=Q(n),s=n.min,o=n.max,!s||!o)return this;return!this.min&&!this.max?(this.min=s.clone(),this.max=o.clone()):(this.min.x=Math.min(s.x,this.min.x),this.max.x=Math.max(o.x,this.max.x),this.min.y=Math.min(s.y,this.min.y),this.max.y=Math.max(o.y,this.max.y)),this},getCenter:function(n){return P((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,n)},getBottomLeft:function(){return P(this.min.x,this.max.y)},getTopRight:function(){return P(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(n){var s,o;return typeof n[0]=="number"||n instanceof ee?n=P(n):n=Q(n),n instanceof T?(s=n.min,o=n.max):s=o=n,s.x>=this.min.x&&o.x<=this.max.x&&s.y>=this.min.y&&o.y<=this.max.y},intersects:function(n){n=Q(n);var s=this.min,o=this.max,h=n.min,v=n.max,w=v.x>=s.x&&h.x<=o.x,M=v.y>=s.y&&h.y<=o.y;return w&&M},overlaps:function(n){n=Q(n);var s=this.min,o=this.max,h=n.min,v=n.max,w=v.x>s.x&&h.x<o.x,M=v.y>s.y&&h.y<o.y;return w&&M},isValid:function(){return!!(this.min&&this.max)},pad:function(n){var s=this.min,o=this.max,h=Math.abs(s.x-o.x)*n,v=Math.abs(s.y-o.y)*n;return Q(P(s.x-h,s.y-v),P(o.x+h,o.y+v))},equals:function(n){return n?(n=Q(n),this.min.equals(n.getTopLeft())&&this.max.equals(n.getBottomRight())):!1}};function Q(n,s){return!n||n instanceof T?n:new T(n,s)}function le(n,s){if(n)for(var o=s?[n,s]:n,h=0,v=o.length;h<v;h++)this.extend(o[h])}le.prototype={extend:function(n){var s=this._southWest,o=this._northEast,h,v;if(n instanceof _e)h=n,v=n;else if(n instanceof le){if(h=n._southWest,v=n._northEast,!h||!v)return this}else return n?this.extend(be(n)||he(n)):this;return!s&&!o?(this._southWest=new _e(h.lat,h.lng),this._northEast=new _e(v.lat,v.lng)):(s.lat=Math.min(h.lat,s.lat),s.lng=Math.min(h.lng,s.lng),o.lat=Math.max(v.lat,o.lat),o.lng=Math.max(v.lng,o.lng)),this},pad:function(n){var s=this._southWest,o=this._northEast,h=Math.abs(s.lat-o.lat)*n,v=Math.abs(s.lng-o.lng)*n;return new le(new _e(s.lat-h,s.lng-v),new _e(o.lat+h,o.lng+v))},getCenter:function(){return new _e((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new _e(this.getNorth(),this.getWest())},getSouthEast:function(){return new _e(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(n){typeof n[0]=="number"||n instanceof _e||"lat"in n?n=be(n):n=he(n);var s=this._southWest,o=this._northEast,h,v;return n instanceof le?(h=n.getSouthWest(),v=n.getNorthEast()):h=v=n,h.lat>=s.lat&&v.lat<=o.lat&&h.lng>=s.lng&&v.lng<=o.lng},intersects:function(n){n=he(n);var s=this._southWest,o=this._northEast,h=n.getSouthWest(),v=n.getNorthEast(),w=v.lat>=s.lat&&h.lat<=o.lat,M=v.lng>=s.lng&&h.lng<=o.lng;return w&&M},overlaps:function(n){n=he(n);var s=this._southWest,o=this._northEast,h=n.getSouthWest(),v=n.getNorthEast(),w=v.lat>s.lat&&h.lat<o.lat,M=v.lng>s.lng&&h.lng<o.lng;return w&&M},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(n,s){return n?(n=he(n),this._southWest.equals(n.getSouthWest(),s)&&this._northEast.equals(n.getNorthEast(),s)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function he(n,s){return n instanceof le?n:new le(n,s)}function _e(n,s,o){if(isNaN(n)||isNaN(s))throw new Error("Invalid LatLng object: ("+n+", "+s+")");this.lat=+n,this.lng=+s,o!==void 0&&(this.alt=+o)}_e.prototype={equals:function(n,s){if(!n)return!1;n=be(n);var o=Math.max(Math.abs(this.lat-n.lat),Math.abs(this.lng-n.lng));return o<=(s===void 0?1e-9:s)},toString:function(n){return"LatLng("+A(this.lat,n)+", "+A(this.lng,n)+")"},distanceTo:function(n){return we.distance(this,be(n))},wrap:function(){return we.wrapLatLng(this)},toBounds:function(n){var s=180*n/40075017,o=s/Math.cos(Math.PI/180*this.lat);return he([this.lat-s,this.lng-o],[this.lat+s,this.lng+o])},clone:function(){return new _e(this.lat,this.lng,this.alt)}};function be(n,s,o){return n instanceof _e?n:$(n)&&typeof n[0]!="object"?n.length===3?new _e(n[0],n[1],n[2]):n.length===2?new _e(n[0],n[1]):null:n==null?n:typeof n=="object"&&"lat"in n?new _e(n.lat,"lng"in n?n.lng:n.lon,n.alt):s===void 0?null:new _e(n,s,o)}var Le={latLngToPoint:function(n,s){var o=this.projection.project(n),h=this.scale(s);return this.transformation._transform(o,h)},pointToLatLng:function(n,s){var o=this.scale(s),h=this.transformation.untransform(n,o);return this.projection.unproject(h)},project:function(n){return this.projection.project(n)},unproject:function(n){return this.projection.unproject(n)},scale:function(n){return 256*Math.pow(2,n)},zoom:function(n){return Math.log(n/256)/Math.LN2},getProjectedBounds:function(n){if(this.infinite)return null;var s=this.projection.bounds,o=this.scale(n),h=this.transformation.transform(s.min,o),v=this.transformation.transform(s.max,o);return new T(h,v)},infinite:!1,wrapLatLng:function(n){var s=this.wrapLng?E(n.lng,this.wrapLng,!0):n.lng,o=this.wrapLat?E(n.lat,this.wrapLat,!0):n.lat,h=n.alt;return new _e(o,s,h)},wrapLatLngBounds:function(n){var s=n.getCenter(),o=this.wrapLatLng(s),h=s.lat-o.lat,v=s.lng-o.lng;if(h===0&&v===0)return n;var w=n.getSouthWest(),M=n.getNorthEast(),Y=new _e(w.lat-h,w.lng-v),ie=new _e(M.lat-h,M.lng-v);return new le(Y,ie)}},we=p({},Le,{wrapLng:[-180,180],R:6371e3,distance:function(n,s){var o=Math.PI/180,h=n.lat*o,v=s.lat*o,w=Math.sin((s.lat-n.lat)*o/2),M=Math.sin((s.lng-n.lng)*o/2),Y=w*w+Math.cos(h)*Math.cos(v)*M*M,ie=2*Math.atan2(Math.sqrt(Y),Math.sqrt(1-Y));return this.R*ie}}),Oe=6378137,st={R:Oe,MAX_LATITUDE:85.0511287798,project:function(n){var s=Math.PI/180,o=this.MAX_LATITUDE,h=Math.max(Math.min(o,n.lat),-o),v=Math.sin(h*s);return new ee(this.R*n.lng*s,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(n){var s=180/Math.PI;return new _e((2*Math.atan(Math.exp(n.y/this.R))-Math.PI/2)*s,n.x*s/this.R)},bounds:(function(){var n=Oe*Math.PI;return new T([-n,-n],[n,n])})()};function Wt(n,s,o,h){if($(n)){this._a=n[0],this._b=n[1],this._c=n[2],this._d=n[3];return}this._a=n,this._b=s,this._c=o,this._d=h}Wt.prototype={transform:function(n,s){return this._transform(n.clone(),s)},_transform:function(n,s){return s=s||1,n.x=s*(this._a*n.x+this._b),n.y=s*(this._c*n.y+this._d),n},untransform:function(n,s){return s=s||1,new ee((n.x/s-this._b)/this._a,(n.y/s-this._d)/this._c)}};function De(n,s,o,h){return new Wt(n,s,o,h)}var Je=p({},we,{code:"EPSG:3857",projection:st,transformation:(function(){var n=.5/(Math.PI*st.R);return De(n,.5,-n,.5)})()}),jt=p({},Je,{code:"EPSG:900913"});function sn(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function Vt(n,s){var o="",h,v,w,M,Y,ie;for(h=0,w=n.length;h<w;h++){for(Y=n[h],v=0,M=Y.length;v<M;v++)ie=Y[v],o+=(v?"L":"M")+ie.x+" "+ie.y;o+=s?ke.svg?"z":"x":""}return o||"M0 0"}var ca=document.documentElement.style,un="ActiveXObject"in window,Zt=un&&!document.addEventListener,dn="msLaunchUri"in navigator&&!("documentMode"in document),hn=qt("webkit"),Jt=qt("android"),Na=qt("android 2")||qt("android 3"),Ot=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ha=Jt&&qt("Google")&&Ot<537&&!("AudioNode"in window),Rn=!!window.opera,en=!dn&&qt("chrome"),Tt=qt("gecko")&&!hn&&!Rn&&!un,Za=!en&&qt("safari"),Ia=qt("phantom"),li="OTransition"in ca,Ca=navigator.platform.indexOf("Win")===0,En=un&&"transition"in ca,It="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Na,yn="MozPerspective"in ca,Gt=!window.L_DISABLE_3D&&(En||It||yn)&&!li&&!Ia,xn=typeof orientation<"u"||qt("mobile"),bn=xn&&hn,jn=xn&&It,Fn=!window.PointerEvent&&window.MSPointerEvent,Kn=!!(window.PointerEvent||Fn),fn="ontouchstart"in window||!!window.TouchEvent,et=!window.L_NO_TOUCH&&(fn||Kn),Ea=xn&&Rn,Ta=xn&&Tt,fs=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Li=(function(){var n=!1;try{var s=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("testPassiveEventSupport",S,s),window.removeEventListener("testPassiveEventSupport",S,s)}catch{}return n})(),ri=(function(){return!!document.createElement("canvas").getContext})(),Xn=!!(document.createElementNS&&sn("svg").createSVGRect),ms=!!Xn&&(function(){var n=document.createElement("div");return n.innerHTML="<svg/>",(n.firstChild&&n.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),ki=!Xn&&(function(){try{var n=document.createElement("div");n.innerHTML='<v:shape adj="1"/>';var s=n.firstChild;return s.style.behavior="url(#default#VML)",s&&typeof s.adj=="object"}catch{return!1}})(),Aa=navigator.platform.indexOf("Mac")===0,ua=navigator.platform.indexOf("Linux")===0;function qt(n){return navigator.userAgent.toLowerCase().indexOf(n)>=0}var ke={ie:un,ielt9:Zt,edge:dn,webkit:hn,android:Jt,android23:Na,androidStock:Ha,opera:Rn,chrome:en,gecko:Tt,safari:Za,phantom:Ia,opera12:li,win:Ca,ie3d:En,webkit3d:It,gecko3d:yn,any3d:Gt,mobile:xn,mobileWebkit:bn,mobileWebkit3d:jn,msPointer:Fn,pointer:Kn,touch:et,touchNative:fn,mobileOpera:Ea,mobileGecko:Ta,retina:fs,passiveEvents:Li,canvas:ri,svg:Xn,vml:ki,inlineSvg:ms,mac:Aa,linux:ua},Ga=ke.msPointer?"MSPointerDown":"pointerdown",qa=ke.msPointer?"MSPointerMove":"pointermove",Tn=ke.msPointer?"MSPointerUp":"pointerup",Lt=ke.msPointer?"MSPointerCancel":"pointercancel",kt={touchstart:Ga,touchmove:qa,touchend:Tn,touchcancel:Lt},Qn={touchstart:_t,touchmove:Ee,touchend:Ee,touchcancel:Ee},On={},V=!1;function oe(n,s,o){return s==="touchstart"&&Ae(),Qn[s]?(o=Qn[s].bind(this,o),n.addEventListener(kt[s],o,!1),o):(console.warn("wrong event specified:",s),S)}function Te(n,s,o){if(!kt[s]){console.warn("wrong event specified:",s);return}n.removeEventListener(kt[s],o,!1)}function ae(n){On[n.pointerId]=n}function Be(n){On[n.pointerId]&&(On[n.pointerId]=n)}function Ue(n){delete On[n.pointerId]}function Ae(){V||(document.addEventListener(Ga,ae,!0),document.addEventListener(qa,Be,!0),document.addEventListener(Tn,Ue,!0),document.addEventListener(Lt,Ue,!0),V=!0)}function Ee(n,s){if(s.pointerType!==(s.MSPOINTER_TYPE_MOUSE||"mouse")){s.touches=[];for(var o in On)s.touches.push(On[o]);s.changedTouches=[s],n(s)}}function _t(n,s){s.MSPOINTER_TYPE_TOUCH&&s.pointerType===s.MSPOINTER_TYPE_TOUCH&&Bt(s),Ee(n,s)}function ze(n){var s={},o,h;for(h in n)o=n[h],s[h]=o&&o.bind?o.bind(n):o;return n=s,s.type="dblclick",s.detail=2,s.isTrusted=!1,s._simulated=!0,s}var ln=200;function An(n,s){n.addEventListener("dblclick",s);var o=0,h;function v(w){if(w.detail!==1){h=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var M=xs(w);if(!(M.some(function(ie){return ie instanceof HTMLLabelElement&&ie.attributes.for})&&!M.some(function(ie){return ie instanceof HTMLInputElement||ie instanceof HTMLSelectElement}))){var Y=Date.now();Y-o<=ln?(h++,h===2&&s(ze(w))):h=1,o=Y}}}return n.addEventListener("click",v),{dblclick:s,simDblclick:v}}function mn(n,s){n.removeEventListener("dblclick",s.dblclick),n.removeEventListener("click",s.simDblclick)}var tt=gs(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),mt=gs(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),$a=mt==="webkitTransition"||mt==="OTransition"?mt+"End":"transitionend";function ps(n){return typeof n=="string"?document.getElementById(n):n}function oi(n,s){var o=n.style[s]||n.currentStyle&&n.currentStyle[s];if((!o||o==="auto")&&document.defaultView){var h=document.defaultView.getComputedStyle(n,null);o=h?h[s]:null}return o==="auto"?null:o}function Qe(n,s,o){var h=document.createElement(n);return h.className=s||"",o&&o.appendChild(h),h}function gt(n){var s=n.parentNode;s&&s.removeChild(n)}function W(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function re(n){var s=n.parentNode;s&&s.lastChild!==n&&s.appendChild(n)}function ye(n){var s=n.parentNode;s&&s.firstChild!==n&&s.insertBefore(n,s.firstChild)}function Se(n,s){if(n.classList!==void 0)return n.classList.contains(s);var o=Dn(n);return o.length>0&&new RegExp("(^|\\s)"+s+"(\\s|$)").test(o)}function ge(n,s){if(n.classList!==void 0)for(var o=z(s),h=0,v=o.length;h<v;h++)n.classList.add(o[h]);else if(!Se(n,s)){var w=Dn(n);Dt(n,(w?w+" ":"")+s)}}function Ve(n,s){n.classList!==void 0?n.classList.remove(s):Dt(n,k((" "+Dn(n)+" ").replace(" "+s+" "," ")))}function Dt(n,s){n.className.baseVal===void 0?n.className=s:n.className.baseVal=s}function Dn(n){return n.correspondingElement&&(n=n.correspondingElement),n.className.baseVal===void 0?n.className:n.className.baseVal}function We(n,s){"opacity"in n.style?n.style.opacity=s:"filter"in n.style&&ql(n,s)}function ql(n,s){var o=!1,h="DXImageTransform.Microsoft.Alpha";try{o=n.filters.item(h)}catch{if(s===1)return}s=Math.round(s*100),o?(o.Enabled=s!==100,o.Opacity=s):n.style.filter+=" progid:"+h+"(opacity="+s+")"}function gs(n){for(var s=document.documentElement.style,o=0;o<n.length;o++)if(n[o]in s)return n[o];return!1}function La(n,s,o){var h=s||new ee(0,0);n.style[tt]=(ke.ie3d?"translate("+h.x+"px,"+h.y+"px)":"translate3d("+h.x+"px,"+h.y+"px,0)")+(o?" scale("+o+")":"")}function Ct(n,s){n._leaflet_pos=s,ke.any3d?La(n,s):(n.style.left=s.x+"px",n.style.top=s.y+"px")}function Ya(n){return n._leaflet_pos||new ee(0,0)}var Mi,da,$l;if("onselectstart"in document)Mi=function(){$e(window,"selectstart",Bt)},da=function(){vt(window,"selectstart",Bt)};else{var zi=gs(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Mi=function(){if(zi){var n=document.documentElement.style;$l=n[zi],n[zi]="none"}},da=function(){zi&&(document.documentElement.style[zi]=$l,$l=void 0)}}function Ks(){$e(window,"dragstart",Bt)}function vs(){vt(window,"dragstart",Bt)}var Xs,Yl;function Ri(n){for(;n.tabIndex===-1;)n=n.parentNode;n.style&&(Bn(),Xs=n,Yl=n.style.outlineStyle,n.style.outlineStyle="none",$e(window,"keydown",Bn))}function Bn(){Xs&&(Xs.style.outlineStyle=Yl,Xs=void 0,Yl=void 0,vt(window,"keydown",Bn))}function Qs(n){do n=n.parentNode;while((!n.offsetWidth||!n.offsetHeight)&&n!==document.body);return n}function _s(n){var s=n.getBoundingClientRect();return{x:s.width/n.offsetWidth||1,y:s.height/n.offsetHeight||1,boundingClientRect:s}}var Oi={__proto__:null,TRANSFORM:tt,TRANSITION:mt,TRANSITION_END:$a,get:ps,getStyle:oi,create:Qe,remove:gt,empty:W,toFront:re,toBack:ye,hasClass:Se,addClass:ge,removeClass:Ve,setClass:Dt,getClass:Dn,setOpacity:We,testProp:gs,setTransform:La,setPosition:Ct,getPosition:Ya,get disableTextSelection(){return Mi},get enableTextSelection(){return da},disableImageDrag:Ks,enableImageDrag:vs,preventOutline:Ri,restoreOutline:Bn,getSizedParentNode:Qs,getScale:_s};function $e(n,s,o,h){if(s&&typeof s=="object")for(var v in s)Jn(n,v,s[v],o);else{s=z(s);for(var w=0,M=s.length;w<M;w++)Jn(n,s[w],o,h)}return this}var Wn="_leaflet_events";function vt(n,s,o,h){if(arguments.length===1)Vl(n),delete n[Wn];else if(s&&typeof s=="object")for(var v in s)ys(n,v,s[v],o);else if(s=z(s),arguments.length===2)Vl(n,function(Y){return G(s,Y)!==-1});else for(var w=0,M=s.length;w<M;w++)ys(n,s[w],o,h);return this}function Vl(n,s){for(var o in n[Wn]){var h=o.split(/\d/)[0];(!s||s(h))&&ys(n,h,null,null,o)}}var ci={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Jn(n,s,o,h){var v=s+y(o)+(h?"_"+y(h):"");if(n[Wn]&&n[Wn][v])return this;var w=function(Y){return o.call(h||n,Y||window.event)},M=w;!ke.touchNative&&ke.pointer&&s.indexOf("touch")===0?w=oe(n,s,w):ke.touch&&s==="dblclick"?w=An(n,w):"addEventListener"in n?s==="touchstart"||s==="touchmove"||s==="wheel"||s==="mousewheel"?n.addEventListener(ci[s]||s,w,ke.passiveEvents?{passive:!1}:!1):s==="mouseenter"||s==="mouseleave"?(w=function(Y){Y=Y||window.event,ka(n,Y)&&M(Y)},n.addEventListener(ci[s],w,!1)):n.addEventListener(s,M,!1):n.attachEvent("on"+s,w),n[Wn]=n[Wn]||{},n[Wn][v]=w}function ys(n,s,o,h,v){v=v||s+y(o)+(h?"_"+y(h):"");var w=n[Wn]&&n[Wn][v];if(!w)return this;!ke.touchNative&&ke.pointer&&s.indexOf("touch")===0?Te(n,s,w):ke.touch&&s==="dblclick"?mn(n,w):"removeEventListener"in n?n.removeEventListener(ci[s]||s,w,!1):n.detachEvent("on"+s,w),n[Wn][v]=null}function ea(n){return n.stopPropagation?n.stopPropagation():n.originalEvent?n.originalEvent._stopped=!0:n.cancelBubble=!0,this}function ha(n){return Jn(n,"wheel",ea),this}function ui(n){return $e(n,"mousedown touchstart dblclick contextmenu",ea),n._leaflet_disable_click=!0,this}function Bt(n){return n.preventDefault?n.preventDefault():n.returnValue=!1,this}function Va(n){return Bt(n),ea(n),this}function xs(n){if(n.composedPath)return n.composedPath();for(var s=[],o=n.target;o;)s.push(o),o=o.parentNode;return s}function bs(n,s){if(!s)return new ee(n.clientX,n.clientY);var o=_s(s),h=o.boundingClientRect;return new ee((n.clientX-h.left)/o.x-s.clientLeft,(n.clientY-h.top)/o.y-s.clientTop)}var Jr=ke.linux&&ke.chrome?window.devicePixelRatio:ke.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function pn(n){return ke.edge?n.wheelDeltaY/2:n.deltaY&&n.deltaMode===0?-n.deltaY/Jr:n.deltaY&&n.deltaMode===1?-n.deltaY*20:n.deltaY&&n.deltaMode===2?-n.deltaY*60:n.deltaX||n.deltaZ?0:n.wheelDelta?(n.wheelDeltaY||n.wheelDelta)/2:n.detail&&Math.abs(n.detail)<32765?-n.detail*20:n.detail?n.detail/-32765*60:0}function ka(n,s){var o=s.relatedTarget;if(!o)return!0;try{for(;o&&o!==n;)o=o.parentNode}catch{return!1}return o!==n}var Ws={__proto__:null,on:$e,off:vt,stopPropagation:ea,disableScrollPropagation:ha,disableClickPropagation:ui,preventDefault:Bt,stop:Va,getPropagationPath:xs,getMousePosition:bs,getWheelDelta:pn,isExternalTarget:ka,addListener:$e,removeListener:vt},Di=B.extend({run:function(n,s,o,h){this.stop(),this._el=n,this._inProgress=!0,this._duration=o||.25,this._easeOutPower=1/Math.max(h||.5,.2),this._startPos=Ya(n),this._offset=s.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=je(this._animate,this),this._step()},_step:function(n){var s=+new Date-this._startTime,o=this._duration*1e3;s<o?this._runFrame(this._easeOut(s/o),n):(this._runFrame(1),this._complete())},_runFrame:function(n,s){var o=this._startPos.add(this._offset.multiplyBy(n));s&&o._round(),Ct(this._el,o),this.fire("step")},_complete:function(){Ce(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(n){return 1-Math.pow(1-n,this._easeOutPower)}}),lt=B.extend({options:{crs:Je,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(n,s){s=Z(this,s),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(n),this._initLayout(),this._onResize=j(this._onResize,this),this._initEvents(),s.maxBounds&&this.setMaxBounds(s.maxBounds),s.zoom!==void 0&&(this._zoom=this._limitZoom(s.zoom)),s.center&&s.zoom!==void 0&&this.setView(be(s.center),s.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=mt&&ke.any3d&&!ke.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),$e(this._proxy,$a,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(n,s,o){if(s=s===void 0?this._zoom:this._limitZoom(s),n=this._limitCenter(be(n),s,this.options.maxBounds),o=o||{},this._stop(),this._loaded&&!o.reset&&o!==!0){o.animate!==void 0&&(o.zoom=p({animate:o.animate},o.zoom),o.pan=p({animate:o.animate,duration:o.duration},o.pan));var h=this._zoom!==s?this._tryAnimatedZoom&&this._tryAnimatedZoom(n,s,o.zoom):this._tryAnimatedPan(n,o.pan);if(h)return clearTimeout(this._sizeTimer),this}return this._resetView(n,s,o.pan&&o.pan.noMoveStart),this},setZoom:function(n,s){return this._loaded?this.setView(this.getCenter(),n,{zoom:s}):(this._zoom=n,this)},zoomIn:function(n,s){return n=n||(ke.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+n,s)},zoomOut:function(n,s){return n=n||(ke.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-n,s)},setZoomAround:function(n,s,o){var h=this.getZoomScale(s),v=this.getSize().divideBy(2),w=n instanceof ee?n:this.latLngToContainerPoint(n),M=w.subtract(v).multiplyBy(1-1/h),Y=this.containerPointToLatLng(v.add(M));return this.setView(Y,s,{zoom:o})},_getBoundsCenterZoom:function(n,s){s=s||{},n=n.getBounds?n.getBounds():he(n);var o=P(s.paddingTopLeft||s.padding||[0,0]),h=P(s.paddingBottomRight||s.padding||[0,0]),v=this.getBoundsZoom(n,!1,o.add(h));if(v=typeof s.maxZoom=="number"?Math.min(s.maxZoom,v):v,v===1/0)return{center:n.getCenter(),zoom:v};var w=h.subtract(o).divideBy(2),M=this.project(n.getSouthWest(),v),Y=this.project(n.getNorthEast(),v),ie=this.unproject(M.add(Y).divideBy(2).add(w),v);return{center:ie,zoom:v}},fitBounds:function(n,s){if(n=he(n),!n.isValid())throw new Error("Bounds are not valid.");var o=this._getBoundsCenterZoom(n,s);return this.setView(o.center,o.zoom,s)},fitWorld:function(n){return this.fitBounds([[-90,-180],[90,180]],n)},panTo:function(n,s){return this.setView(n,this._zoom,{pan:s})},panBy:function(n,s){if(n=P(n).round(),s=s||{},!n.x&&!n.y)return this.fire("moveend");if(s.animate!==!0&&!this.getSize().contains(n))return this._resetView(this.unproject(this.project(this.getCenter()).add(n)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Di,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),s.noMoveStart||this.fire("movestart"),s.animate!==!1){ge(this._mapPane,"leaflet-pan-anim");var o=this._getMapPanePos().subtract(n).round();this._panAnim.run(this._mapPane,o,s.duration||.25,s.easeLinearity)}else this._rawPanBy(n),this.fire("move").fire("moveend");return this},flyTo:function(n,s,o){if(o=o||{},o.animate===!1||!ke.any3d)return this.setView(n,s,o);this._stop();var h=this.project(this.getCenter()),v=this.project(n),w=this.getSize(),M=this._zoom;n=be(n),s=s===void 0?M:s;var Y=Math.max(w.x,w.y),ie=Y*this.getZoomScale(M,s),me=v.distanceTo(h)||1,Ne=1.42,Pe=Ne*Ne;function Ke(Rt){var Oa=Rt?-1:1,mi=Rt?ie:Y,or=ie*ie-Y*Y+Oa*Pe*Pe*me*me,Bs=2*mi*Pe*me,Ps=or/Bs,ni=Math.sqrt(Ps*Ps+1)-Ps,Da=ni<1e-9?-18:Math.log(ni);return Da}function tn(Rt){return(Math.exp(Rt)-Math.exp(-Rt))/2}function Pt(Rt){return(Math.exp(Rt)+Math.exp(-Rt))/2}function kn(Rt){return tn(Rt)/Pt(Rt)}var ct=Ke(0);function ut(Rt){return Y*(Pt(ct)/Pt(ct+Ne*Rt))}function nt(Rt){return Y*(Pt(ct)*kn(ct+Ne*Rt)-tn(ct))/Pe}function ei(Rt){return 1-Math.pow(1-Rt,1.5)}var Zn=Date.now(),hl=(Ke(1)-ct)/Ne,ti=o.duration?1e3*o.duration:1e3*hl*.8;function rr(){var Rt=(Date.now()-Zn)/ti,Oa=ei(Rt)*hl;Rt<=1?(this._flyToFrame=je(rr,this),this._move(this.unproject(h.add(v.subtract(h).multiplyBy(nt(Oa)/me)),M),this.getScaleZoom(Y/ut(Oa),M),{flyTo:!0})):this._move(n,s)._moveEnd(!0)}return this._moveStart(!0,o.noMoveStart),rr.call(this),this},flyToBounds:function(n,s){var o=this._getBoundsCenterZoom(n,s);return this.flyTo(o.center,o.zoom,s)},setMaxBounds:function(n){return n=he(n),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),n.isValid()?(this.options.maxBounds=n,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(n){var s=this.options.minZoom;return this.options.minZoom=n,this._loaded&&s!==n&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(n):this},setMaxZoom:function(n){var s=this.options.maxZoom;return this.options.maxZoom=n,this._loaded&&s!==n&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(n):this},panInsideBounds:function(n,s){this._enforcingBounds=!0;var o=this.getCenter(),h=this._limitCenter(o,this._zoom,he(n));return o.equals(h)||this.panTo(h,s),this._enforcingBounds=!1,this},panInside:function(n,s){s=s||{};var o=P(s.paddingTopLeft||s.padding||[0,0]),h=P(s.paddingBottomRight||s.padding||[0,0]),v=this.project(this.getCenter()),w=this.project(n),M=this.getPixelBounds(),Y=Q([M.min.add(o),M.max.subtract(h)]),ie=Y.getSize();if(!Y.contains(w)){this._enforcingBounds=!0;var me=w.subtract(Y.getCenter()),Ne=Y.extend(w).getSize().subtract(ie);v.x+=me.x<0?-Ne.x:Ne.x,v.y+=me.y<0?-Ne.y:Ne.y,this.panTo(this.unproject(v),s),this._enforcingBounds=!1}return this},invalidateSize:function(n){if(!this._loaded)return this;n=p({animate:!1,pan:!0},n===!0?{animate:!0}:n);var s=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),h=s.divideBy(2).round(),v=o.divideBy(2).round(),w=h.subtract(v);return!w.x&&!w.y?this:(n.animate&&n.pan?this.panBy(w):(n.pan&&this._rawPanBy(w),this.fire("move"),n.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(j(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:s,newSize:o}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(n){if(n=this._locateOptions=p({timeout:1e4,watch:!1},n),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var s=j(this._handleGeolocationResponse,this),o=j(this._handleGeolocationError,this);return n.watch?this._locationWatchId=navigator.geolocation.watchPosition(s,o,n):navigator.geolocation.getCurrentPosition(s,o,n),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(n){if(this._container._leaflet_id){var s=n.code,o=n.message||(s===1?"permission denied":s===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:s,message:"Geolocation error: "+o+"."})}},_handleGeolocationResponse:function(n){if(this._container._leaflet_id){var s=n.coords.latitude,o=n.coords.longitude,h=new _e(s,o),v=h.toBounds(n.coords.accuracy*2),w=this._locateOptions;if(w.setView){var M=this.getBoundsZoom(v);this.setView(h,w.maxZoom?Math.min(M,w.maxZoom):M)}var Y={latlng:h,bounds:v,timestamp:n.timestamp};for(var ie in n.coords)typeof n.coords[ie]=="number"&&(Y[ie]=n.coords[ie]);this.fire("locationfound",Y)}},addHandler:function(n,s){if(!s)return this;var o=this[n]=new s(this);return this._handlers.push(o),this.options[n]&&o.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),gt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Ce(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var n;for(n in this._layers)this._layers[n].remove();for(n in this._panes)gt(this._panes[n]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(n,s){var o="leaflet-pane"+(n?" leaflet-"+n.replace("Pane","")+"-pane":""),h=Qe("div",o,s||this._mapPane);return n&&(this._panes[n]=h),h},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var n=this.getPixelBounds(),s=this.unproject(n.getBottomLeft()),o=this.unproject(n.getTopRight());return new le(s,o)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(n,s,o){n=he(n),o=P(o||[0,0]);var h=this.getZoom()||0,v=this.getMinZoom(),w=this.getMaxZoom(),M=n.getNorthWest(),Y=n.getSouthEast(),ie=this.getSize().subtract(o),me=Q(this.project(Y,h),this.project(M,h)).getSize(),Ne=ke.any3d?this.options.zoomSnap:1,Pe=ie.x/me.x,Ke=ie.y/me.y,tn=s?Math.max(Pe,Ke):Math.min(Pe,Ke);return h=this.getScaleZoom(tn,h),Ne&&(h=Math.round(h/(Ne/100))*(Ne/100),h=s?Math.ceil(h/Ne)*Ne:Math.floor(h/Ne)*Ne),Math.max(v,Math.min(w,h))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ee(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(n,s){var o=this._getTopLeftPoint(n,s);return new T(o,o.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(n){return this.options.crs.getProjectedBounds(n===void 0?this.getZoom():n)},getPane:function(n){return typeof n=="string"?this._panes[n]:n},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(n,s){var o=this.options.crs;return s=s===void 0?this._zoom:s,o.scale(n)/o.scale(s)},getScaleZoom:function(n,s){var o=this.options.crs;s=s===void 0?this._zoom:s;var h=o.zoom(n*o.scale(s));return isNaN(h)?1/0:h},project:function(n,s){return s=s===void 0?this._zoom:s,this.options.crs.latLngToPoint(be(n),s)},unproject:function(n,s){return s=s===void 0?this._zoom:s,this.options.crs.pointToLatLng(P(n),s)},layerPointToLatLng:function(n){var s=P(n).add(this.getPixelOrigin());return this.unproject(s)},latLngToLayerPoint:function(n){var s=this.project(be(n))._round();return s._subtract(this.getPixelOrigin())},wrapLatLng:function(n){return this.options.crs.wrapLatLng(be(n))},wrapLatLngBounds:function(n){return this.options.crs.wrapLatLngBounds(he(n))},distance:function(n,s){return this.options.crs.distance(be(n),be(s))},containerPointToLayerPoint:function(n){return P(n).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(n){return P(n).add(this._getMapPanePos())},containerPointToLatLng:function(n){var s=this.containerPointToLayerPoint(P(n));return this.layerPointToLatLng(s)},latLngToContainerPoint:function(n){return this.layerPointToContainerPoint(this.latLngToLayerPoint(be(n)))},mouseEventToContainerPoint:function(n){return bs(n,this._container)},mouseEventToLayerPoint:function(n){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(n))},mouseEventToLatLng:function(n){return this.layerPointToLatLng(this.mouseEventToLayerPoint(n))},_initContainer:function(n){var s=this._container=ps(n);if(s){if(s._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");$e(s,"scroll",this._onScroll,this),this._containerId=y(s)},_initLayout:function(){var n=this._container;this._fadeAnimated=this.options.fadeAnimation&&ke.any3d,ge(n,"leaflet-container"+(ke.touch?" leaflet-touch":"")+(ke.retina?" leaflet-retina":"")+(ke.ielt9?" leaflet-oldie":"")+(ke.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var s=oi(n,"position");s!=="absolute"&&s!=="relative"&&s!=="fixed"&&s!=="sticky"&&(n.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var n=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ct(this._mapPane,new ee(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ge(n.markerPane,"leaflet-zoom-hide"),ge(n.shadowPane,"leaflet-zoom-hide"))},_resetView:function(n,s,o){Ct(this._mapPane,new ee(0,0));var h=!this._loaded;this._loaded=!0,s=this._limitZoom(s),this.fire("viewprereset");var v=this._zoom!==s;this._moveStart(v,o)._move(n,s)._moveEnd(v),this.fire("viewreset"),h&&this.fire("load")},_moveStart:function(n,s){return n&&this.fire("zoomstart"),s||this.fire("movestart"),this},_move:function(n,s,o,h){s===void 0&&(s=this._zoom);var v=this._zoom!==s;return this._zoom=s,this._lastCenter=n,this._pixelOrigin=this._getNewPixelOrigin(n),h?o&&o.pinch&&this.fire("zoom",o):((v||o&&o.pinch)&&this.fire("zoom",o),this.fire("move",o)),this},_moveEnd:function(n){return n&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Ce(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(n){Ct(this._mapPane,this._getMapPanePos().subtract(n))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(n){this._targets={},this._targets[y(this._container)]=this;var s=n?vt:$e;s(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&s(window,"resize",this._onResize,this),ke.any3d&&this.options.transform3DLimit&&(n?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Ce(this._resizeRequest),this._resizeRequest=je(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var n=this._getMapPanePos();Math.max(Math.abs(n.x),Math.abs(n.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(n,s){for(var o=[],h,v=s==="mouseout"||s==="mouseover",w=n.target||n.srcElement,M=!1;w;){if(h=this._targets[y(w)],h&&(s==="click"||s==="preclick")&&this._draggableMoved(h)){M=!0;break}if(h&&h.listens(s,!0)&&(v&&!ka(w,n)||(o.push(h),v))||w===this._container)break;w=w.parentNode}return!o.length&&!M&&!v&&this.listens(s,!0)&&(o=[this]),o},_isClickDisabled:function(n){for(;n&&n!==this._container;){if(n._leaflet_disable_click)return!0;n=n.parentNode}},_handleDOMEvent:function(n){var s=n.target||n.srcElement;if(!(!this._loaded||s._leaflet_disable_events||n.type==="click"&&this._isClickDisabled(s))){var o=n.type;o==="mousedown"&&Ri(s),this._fireDOMEvent(n,o)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(n,s,o){if(n.type==="click"){var h=p({},n);h.type="preclick",this._fireDOMEvent(h,h.type,o)}var v=this._findEventTargets(n,s);if(o){for(var w=[],M=0;M<o.length;M++)o[M].listens(s,!0)&&w.push(o[M]);v=w.concat(v)}if(v.length){s==="contextmenu"&&Bt(n);var Y=v[0],ie={originalEvent:n};if(n.type!=="keypress"&&n.type!=="keydown"&&n.type!=="keyup"){var me=Y.getLatLng&&(!Y._radius||Y._radius<=10);ie.containerPoint=me?this.latLngToContainerPoint(Y.getLatLng()):this.mouseEventToContainerPoint(n),ie.layerPoint=this.containerPointToLayerPoint(ie.containerPoint),ie.latlng=me?Y.getLatLng():this.layerPointToLatLng(ie.layerPoint)}for(M=0;M<v.length;M++)if(v[M].fire(s,ie,!0),ie.originalEvent._stopped||v[M].options.bubblingMouseEvents===!1&&G(this._mouseEvents,s)!==-1)return}},_draggableMoved:function(n){return n=n.dragging&&n.dragging.enabled()?n:this,n.dragging&&n.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var n=0,s=this._handlers.length;n<s;n++)this._handlers[n].disable()},whenReady:function(n,s){return this._loaded?n.call(s||this,{target:this}):this.on("load",n,s),this},_getMapPanePos:function(){return Ya(this._mapPane)||new ee(0,0)},_moved:function(){var n=this._getMapPanePos();return n&&!n.equals([0,0])},_getTopLeftPoint:function(n,s){var o=n&&s!==void 0?this._getNewPixelOrigin(n,s):this.getPixelOrigin();return o.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(n,s){var o=this.getSize()._divideBy(2);return this.project(n,s)._subtract(o)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(n,s,o){var h=this._getNewPixelOrigin(o,s);return this.project(n,s)._subtract(h)},_latLngBoundsToNewLayerBounds:function(n,s,o){var h=this._getNewPixelOrigin(o,s);return Q([this.project(n.getSouthWest(),s)._subtract(h),this.project(n.getNorthWest(),s)._subtract(h),this.project(n.getSouthEast(),s)._subtract(h),this.project(n.getNorthEast(),s)._subtract(h)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(n){return this.latLngToLayerPoint(n).subtract(this._getCenterLayerPoint())},_limitCenter:function(n,s,o){if(!o)return n;var h=this.project(n,s),v=this.getSize().divideBy(2),w=new T(h.subtract(v),h.add(v)),M=this._getBoundsOffset(w,o,s);return Math.abs(M.x)<=1&&Math.abs(M.y)<=1?n:this.unproject(h.add(M),s)},_limitOffset:function(n,s){if(!s)return n;var o=this.getPixelBounds(),h=new T(o.min.add(n),o.max.add(n));return n.add(this._getBoundsOffset(h,s))},_getBoundsOffset:function(n,s,o){var h=Q(this.project(s.getNorthEast(),o),this.project(s.getSouthWest(),o)),v=h.min.subtract(n.min),w=h.max.subtract(n.max),M=this._rebound(v.x,-w.x),Y=this._rebound(v.y,-w.y);return new ee(M,Y)},_rebound:function(n,s){return n+s>0?Math.round(n-s)/2:Math.max(0,Math.ceil(n))-Math.max(0,Math.floor(s))},_limitZoom:function(n){var s=this.getMinZoom(),o=this.getMaxZoom(),h=ke.any3d?this.options.zoomSnap:1;return h&&(n=Math.round(n/h)*h),Math.max(s,Math.min(o,n))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ve(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(n,s){var o=this._getCenterOffset(n)._trunc();return(s&&s.animate)!==!0&&!this.getSize().contains(o)?!1:(this.panBy(o,s),!0)},_createAnimProxy:function(){var n=this._proxy=Qe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(n),this.on("zoomanim",function(s){var o=tt,h=this._proxy.style[o];La(this._proxy,this.project(s.center,s.zoom),this.getZoomScale(s.zoom,1)),h===this._proxy.style[o]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){gt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var n=this.getCenter(),s=this.getZoom();La(this._proxy,this.project(n,s),this.getZoomScale(s,1))},_catchTransitionEnd:function(n){this._animatingZoom&&n.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(n,s,o){if(this._animatingZoom)return!0;if(o=o||{},!this._zoomAnimated||o.animate===!1||this._nothingToAnimate()||Math.abs(s-this._zoom)>this.options.zoomAnimationThreshold)return!1;var h=this.getZoomScale(s),v=this._getCenterOffset(n)._divideBy(1-1/h);return o.animate!==!0&&!this.getSize().contains(v)?!1:(je(function(){this._moveStart(!0,o.noMoveStart||!1)._animateZoom(n,s,!0)},this),!0)},_animateZoom:function(n,s,o,h){this._mapPane&&(o&&(this._animatingZoom=!0,this._animateToCenter=n,this._animateToZoom=s,ge(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:n,zoom:s,noUpdate:h}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(j(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ve(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Fl(n,s){return new lt(n,s)}var Ln=Ze.extend({options:{position:"topright"},initialize:function(n){Z(this,n)},getPosition:function(){return this.options.position},setPosition:function(n){var s=this._map;return s&&s.removeControl(this),this.options.position=n,s&&s.addControl(this),this},getContainer:function(){return this._container},addTo:function(n){this.remove(),this._map=n;var s=this._container=this.onAdd(n),o=this.getPosition(),h=n._controlCorners[o];return ge(s,"leaflet-control"),o.indexOf("bottom")!==-1?h.insertBefore(s,h.firstChild):h.appendChild(s),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(gt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(n){this._map&&n&&n.screenX>0&&n.screenY>0&&this._map.getContainer().focus()}}),Ma=function(n){return new Ln(n)};lt.include({addControl:function(n){return n.addTo(this),this},removeControl:function(n){return n.remove(),this},_initControlPos:function(){var n=this._controlCorners={},s="leaflet-",o=this._controlContainer=Qe("div",s+"control-container",this._container);function h(v,w){var M=s+v+" "+s+w;n[v+w]=Qe("div",M,o)}h("top","left"),h("top","right"),h("bottom","left"),h("bottom","right")},_clearControlPos:function(){for(var n in this._controlCorners)gt(this._controlCorners[n]);gt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var js=Ln.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(n,s,o,h){return o<h?-1:h<o?1:0}},initialize:function(n,s,o){Z(this,o),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var h in n)this._addLayer(n[h],h);for(h in s)this._addLayer(s[h],h,!0)},onAdd:function(n){this._initLayout(),this._update(),this._map=n,n.on("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(n){return Ln.prototype.addTo.call(this,n),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(n,s){return this._addLayer(n,s),this._map?this._update():this},addOverlay:function(n,s){return this._addLayer(n,s,!0),this._map?this._update():this},removeLayer:function(n){n.off("add remove",this._onLayerChange,this);var s=this._getLayer(y(n));return s&&this._layers.splice(this._layers.indexOf(s),1),this._map?this._update():this},expand:function(){ge(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var n=this._map.getSize().y-(this._container.offsetTop+50);return n<this._section.clientHeight?(ge(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=n+"px"):Ve(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ve(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var n="leaflet-control-layers",s=this._container=Qe("div",n),o=this.options.collapsed;s.setAttribute("aria-haspopup",!0),ui(s),ha(s);var h=this._section=Qe("section",n+"-list");o&&(this._map.on("click",this.collapse,this),$e(s,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=Qe("a",n+"-toggle",s);v.href="#",v.title="Layers",v.setAttribute("role","button"),$e(v,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){Bt(w),this._expandSafely()}},this),o||this.expand(),this._baseLayersList=Qe("div",n+"-base",h),this._separator=Qe("div",n+"-separator",h),this._overlaysList=Qe("div",n+"-overlays",h),s.appendChild(h)},_getLayer:function(n){for(var s=0;s<this._layers.length;s++)if(this._layers[s]&&y(this._layers[s].layer)===n)return this._layers[s]},_addLayer:function(n,s,o){this._map&&n.on("add remove",this._onLayerChange,this),this._layers.push({layer:n,name:s,overlay:o}),this.options.sortLayers&&this._layers.sort(j(function(h,v){return this.options.sortFunction(h.layer,v.layer,h.name,v.name)},this)),this.options.autoZIndex&&n.setZIndex&&(this._lastZIndex++,n.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;W(this._baseLayersList),W(this._overlaysList),this._layerControlInputs=[];var n,s,o,h,v=0;for(o=0;o<this._layers.length;o++)h=this._layers[o],this._addItem(h),s=s||h.overlay,n=n||!h.overlay,v+=h.overlay?0:1;return this.options.hideSingleBase&&(n=n&&v>1,this._baseLayersList.style.display=n?"":"none"),this._separator.style.display=s&&n?"":"none",this},_onLayerChange:function(n){this._handlingClick||this._update();var s=this._getLayer(y(n.target)),o=s.overlay?n.type==="add"?"overlayadd":"overlayremove":n.type==="add"?"baselayerchange":null;o&&this._map.fire(o,s)},_createRadioElement:function(n,s){var o='<input type="radio" class="leaflet-control-layers-selector" name="'+n+'"'+(s?' checked="checked"':"")+"/>",h=document.createElement("div");return h.innerHTML=o,h.firstChild},_addItem:function(n){var s=document.createElement("label"),o=this._map.hasLayer(n.layer),h;n.overlay?(h=document.createElement("input"),h.type="checkbox",h.className="leaflet-control-layers-selector",h.defaultChecked=o):h=this._createRadioElement("leaflet-base-layers_"+y(this),o),this._layerControlInputs.push(h),h.layerId=y(n.layer),$e(h,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+n.name;var w=document.createElement("span");s.appendChild(w),w.appendChild(h),w.appendChild(v);var M=n.overlay?this._overlaysList:this._baseLayersList;return M.appendChild(s),this._checkDisabledLayers(),s},_onInputClick:function(){if(!this._preventClick){var n=this._layerControlInputs,s,o,h=[],v=[];this._handlingClick=!0;for(var w=n.length-1;w>=0;w--)s=n[w],o=this._getLayer(s.layerId).layer,s.checked?h.push(o):s.checked||v.push(o);for(w=0;w<v.length;w++)this._map.hasLayer(v[w])&&this._map.removeLayer(v[w]);for(w=0;w<h.length;w++)this._map.hasLayer(h[w])||this._map.addLayer(h[w]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var n=this._layerControlInputs,s,o,h=this._map.getZoom(),v=n.length-1;v>=0;v--)s=n[v],o=this._getLayer(s.layerId).layer,s.disabled=o.options.minZoom!==void 0&&h<o.options.minZoom||o.options.maxZoom!==void 0&&h>o.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var n=this._section;this._preventClick=!0,$e(n,"click",Bt),this.expand();var s=this;setTimeout(function(){vt(n,"click",Bt),s._preventClick=!1})}}),eo=function(n,s,o){return new js(n,s,o)},Kl=Ln.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(n){var s="leaflet-control-zoom",o=Qe("div",s+" leaflet-bar"),h=this.options;return this._zoomInButton=this._createButton(h.zoomInText,h.zoomInTitle,s+"-in",o,this._zoomIn),this._zoomOutButton=this._createButton(h.zoomOutText,h.zoomOutTitle,s+"-out",o,this._zoomOut),this._updateDisabled(),n.on("zoomend zoomlevelschange",this._updateDisabled,this),o},onRemove:function(n){n.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(n){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(n.shiftKey?3:1))},_zoomOut:function(n){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(n.shiftKey?3:1))},_createButton:function(n,s,o,h,v){var w=Qe("a",o,h);return w.innerHTML=n,w.href="#",w.title=s,w.setAttribute("role","button"),w.setAttribute("aria-label",s),ui(w),$e(w,"click",Va),$e(w,"click",v,this),$e(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var n=this._map,s="leaflet-disabled";Ve(this._zoomInButton,s),Ve(this._zoomOutButton,s),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||n._zoom===n.getMinZoom())&&(ge(this._zoomOutButton,s),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||n._zoom===n.getMaxZoom())&&(ge(this._zoomInButton,s),this._zoomInButton.setAttribute("aria-disabled","true"))}});lt.mergeOptions({zoomControl:!0}),lt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Kl,this.addControl(this.zoomControl))});var qc=function(n){return new Kl(n)},to=Ln.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(n){var s="leaflet-control-scale",o=Qe("div",s),h=this.options;return this._addScales(h,s+"-line",o),n.on(h.updateWhenIdle?"moveend":"move",this._update,this),n.whenReady(this._update,this),o},onRemove:function(n){n.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(n,s,o){n.metric&&(this._mScale=Qe("div",s,o)),n.imperial&&(this._iScale=Qe("div",s,o))},_update:function(){var n=this._map,s=n.getSize().y/2,o=n.distance(n.containerPointToLatLng([0,s]),n.containerPointToLatLng([this.options.maxWidth,s]));this._updateScales(o)},_updateScales:function(n){this.options.metric&&n&&this._updateMetric(n),this.options.imperial&&n&&this._updateImperial(n)},_updateMetric:function(n){var s=this._getRoundNum(n),o=s<1e3?s+" m":s/1e3+" km";this._updateScale(this._mScale,o,s/n)},_updateImperial:function(n){var s=n*3.2808399,o,h,v;s>5280?(o=s/5280,h=this._getRoundNum(o),this._updateScale(this._iScale,h+" mi",h/o)):(v=this._getRoundNum(s),this._updateScale(this._iScale,v+" ft",v/s))},_updateScale:function(n,s,o){n.style.width=Math.round(this.options.maxWidth*o)+"px",n.innerHTML=s},_getRoundNum:function(n){var s=Math.pow(10,(Math.floor(n)+"").length-1),o=n/s;return o=o>=10?10:o>=5?5:o>=3?3:o>=2?2:1,s*o}}),Xl=function(n){return new to(n)},$c='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ql=Ln.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ke.inlineSvg?$c+" ":"")+"Leaflet</a>"},initialize:function(n){Z(this,n),this._attributions={}},onAdd:function(n){n.attributionControl=this,this._container=Qe("div","leaflet-control-attribution"),ui(this._container);for(var s in n._layers)n._layers[s].getAttribution&&this.addAttribution(n._layers[s].getAttribution());return this._update(),n.on("layeradd",this._addAttribution,this),this._container},onRemove:function(n){n.off("layeradd",this._addAttribution,this)},_addAttribution:function(n){n.layer.getAttribution&&(this.addAttribution(n.layer.getAttribution()),n.layer.once("remove",function(){this.removeAttribution(n.layer.getAttribution())},this))},setPrefix:function(n){return this.options.prefix=n,this._update(),this},addAttribution:function(n){return n?(this._attributions[n]||(this._attributions[n]=0),this._attributions[n]++,this._update(),this):this},removeAttribution:function(n){return n?(this._attributions[n]&&(this._attributions[n]--,this._update()),this):this},_update:function(){if(this._map){var n=[];for(var s in this._attributions)this._attributions[s]&&n.push(s);var o=[];this.options.prefix&&o.push(this.options.prefix),n.length&&o.push(n.join(", ")),this._container.innerHTML=o.join(' <span aria-hidden="true">|</span> ')}}});lt.mergeOptions({attributionControl:!0}),lt.addInitHook(function(){this.options.attributionControl&&new Ql().addTo(this)});var Yc=function(n){return new Ql(n)};Ln.Layers=js,Ln.Zoom=Kl,Ln.Scale=to,Ln.Attribution=Ql,Ma.layers=eo,Ma.zoom=qc,Ma.scale=Xl,Ma.attribution=Yc;var fa=Ze.extend({initialize:function(n){this._map=n},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});fa.addTo=function(n,s){return n.addHandler(s,this),this};var Vc={Events:J},Wl=ke.touch?"touchstart mousedown":"mousedown",Fa=B.extend({options:{clickTolerance:3},initialize:function(n,s,o,h){Z(this,h),this._element=n,this._dragStartTarget=s||n,this._preventOutline=o},enable:function(){this._enabled||($e(this._dragStartTarget,Wl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Fa._dragging===this&&this.finishDrag(!0),vt(this._dragStartTarget,Wl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(n){if(this._enabled&&(this._moved=!1,!Se(this._element,"leaflet-zoom-anim"))){if(n.touches&&n.touches.length!==1){Fa._dragging===this&&this.finishDrag();return}if(!(Fa._dragging||n.shiftKey||n.which!==1&&n.button!==1&&!n.touches)&&(Fa._dragging=this,this._preventOutline&&Ri(this._element),Ks(),Mi(),!this._moving)){this.fire("down");var s=n.touches?n.touches[0]:n,o=Qs(this._element);this._startPoint=new ee(s.clientX,s.clientY),this._startPos=Ya(this._element),this._parentScale=_s(o);var h=n.type==="mousedown";$e(document,h?"mousemove":"touchmove",this._onMove,this),$e(document,h?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(n){if(this._enabled){if(n.touches&&n.touches.length>1){this._moved=!0;return}var s=n.touches&&n.touches.length===1?n.touches[0]:n,o=new ee(s.clientX,s.clientY)._subtract(this._startPoint);!o.x&&!o.y||Math.abs(o.x)+Math.abs(o.y)<this.options.clickTolerance||(o.x/=this._parentScale.x,o.y/=this._parentScale.y,Bt(n),this._moved||(this.fire("dragstart"),this._moved=!0,ge(document.body,"leaflet-dragging"),this._lastTarget=n.target||n.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ge(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(o),this._moving=!0,this._lastEvent=n,this._updatePosition())}},_updatePosition:function(){var n={originalEvent:this._lastEvent};this.fire("predrag",n),Ct(this._element,this._newPos),this.fire("drag",n)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(n){Ve(document.body,"leaflet-dragging"),this._lastTarget&&(Ve(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),vt(document,"mousemove touchmove",this._onMove,this),vt(document,"mouseup touchend touchcancel",this._onUp,this),vs(),da();var s=this._moved&&this._moving;this._moving=!1,Fa._dragging=!1,s&&this.fire("dragend",{noInertia:n,distance:this._newPos.distanceTo(this._startPos)})}});function no(n,s,o){var h,v=[1,4,2,8],w,M,Y,ie,me,Ne,Pe,Ke;for(w=0,Ne=n.length;w<Ne;w++)n[w]._code=di(n[w],s);for(Y=0;Y<4;Y++){for(Pe=v[Y],h=[],w=0,Ne=n.length,M=Ne-1;w<Ne;M=w++)ie=n[w],me=n[M],ie._code&Pe?me._code&Pe||(Ke=Js(me,ie,Pe,s,o),Ke._code=di(Ke,s),h.push(Ke)):(me._code&Pe&&(Ke=Js(me,ie,Pe,s,o),Ke._code=di(Ke,s),h.push(Ke)),h.push(ie));n=h}return n}function ao(n,s){var o,h,v,w,M,Y,ie,me,Ne;if(!n||n.length===0)throw new Error("latlngs not passed");Pn(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var Pe=be([0,0]),Ke=he(n),tn=Ke.getNorthWest().distanceTo(Ke.getSouthWest())*Ke.getNorthEast().distanceTo(Ke.getNorthWest());tn<1700&&(Pe=Jl(n));var Pt=n.length,kn=[];for(o=0;o<Pt;o++){var ct=be(n[o]);kn.push(s.project(be([ct.lat-Pe.lat,ct.lng-Pe.lng])))}for(Y=ie=me=0,o=0,h=Pt-1;o<Pt;h=o++)v=kn[o],w=kn[h],M=v.y*w.x-w.y*v.x,ie+=(v.x+w.x)*M,me+=(v.y+w.y)*M,Y+=M*3;Y===0?Ne=kn[0]:Ne=[ie/Y,me/Y];var ut=s.unproject(P(Ne));return be([ut.lat+Pe.lat,ut.lng+Pe.lng])}function Jl(n){for(var s=0,o=0,h=0,v=0;v<n.length;v++){var w=be(n[v]);s+=w.lat,o+=w.lng,h++}return be([s/h,o/h])}var er={__proto__:null,clipPolygon:no,polygonCenter:ao,centroid:Jl};function io(n,s){if(!s||!n.length)return n.slice();var o=s*s;return n=Kc(n,o),n=lo(n,o),n}function so(n,s,o){return Math.sqrt(ws(n,s,o,!0))}function Fc(n,s,o){return ws(n,s,o)}function lo(n,s){var o=n.length,h=typeof Uint8Array<"u"?Uint8Array:Array,v=new h(o);v[0]=v[o-1]=1,tr(n,v,s,0,o-1);var w,M=[];for(w=0;w<o;w++)v[w]&&M.push(n[w]);return M}function tr(n,s,o,h,v){var w=0,M,Y,ie;for(Y=h+1;Y<=v-1;Y++)ie=ws(n[Y],n[h],n[v],!0),ie>w&&(M=Y,w=ie);w>o&&(s[M]=1,tr(n,s,o,h,M),tr(n,s,o,M,v))}function Kc(n,s){for(var o=[n[0]],h=1,v=0,w=n.length;h<w;h++)Xc(n[h],n[v])>s&&(o.push(n[h]),v=h);return v<w-1&&o.push(n[w-1]),o}var ro;function oo(n,s,o,h,v){var w=h?ro:di(n,o),M=di(s,o),Y,ie,me;for(ro=M;;){if(!(w|M))return[n,s];if(w&M)return!1;Y=w||M,ie=Js(n,s,Y,o,v),me=di(ie,o),Y===w?(n=ie,w=me):(s=ie,M=me)}}function Js(n,s,o,h,v){var w=s.x-n.x,M=s.y-n.y,Y=h.min,ie=h.max,me,Ne;return o&8?(me=n.x+w*(ie.y-n.y)/M,Ne=ie.y):o&4?(me=n.x+w*(Y.y-n.y)/M,Ne=Y.y):o&2?(me=ie.x,Ne=n.y+M*(ie.x-n.x)/w):o&1&&(me=Y.x,Ne=n.y+M*(Y.x-n.x)/w),new ee(me,Ne,v)}function di(n,s){var o=0;return n.x<s.min.x?o|=1:n.x>s.max.x&&(o|=2),n.y<s.min.y?o|=4:n.y>s.max.y&&(o|=8),o}function Xc(n,s){var o=s.x-n.x,h=s.y-n.y;return o*o+h*h}function ws(n,s,o,h){var v=s.x,w=s.y,M=o.x-v,Y=o.y-w,ie=M*M+Y*Y,me;return ie>0&&(me=((n.x-v)*M+(n.y-w)*Y)/ie,me>1?(v=o.x,w=o.y):me>0&&(v+=M*me,w+=Y*me)),M=n.x-v,Y=n.y-w,h?M*M+Y*Y:new ee(v,w)}function Pn(n){return!$(n[0])||typeof n[0][0]!="object"&&typeof n[0][0]<"u"}function el(n){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Pn(n)}function Bi(n,s){var o,h,v,w,M,Y,ie,me;if(!n||n.length===0)throw new Error("latlngs not passed");Pn(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var Ne=be([0,0]),Pe=he(n),Ke=Pe.getNorthWest().distanceTo(Pe.getSouthWest())*Pe.getNorthEast().distanceTo(Pe.getNorthWest());Ke<1700&&(Ne=Jl(n));var tn=n.length,Pt=[];for(o=0;o<tn;o++){var kn=be(n[o]);Pt.push(s.project(be([kn.lat-Ne.lat,kn.lng-Ne.lng])))}for(o=0,h=0;o<tn-1;o++)h+=Pt[o].distanceTo(Pt[o+1])/2;if(h===0)me=Pt[0];else for(o=0,w=0;o<tn-1;o++)if(M=Pt[o],Y=Pt[o+1],v=M.distanceTo(Y),w+=v,w>h){ie=(w-h)/v,me=[Y.x-ie*(Y.x-M.x),Y.y-ie*(Y.y-M.y)];break}var ct=s.unproject(P(me));return be([ct.lat+Ne.lat,ct.lng+Ne.lng])}var Qc={__proto__:null,simplify:io,pointToSegmentDistance:so,closestPointOnSegment:Fc,clipSegment:oo,_getEdgeIntersection:Js,_getBitCode:di,_sqClosestPointOnSegment:ws,isFlat:Pn,_flat:el,polylineCenter:Bi},tl={project:function(n){return new ee(n.lng,n.lat)},unproject:function(n){return new _e(n.y,n.x)},bounds:new T([-180,-90],[180,90])},nl={R:6378137,R_MINOR:6356752314245179e-9,bounds:new T([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(n){var s=Math.PI/180,o=this.R,h=n.lat*s,v=this.R_MINOR/o,w=Math.sqrt(1-v*v),M=w*Math.sin(h),Y=Math.tan(Math.PI/4-h/2)/Math.pow((1-M)/(1+M),w/2);return h=-o*Math.log(Math.max(Y,1e-10)),new ee(n.lng*s*o,h)},unproject:function(n){for(var s=180/Math.PI,o=this.R,h=this.R_MINOR/o,v=Math.sqrt(1-h*h),w=Math.exp(-n.y/o),M=Math.PI/2-2*Math.atan(w),Y=0,ie=.1,me;Y<15&&Math.abs(ie)>1e-7;Y++)me=v*Math.sin(M),me=Math.pow((1-me)/(1+me),v/2),ie=Math.PI/2-2*Math.atan(w*me)-M,M+=ie;return new _e(M*s,n.x*s/o)}},co={__proto__:null,LonLat:tl,Mercator:nl,SphericalMercator:st},uo=p({},we,{code:"EPSG:3395",projection:nl,transformation:(function(){var n=.5/(Math.PI*nl.R);return De(n,.5,-n,.5)})()}),nr=p({},we,{code:"EPSG:4326",projection:tl,transformation:De(1/180,1,-1/180,.5)}),Pi=p({},Le,{projection:tl,transformation:De(1,0,-1,0),scale:function(n){return Math.pow(2,n)},zoom:function(n){return Math.log(n)/Math.LN2},distance:function(n,s){var o=s.lng-n.lng,h=s.lat-n.lat;return Math.sqrt(o*o+h*h)},infinite:!0});Le.Earth=we,Le.EPSG3395=uo,Le.EPSG3857=Je,Le.EPSG900913=jt,Le.EPSG4326=nr,Le.Simple=Pi;var ta=B.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(n){return n.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(n){return n&&n.removeLayer(this),this},getPane:function(n){return this._map.getPane(n?this.options[n]||n:this.options.pane)},addInteractiveTarget:function(n){return this._map._targets[y(n)]=this,this},removeInteractiveTarget:function(n){return delete this._map._targets[y(n)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(n){var s=n.target;if(s.hasLayer(this)){if(this._map=s,this._zoomAnimated=s._zoomAnimated,this.getEvents){var o=this.getEvents();s.on(o,this),this.once("remove",function(){s.off(o,this)},this)}this.onAdd(s),this.fire("add"),s.fire("layeradd",{layer:this})}}});lt.include({addLayer:function(n){if(!n._layerAdd)throw new Error("The provided object is not a Layer.");var s=y(n);return this._layers[s]?this:(this._layers[s]=n,n._mapToAdd=this,n.beforeAdd&&n.beforeAdd(this),this.whenReady(n._layerAdd,n),this)},removeLayer:function(n){var s=y(n);return this._layers[s]?(this._loaded&&n.onRemove(this),delete this._layers[s],this._loaded&&(this.fire("layerremove",{layer:n}),n.fire("remove")),n._map=n._mapToAdd=null,this):this},hasLayer:function(n){return y(n)in this._layers},eachLayer:function(n,s){for(var o in this._layers)n.call(s,this._layers[o]);return this},_addLayers:function(n){n=n?$(n)?n:[n]:[];for(var s=0,o=n.length;s<o;s++)this.addLayer(n[s])},_addZoomLimit:function(n){(!isNaN(n.options.maxZoom)||!isNaN(n.options.minZoom))&&(this._zoomBoundLayers[y(n)]=n,this._updateZoomLevels())},_removeZoomLimit:function(n){var s=y(n);this._zoomBoundLayers[s]&&(delete this._zoomBoundLayers[s],this._updateZoomLevels())},_updateZoomLevels:function(){var n=1/0,s=-1/0,o=this._getZoomSpan();for(var h in this._zoomBoundLayers){var v=this._zoomBoundLayers[h].options;n=v.minZoom===void 0?n:Math.min(n,v.minZoom),s=v.maxZoom===void 0?s:Math.max(s,v.maxZoom)}this._layersMaxZoom=s===-1/0?void 0:s,this._layersMinZoom=n===1/0?void 0:n,o!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ui=ta.extend({initialize:function(n,s){Z(this,s),this._layers={};var o,h;if(n)for(o=0,h=n.length;o<h;o++)this.addLayer(n[o])},addLayer:function(n){var s=this.getLayerId(n);return this._layers[s]=n,this._map&&this._map.addLayer(n),this},removeLayer:function(n){var s=n in this._layers?n:this.getLayerId(n);return this._map&&this._layers[s]&&this._map.removeLayer(this._layers[s]),delete this._layers[s],this},hasLayer:function(n){var s=typeof n=="number"?n:this.getLayerId(n);return s in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(n){var s=Array.prototype.slice.call(arguments,1),o,h;for(o in this._layers)h=this._layers[o],h[n]&&h[n].apply(h,s);return this},onAdd:function(n){this.eachLayer(n.addLayer,n)},onRemove:function(n){this.eachLayer(n.removeLayer,n)},eachLayer:function(n,s){for(var o in this._layers)n.call(s,this._layers[o]);return this},getLayer:function(n){return this._layers[n]},getLayers:function(){var n=[];return this.eachLayer(n.push,n),n},setZIndex:function(n){return this.invoke("setZIndex",n)},getLayerId:function(n){return y(n)}}),Wc=function(n,s){return new Ui(n,s)},ma=Ui.extend({addLayer:function(n){return this.hasLayer(n)?this:(n.addEventParent(this),Ui.prototype.addLayer.call(this,n),this.fire("layeradd",{layer:n}))},removeLayer:function(n){return this.hasLayer(n)?(n in this._layers&&(n=this._layers[n]),n.removeEventParent(this),Ui.prototype.removeLayer.call(this,n),this.fire("layerremove",{layer:n})):this},setStyle:function(n){return this.invoke("setStyle",n)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var n=new le;for(var s in this._layers){var o=this._layers[s];n.extend(o.getBounds?o.getBounds():o.getLatLng())}return n}}),ho=function(n,s){return new ma(n,s)},pa=Ze.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(n){Z(this,n)},createIcon:function(n){return this._createIcon("icon",n)},createShadow:function(n){return this._createIcon("shadow",n)},_createIcon:function(n,s){var o=this._getIconUrl(n);if(!o){if(n==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var h=this._createImg(o,s&&s.tagName==="IMG"?s:null);return this._setIconStyles(h,n),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),h},_setIconStyles:function(n,s){var o=this.options,h=o[s+"Size"];typeof h=="number"&&(h=[h,h]);var v=P(h),w=P(s==="shadow"&&o.shadowAnchor||o.iconAnchor||v&&v.divideBy(2,!0));n.className="leaflet-marker-"+s+" "+(o.className||""),w&&(n.style.marginLeft=-w.x+"px",n.style.marginTop=-w.y+"px"),v&&(n.style.width=v.x+"px",n.style.height=v.y+"px")},_createImg:function(n,s){return s=s||document.createElement("img"),s.src=n,s},_getIconUrl:function(n){return ke.retina&&this.options[n+"RetinaUrl"]||this.options[n+"Url"]}});function Ss(n){return new pa(n)}var Ns=pa.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(n){return typeof Ns.imagePath!="string"&&(Ns.imagePath=this._detectIconPath()),(this.options.imagePath||Ns.imagePath)+pa.prototype._getIconUrl.call(this,n)},_stripUrl:function(n){var s=function(o,h,v){var w=h.exec(o);return w&&w[v]};return n=s(n,/^url\((['"])?(.+)\1\)$/,2),n&&s(n,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var n=Qe("div","leaflet-default-icon-path",document.body),s=oi(n,"background-image")||oi(n,"backgroundImage");if(document.body.removeChild(n),s=this._stripUrl(s),s)return s;var o=document.querySelector('link[href$="leaflet.css"]');return o?o.href.substring(0,o.href.length-11-1):""}}),Cs=fa.extend({initialize:function(n){this._marker=n},addHooks:function(){var n=this._marker._icon;this._draggable||(this._draggable=new Fa(n,n,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ge(n,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ve(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(n){var s=this._marker,o=s._map,h=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,w=Ya(s._icon),M=o.getPixelBounds(),Y=o.getPixelOrigin(),ie=Q(M.min._subtract(Y).add(v),M.max._subtract(Y).subtract(v));if(!ie.contains(w)){var me=P((Math.max(ie.max.x,w.x)-ie.max.x)/(M.max.x-ie.max.x)-(Math.min(ie.min.x,w.x)-ie.min.x)/(M.min.x-ie.min.x),(Math.max(ie.max.y,w.y)-ie.max.y)/(M.max.y-ie.max.y)-(Math.min(ie.min.y,w.y)-ie.min.y)/(M.min.y-ie.min.y)).multiplyBy(h);o.panBy(me,{animate:!1}),this._draggable._newPos._add(me),this._draggable._startPos._add(me),Ct(s._icon,this._draggable._newPos),this._onDrag(n),this._panRequest=je(this._adjustPan.bind(this,n))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(n){this._marker.options.autoPan&&(Ce(this._panRequest),this._panRequest=je(this._adjustPan.bind(this,n)))},_onDrag:function(n){var s=this._marker,o=s._shadow,h=Ya(s._icon),v=s._map.layerPointToLatLng(h);o&&Ct(o,h),s._latlng=v,n.latlng=v,n.oldLatLng=this._oldLatLng,s.fire("move",n).fire("drag",n)},_onDragEnd:function(n){Ce(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",n)}}),Es=ta.extend({options:{icon:new Ns,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(n,s){Z(this,s),this._latlng=be(n)},onAdd:function(n){this._zoomAnimated=this._zoomAnimated&&n.options.markerZoomAnimation,this._zoomAnimated&&n.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(n){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&n.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(n){var s=this._latlng;return this._latlng=be(n),this.update(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},setZIndexOffset:function(n){return this.options.zIndexOffset=n,this.update()},getIcon:function(){return this.options.icon},setIcon:function(n){return this.options.icon=n,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var n=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(n)}return this},_initIcon:function(){var n=this.options,s="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),o=n.icon.createIcon(this._icon),h=!1;o!==this._icon&&(this._icon&&this._removeIcon(),h=!0,n.title&&(o.title=n.title),o.tagName==="IMG"&&(o.alt=n.alt||"")),ge(o,s),n.keyboard&&(o.tabIndex="0",o.setAttribute("role","button")),this._icon=o,n.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&$e(o,"focus",this._panOnFocus,this);var v=n.icon.createShadow(this._shadow),w=!1;v!==this._shadow&&(this._removeShadow(),w=!0),v&&(ge(v,s),v.alt=""),this._shadow=v,n.opacity<1&&this._updateOpacity(),h&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&w&&this.getPane(n.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&vt(this._icon,"focus",this._panOnFocus,this),gt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&gt(this._shadow),this._shadow=null},_setPos:function(n){this._icon&&Ct(this._icon,n),this._shadow&&Ct(this._shadow,n),this._zIndex=n.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(n){this._icon&&(this._icon.style.zIndex=this._zIndex+n)},_animateZoom:function(n){var s=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center).round();this._setPos(s)},_initInteraction:function(){if(this.options.interactive&&(ge(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Cs)){var n=this.options.draggable;this.dragging&&(n=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Cs(this),n&&this.dragging.enable()}},setOpacity:function(n){return this.options.opacity=n,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var n=this.options.opacity;this._icon&&We(this._icon,n),this._shadow&&We(this._shadow,n)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var n=this._map;if(n){var s=this.options.icon.options,o=s.iconSize?P(s.iconSize):P(0,0),h=s.iconAnchor?P(s.iconAnchor):P(0,0);n.panInside(this._latlng,{paddingTopLeft:h,paddingBottomRight:o.subtract(h)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function fo(n,s){return new Es(n,s)}var ga=ta.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(n){this._renderer=n.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(n){return Z(this,n),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&n&&Object.prototype.hasOwnProperty.call(n,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Hi=ga.extend({options:{fill:!0,radius:10},initialize:function(n,s){Z(this,s),this._latlng=be(n),this._radius=this.options.radius},setLatLng:function(n){var s=this._latlng;return this._latlng=be(n),this.redraw(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(n){return this.options.radius=this._radius=n,this.redraw()},getRadius:function(){return this._radius},setStyle:function(n){var s=n&&n.radius||this._radius;return ga.prototype.setStyle.call(this,n),this.setRadius(s),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var n=this._radius,s=this._radiusY||n,o=this._clickTolerance(),h=[n+o,s+o];this._pxBounds=new T(this._point.subtract(h),this._point.add(h))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(n){return n.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function mo(n,s){return new Hi(n,s)}var al=Hi.extend({initialize:function(n,s,o){if(typeof s=="number"&&(s=p({},o,{radius:s})),Z(this,s),this._latlng=be(n),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(n){return this._mRadius=n,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var n=[this._radius,this._radiusY||this._radius];return new le(this._map.layerPointToLatLng(this._point.subtract(n)),this._map.layerPointToLatLng(this._point.add(n)))},setStyle:ga.prototype.setStyle,_project:function(){var n=this._latlng.lng,s=this._latlng.lat,o=this._map,h=o.options.crs;if(h.distance===we.distance){var v=Math.PI/180,w=this._mRadius/we.R/v,M=o.project([s+w,n]),Y=o.project([s-w,n]),ie=M.add(Y).divideBy(2),me=o.unproject(ie).lat,Ne=Math.acos((Math.cos(w*v)-Math.sin(s*v)*Math.sin(me*v))/(Math.cos(s*v)*Math.cos(me*v)))/v;(isNaN(Ne)||Ne===0)&&(Ne=w/Math.cos(Math.PI/180*s)),this._point=ie.subtract(o.getPixelOrigin()),this._radius=isNaN(Ne)?0:ie.x-o.project([me,n-Ne]).x,this._radiusY=ie.y-M.y}else{var Pe=h.unproject(h.project(this._latlng).subtract([this._mRadius,0]));this._point=o.latLngToLayerPoint(this._latlng),this._radius=this._point.x-o.latLngToLayerPoint(Pe).x}this._updateBounds()}});function po(n,s,o){return new al(n,s,o)}var za=ga.extend({options:{smoothFactor:1,noClip:!1},initialize:function(n,s){Z(this,s),this._setLatLngs(n)},getLatLngs:function(){return this._latlngs},setLatLngs:function(n){return this._setLatLngs(n),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(n){for(var s=1/0,o=null,h=ws,v,w,M=0,Y=this._parts.length;M<Y;M++)for(var ie=this._parts[M],me=1,Ne=ie.length;me<Ne;me++){v=ie[me-1],w=ie[me];var Pe=h(n,v,w,!0);Pe<s&&(s=Pe,o=h(n,v,w))}return o&&(o.distance=Math.sqrt(s)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Bi(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(n,s){return s=s||this._defaultShape(),n=be(n),s.push(n),this._bounds.extend(n),this.redraw()},_setLatLngs:function(n){this._bounds=new le,this._latlngs=this._convertLatLngs(n)},_defaultShape:function(){return Pn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(n){for(var s=[],o=Pn(n),h=0,v=n.length;h<v;h++)o?(s[h]=be(n[h]),this._bounds.extend(s[h])):s[h]=this._convertLatLngs(n[h]);return s},_project:function(){var n=new T;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,n),this._bounds.isValid()&&n.isValid()&&(this._rawPxBounds=n,this._updateBounds())},_updateBounds:function(){var n=this._clickTolerance(),s=new ee(n,n);this._rawPxBounds&&(this._pxBounds=new T([this._rawPxBounds.min.subtract(s),this._rawPxBounds.max.add(s)]))},_projectLatlngs:function(n,s,o){var h=n[0]instanceof _e,v=n.length,w,M;if(h){for(M=[],w=0;w<v;w++)M[w]=this._map.latLngToLayerPoint(n[w]),o.extend(M[w]);s.push(M)}else for(w=0;w<v;w++)this._projectLatlngs(n[w],s,o)},_clipPoints:function(){var n=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}var s=this._parts,o,h,v,w,M,Y,ie;for(o=0,v=0,w=this._rings.length;o<w;o++)for(ie=this._rings[o],h=0,M=ie.length;h<M-1;h++)Y=oo(ie[h],ie[h+1],n,h,!0),Y&&(s[v]=s[v]||[],s[v].push(Y[0]),(Y[1]!==ie[h+1]||h===M-2)&&(s[v].push(Y[1]),v++))}},_simplifyPoints:function(){for(var n=this._parts,s=this.options.smoothFactor,o=0,h=n.length;o<h;o++)n[o]=io(n[o],s)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(n,s){var o,h,v,w,M,Y,ie=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(o=0,w=this._parts.length;o<w;o++)for(Y=this._parts[o],h=0,M=Y.length,v=M-1;h<M;v=h++)if(!(!s&&h===0)&&so(n,Y[v],Y[h])<=ie)return!0;return!1}});function Jc(n,s){return new za(n,s)}za._flat=el;var Zi=za.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ao(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(n){var s=za.prototype._convertLatLngs.call(this,n),o=s.length;return o>=2&&s[0]instanceof _e&&s[0].equals(s[o-1])&&s.pop(),s},_setLatLngs:function(n){za.prototype._setLatLngs.call(this,n),Pn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Pn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var n=this._renderer._bounds,s=this.options.weight,o=new ee(s,s);if(n=new T(n.min.subtract(o),n.max.add(o)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}for(var h=0,v=this._rings.length,w;h<v;h++)w=no(this._rings[h],n,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(n){var s=!1,o,h,v,w,M,Y,ie,me;if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(w=0,ie=this._parts.length;w<ie;w++)for(o=this._parts[w],M=0,me=o.length,Y=me-1;M<me;Y=M++)h=o[M],v=o[Y],h.y>n.y!=v.y>n.y&&n.x<(v.x-h.x)*(n.y-h.y)/(v.y-h.y)+h.x&&(s=!s);return s||za.prototype._containsPoint.call(this,n,!0)}});function eu(n,s){return new Zi(n,s)}var Ra=ma.extend({initialize:function(n,s){Z(this,s),this._layers={},n&&this.addData(n)},addData:function(n){var s=$(n)?n:n.features,o,h,v;if(s){for(o=0,h=s.length;o<h;o++)v=s[o],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var w=this.options;if(w.filter&&!w.filter(n))return this;var M=rn(n,w);return M?(M.feature=ll(n),M.defaultOptions=M.options,this.resetStyle(M),w.onEachFeature&&w.onEachFeature(n,M),this.addLayer(M)):this},resetStyle:function(n){return n===void 0?this.eachLayer(this.resetStyle,this):(n.options=p({},n.defaultOptions),this._setLayerStyle(n,this.options.style),this)},setStyle:function(n){return this.eachLayer(function(s){this._setLayerStyle(s,n)},this)},_setLayerStyle:function(n,s){n.setStyle&&(typeof s=="function"&&(s=s(n.feature)),n.setStyle(s))}});function rn(n,s){var o=n.type==="Feature"?n.geometry:n,h=o?o.coordinates:null,v=[],w=s&&s.pointToLayer,M=s&&s.coordsToLatLng||il,Y,ie,me,Ne;if(!h&&!o)return null;switch(o.type){case"Point":return Y=M(h),Ii(w,n,Y,s);case"MultiPoint":for(me=0,Ne=h.length;me<Ne;me++)Y=M(h[me]),v.push(Ii(w,n,Y,s));return new ma(v);case"LineString":case"MultiLineString":return ie=Ts(h,o.type==="LineString"?0:1,M),new za(ie,s);case"Polygon":case"MultiPolygon":return ie=Ts(h,o.type==="Polygon"?1:2,M),new Zi(ie,s);case"GeometryCollection":for(me=0,Ne=o.geometries.length;me<Ne;me++){var Pe=rn({geometry:o.geometries[me],type:"Feature",properties:n.properties},s);Pe&&v.push(Pe)}return new ma(v);case"FeatureCollection":for(me=0,Ne=o.features.length;me<Ne;me++){var Ke=rn(o.features[me],s);Ke&&v.push(Ke)}return new ma(v);default:throw new Error("Invalid GeoJSON object.")}}function Ii(n,s,o,h){return n?n(s,o):new Es(o,h&&h.markersInheritOptions&&h)}function il(n){return new _e(n[1],n[0],n[2])}function Ts(n,s,o){for(var h=[],v=0,w=n.length,M;v<w;v++)M=s?Ts(n[v],s-1,o):(o||il)(n[v]),h.push(M);return h}function sl(n,s){return n=be(n),n.alt!==void 0?[A(n.lng,s),A(n.lat,s),A(n.alt,s)]:[A(n.lng,s),A(n.lat,s)]}function As(n,s,o,h){for(var v=[],w=0,M=n.length;w<M;w++)v.push(s?As(n[w],Pn(n[w])?0:s-1,o,h):sl(n[w],h));return!s&&o&&v.length>0&&v.push(v[0].slice()),v}function Ka(n,s){return n.feature?p({},n.feature,{geometry:s}):ll(s)}function ll(n){return n.type==="Feature"||n.type==="FeatureCollection"?n:{type:"Feature",properties:{},geometry:n}}var Xa={toGeoJSON:function(n){return Ka(this,{type:"Point",coordinates:sl(this.getLatLng(),n)})}};Es.include(Xa),al.include(Xa),Hi.include(Xa),za.include({toGeoJSON:function(n){var s=!Pn(this._latlngs),o=As(this._latlngs,s?1:0,!1,n);return Ka(this,{type:(s?"Multi":"")+"LineString",coordinates:o})}}),Zi.include({toGeoJSON:function(n){var s=!Pn(this._latlngs),o=s&&!Pn(this._latlngs[0]),h=As(this._latlngs,o?2:s?1:0,!0,n);return s||(h=[h]),Ka(this,{type:(o?"Multi":"")+"Polygon",coordinates:h})}}),Ui.include({toMultiPoint:function(n){var s=[];return this.eachLayer(function(o){s.push(o.toGeoJSON(n).geometry.coordinates)}),Ka(this,{type:"MultiPoint",coordinates:s})},toGeoJSON:function(n){var s=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(s==="MultiPoint")return this.toMultiPoint(n);var o=s==="GeometryCollection",h=[];return this.eachLayer(function(v){if(v.toGeoJSON){var w=v.toGeoJSON(n);if(o)h.push(w.geometry);else{var M=ll(w);M.type==="FeatureCollection"?h.push.apply(h,M.features):h.push(M)}}}),o?Ka(this,{geometries:h,type:"GeometryCollection"}):{type:"FeatureCollection",features:h}}});function rl(n,s){return new Ra(n,s)}var Ls=rl,Gi=ta.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(n,s,o){this._url=n,this._bounds=he(s),Z(this,o)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ge(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){gt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(n){return this.options.opacity=n,this._image&&this._updateOpacity(),this},setStyle:function(n){return n.opacity&&this.setOpacity(n.opacity),this},bringToFront:function(){return this._map&&re(this._image),this},bringToBack:function(){return this._map&&ye(this._image),this},setUrl:function(n){return this._url=n,this._image&&(this._image.src=n),this},setBounds:function(n){return this._bounds=he(n),this._map&&this._reset(),this},getEvents:function(){var n={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var n=this._url.tagName==="IMG",s=this._image=n?this._url:Qe("img");if(ge(s,"leaflet-image-layer"),this._zoomAnimated&&ge(s,"leaflet-zoom-animated"),this.options.className&&ge(s,this.options.className),s.onselectstart=S,s.onmousemove=S,s.onload=j(this.fire,this,"load"),s.onerror=j(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(s.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),n){this._url=s.src;return}s.src=this._url,s.alt=this.options.alt},_animateZoom:function(n){var s=this._map.getZoomScale(n.zoom),o=this._map._latLngBoundsToNewLayerBounds(this._bounds,n.zoom,n.center).min;La(this._image,o,s)},_reset:function(){var n=this._image,s=new T(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),o=s.getSize();Ct(n,s.min),n.style.width=o.x+"px",n.style.height=o.y+"px"},_updateOpacity:function(){We(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var n=this.options.errorOverlayUrl;n&&this._url!==n&&(this._url=n,this._image.src=n)},getCenter:function(){return this._bounds.getCenter()}}),go=function(n,s,o){return new Gi(n,s,o)},Qa=Gi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var n=this._url.tagName==="VIDEO",s=this._image=n?this._url:Qe("video");if(ge(s,"leaflet-image-layer"),this._zoomAnimated&&ge(s,"leaflet-zoom-animated"),this.options.className&&ge(s,this.options.className),s.onselectstart=S,s.onmousemove=S,s.onloadeddata=j(this.fire,this,"load"),n){for(var o=s.getElementsByTagName("source"),h=[],v=0;v<o.length;v++)h.push(o[v].src);this._url=o.length>0?h:[s.src];return}$(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(s.style,"objectFit")&&(s.style.objectFit="fill"),s.autoplay=!!this.options.autoplay,s.loop=!!this.options.loop,s.muted=!!this.options.muted,s.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var M=Qe("source");M.src=this._url[w],s.appendChild(M)}}});function qi(n,s,o){return new Qa(n,s,o)}var ol=Gi.extend({_initImage:function(){var n=this._image=this._url;ge(n,"leaflet-image-layer"),this._zoomAnimated&&ge(n,"leaflet-zoom-animated"),this.options.className&&ge(n,this.options.className),n.onselectstart=S,n.onmousemove=S}});function vo(n,s,o){return new ol(n,s,o)}var on=ta.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(n,s){n&&(n instanceof _e||$(n))?(this._latlng=be(n),Z(this,s)):(Z(this,n),this._source=s),this.options.content&&(this._content=this.options.content)},openOn:function(n){return n=arguments.length?n:this._source._map,n.hasLayer(this)||n.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(n){return this._map?this.close():(arguments.length?this._source=n:n=this._source,this._prepareOpen(),this.openOn(n._map)),this},onAdd:function(n){this._zoomAnimated=n._zoomAnimated,this._container||this._initLayout(),n._fadeAnimated&&We(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),n._fadeAnimated&&We(this._container,1),this.bringToFront(),this.options.interactive&&(ge(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(n){n._fadeAnimated?(We(this._container,0),this._removeTimeout=setTimeout(j(gt,void 0,this._container),200)):gt(this._container),this.options.interactive&&(Ve(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(n){return this._latlng=be(n),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(n){return this._content=n,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var n={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&re(this._container),this},bringToBack:function(){return this._map&&ye(this._container),this},_prepareOpen:function(n){var s=this._source;if(!s._map)return!1;if(s instanceof ma){s=null;var o=this._source._layers;for(var h in o)if(o[h]._map){s=o[h];break}if(!s)return!1;this._source=s}if(!n)if(s.getCenter)n=s.getCenter();else if(s.getLatLng)n=s.getLatLng();else if(s.getBounds)n=s.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(n),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var n=this._contentNode,s=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof s=="string")n.innerHTML=s;else{for(;n.hasChildNodes();)n.removeChild(n.firstChild);n.appendChild(s)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var n=this._map.latLngToLayerPoint(this._latlng),s=P(this.options.offset),o=this._getAnchor();this._zoomAnimated?Ct(this._container,n.add(o)):s=s.add(n).add(o);var h=this._containerBottom=-s.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+s.x;this._container.style.bottom=h+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});lt.include({_initOverlay:function(n,s,o,h){var v=s;return v instanceof n||(v=new n(h).setContent(s)),o&&v.setLatLng(o),v}}),ta.include({_initOverlay:function(n,s,o,h){var v=o;return v instanceof n?(Z(v,h),v._source=this):(v=s&&!h?s:new n(h,this),v.setContent(o)),v}});var ks=on.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(n){return n=arguments.length?n:this._source._map,!n.hasLayer(this)&&n._popup&&n._popup.options.autoClose&&n.removeLayer(n._popup),n._popup=this,on.prototype.openOn.call(this,n)},onAdd:function(n){on.prototype.onAdd.call(this,n),n.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ga||this._source.on("preclick",ea))},onRemove:function(n){on.prototype.onRemove.call(this,n),n.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ga||this._source.off("preclick",ea))},getEvents:function(){var n=on.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(n.preclick=this.close),this.options.keepInView&&(n.moveend=this._adjustPan),n},_initLayout:function(){var n="leaflet-popup",s=this._container=Qe("div",n+" "+(this.options.className||"")+" leaflet-zoom-animated"),o=this._wrapper=Qe("div",n+"-content-wrapper",s);if(this._contentNode=Qe("div",n+"-content",o),ui(s),ha(this._contentNode),$e(s,"contextmenu",ea),this._tipContainer=Qe("div",n+"-tip-container",s),this._tip=Qe("div",n+"-tip",this._tipContainer),this.options.closeButton){var h=this._closeButton=Qe("a",n+"-close-button",s);h.setAttribute("role","button"),h.setAttribute("aria-label","Close popup"),h.href="#close",h.innerHTML='<span aria-hidden="true">&#215;</span>',$e(h,"click",function(v){Bt(v),this.close()},this)}},_updateLayout:function(){var n=this._contentNode,s=n.style;s.width="",s.whiteSpace="nowrap";var o=n.offsetWidth;o=Math.min(o,this.options.maxWidth),o=Math.max(o,this.options.minWidth),s.width=o+1+"px",s.whiteSpace="",s.height="";var h=n.offsetHeight,v=this.options.maxHeight,w="leaflet-popup-scrolled";v&&h>v?(s.height=v+"px",ge(n,w)):Ve(n,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(n){var s=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center),o=this._getAnchor();Ct(this._container,s.add(o))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var n=this._map,s=parseInt(oi(this._container,"marginBottom"),10)||0,o=this._container.offsetHeight+s,h=this._containerWidth,v=new ee(this._containerLeft,-o-this._containerBottom);v._add(Ya(this._container));var w=n.layerPointToContainerPoint(v),M=P(this.options.autoPanPadding),Y=P(this.options.autoPanPaddingTopLeft||M),ie=P(this.options.autoPanPaddingBottomRight||M),me=n.getSize(),Ne=0,Pe=0;w.x+h+ie.x>me.x&&(Ne=w.x+h-me.x+ie.x),w.x-Ne-Y.x<0&&(Ne=w.x-Y.x),w.y+o+ie.y>me.y&&(Pe=w.y+o-me.y+ie.y),w.y-Pe-Y.y<0&&(Pe=w.y-Y.y),(Ne||Pe)&&(this.options.keepInView&&(this._autopanning=!0),n.fire("autopanstart").panBy([Ne,Pe]))}},_getAnchor:function(){return P(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),_o=function(n,s){return new ks(n,s)};lt.mergeOptions({closePopupOnClick:!0}),lt.include({openPopup:function(n,s,o){return this._initOverlay(ks,n,s,o).openOn(this),this},closePopup:function(n){return n=arguments.length?n:this._popup,n&&n.close(),this}}),ta.include({bindPopup:function(n,s){return this._popup=this._initOverlay(ks,this._popup,n,s),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(n){return this._popup&&(this instanceof ma||(this._popup._source=this),this._popup._prepareOpen(n||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(n){return this._popup&&this._popup.setContent(n),this},getPopup:function(){return this._popup},_openPopup:function(n){if(!(!this._popup||!this._map)){Va(n);var s=n.layer||n.target;if(this._popup._source===s&&!(s instanceof ga)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(n.latlng);return}this._popup._source=s,this.openPopup(n.latlng)}},_movePopup:function(n){this._popup.setLatLng(n.latlng)},_onKeyPress:function(n){n.originalEvent.keyCode===13&&this._openPopup(n)}});var Ms=on.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(n){on.prototype.onAdd.call(this,n),this.setOpacity(this.options.opacity),n.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(n){on.prototype.onRemove.call(this,n),n.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var n=on.prototype.getEvents.call(this);return this.options.permanent||(n.preclick=this.close),n},_initLayout:function(){var n="leaflet-tooltip",s=n+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Qe("div",s),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+y(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(n){var s,o,h=this._map,v=this._container,w=h.latLngToContainerPoint(h.getCenter()),M=h.layerPointToContainerPoint(n),Y=this.options.direction,ie=v.offsetWidth,me=v.offsetHeight,Ne=P(this.options.offset),Pe=this._getAnchor();Y==="top"?(s=ie/2,o=me):Y==="bottom"?(s=ie/2,o=0):Y==="center"?(s=ie/2,o=me/2):Y==="right"?(s=0,o=me/2):Y==="left"?(s=ie,o=me/2):M.x<w.x?(Y="right",s=0,o=me/2):(Y="left",s=ie+(Ne.x+Pe.x)*2,o=me/2),n=n.subtract(P(s,o,!0)).add(Ne).add(Pe),Ve(v,"leaflet-tooltip-right"),Ve(v,"leaflet-tooltip-left"),Ve(v,"leaflet-tooltip-top"),Ve(v,"leaflet-tooltip-bottom"),ge(v,"leaflet-tooltip-"+Y),Ct(v,n)},_updatePosition:function(){var n=this._map.latLngToLayerPoint(this._latlng);this._setPosition(n)},setOpacity:function(n){this.options.opacity=n,this._container&&We(this._container,n)},_animateZoom:function(n){var s=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center);this._setPosition(s)},_getAnchor:function(){return P(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),tu=function(n,s){return new Ms(n,s)};lt.include({openTooltip:function(n,s,o){return this._initOverlay(Ms,n,s,o).openOn(this),this},closeTooltip:function(n){return n.close(),this}}),ta.include({bindTooltip:function(n,s){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ms,this._tooltip,n,s),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(n){if(!(!n&&this._tooltipHandlersAdded)){var s=n?"off":"on",o={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?o.add=this._openTooltip:(o.mouseover=this._openTooltip,o.mouseout=this.closeTooltip,o.click=this._openTooltip,this._map?this._addFocusListeners():o.add=this._addFocusListeners),this._tooltip.options.sticky&&(o.mousemove=this._moveTooltip),this[s](o),this._tooltipHandlersAdded=!n}},openTooltip:function(n){return this._tooltip&&(this instanceof ma||(this._tooltip._source=this),this._tooltip._prepareOpen(n)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(n){return this._tooltip&&this._tooltip.setContent(n),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(n){var s=typeof n.getElement=="function"&&n.getElement();s&&($e(s,"focus",function(){this._tooltip._source=n,this.openTooltip()},this),$e(s,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(n){var s=typeof n.getElement=="function"&&n.getElement();s&&s.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(n){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var s=this;this._map.once("moveend",function(){s._openOnceFlag=!1,s._openTooltip(n)});return}this._tooltip._source=n.layer||n.target,this.openTooltip(this._tooltip.options.sticky?n.latlng:void 0)}},_moveTooltip:function(n){var s=n.latlng,o,h;this._tooltip.options.sticky&&n.originalEvent&&(o=this._map.mouseEventToContainerPoint(n.originalEvent),h=this._map.containerPointToLayerPoint(o),s=this._map.layerPointToLatLng(h)),this._tooltip.setLatLng(s)}});var yo=pa.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(n){var s=n&&n.tagName==="DIV"?n:document.createElement("div"),o=this.options;if(o.html instanceof Element?(W(s),s.appendChild(o.html)):s.innerHTML=o.html!==!1?o.html:"",o.bgPos){var h=P(o.bgPos);s.style.backgroundPosition=-h.x+"px "+-h.y+"px"}return this._setIconStyles(s,"icon"),s},createShadow:function(){return null}});function nu(n){return new yo(n)}pa.Default=Ns;var $i=ta.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ke.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(n){Z(this,n)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(n){n._addZoomLimit(this)},onRemove:function(n){this._removeAllTiles(),gt(this._container),n._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(re(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ye(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(n){return this.options.opacity=n,this._updateOpacity(),this},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var n=this._clampZoom(this._map.getZoom());n!==this._tileZoom&&(this._tileZoom=n,this._updateLevels()),this._update()}return this},getEvents:function(){var n={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=x(this._onMoveEnd,this.options.updateInterval,this)),n.move=this._onMove),this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},createTile:function(){return document.createElement("div")},getTileSize:function(){var n=this.options.tileSize;return n instanceof ee?n:new ee(n,n)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(n){for(var s=this.getPane().children,o=-n(-1/0,1/0),h=0,v=s.length,w;h<v;h++)w=s[h].style.zIndex,s[h]!==this._container&&w&&(o=n(o,+w));isFinite(o)&&(this.options.zIndex=o+n(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ke.ielt9){We(this._container,this.options.opacity);var n=+new Date,s=!1,o=!1;for(var h in this._tiles){var v=this._tiles[h];if(!(!v.current||!v.loaded)){var w=Math.min(1,(n-v.loaded)/200);We(v.el,w),w<1?s=!0:(v.active?o=!0:this._onOpaqueTile(v),v.active=!0)}}o&&!this._noPrune&&this._pruneTiles(),s&&(Ce(this._fadeFrame),this._fadeFrame=je(this._updateOpacity,this))}},_onOpaqueTile:S,_initContainer:function(){this._container||(this._container=Qe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var n=this._tileZoom,s=this.options.maxZoom;if(n!==void 0){for(var o in this._levels)o=Number(o),this._levels[o].el.children.length||o===n?(this._levels[o].el.style.zIndex=s-Math.abs(n-o),this._onUpdateLevel(o)):(gt(this._levels[o].el),this._removeTilesAtZoom(o),this._onRemoveLevel(o),delete this._levels[o]);var h=this._levels[n],v=this._map;return h||(h=this._levels[n]={},h.el=Qe("div","leaflet-tile-container leaflet-zoom-animated",this._container),h.el.style.zIndex=s,h.origin=v.project(v.unproject(v.getPixelOrigin()),n).round(),h.zoom=n,this._setZoomTransform(h,v.getCenter(),v.getZoom()),S(h.el.offsetWidth),this._onCreateLevel(h)),this._level=h,h}},_onUpdateLevel:S,_onRemoveLevel:S,_onCreateLevel:S,_pruneTiles:function(){if(this._map){var n,s,o=this._map.getZoom();if(o>this.options.maxZoom||o<this.options.minZoom){this._removeAllTiles();return}for(n in this._tiles)s=this._tiles[n],s.retain=s.current;for(n in this._tiles)if(s=this._tiles[n],s.current&&!s.active){var h=s.coords;this._retainParent(h.x,h.y,h.z,h.z-5)||this._retainChildren(h.x,h.y,h.z,h.z+2)}for(n in this._tiles)this._tiles[n].retain||this._removeTile(n)}},_removeTilesAtZoom:function(n){for(var s in this._tiles)this._tiles[s].coords.z===n&&this._removeTile(s)},_removeAllTiles:function(){for(var n in this._tiles)this._removeTile(n)},_invalidateAll:function(){for(var n in this._levels)gt(this._levels[n].el),this._onRemoveLevel(Number(n)),delete this._levels[n];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(n,s,o,h){var v=Math.floor(n/2),w=Math.floor(s/2),M=o-1,Y=new ee(+v,+w);Y.z=+M;var ie=this._tileCoordsToKey(Y),me=this._tiles[ie];return me&&me.active?(me.retain=!0,!0):(me&&me.loaded&&(me.retain=!0),M>h?this._retainParent(v,w,M,h):!1)},_retainChildren:function(n,s,o,h){for(var v=2*n;v<2*n+2;v++)for(var w=2*s;w<2*s+2;w++){var M=new ee(v,w);M.z=o+1;var Y=this._tileCoordsToKey(M),ie=this._tiles[Y];if(ie&&ie.active){ie.retain=!0;continue}else ie&&ie.loaded&&(ie.retain=!0);o+1<h&&this._retainChildren(v,w,o+1,h)}},_resetView:function(n){var s=n&&(n.pinch||n.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),s,s)},_animateZoom:function(n){this._setView(n.center,n.zoom,!0,n.noUpdate)},_clampZoom:function(n){var s=this.options;return s.minNativeZoom!==void 0&&n<s.minNativeZoom?s.minNativeZoom:s.maxNativeZoom!==void 0&&s.maxNativeZoom<n?s.maxNativeZoom:n},_setView:function(n,s,o,h){var v=Math.round(s);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var w=this.options.updateWhenZooming&&v!==this._tileZoom;(!h||w)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(n),o||this._pruneTiles(),this._noPrune=!!o),this._setZoomTransforms(n,s)},_setZoomTransforms:function(n,s){for(var o in this._levels)this._setZoomTransform(this._levels[o],n,s)},_setZoomTransform:function(n,s,o){var h=this._map.getZoomScale(o,n.zoom),v=n.origin.multiplyBy(h).subtract(this._map._getNewPixelOrigin(s,o)).round();ke.any3d?La(n.el,v,h):Ct(n.el,v)},_resetGrid:function(){var n=this._map,s=n.options.crs,o=this._tileSize=this.getTileSize(),h=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=s.wrapLng&&!this.options.noWrap&&[Math.floor(n.project([0,s.wrapLng[0]],h).x/o.x),Math.ceil(n.project([0,s.wrapLng[1]],h).x/o.y)],this._wrapY=s.wrapLat&&!this.options.noWrap&&[Math.floor(n.project([s.wrapLat[0],0],h).y/o.x),Math.ceil(n.project([s.wrapLat[1],0],h).y/o.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(n){var s=this._map,o=s._animatingZoom?Math.max(s._animateToZoom,s.getZoom()):s.getZoom(),h=s.getZoomScale(o,this._tileZoom),v=s.project(n,this._tileZoom).floor(),w=s.getSize().divideBy(h*2);return new T(v.subtract(w),v.add(w))},_update:function(n){var s=this._map;if(s){var o=this._clampZoom(s.getZoom());if(n===void 0&&(n=s.getCenter()),this._tileZoom!==void 0){var h=this._getTiledPixelBounds(n),v=this._pxBoundsToTileRange(h),w=v.getCenter(),M=[],Y=this.options.keepBuffer,ie=new T(v.getBottomLeft().subtract([Y,-Y]),v.getTopRight().add([Y,-Y]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var me in this._tiles){var Ne=this._tiles[me].coords;(Ne.z!==this._tileZoom||!ie.contains(new ee(Ne.x,Ne.y)))&&(this._tiles[me].current=!1)}if(Math.abs(o-this._tileZoom)>1){this._setView(n,o);return}for(var Pe=v.min.y;Pe<=v.max.y;Pe++)for(var Ke=v.min.x;Ke<=v.max.x;Ke++){var tn=new ee(Ke,Pe);if(tn.z=this._tileZoom,!!this._isValidTile(tn)){var Pt=this._tiles[this._tileCoordsToKey(tn)];Pt?Pt.current=!0:M.push(tn)}}if(M.sort(function(ct,ut){return ct.distanceTo(w)-ut.distanceTo(w)}),M.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var kn=document.createDocumentFragment();for(Ke=0;Ke<M.length;Ke++)this._addTile(M[Ke],kn);this._level.el.appendChild(kn)}}}},_isValidTile:function(n){var s=this._map.options.crs;if(!s.infinite){var o=this._globalTileRange;if(!s.wrapLng&&(n.x<o.min.x||n.x>o.max.x)||!s.wrapLat&&(n.y<o.min.y||n.y>o.max.y))return!1}if(!this.options.bounds)return!0;var h=this._tileCoordsToBounds(n);return he(this.options.bounds).overlaps(h)},_keyToBounds:function(n){return this._tileCoordsToBounds(this._keyToTileCoords(n))},_tileCoordsToNwSe:function(n){var s=this._map,o=this.getTileSize(),h=n.scaleBy(o),v=h.add(o),w=s.unproject(h,n.z),M=s.unproject(v,n.z);return[w,M]},_tileCoordsToBounds:function(n){var s=this._tileCoordsToNwSe(n),o=new le(s[0],s[1]);return this.options.noWrap||(o=this._map.wrapLatLngBounds(o)),o},_tileCoordsToKey:function(n){return n.x+":"+n.y+":"+n.z},_keyToTileCoords:function(n){var s=n.split(":"),o=new ee(+s[0],+s[1]);return o.z=+s[2],o},_removeTile:function(n){var s=this._tiles[n];s&&(gt(s.el),delete this._tiles[n],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(n)}))},_initTile:function(n){ge(n,"leaflet-tile");var s=this.getTileSize();n.style.width=s.x+"px",n.style.height=s.y+"px",n.onselectstart=S,n.onmousemove=S,ke.ielt9&&this.options.opacity<1&&We(n,this.options.opacity)},_addTile:function(n,s){var o=this._getTilePos(n),h=this._tileCoordsToKey(n),v=this.createTile(this._wrapCoords(n),j(this._tileReady,this,n));this._initTile(v),this.createTile.length<2&&je(j(this._tileReady,this,n,null,v)),Ct(v,o),this._tiles[h]={el:v,coords:n,current:!0},s.appendChild(v),this.fire("tileloadstart",{tile:v,coords:n})},_tileReady:function(n,s,o){s&&this.fire("tileerror",{error:s,tile:o,coords:n});var h=this._tileCoordsToKey(n);o=this._tiles[h],o&&(o.loaded=+new Date,this._map._fadeAnimated?(We(o.el,0),Ce(this._fadeFrame),this._fadeFrame=je(this._updateOpacity,this)):(o.active=!0,this._pruneTiles()),s||(ge(o.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:o.el,coords:n})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ke.ielt9||!this._map._fadeAnimated?je(this._pruneTiles,this):setTimeout(j(this._pruneTiles,this),250)))},_getTilePos:function(n){return n.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(n){var s=new ee(this._wrapX?E(n.x,this._wrapX):n.x,this._wrapY?E(n.y,this._wrapY):n.y);return s.z=n.z,s},_pxBoundsToTileRange:function(n){var s=this.getTileSize();return new T(n.min.unscaleBy(s).floor(),n.max.unscaleBy(s).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var n in this._tiles)if(!this._tiles[n].loaded)return!1;return!0}});function xo(n){return new $i(n)}var Wa=$i.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(n,s){this._url=n,s=Z(this,s),s.detectRetina&&ke.retina&&s.maxZoom>0?(s.tileSize=Math.floor(s.tileSize/2),s.zoomReverse?(s.zoomOffset--,s.minZoom=Math.min(s.maxZoom,s.minZoom+1)):(s.zoomOffset++,s.maxZoom=Math.max(s.minZoom,s.maxZoom-1)),s.minZoom=Math.max(0,s.minZoom)):s.zoomReverse?s.minZoom=Math.min(s.maxZoom,s.minZoom):s.maxZoom=Math.max(s.minZoom,s.maxZoom),typeof s.subdomains=="string"&&(s.subdomains=s.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(n,s){return this._url===n&&s===void 0&&(s=!0),this._url=n,s||this.redraw(),this},createTile:function(n,s){var o=document.createElement("img");return $e(o,"load",j(this._tileOnLoad,this,s,o)),$e(o,"error",j(this._tileOnError,this,s,o)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(o.referrerPolicy=this.options.referrerPolicy),o.alt="",o.src=this.getTileUrl(n),o},getTileUrl:function(n){var s={r:ke.retina?"@2x":"",s:this._getSubdomain(n),x:n.x,y:n.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var o=this._globalTileRange.max.y-n.y;this.options.tms&&(s.y=o),s["-y"]=o}return D(this._url,p(s,this.options))},_tileOnLoad:function(n,s){ke.ielt9?setTimeout(j(n,this,null,s),0):n(null,s)},_tileOnError:function(n,s,o){var h=this.options.errorTileUrl;h&&s.getAttribute("src")!==h&&(s.src=h),n(o,s)},_onTileRemove:function(n){n.tile.onload=null},_getZoomForUrl:function(){var n=this._tileZoom,s=this.options.maxZoom,o=this.options.zoomReverse,h=this.options.zoomOffset;return o&&(n=s-n),n+h},_getSubdomain:function(n){var s=Math.abs(n.x+n.y)%this.options.subdomains.length;return this.options.subdomains[s]},_abortLoading:function(){var n,s;for(n in this._tiles)if(this._tiles[n].coords.z!==this._tileZoom&&(s=this._tiles[n].el,s.onload=S,s.onerror=S,!s.complete)){s.src=X;var o=this._tiles[n].coords;gt(s),delete this._tiles[n],this.fire("tileabort",{tile:s,coords:o})}},_removeTile:function(n){var s=this._tiles[n];if(s)return s.el.setAttribute("src",X),$i.prototype._removeTile.call(this,n)},_tileReady:function(n,s,o){if(!(!this._map||o&&o.getAttribute("src")===X))return $i.prototype._tileReady.call(this,n,s,o)}});function Un(n,s){return new Wa(n,s)}var zs=Wa.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(n,s){this._url=n;var o=p({},this.defaultWmsParams);for(var h in s)h in this.options||(o[h]=s[h]);s=Z(this,s);var v=s.detectRetina&&ke.retina?2:1,w=this.getTileSize();o.width=w.x*v,o.height=w.y*v,this.wmsParams=o},onAdd:function(n){this._crs=this.options.crs||n.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var s=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[s]=this._crs.code,Wa.prototype.onAdd.call(this,n)},getTileUrl:function(n){var s=this._tileCoordsToNwSe(n),o=this._crs,h=Q(o.project(s[0]),o.project(s[1])),v=h.min,w=h.max,M=(this._wmsVersion>=1.3&&this._crs===nr?[v.y,v.x,w.y,w.x]:[v.x,v.y,w.x,w.y]).join(","),Y=Wa.prototype.getTileUrl.call(this,n);return Y+I(this.wmsParams,Y,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+M},setParams:function(n,s){return p(this.wmsParams,n),s||this.redraw(),this}});function Hn(n,s){return new zs(n,s)}Wa.WMS=zs,Un.wms=Hn;var wn=ta.extend({options:{padding:.1},initialize:function(n){Z(this,n),y(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ge(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var n={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(n.zoomanim=this._onAnimZoom),n},_onAnimZoom:function(n){this._updateTransform(n.center,n.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(n,s){var o=this._map.getZoomScale(s,this._zoom),h=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,s),w=h.multiplyBy(-o).add(v).subtract(this._map._getNewPixelOrigin(n,s));ke.any3d?La(this._container,w,o):Ct(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var n in this._layers)this._layers[n]._reset()},_onZoomEnd:function(){for(var n in this._layers)this._layers[n]._project()},_updatePaths:function(){for(var n in this._layers)this._layers[n]._update()},_update:function(){var n=this.options.padding,s=this._map.getSize(),o=this._map.containerPointToLayerPoint(s.multiplyBy(-n)).round();this._bounds=new T(o,o.add(s.multiplyBy(1+n*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),cl=wn.extend({options:{tolerance:0},getEvents:function(){var n=wn.prototype.getEvents.call(this);return n.viewprereset=this._onViewPreReset,n},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){wn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var n=this._container=document.createElement("canvas");$e(n,"mousemove",this._onMouseMove,this),$e(n,"click dblclick mousedown mouseup contextmenu",this._onClick,this),$e(n,"mouseout",this._handleMouseOut,this),n._leaflet_disable_events=!0,this._ctx=n.getContext("2d")},_destroyContainer:function(){Ce(this._redrawRequest),delete this._ctx,gt(this._container),vt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var n;this._redrawBounds=null;for(var s in this._layers)n=this._layers[s],n._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){wn.prototype._update.call(this);var n=this._bounds,s=this._container,o=n.getSize(),h=ke.retina?2:1;Ct(s,n.min),s.width=h*o.x,s.height=h*o.y,s.style.width=o.x+"px",s.style.height=o.y+"px",ke.retina&&this._ctx.scale(2,2),this._ctx.translate(-n.min.x,-n.min.y),this.fire("update")}},_reset:function(){wn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(n){this._updateDashArray(n),this._layers[y(n)]=n;var s=n._order={layer:n,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=s),this._drawLast=s,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(n){this._requestRedraw(n)},_removePath:function(n){var s=n._order,o=s.next,h=s.prev;o?o.prev=h:this._drawLast=h,h?h.next=o:this._drawFirst=o,delete n._order,delete this._layers[y(n)],this._requestRedraw(n)},_updatePath:function(n){this._extendRedrawBounds(n),n._project(),n._update(),this._requestRedraw(n)},_updateStyle:function(n){this._updateDashArray(n),this._requestRedraw(n)},_updateDashArray:function(n){if(typeof n.options.dashArray=="string"){var s=n.options.dashArray.split(/[, ]+/),o=[],h,v;for(v=0;v<s.length;v++){if(h=Number(s[v]),isNaN(h))return;o.push(h)}n.options._dashArray=o}else n.options._dashArray=n.options.dashArray},_requestRedraw:function(n){this._map&&(this._extendRedrawBounds(n),this._redrawRequest=this._redrawRequest||je(this._redraw,this))},_extendRedrawBounds:function(n){if(n._pxBounds){var s=(n.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new T,this._redrawBounds.extend(n._pxBounds.min.subtract([s,s])),this._redrawBounds.extend(n._pxBounds.max.add([s,s]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var n=this._redrawBounds;if(n){var s=n.getSize();this._ctx.clearRect(n.min.x,n.min.y,s.x,s.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var n,s=this._redrawBounds;if(this._ctx.save(),s){var o=s.getSize();this._ctx.beginPath(),this._ctx.rect(s.min.x,s.min.y,o.x,o.y),this._ctx.clip()}this._drawing=!0;for(var h=this._drawFirst;h;h=h.next)n=h.layer,(!s||n._pxBounds&&n._pxBounds.intersects(s))&&n._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(n,s){if(this._drawing){var o,h,v,w,M=n._parts,Y=M.length,ie=this._ctx;if(Y){for(ie.beginPath(),o=0;o<Y;o++){for(h=0,v=M[o].length;h<v;h++)w=M[o][h],ie[h?"lineTo":"moveTo"](w.x,w.y);s&&ie.closePath()}this._fillStroke(ie,n)}}},_updateCircle:function(n){if(!(!this._drawing||n._empty())){var s=n._point,o=this._ctx,h=Math.max(Math.round(n._radius),1),v=(Math.max(Math.round(n._radiusY),1)||h)/h;v!==1&&(o.save(),o.scale(1,v)),o.beginPath(),o.arc(s.x,s.y/v,h,0,Math.PI*2,!1),v!==1&&o.restore(),this._fillStroke(o,n)}},_fillStroke:function(n,s){var o=s.options;o.fill&&(n.globalAlpha=o.fillOpacity,n.fillStyle=o.fillColor||o.color,n.fill(o.fillRule||"evenodd")),o.stroke&&o.weight!==0&&(n.setLineDash&&n.setLineDash(s.options&&s.options._dashArray||[]),n.globalAlpha=o.opacity,n.lineWidth=o.weight,n.strokeStyle=o.color,n.lineCap=o.lineCap,n.lineJoin=o.lineJoin,n.stroke())},_onClick:function(n){for(var s=this._map.mouseEventToLayerPoint(n),o,h,v=this._drawFirst;v;v=v.next)o=v.layer,o.options.interactive&&o._containsPoint(s)&&(!(n.type==="click"||n.type==="preclick")||!this._map._draggableMoved(o))&&(h=o);this._fireEvent(h?[h]:!1,n)},_onMouseMove:function(n){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var s=this._map.mouseEventToLayerPoint(n);this._handleMouseHover(n,s)}},_handleMouseOut:function(n){var s=this._hoveredLayer;s&&(Ve(this._container,"leaflet-interactive"),this._fireEvent([s],n,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(n,s){if(!this._mouseHoverThrottled){for(var o,h,v=this._drawFirst;v;v=v.next)o=v.layer,o.options.interactive&&o._containsPoint(s)&&(h=o);h!==this._hoveredLayer&&(this._handleMouseOut(n),h&&(ge(this._container,"leaflet-interactive"),this._fireEvent([h],n,"mouseover"),this._hoveredLayer=h)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,n),this._mouseHoverThrottled=!0,setTimeout(j(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(n,s,o){this._map._fireDOMEvent(s,o||s.type,n)},_bringToFront:function(n){var s=n._order;if(s){var o=s.next,h=s.prev;if(o)o.prev=h;else return;h?h.next=o:o&&(this._drawFirst=o),s.prev=this._drawLast,this._drawLast.next=s,s.next=null,this._drawLast=s,this._requestRedraw(n)}},_bringToBack:function(n){var s=n._order;if(s){var o=s.next,h=s.prev;if(h)h.next=o;else return;o?o.prev=h:h&&(this._drawLast=h),s.prev=null,s.next=this._drawFirst,this._drawFirst.prev=s,this._drawFirst=s,this._requestRedraw(n)}}});function Rs(n){return ke.canvas?new cl(n):null}var Ja=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(n){return document.createElement("<lvml:"+n+' class="lvml">')}}catch{}return function(n){return document.createElement("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),ar={_initContainer:function(){this._container=Qe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(wn.prototype._update.call(this),this.fire("update"))},_initPath:function(n){var s=n._container=Ja("shape");ge(s,"leaflet-vml-shape "+(this.options.className||"")),s.coordsize="1 1",n._path=Ja("path"),s.appendChild(n._path),this._updateStyle(n),this._layers[y(n)]=n},_addPath:function(n){var s=n._container;this._container.appendChild(s),n.options.interactive&&n.addInteractiveTarget(s)},_removePath:function(n){var s=n._container;gt(s),n.removeInteractiveTarget(s),delete this._layers[y(n)]},_updateStyle:function(n){var s=n._stroke,o=n._fill,h=n.options,v=n._container;v.stroked=!!h.stroke,v.filled=!!h.fill,h.stroke?(s||(s=n._stroke=Ja("stroke")),v.appendChild(s),s.weight=h.weight+"px",s.color=h.color,s.opacity=h.opacity,h.dashArray?s.dashStyle=$(h.dashArray)?h.dashArray.join(" "):h.dashArray.replace(/( *, *)/g," "):s.dashStyle="",s.endcap=h.lineCap.replace("butt","flat"),s.joinstyle=h.lineJoin):s&&(v.removeChild(s),n._stroke=null),h.fill?(o||(o=n._fill=Ja("fill")),v.appendChild(o),o.color=h.fillColor||h.color,o.opacity=h.fillOpacity):o&&(v.removeChild(o),n._fill=null)},_updateCircle:function(n){var s=n._point.round(),o=Math.round(n._radius),h=Math.round(n._radiusY||o);this._setPath(n,n._empty()?"M0 0":"AL "+s.x+","+s.y+" "+o+","+h+" 0,"+65535*360)},_setPath:function(n,s){n._path.v=s},_bringToFront:function(n){re(n._container)},_bringToBack:function(n){ye(n._container)}},va=ke.vml?Ja:sn,Yi=wn.extend({_initContainer:function(){this._container=va("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=va("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){gt(this._container),vt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){wn.prototype._update.call(this);var n=this._bounds,s=n.getSize(),o=this._container;(!this._svgSize||!this._svgSize.equals(s))&&(this._svgSize=s,o.setAttribute("width",s.x),o.setAttribute("height",s.y)),Ct(o,n.min),o.setAttribute("viewBox",[n.min.x,n.min.y,s.x,s.y].join(" ")),this.fire("update")}},_initPath:function(n){var s=n._path=va("path");n.options.className&&ge(s,n.options.className),n.options.interactive&&ge(s,"leaflet-interactive"),this._updateStyle(n),this._layers[y(n)]=n},_addPath:function(n){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(n._path),n.addInteractiveTarget(n._path)},_removePath:function(n){gt(n._path),n.removeInteractiveTarget(n._path),delete this._layers[y(n)]},_updatePath:function(n){n._project(),n._update()},_updateStyle:function(n){var s=n._path,o=n.options;s&&(o.stroke?(s.setAttribute("stroke",o.color),s.setAttribute("stroke-opacity",o.opacity),s.setAttribute("stroke-width",o.weight),s.setAttribute("stroke-linecap",o.lineCap),s.setAttribute("stroke-linejoin",o.lineJoin),o.dashArray?s.setAttribute("stroke-dasharray",o.dashArray):s.removeAttribute("stroke-dasharray"),o.dashOffset?s.setAttribute("stroke-dashoffset",o.dashOffset):s.removeAttribute("stroke-dashoffset")):s.setAttribute("stroke","none"),o.fill?(s.setAttribute("fill",o.fillColor||o.color),s.setAttribute("fill-opacity",o.fillOpacity),s.setAttribute("fill-rule",o.fillRule||"evenodd")):s.setAttribute("fill","none"))},_updatePoly:function(n,s){this._setPath(n,Vt(n._parts,s))},_updateCircle:function(n){var s=n._point,o=Math.max(Math.round(n._radius),1),h=Math.max(Math.round(n._radiusY),1)||o,v="a"+o+","+h+" 0 1,0 ",w=n._empty()?"M0 0":"M"+(s.x-o)+","+s.y+v+o*2+",0 "+v+-o*2+",0 ";this._setPath(n,w)},_setPath:function(n,s){n._path.setAttribute("d",s)},_bringToFront:function(n){re(n._path)},_bringToBack:function(n){ye(n._path)}});ke.vml&&Yi.include(ar);function Os(n){return ke.svg||ke.vml?new Yi(n):null}lt.include({getRenderer:function(n){var s=n.options.renderer||this._getPaneRenderer(n.options.pane)||this.options.renderer||this._renderer;return s||(s=this._renderer=this._createRenderer()),this.hasLayer(s)||this.addLayer(s),s},_getPaneRenderer:function(n){if(n==="overlayPane"||n===void 0)return!1;var s=this._paneRenderers[n];return s===void 0&&(s=this._createRenderer({pane:n}),this._paneRenderers[n]=s),s},_createRenderer:function(n){return this.options.preferCanvas&&Rs(n)||Os(n)}});var hi=Zi.extend({initialize:function(n,s){Zi.prototype.initialize.call(this,this._boundsToLatLngs(n),s)},setBounds:function(n){return this.setLatLngs(this._boundsToLatLngs(n))},_boundsToLatLngs:function(n){return n=he(n),[n.getSouthWest(),n.getNorthWest(),n.getNorthEast(),n.getSouthEast()]}});function au(n,s){return new hi(n,s)}Yi.create=va,Yi.pointsToPath=Vt,Ra.geometryToLayer=rn,Ra.coordsToLatLng=il,Ra.coordsToLatLngs=Ts,Ra.latLngToCoords=sl,Ra.latLngsToCoords=As,Ra.getFeature=Ka,Ra.asFeature=ll,lt.mergeOptions({boxZoom:!0});var Sn=fa.extend({initialize:function(n){this._map=n,this._container=n._container,this._pane=n._panes.overlayPane,this._resetStateTimeout=0,n.on("unload",this._destroy,this)},addHooks:function(){$e(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){vt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){gt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(n){if(!n.shiftKey||n.which!==1&&n.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Mi(),Ks(),this._startPoint=this._map.mouseEventToContainerPoint(n),$e(document,{contextmenu:Va,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(n){this._moved||(this._moved=!0,this._box=Qe("div","leaflet-zoom-box",this._container),ge(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(n);var s=new T(this._point,this._startPoint),o=s.getSize();Ct(this._box,s.min),this._box.style.width=o.x+"px",this._box.style.height=o.y+"px"},_finish:function(){this._moved&&(gt(this._box),Ve(this._container,"leaflet-crosshair")),da(),vs(),vt(document,{contextmenu:Va,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(n){if(!(n.which!==1&&n.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(j(this._resetState,this),0);var s=new le(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(s).fire("boxzoomend",{boxZoomBounds:s})}},_onKeyDown:function(n){n.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});lt.addInitHook("addHandler","boxZoom",Sn),lt.mergeOptions({doubleClickZoom:!0});var ul=fa.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(n){var s=this._map,o=s.getZoom(),h=s.options.zoomDelta,v=n.originalEvent.shiftKey?o-h:o+h;s.options.doubleClickZoom==="center"?s.setZoom(v):s.setZoomAround(n.containerPoint,v)}});lt.addInitHook("addHandler","doubleClickZoom",ul),lt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var _a=fa.extend({addHooks:function(){if(!this._draggable){var n=this._map;this._draggable=new Fa(n._mapPane,n._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),n.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),n.on("zoomend",this._onZoomEnd,this),n.whenReady(this._onZoomEnd,this))}ge(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ve(this._map._container,"leaflet-grab"),Ve(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var n=this._map;if(n._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var s=he(this._map.options.maxBounds);this._offsetLimit=Q(this._map.latLngToContainerPoint(s.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(s.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;n.fire("movestart").fire("dragstart"),n.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(n){if(this._map.options.inertia){var s=this._lastTime=+new Date,o=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(o),this._times.push(s),this._prunePositions(s)}this._map.fire("move",n).fire("drag",n)},_prunePositions:function(n){for(;this._positions.length>1&&n-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var n=this._map.getSize().divideBy(2),s=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=s.subtract(n).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(n,s){return n-(n-s)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var n=this._draggable._newPos.subtract(this._draggable._startPos),s=this._offsetLimit;n.x<s.min.x&&(n.x=this._viscousLimit(n.x,s.min.x)),n.y<s.min.y&&(n.y=this._viscousLimit(n.y,s.min.y)),n.x>s.max.x&&(n.x=this._viscousLimit(n.x,s.max.x)),n.y>s.max.y&&(n.y=this._viscousLimit(n.y,s.max.y)),this._draggable._newPos=this._draggable._startPos.add(n)}},_onPreDragWrap:function(){var n=this._worldWidth,s=Math.round(n/2),o=this._initialWorldOffset,h=this._draggable._newPos.x,v=(h-s+o)%n+s-o,w=(h+s+o)%n-s-o,M=Math.abs(v+o)<Math.abs(w+o)?v:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=M},_onDragEnd:function(n){var s=this._map,o=s.options,h=!o.inertia||n.noInertia||this._times.length<2;if(s.fire("dragend",n),h)s.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,M=o.easeLinearity,Y=v.multiplyBy(M/w),ie=Y.distanceTo([0,0]),me=Math.min(o.inertiaMaxSpeed,ie),Ne=Y.multiplyBy(me/ie),Pe=me/(o.inertiaDeceleration*M),Ke=Ne.multiplyBy(-Pe/2).round();!Ke.x&&!Ke.y?s.fire("moveend"):(Ke=s._limitOffset(Ke,s.options.maxBounds),je(function(){s.panBy(Ke,{duration:Pe,easeLinearity:M,noMoveStart:!0,animate:!0})}))}}});lt.addInitHook("addHandler","dragging",_a),lt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ir=fa.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(n){this._map=n,this._setPanDelta(n.options.keyboardPanDelta),this._setZoomDelta(n.options.zoomDelta)},addHooks:function(){var n=this._map._container;n.tabIndex<=0&&(n.tabIndex="0"),$e(n,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),vt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var n=document.body,s=document.documentElement,o=n.scrollTop||s.scrollTop,h=n.scrollLeft||s.scrollLeft;this._map._container.focus(),window.scrollTo(h,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(n){var s=this._panKeys={},o=this.keyCodes,h,v;for(h=0,v=o.left.length;h<v;h++)s[o.left[h]]=[-1*n,0];for(h=0,v=o.right.length;h<v;h++)s[o.right[h]]=[n,0];for(h=0,v=o.down.length;h<v;h++)s[o.down[h]]=[0,n];for(h=0,v=o.up.length;h<v;h++)s[o.up[h]]=[0,-1*n]},_setZoomDelta:function(n){var s=this._zoomKeys={},o=this.keyCodes,h,v;for(h=0,v=o.zoomIn.length;h<v;h++)s[o.zoomIn[h]]=n;for(h=0,v=o.zoomOut.length;h<v;h++)s[o.zoomOut[h]]=-n},_addHooks:function(){$e(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){vt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(n){if(!(n.altKey||n.ctrlKey||n.metaKey)){var s=n.keyCode,o=this._map,h;if(s in this._panKeys){if(!o._panAnim||!o._panAnim._inProgress)if(h=this._panKeys[s],n.shiftKey&&(h=P(h).multiplyBy(3)),o.options.maxBounds&&(h=o._limitOffset(P(h),o.options.maxBounds)),o.options.worldCopyJump){var v=o.wrapLatLng(o.unproject(o.project(o.getCenter()).add(h)));o.panTo(v)}else o.panBy(h)}else if(s in this._zoomKeys)o.setZoom(o.getZoom()+(n.shiftKey?3:1)*this._zoomKeys[s]);else if(s===27&&o._popup&&o._popup.options.closeOnEscapeKey)o.closePopup();else return;Va(n)}}});lt.addInitHook("addHandler","keyboard",ir),lt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ds=fa.extend({addHooks:function(){$e(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){vt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(n){var s=pn(n),o=this._map.options.wheelDebounceTime;this._delta+=s,this._lastMousePos=this._map.mouseEventToContainerPoint(n),this._startTime||(this._startTime=+new Date);var h=Math.max(o-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(j(this._performZoom,this),h),Va(n)},_performZoom:function(){var n=this._map,s=n.getZoom(),o=this._map.options.zoomSnap||0;n._stop();var h=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(h))))/Math.LN2,w=o?Math.ceil(v/o)*o:v,M=n._limitZoom(s+(this._delta>0?w:-w))-s;this._delta=0,this._startTime=null,M&&(n.options.scrollWheelZoom==="center"?n.setZoom(s+M):n.setZoomAround(this._lastMousePos,s+M))}});lt.addInitHook("addHandler","scrollWheelZoom",Ds);var fi=600;lt.mergeOptions({tapHold:ke.touchNative&&ke.safari&&ke.mobile,tapTolerance:15});var dl=fa.extend({addHooks:function(){$e(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){vt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(n){if(clearTimeout(this._holdTimeout),n.touches.length===1){var s=n.touches[0];this._startPos=this._newPos=new ee(s.clientX,s.clientY),this._holdTimeout=setTimeout(j(function(){this._cancel(),this._isTapValid()&&($e(document,"touchend",Bt),$e(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",s))},this),fi),$e(document,"touchend touchcancel contextmenu",this._cancel,this),$e(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function n(){vt(document,"touchend",Bt),vt(document,"touchend touchcancel",n)},_cancel:function(){clearTimeout(this._holdTimeout),vt(document,"touchend touchcancel contextmenu",this._cancel,this),vt(document,"touchmove",this._onMove,this)},_onMove:function(n){var s=n.touches[0];this._newPos=new ee(s.clientX,s.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(n,s){var o=new MouseEvent(n,{bubbles:!0,cancelable:!0,view:window,screenX:s.screenX,screenY:s.screenY,clientX:s.clientX,clientY:s.clientY});o._simulated=!0,s.target.dispatchEvent(o)}});lt.addInitHook("addHandler","tapHold",dl),lt.mergeOptions({touchZoom:ke.touch,bounceAtZoomLimits:!0});var sr=fa.extend({addHooks:function(){ge(this._map._container,"leaflet-touch-zoom"),$e(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ve(this._map._container,"leaflet-touch-zoom"),vt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(n){var s=this._map;if(!(!n.touches||n.touches.length!==2||s._animatingZoom||this._zooming)){var o=s.mouseEventToContainerPoint(n.touches[0]),h=s.mouseEventToContainerPoint(n.touches[1]);this._centerPoint=s.getSize()._divideBy(2),this._startLatLng=s.containerPointToLatLng(this._centerPoint),s.options.touchZoom!=="center"&&(this._pinchStartLatLng=s.containerPointToLatLng(o.add(h)._divideBy(2))),this._startDist=o.distanceTo(h),this._startZoom=s.getZoom(),this._moved=!1,this._zooming=!0,s._stop(),$e(document,"touchmove",this._onTouchMove,this),$e(document,"touchend touchcancel",this._onTouchEnd,this),Bt(n)}},_onTouchMove:function(n){if(!(!n.touches||n.touches.length!==2||!this._zooming)){var s=this._map,o=s.mouseEventToContainerPoint(n.touches[0]),h=s.mouseEventToContainerPoint(n.touches[1]),v=o.distanceTo(h)/this._startDist;if(this._zoom=s.getScaleZoom(v,this._startZoom),!s.options.bounceAtZoomLimits&&(this._zoom<s.getMinZoom()&&v<1||this._zoom>s.getMaxZoom()&&v>1)&&(this._zoom=s._limitZoom(this._zoom)),s.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var w=o._add(h)._divideBy(2)._subtract(this._centerPoint);if(v===1&&w.x===0&&w.y===0)return;this._center=s.unproject(s.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(s._moveStart(!0,!1),this._moved=!0),Ce(this._animRequest);var M=j(s._move,s,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=je(M,this,!0),Bt(n)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Ce(this._animRequest),vt(document,"touchmove",this._onTouchMove,this),vt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});lt.addInitHook("addHandler","touchZoom",sr),lt.BoxZoom=Sn,lt.DoubleClickZoom=ul,lt.Drag=_a,lt.Keyboard=ir,lt.ScrollWheelZoom=Ds,lt.TapHold=dl,lt.TouchZoom=sr,f.Bounds=T,f.Browser=ke,f.CRS=Le,f.Canvas=cl,f.Circle=al,f.CircleMarker=Hi,f.Class=Ze,f.Control=Ln,f.DivIcon=yo,f.DivOverlay=on,f.DomEvent=Ws,f.DomUtil=Oi,f.Draggable=Fa,f.Evented=B,f.FeatureGroup=ma,f.GeoJSON=Ra,f.GridLayer=$i,f.Handler=fa,f.Icon=pa,f.ImageOverlay=Gi,f.LatLng=_e,f.LatLngBounds=le,f.Layer=ta,f.LayerGroup=Ui,f.LineUtil=Qc,f.Map=lt,f.Marker=Es,f.Mixin=Vc,f.Path=ga,f.Point=ee,f.PolyUtil=er,f.Polygon=Zi,f.Polyline=za,f.Popup=ks,f.PosAnimation=Di,f.Projection=co,f.Rectangle=hi,f.Renderer=wn,f.SVG=Yi,f.SVGOverlay=ol,f.TileLayer=Wa,f.Tooltip=Ms,f.Transformation=Wt,f.Util=qe,f.VideoOverlay=Qa,f.bind=j,f.bounds=Q,f.canvas=Rs,f.circle=po,f.circleMarker=mo,f.control=Ma,f.divIcon=nu,f.extend=p,f.featureGroup=ho,f.geoJSON=rl,f.geoJson=Ls,f.gridLayer=xo,f.icon=Ss,f.imageOverlay=go,f.latLng=be,f.latLngBounds=he,f.layerGroup=Wc,f.map=Fl,f.marker=fo,f.point=P,f.polygon=eu,f.polyline=Jc,f.popup=_o,f.rectangle=au,f.setOptions=Z,f.stamp=y,f.svg=Os,f.svgOverlay=vo,f.tileLayer=Un,f.tooltip=tu,f.transformation=De,f.version=m,f.videoOverlay=qi;var lr=window.L;f.noConflict=function(){return window.L=lr,this},window.L=f}))})(Fr,Fr.exports)),Fr.exports}var Il=Jy();const wa=ah(Il);function Pc(r,d,f){return Object.freeze({instance:r,context:d,container:f})}function vh(r,d){return d==null?function(m,p){const b=g.useRef(void 0);return b.current||(b.current=r(m,p)),b}:function(m,p){const b=g.useRef(void 0);b.current||(b.current=r(m,p));const j=g.useRef(m),{instance:C}=b.current;return g.useEffect(function(){j.current!==m&&(d(C,m,j.current),j.current=m)},[C,m,d]),b}}function Bg(r,d){g.useEffect(function(){return(d.layerContainer??d.map).addLayer(r.instance),function(){d.layerContainer?.removeLayer(r.instance),d.map.removeLayer(r.instance)}},[d,r])}function ex(r){return function(f){const m=Bc(),p=r(gh(f,m),m);return Og(m.map,f.attribution),ph(p.current,f.eventHandlers),Bg(p.current,m),p}}function tx(r,d){const f=g.useRef(void 0);g.useEffect(function(){if(d.pathOptions!==f.current){const p=d.pathOptions??{};r.instance.setStyle(p),f.current=p}},[r,d])}function nx(r){return function(f){const m=Bc(),p=r(gh(f,m),m);return ph(p.current,f.eventHandlers),Bg(p.current,m),tx(p.current,f),p}}function Pg(r,d){const f=vh(r,d),m=ex(f);return Dg(m)}function ax(r,d){const f=vh(r),m=Qy(f,d);return Xy(m)}function ix(r,d){const f=vh(r,d),m=nx(f);return Dg(m)}function Uc(){return Bc().map}function Wd(r,d){const f=Uc();return g.useEffect(function(){return f.on(r,d),function(){f.off(r,d)}},[f,r,d]),f}const sx=Pg(function({children:d,...f},m){const p=new Il.LayerGroup([],f);return Pc(p,fh(m,{layerContainer:p}))});function lx({bounds:r,boundsOptions:d,center:f,children:m,className:p,id:b,placeholder:j,style:C,whenReady:y,zoom:x,...E},S){const[A]=g.useState({className:p,id:b,style:C}),[k,z]=g.useState(null),Z=g.useRef(void 0);g.useImperativeHandle(S,()=>k?.map??null,[k]);const I=g.useCallback(D=>{if(D!==null&&!Z.current){const $=new Il.Map(D,E);Z.current=$,f!=null&&x!=null?$.setView(f,x):r!=null&&$.fitBounds(r,d),y!=null&&$.whenReady(y),z(Ky($))}},[]);g.useEffect(()=>()=>{k?.map.remove()},[k]);const R=k?Dl.createElement(mh,{value:k},m):j??null;return Dl.createElement("div",{...A,ref:I},R)}const rx=g.forwardRef(lx),Ug=Pg(function({position:d,...f},m){const p=new Il.Marker(d,f);return Pc(p,fh(m,{overlayContainer:p}))},function(d,f,m){f.position!==m.position&&d.setLatLng(f.position),f.icon!=null&&f.icon!==m.icon&&d.setIcon(f.icon),f.zIndexOffset!=null&&f.zIndexOffset!==m.zIndexOffset&&d.setZIndexOffset(f.zIndexOffset),f.opacity!=null&&f.opacity!==m.opacity&&d.setOpacity(f.opacity),d.dragging!=null&&f.draggable!==m.draggable&&(f.draggable===!0?d.dragging.enable():d.dragging.disable())}),Pp=ix(function({positions:d,...f},m){const p=new Il.Polygon(d,f);return Pc(p,fh(m,{overlayContainer:p}))},function(d,f,m){f.positions!==m.positions&&d.setLatLngs(f.positions)}),ox=ax(function(d,f){const m=new Il.Popup(d,f.overlayContainer);return Pc(m,f)},function(d,f,{position:m},p){g.useEffect(function(){const{instance:j}=d;function C(x){x.popup===j&&(j.update(),p(!0))}function y(x){x.popup===j&&p(!1)}return f.map.on({popupopen:C,popupclose:y}),f.overlayContainer==null?(m!=null&&j.setLatLng(m),j.openOn(f.map)):f.overlayContainer.bindPopup(j),function(){f.map.off({popupopen:C,popupclose:y}),f.overlayContainer?.unbindPopup(),f.map.removeLayer(j)}},[d,f,p,m])});function cx({location:r,onClose:d}){return r?i.jsxs("div",{className:"side-panel custom-scrollbar",children:[i.jsxs("div",{className:"side-panel-header",children:[i.jsx("h2",{children:r.name}),i.jsx("button",{className:"close-button",onClick:d,children:""})]}),i.jsx("div",{className:"side-panel-content",children:i.jsxs("div",{className:"location-info",children:[i.jsx("p",{className:"location-type",children:r.type}),i.jsxs("div",{className:"lore-section",children:[i.jsx("h3",{children:"Lore"}),i.jsx("p",{children:r.lore})]}),r.description&&i.jsxs("div",{className:"description-section",children:[i.jsx("h3",{children:"Description"}),i.jsx("p",{children:r.description})]})]})})]}):null}const ux=800;function dx({onFinish:r}){const[d,f]=g.useState(!1),m=g.useCallback(()=>{d||(f(!0),window.setTimeout(()=>{r()},ux))},[d,r]);return i.jsxs("div",{className:`intro-overlay ${d?"intro-overlay--closing":""}`,children:[i.jsx("div",{className:"intro-overlay__background"}),i.jsxs("div",{className:"intro-overlay__content",children:[i.jsx("p",{className:"intro-overlay__eyebrow",children:"Realm Entry Protocol"}),i.jsx("h1",{className:"intro-overlay__title",children:"Welcome to Azterra"}),i.jsx("p",{className:"intro-overlay__subtitle",children:"Chart the ancient world, uncover hidden lore, and prepare your party."}),i.jsx("button",{type:"button",className:"intro-overlay__button",onClick:m,children:"Begin Exploring"})]})]})}const Hg=g.createContext(null);function hx({children:r}){const[d,f]=g.useState([]),[m,p]=g.useState(null),b=g.useCallback(C=>{p(C)},[]),j=g.useMemo(()=>({locations:d,setLocations:f,selectedLocationId:m,selectLocation:b}),[d,m,b]);return i.jsx(Hg.Provider,{value:j,children:r})}function Hc(){const r=g.useContext(Hg);if(!r)throw new Error("useLocationData must be used within a LocationDataProvider");return r}const Zg=g.createContext(null);function fx({children:r}){const[d,f]=g.useState([]),[m,p]=g.useState(null),b=g.useCallback(C=>{p(C)},[]),j=g.useMemo(()=>({regions:d,setRegions:f,selectedRegionId:m,selectRegion:b}),[d,m,b]);return i.jsx(Zg.Provider,{value:j,children:r})}function Wr(){const r=g.useContext(Zg);if(!r)throw new Error("useRegions must be used within a RegionDataProvider");return r}function mx({isOpen:r,draft:d,onFieldChange:f,onSave:m,onCancel:p,canAutoSave:b=!1,saveWarning:j="",canDelete:C=!1,onDelete:y}){const{locations:x,selectedLocationId:E}=Hc(),S=x.find(R=>R.id===E),A=S?.name??"Unknown Location",{regions:k}=Wr(),z=S?.regionId?k.find(R=>R.id===S.regionId)?.name:null;if(!r||!d)return null;const Z=R=>{R.preventDefault(),m()},I=R=>D=>{f(R,D.target.value)};return i.jsxs("aside",{className:"editor-info-panel","aria-label":"Editor info panel",children:[i.jsxs("div",{className:"editor-info-panel__header",children:[i.jsx("h2",{children:"Editor Info Panel"}),i.jsx("button",{type:"button",className:"editor-info-panel__close",onClick:p,"aria-label":"Close editor info panel",children:""})]}),i.jsxs("p",{className:"editor-info-panel__subtitle",children:["Editing: ",A]}),z&&i.jsxs("p",{className:"editor-info-panel__subtitle",children:["Region: ",i.jsx("strong",{children:z})]}),i.jsxs("form",{className:"editor-info-panel__form",onSubmit:Z,children:[i.jsxs("label",{className:"editor-info-panel__field",children:[i.jsx("span",{children:"Name"}),i.jsx("input",{type:"text",value:d.name??"",onChange:I("name")})]}),i.jsxs("label",{className:"editor-info-panel__field",children:[i.jsx("span",{children:"Type / Category"}),i.jsx("input",{type:"text",value:d.type??"",onChange:I("type")})]}),i.jsxs("label",{className:"editor-info-panel__field",children:[i.jsx("span",{children:"Description"}),i.jsx("textarea",{rows:4,value:d.description??"",onChange:I("description")})]}),i.jsxs("div",{className:"editor-info-panel__actions",children:[i.jsx("button",{type:"button",className:"panel-button",onClick:p,children:"Cancel"}),C&&i.jsx("button",{type:"button",className:"panel-button panel-button--danger",onClick:y,children:"Delete"}),i.jsx("button",{type:"submit",className:"panel-button panel-button--primary",children:"Save"})]}),(!b||j)&&i.jsx("p",{className:"editor-warning",children:b?j:"Only approved editors can save changes to the shared map."})]})]})}function px(r,d=[]){if(!d||d.length===0)return!0;const f=r?.role||"guest";return d.includes(f)}function gx(r,d){return d?(Array.isArray(r?.unlockedSecrets)?r.unlockedSecrets:[]).includes(d):!0}function Jd(r,{roles:d=[],secretId:f}={}){return px(r,d)&&gx(r,f)}console.warn("Supabase is not configured. Set VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY in your .env file.");const Ig=g.createContext({user:null,role:"guest",token:null,loading:!1,login:async()=>{},loginGuest:()=>{},updateAccount:async()=>{},googleLogin:async()=>{},signup:async()=>{},logout:()=>{},refreshUser:async()=>{},isSecretUnlocked:()=>!1,canView:()=>!1}),eh="p15_auth_token",Gg="p15_supabase_profile",vx="/api",Zc=()=>typeof window<"u"&&typeof window.localStorage<"u",Up=()=>Zc()?window.localStorage.getItem(eh):null,_x=r=>{Zc()&&(r?window.localStorage.setItem(eh,r):window.localStorage.removeItem(eh))},yx=()=>{if(!Zc())return null;try{const r=window.localStorage.getItem(Gg);return r?JSON.parse(r):null}catch{return null}},xx=r=>{Zc()&&window.localStorage.removeItem(Gg)},Rl=r=>{if(!r)return null;const d=Array.isArray(r.unlockedSecrets)?r.unlockedSecrets:[],f=Array.isArray(r.favorites)?r.favorites:[],m=r.featuredCharacter??null,p=Array.isArray(r.friends)?r.friends:[],b={incoming:Array.isArray(r.friendRequests?.incoming)?r.friendRequests.incoming:[],outgoing:Array.isArray(r.friendRequests?.outgoing)?r.friendRequests.outgoing:[]},j={bio:r.profile?.bio||"",labelOne:r.profile?.labelOne||"",labelTwo:r.profile?.labelTwo||"",documents:Array.isArray(r.profile?.documents)?r.profile.documents:[],viewFavorites:Array.isArray(r.profile?.viewFavorites)?r.profile.viewFavorites:[]};return{...r,unlockedSecrets:d,favorites:f,featuredCharacter:m,profile:j,friends:p,friendRequests:b}},bx={id:"guest-visitor",role:"guest",name:"Guest Explorer",email:"guest@example.com",profilePicture:"",unlockedSecrets:["aurora-ember","silent-archive","gilded-horizon"],favorites:["character:ember","location:regalis","region:sunspire"],featuredCharacter:{id:"guest-champion",name:"Valen Arctis",class:"Wayfarer",level:7},profile:{bio:"Guest mode preview. Explore the map, characters, and a handful of secrets.",labelOne:"Explorer",labelTwo:"Guest",documents:[],viewFavorites:[]},friends:[],friendRequests:{incoming:[],outgoing:[]}};async function _c({path:r,method:d="GET",body:f,headers:m={},token:p}){const b={method:d,headers:{"Content-Type":"application/json",...m}};f!==void 0&&(b.body=typeof f=="string"?f:JSON.stringify(f)),p&&(b.headers.Authorization=`Bearer ${p}`);const j=await fetch(`${vx}${r}`,b),C=await j.json().catch(()=>({}));if(!j.ok)throw new Error(C.error||"Request failed.");return C}function jx({children:r}){const[d,f]=g.useState(null),[m,p]=g.useState(()=>Up()),[b,j]=g.useState(!!Up()),[C,y]=g.useState(null),x=Rl(d),E=x?.role||"guest";g.useEffect(()=>{_x(m)},[m]);const S=g.useCallback(async G=>{if(!G?.access_token){f(null),p(null);return}y(null);try{j(!0);const X=yx(),ve=await _c({path:"/auth/supabase",method:"POST",body:{accessToken:G.access_token,displayName:X?.displayName||""}});X&&xx(null),f(Rl(ve.user)),p(ve.token)}catch(X){y(X.message)}finally{j(!1)}},[]);g.useEffect(()=>{},[S]),g.useEffect(()=>{if(!m||m==="local-admin-token"){f(null),j(!1),m==="local-admin-token"&&p(null);return}let G=!0;return j(!0),_c({path:"/auth/me",token:m}).then(X=>{G&&f(Rl(X.user))}).catch(()=>{G&&(f(null),p(null))}).finally(()=>{G&&j(!1)}),()=>{G=!1}},[m]);const A=async({email:G,password:X}={})=>{throw new Error("Supabase is not configured.")},k=async({displayName:G}={})=>{throw new Error("Supabase is not configured.")},z=async({username:G,profilePicture:X,profile:ve})=>{if(!m)throw new Error("You must be logged in to update your account.");y(null);try{const F=await _c({path:"/auth/me",method:"PUT",body:{username:G,profilePicture:X,profile:ve},token:m});return f(Rl(F.user)),F.user}catch(F){throw y(F.message),F}},Z=async({email:G,password:X,displayName:ve}={})=>{throw new Error("Supabase is not configured.")},I=()=>{f(null),p(null)},R=()=>{y(null),p(null),f(Rl(bx)),j(!1)},D=async()=>{if(!m)return null;const G=await _c({path:"/auth/me",token:m});return f(Rl(G.user)),G.user},$=g.useMemo(()=>({user:x,role:E,token:m,loading:b,error:C,login:A,updateAccount:z,googleLogin:k,signup:Z,logout:I,loginGuest:R,refreshUser:D,isSecretUnlocked:G=>Array.isArray(x?.unlockedSecrets)&&x.unlockedSecrets.includes(G),canView:G=>Jd(x,G)}),[x,E,m,b,C]);return i.jsx(Ig.Provider,{value:$,children:r})}function Cn(){return g.useContext(Ig)}const qg=g.createContext({cloudsEnabled:!0,fogEnabled:!0,vignetteEnabled:!0,heatmapMode:"none",intensities:{clouds:.9,fog:.9,vignette:1},setCloudsEnabled:()=>{},setFogEnabled:()=>{},setVignetteEnabled:()=>{},setHeatmapMode:()=>{},setIntensity:()=>{}});function wx({children:r}){const[d,f]=g.useState(!0),[m,p]=g.useState(!0),[b,j]=g.useState(!0),[C,y]=g.useState("none"),[x,E]=g.useState({clouds:.9,fog:.9,vignette:1}),S=(k,z)=>{E(Z=>({...Z,[k]:z}))},A=g.useMemo(()=>({cloudsEnabled:d,fogEnabled:m,vignetteEnabled:b,heatmapMode:C,intensities:x,setCloudsEnabled:f,setFogEnabled:p,setVignetteEnabled:j,setHeatmapMode:y,setIntensity:S}),[d,m,b,C,x]);return i.jsx(qg.Provider,{value:A,children:r})}function $g(){return g.useContext(qg)}const Sx=["lore","note","region","location","character","npc","quest","item"],Nx=["complete","draft","placeholder"],Cx="draft",Ex=r=>{const d=typeof r=="string"?r.toLowerCase().trim():"";return Nx.includes(d)?d:Cx},Tx=r=>typeof r=="string"?r.toLowerCase().trim():"",Ax=(r={})=>{const d=r.id??r.slug??"",f=Tx(r.type);return{...r,id:d==null?"":String(d),type:f,title:typeof r.title=="string"?r.title.trim():r.title??"",status:Ex(r.status),tags:Array.isArray(r.tags)?r.tags.map(m=>String(m)):[],summary:typeof r.summary=="string"?r.summary.trim():r.summary??"",body:typeof r.body=="string"?r.body:r.body??"",obsidianPath:typeof r.obsidianPath=="string"?r.obsidianPath.trim():r.obsidianPath??"",mapLocationId:r.mapLocationId===null||r.mapLocationId===void 0?null:r.mapLocationId,imageDescription:typeof r.imageDescription=="string"?r.imageDescription.trim():r.imageDescription??""}},Hp=r=>Array.isArray(r)?r.map(d=>Ax(d)):[],Lx=[{id:"aurora-ember-primer",type:"lore",title:"Aurora Ember Primer",status:"draft",tags:["secret","aurora"],summary:"A briefing on the auroral embers rumored beneath the vault.",body:"Placeholder: the full write-up will be imported from Obsidian once the pipeline is ready.",obsidianPath:"Lore/Aurora Ember.md",mapLocationId:12},{id:"silent-archive-report",type:"region",title:"Silent Archive Annex",status:"complete",tags:["region","library"],summary:"Notes on the archive hidden within Silent Stacks.",body:"Placeholder: import structured write-up from the Obsidian vault.",obsidianPath:"Regions/Silent Archive.md",mapLocationId:13},{id:"gilded-horizon-teaser",type:"note",title:"Gilded Horizon Teaser",status:"placeholder",tags:["teaser","hook"],summary:"A placeholder breadcrumb pointing toward the gilded horizon outpost.",obsidianPath:"Hooks/Gilded Horizon.md",mapLocationId:14}],kx={entries:Lx},Yg=g.createContext(null),yc="/api";function Mx({children:r}){const[d,f]=g.useState([]),[m,p]=g.useState(null),[b,j]=g.useState(!1),[C,y]=g.useState(""),[x,E]=g.useState(null),[S,A]=g.useState({enabled:!1,checked:!1}),[k,z]=g.useState({}),Z=g.useCallback(async()=>{j(!0),y("");try{const ue=await fetch(`${yc}/content`),U=await ue.json();if(!ue.ok)throw new Error(U.error||"Failed to load content.");const xe=Hp(U.entries||[]);f(xe),p(U.diagnostics||U.issues||null),E(new Date().toISOString())}catch(ue){const U=Hp(kx?.entries||[]);f(U),p(null),y(ue.message||"Unable to load content."),E(new Date().toISOString())}finally{j(!1)}},[]);g.useEffect(()=>{Z()},[Z]),g.useEffect(()=>{(async()=>{try{const U=await fetch(`${yc}/portraits/config`),xe=await U.json();U.ok?A({enabled:!!xe.enabled,checked:!0}):A(je=>({...je,checked:!0}))}catch{A(U=>({...U,checked:!0}))}})()},[]);const I=g.useCallback(ue=>{if(!ue)return d;const U=String(ue).toLowerCase();return d.filter(xe=>String(xe.type).toLowerCase()===U)},[d]),R=g.useCallback(ue=>{if(!ue)return d;const U=String(ue).toLowerCase();return d.filter(xe=>String(xe.category||"").toLowerCase()===U)},[d]),D=g.useCallback(ue=>d.find(U=>String(U.id)===String(ue))||null,[d]),$=g.useCallback(async ue=>{if(!ue)return null;try{const U=await fetch(`${yc}/portraits/${encodeURIComponent(ue)}/status`),xe=await U.json();return U.ok?(z(je=>({...je,[ue]:xe})),xe):null}catch{return null}},[]),G=g.useCallback(async(ue,U)=>{if(!ue||!U)return{error:"Auth and id required"};try{const xe=await fetch(`${yc}/portraits/${encodeURIComponent(ue)}/generate`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${U}`}}),je=await xe.json();return xe.ok?(z(Ce=>({...Ce,[ue]:{exists:!0,url:je.url}})),{url:je.url}):{error:je.error||"Failed to generate portrait"}}catch(xe){return{error:xe.message||"Failed to generate portrait"}}},[]),X=g.useMemo(()=>{const ue=new Set;return d.forEach(U=>{U.type&&ue.add(String(U.type).toLowerCase())}),Array.from(ue)},[d]),ve=g.useMemo(()=>{const ue=new Set;return d.forEach(U=>{U.category&&ue.add(String(U.category).toLowerCase())}),Array.from(ue)},[d]),F=g.useMemo(()=>({entries:d,issues:m,loading:b,error:C,lastLoadedAt:x,refresh:Z,getByType:I,getByCategory:R,getById:D,availableTypes:X,availableCategories:ve,portraitConfig:S,portraitStatus:k,refreshPortraitStatus:$,generatePortrait:G}),[d,m,b,C,x,Z,I,R,D,X,ve,S,k,$,G]);return i.jsx(Yg.Provider,{value:F,children:r})}function Vg(){const r=g.useContext(Yg);if(!r)throw new Error("useContent must be used within a ContentProvider");return r}const Zp=(r,d,f)=>Math.min(Math.max(r,d),f);function zx({enabled:r=!0,intensity:d=1,onDiagnostics:f}){const m=Zp(d,0,1.25),p=Zp(m,0,1);return g.useEffect(()=>{if(!r){f?.("vignette",{status:"off",message:"Vignette disabled"});return}f?.("vignette",{status:"ok",message:`Vignette strength ${m.toFixed(2)}`})},[r,m,f]),r?i.jsx("div",{className:"map-layer map-layer--vignette",style:{"--layer-opacity":p,"--vignette-strength":m,opacity:p},"aria-hidden":"true"}):null}const Ip=["fog/fog-1.png","fog/fog-2.png","fog/fog-3.png"],Gp=(r=0)=>r>=6?0:r>=4?.08:.14,qp=(r,d,f)=>Math.min(Math.max(r,d),f);function Rx({enabled:r=!0,map:d,intensity:f=1,onDiagnostics:m}){const p=g.useRef(null),[b,j]=g.useState(!1),[C,y]=g.useState(()=>Gp(d?.getZoom?.()??0)),x=g.useMemo(()=>`/p15/${Ip[Math.floor(Math.random()*Ip.length)]}`,[]);if(g.useEffect(()=>{if(!x)return;const A=new Image;return A.onload=()=>{j(!0),m?.("fog",{status:"ok",message:"Fog texture loaded",src:x})},A.onerror=()=>{j(!1),m?.("fog",{status:"error",message:"Fog texture missing",src:x})},A.src=x,()=>{A.onload=null,A.onerror=null}},[x,m]),g.useEffect(()=>{if(!d)return;const A=()=>y(Gp(d.getZoom()));return d.on("zoomend",A),()=>d.off("zoomend",A)},[d]),g.useEffect(()=>{if(!r){m?.("fog",{status:"off",message:"Fog layer disabled"});return}if(!d){m?.("fog",{status:"pending",message:"Fog layer waiting for map"});return}if(b){const A=qp(C*f,0,1);m?.("fog",{status:"ok",message:`Fog layer active (opacity ${A.toFixed(2)})`})}},[r,b,C,f,m,d]),!r||!d)return null;const E=qp(C*f,0,1),S=b?E:0;return i.jsx("div",{ref:p,className:"map-layer map-layer--fog",style:{"--layer-opacity":S,backgroundImage:`url(${x}), radial-gradient(circle, rgba(255,255,255,0.12), transparent 65%)`,backgroundSize:"1200px auto, cover",backgroundRepeat:"repeat, no-repeat",opacity:S},"aria-hidden":"true"})}const $p=["clouds/cloud-1.png","clouds/cloud-2.png","clouds/cloud-3.png"],Yp=(r=0)=>r>=6?.05:r>=4?.08:.12,Vp=(r,d,f)=>Math.min(Math.max(r,d),f);function Ox({enabled:r=!0,map:d,intensity:f=1,onDiagnostics:m}){const p=g.useRef(null),[b,j]=g.useState(!1),[C,y]=g.useState(()=>Yp(d?.getZoom?.()??0)),x=g.useMemo(()=>`/p15/${$p[Math.floor(Math.random()*$p.length)]}`,[]);if(g.useEffect(()=>{if(!x)return;const A=new Image;return A.onload=()=>{j(!0),m?.("clouds",{status:"ok",message:"Cloud texture loaded",src:x})},A.onerror=()=>{j(!1),m?.("clouds",{status:"error",message:"Cloud texture missing",src:x})},A.src=x,()=>{A.onload=null,A.onerror=null}},[x,m]),g.useEffect(()=>{if(!d)return;const A=()=>y(Yp(d.getZoom()));return d.on("zoomend",A),()=>d.off("zoomend",A)},[d]),g.useEffect(()=>{if(!r){m?.("clouds",{status:"off",message:"Cloud layer disabled"});return}if(!d){m?.("clouds",{status:"pending",message:"Cloud layer waiting for map"});return}if(b){const A=Vp(C*f,0,1);m?.("clouds",{status:"ok",message:`Cloud layer active (opacity ${A.toFixed(2)})`})}},[r,b,C,f,m,d]),!r||!d)return null;const E=Vp(C*f,0,1),S=b?E:0;return i.jsx("div",{ref:p,className:"map-layer map-layer--clouds",style:{"--layer-opacity":S,backgroundImage:`url(${x}), radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.2), transparent 60%)`,backgroundSize:"900px auto, cover",backgroundRepeat:"repeat, no-repeat",opacity:S},"aria-hidden":"true"})}const _h=(r,d,f)=>Math.min(Math.max(r,d),f),Fp=(r=0)=>r<=3.5?0:r>=5.5?1:_h((r-3.5)/2,0,1),Dx=(r,d)=>{const m=(r.heat||{})?.[d];if(typeof m=="number")return _h(m>1?m/100:m,0,1);const p=(r.type||"generic").toLowerCase();return d==="magic"?1:d==="danger"?p==="dungeon"||p==="ruins"?1:p==="city"||p==="town"?.3:.5:d==="population"?p==="city"?1:p==="town"?.7:.2:0},Bx=r=>{const d=[{stop:0,color:[59,130,246]},{stop:.5,color:[34,197,94]},{stop:.75,color:[245,158,11]},{stop:1,color:[239,68,68]}];for(let m=0;m<d.length-1;m+=1){const p=d[m],b=d[m+1];if(r>=p.stop&&r<=b.stop){const j=(r-p.stop)/(b.stop-p.stop),C=Math.round(p.color[0]+(b.color[0]-p.color[0])*j),y=Math.round(p.color[1]+(b.color[1]-p.color[1])*j),x=Math.round(p.color[2]+(b.color[2]-p.color[2])*j);return`rgba(${C}, ${y}, ${x}, 0.7)`}}const f=d[d.length-1];return`rgba(${f.color[0]}, ${f.color[1]}, ${f.color[2]}, 0.7)`},Px=(r,d=60)=>{const f=r?.getZoom?.()??4,m=d*Math.pow(.75,f-4);return _h(m,15,140)};function Ux({enabled:r=!0,map:d,locations:f=[],heatmapMode:m="none",onDiagnostics:p}){const b=g.useRef(null),j=g.useRef(null),[C,y]=g.useState(()=>Fp(d?.getZoom?.()??0)),x=g.useRef(C),E=g.useRef({enabled:r,heatmapMode:m,locations:f});g.useEffect(()=>{x.current=C},[C]),g.useEffect(()=>{E.current={enabled:r,heatmapMode:m,locations:f}},[r,m,f]);const S=()=>{j.current&&cancelAnimationFrame(j.current),j.current=requestAnimationFrame(()=>A())},A=()=>{const k=b.current;if(!k||!d)return;const z=k.getContext("2d");if(!z)return;const Z=window.devicePixelRatio||1,I=d.getSize();(k.width!==I.x*Z||k.height!==I.y*Z)&&(k.width=I.x*Z,k.height=I.y*Z,k.style.width=`${I.x}px`,k.style.height=`${I.y}px`,z.scale(Z,Z)),z.clearRect(0,0,I.x,I.y);const{enabled:R,heatmapMode:D,locations:$}=E.current;if(!(R&&D!=="none"&&x.current>0)||!$.length)return;const X=Px(d);$.forEach(ve=>{const F=Dx(ve,D);if(F<=0)return;const ue=wa.latLng(ve.lat,ve.lng),U=d.latLngToContainerPoint(ue);if(U.x<-X||U.y<-X||U.x>I.x+X||U.y>I.y+X)return;const xe=z.createRadialGradient(U.x,U.y,0,U.x,U.y,X);xe.addColorStop(0,Bx(F)),xe.addColorStop(1,"rgba(255,255,255,0)"),z.fillStyle=xe,z.fillRect(U.x-X,U.y-X,X*2,X*2)})};return g.useEffect(()=>{if(!d)return;const k=b.current;if(!k)return;const z=()=>{const D=d.getZoom(),$=Fp(D);y($);const G=!r||m==="none",X=!G&&$>0;p?.("heatmap",{status:G?"off":X?"ok":"warn",message:G?"Heatmap disabled":X?`Heatmap (${m}) active @ zoom ${D.toFixed(2)} (opacity ${$.toFixed(2)})`:`Heatmap (${m}) ready, awaiting closer zoom`})},Z=()=>{if(!d)return;const D=d.getSize(),$=window.devicePixelRatio||1;k.width=D.x*$,k.height=D.y*$,k.style.width=`${D.x}px`,k.style.height=`${D.y}px`;const G=k.getContext("2d");G&&(G.setTransform(1,0,0,1,0,0),G.scale($,$)),S()};Z(),z(),window.addEventListener("resize",Z);const I=()=>S(),R=()=>{z(),S()};return d.on("moveend",I),d.on("zoomend",R),()=>{window.removeEventListener("resize",Z),d.off("moveend",I),d.off("zoomend",R)}},[d,r,m,p]),g.useEffect(()=>{S()},[r,f,m,C]),g.useEffect(()=>()=>{j.current&&cancelAnimationFrame(j.current)},[]),d?i.jsx("canvas",{ref:b,className:"map-layer map-layer--heatmap",style:{opacity:r&&m!=="none"?C:0},"aria-hidden":"true"}):null}const Kp=(r=[])=>r.map(([d,f])=>[f,d]),Id=r=>{const d=Array.isArray(r.points)&&r.points.length>=3?[r.points]:[],f=Array.isArray(r.parts)?r.parts.filter(m=>Array.isArray(m)&&m.length>=3):[];return[...d,...f]},Hx=(r=[])=>{if(!r.length)return{width:0,height:0};let d=1/0,f=-1/0,m=1/0,p=-1/0;return r.forEach(([b,j])=>{d=Math.min(d,b),f=Math.max(f,b),m=Math.min(m,j),p=Math.max(p,j)}),{width:Math.max(0,f-d),height:Math.max(0,p-m)}},Zx=(r,d,f)=>{const m=r.labelScaleWithZoom!==!1,p=Math.max(20,Math.min(d.width*.05,60)),b=Math.max(d.width-p*2,140),j=Number.isFinite(r.labelWidth)?r.labelWidth:1,C=Math.max(150,Math.min(b*.9*j,540)),y=m?C:Math.max(160,Math.min(320*j,520)),x=Math.max(d.height*.28,y*.26),E=Math.min(x,y*.42),S=Math.min(E*.4,180),k=Math.max(.8,Math.min(m?f:4,6)),z=Math.min(Math.max(y/(6.3-k*.35),18),52),Z=Math.min(Math.max(z*(r.labelSize||1),10),80),I=Math.min(Z/2.3,10);r.borderColor;const R=r.labelColor||"#fef3c7",D="rgba(0,0,0,0.45)",$=`region-label-path-${r.id}`,G=Math.min(y*.95,Math.max(y*.7*j,160)),X=(r.name||"Region").trim()||"Region";return{width:y,height:E,html:`
      <svg class="region-label-svg" width="${y}" height="${E}" viewBox="0 0 ${y} ${E}" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: visible;">
        <defs>
          <path id="${$}" d="M 0 ${E/2} Q ${y/2} ${E/2-S} ${y} ${E/2}" />
          <filter id="${$}-shadow" x="-50%" y="-50%" width="200%" height="200%">
            <feGaussianBlur in="SourceAlpha" stdDeviation="3" />
            <feOffset dx="0" dy="2" result="offsetblur" />
            <feFlood flood-color="${D}" flood-opacity="1" />
            <feComposite in2="offsetblur" operator="in" />
            <feMerge>
              <feMergeNode />
              <feMergeNode in="SourceGraphic" />
            </feMerge>
          </filter>
        </defs>
        <text
          class="region-label-text"
          font-size="${Z}"
          letter-spacing="${I}"
          fill="${R}"
          filter="url(#${$}-shadow)"
        >
          <textPath href="#${$}" xlink:href="#${$}" startOffset="50%" text-anchor="middle" lengthAdjust="spacingAndGlyphs" textLength="${G}">
            ${X}
          </textPath>
        </text>
      </svg>
    `}};function Ix({regions:r=[],draftPoints:d=[],selectedRegionId:f=null,onRegionClick:m,interactionEnabled:p=!1,showLabels:b=!1,zoomLevel:j=4}){const C=g.useMemo(()=>Kp(d),[d]),y=g.useMemo(()=>b?r.filter(x=>x.labelEnabled!==!1&&Id(x).some(E=>Array.isArray(E)&&E.length>2)).map(x=>{const E=Id(x).flat(),S=E.reduce((I,[R,D])=>(I.sumX+=R,I.sumY+=D,I),{sumX:0,sumY:0}),A=E.length||1,k=S.sumX/A,z=S.sumY/A,Z=Hx(E);return{id:x.id,name:x.name||"Region",centroid:[z,k],bounds:Z}}):[],[r,b]);return i.jsxs(sx,{children:[r.map(x=>{const E=Id(x);return E.length?E.map((S,A)=>{const k=Kp(S),z=`${x.id}-part-${A}`;return i.jsx(Pp,{positions:k,pathOptions:{color:x.borderColor||"#ea580c",weight:x.id===f?4:2,fillColor:x.color||"#f97316",fillOpacity:x.opacity??.3,pane:"overlayPane"},interactive:p,eventHandlers:p&&m?{click:Z=>{Z.originalEvent?.stopPropagation(),m(x.id)}}:void 0},z)}):null}),C.length>=2&&i.jsx(Pp,{positions:C,pathOptions:{color:"#f97316",weight:2,dashArray:"8",fillOpacity:.15,pane:"overlayPane"},interactive:!1}),b&&y.map(x=>{const E=Zx(r.find(z=>z.id===x.id)||{},x.bounds,j),S=r.find(z=>z.id===x.id)||{},A=S.labelOffsetX||0,k=S.labelOffsetY||0;return i.jsx(Ug,{position:x.centroid,icon:wa.divIcon({className:"region-label-icon",html:E.html,iconSize:[E.width,E.height],iconAnchor:[E.width/2-A,E.height/2.1-k]}),interactive:!1},`label-${x.id}`)})]})}const Xp=(r,d,f)=>Math.min(Math.max(r,d),f),Qp=(r,d,f)=>r+(d-r)*f;function Gx({enabled:r=!0,map:d,containerRef:f,onDiagnostics:m}){const p=g.useRef(null),b=g.useRef({x:0,y:0,zoom:0}),j=g.useRef({x:0,y:0}),C=g.useRef(0),y=x=>{const E=f?.current;E&&(E.style.setProperty("--cloud-parallax-x",`${x.clouds.x.toFixed(2)}px`),E.style.setProperty("--cloud-parallax-y",`${x.clouds.y.toFixed(2)}px`),E.style.setProperty("--fog-parallax-x",`${x.fog.x.toFixed(2)}px`),E.style.setProperty("--fog-parallax-y",`${x.fog.y.toFixed(2)}px`),E.style.setProperty("--vignette-parallax-x",`${x.vignette.x.toFixed(2)}px`),E.style.setProperty("--vignette-parallax-y",`${x.vignette.y.toFixed(2)}px`))};return g.useEffect(()=>{if(!r){y({clouds:{x:0,y:0},fog:{x:0,y:0},vignette:{x:0,y:0}}),m?.("parallax",{status:"off",message:"Parallax disabled"});return}if(!d||!f?.current){m?.("parallax",{status:"warn",message:"Parallax waiting for map"});return}const x=()=>{const S=j.current,A=b.current,k={x:Qp(S.x,A.x,.12),y:Qp(S.y,A.y,.12)};j.current=k;const z=1-Xp((A.zoom-3)*.08,0,.6),Z={clouds:{x:k.x*1.4*z,y:k.y*1.2*z},fog:{x:k.x*.7*z,y:k.y*.6*z},vignette:{x:k.x*.25*z,y:k.y*.2*z}};y(Z);const I=performance.now();(!C.current||I-C.current>400)&&(C.current=I,m?.("parallax",{status:"ok",message:`Parallax offsets cloud (${Z.clouds.x.toFixed(1)}, ${Z.clouds.y.toFixed(1)})`})),Math.abs(k.x-A.x)>.25||Math.abs(k.y-A.y)>.25?p.current=requestAnimationFrame(x):p.current=null},E=()=>{const S=d.getCenter(),A=d.getZoom(),k=1-Xp((A-3)*.06,0,.5),z=(S.lng%2048/2048-.5)*48*k,Z=(S.lat%2048/2048-.5)*36*k;b.current={x:z,y:Z,zoom:A},p.current||(p.current=requestAnimationFrame(x))};return E(),d.on("move",E),d.on("zoomend",E),()=>{d.off("move",E),d.off("zoomend",E),p.current&&cancelAnimationFrame(p.current),p.current=null}},[r,d,f?.current,m]),r?i.jsx("div",{className:"map-layer map-layer--parallax","aria-hidden":"true"}):null}const Wp=["error","warn","pending","off","ok"];function qx({diagnostics:r={},onRefresh:d,intensities:f,onIntensityChange:m}){const[p,b]=g.useState(!1),j=g.useMemo(()=>Object.entries(r).sort((C,y)=>{const x=Wp.indexOf(C[1]?.status||"pending"),E=Wp.indexOf(y[1]?.status||"pending");return x-E||C[0].localeCompare(y[0])}),[r]);return i.jsxs("div",{className:`diag-panel ${p?"diag-panel--open":""}`,children:[i.jsx("button",{type:"button",className:"diag-panel__toggle",onClick:()=>b(C=>!C),children:p?"Hide Diagnostics":"Show Diagnostics"}),p&&i.jsxs("div",{className:"diag-panel__body",children:[i.jsxs("div",{className:"diag-panel__header",children:[i.jsx("h4",{children:"Admin Diagnostics"}),i.jsx("button",{type:"button",className:"diag-panel__refresh",onClick:d,children:"Refresh"})]}),i.jsx("ul",{className:"diag-panel__list",children:j.map(([C,y])=>i.jsxs("li",{className:`diag-panel__item diag-panel__item--${y?.status||"pending"}`,children:[i.jsx("span",{className:"diag-panel__label",children:C}),i.jsx("span",{className:"diag-panel__status",children:y?.status||"pending"}),y?.message?i.jsx("span",{className:"diag-panel__message",children:y.message}):null]},C))}),f&&m&&i.jsxs("div",{className:"diag-panel__controls",children:[i.jsxs("div",{className:"diag-panel__control",children:[i.jsx("label",{htmlFor:"cloudIntensity",children:"Clouds"}),i.jsx("input",{id:"cloudIntensity",type:"range",min:"0",max:"1",step:"0.05",value:f.clouds,onChange:C=>m("clouds",parseFloat(C.target.value))})]}),i.jsxs("div",{className:"diag-panel__control",children:[i.jsx("label",{htmlFor:"fogIntensity",children:"Fog"}),i.jsx("input",{id:"fogIntensity",type:"range",min:"0",max:"1",step:"0.05",value:f.fog,onChange:C=>m("fog",parseFloat(C.target.value))})]}),i.jsxs("div",{className:"diag-panel__control",children:[i.jsx("label",{htmlFor:"vignetteIntensity",children:"Vignette"}),i.jsx("input",{id:"vignetteIntensity",type:"range",min:"0",max:"1",step:"0.05",value:f.vignette,onChange:C=>m("vignette",parseFloat(C.target.value))})]})]})]})]})}function $x({isEditorMode:r,options:d,selectedOption:f,onSelect:m,categoryOptions:p=[],groupByCategory:b=!1}){if(!r)return null;const j=g.useMemo(()=>p.reduce((x,E)=>(x[E.id]=E.label,x),{}),[p]),C=g.useMemo(()=>{if(!b)return[];const x=p.map(k=>({id:k.id,label:k.label,options:[]})),E={id:"other",label:"Other",options:[]},S=x.reduce((k,z)=>(k[z.id]=z,k),{});d.forEach(k=>{(S[k.type]||E).options.push(k)});const A=[...x];return E.options.length&&A.push(E),A.filter(k=>k.options.length)},[p,b,d]),y=x=>i.jsxs("button",{type:"button",className:`marker-palette__item ${f&&f.iconKey===x.iconKey?"marker-palette__item--active":""}`,onClick:()=>m(x),children:[i.jsx("img",{src:`/icons/cities/${x.iconKey}.png`,alt:x.label,width:32,height:32,loading:"lazy"}),i.jsx("span",{children:x.label}),b&&i.jsx("small",{children:j[x.type]||"Other"})]},x.iconKey);return i.jsxs("div",{className:"marker-palette",children:[i.jsxs("div",{className:"marker-palette__header",children:[i.jsx("h3",{children:"Marker Palette"}),i.jsx("p",{children:"Select an icon, then click the map to place it."})]}),b?i.jsx("div",{className:"marker-palette__groups",children:C.map(x=>i.jsxs("div",{className:"marker-palette__group",children:[i.jsxs("div",{className:"marker-palette__group-header",children:[i.jsx("span",{children:x.label}),i.jsxs("small",{children:[x.options.length," icons"]})]}),i.jsx("div",{className:"marker-palette__grid",children:x.options.map(y)})]},x.id))}):i.jsx("div",{className:"marker-palette__grid",children:d.map(y)})]})}const yh=["continent","kingdom","province","territory","faction","danger","wilds","other"],Ic=yh[0],Yx=(r,d=0,f=1)=>typeof r!="number"||Number.isNaN(r)?d:Math.min(f,Math.max(d,r)),Jp=(r={})=>{const d=(p=[])=>Array.isArray(p)?p.filter(b=>Array.isArray(b)&&b.length>=2).map(([b,j])=>[Number(b)||0,Number(j)||0]):[],f=d(r.points),m=Array.isArray(r.parts)?r.parts.map(p=>d(p)).filter(p=>p.length>=3):[];return{...r,id:r.id||(r.name?`region-${r.name.toLowerCase().replace(/\s+/g,"-")}`:`region-${Date.now()}`),name:r.name||"New Region",color:r.color||"#f97316",borderColor:r.borderColor||r.color||"#ea580c",opacity:r.opacity!==void 0?Yx(r.opacity,0,1):.3,category:r.category||Ic,labelEnabled:r.labelEnabled!==!1,points:f,parts:m}};function Vx({region:r,isOpen:d,onFieldChange:f,onDelete:m,onClose:p,onMergeRegion:b}){const{regions:j,selectedRegionId:C}=Wr(),y=r||j.find(R=>R.id===C),[x,E]=Dl.useState(""),[S,A]=Dl.useState(!1);if(!(d!==void 0?d:!!y)||!y)return null;const z=R=>D=>{const $=D.target.value,X=["opacity","labelSize","labelWidth","labelOffsetX","labelOffsetY"].includes(R)?parseFloat($):$;f?.(y.id,R,X)},Z=R=>D=>{f?.(y.id,R,D.target.checked)},I=j.filter(R=>R.id!==y.id);return i.jsxs("aside",{className:"editor-info-panel region-info-panel","aria-label":"Region info panel",children:[i.jsxs("div",{className:"editor-info-panel__header",children:[i.jsx("h2",{children:"Region Info"}),i.jsx("button",{type:"button",className:"editor-info-panel__close",onClick:()=>p?.(y.id),"aria-label":"Close region info panel",children:""})]}),i.jsxs("form",{className:"editor-info-panel__form",children:[i.jsxs("label",{className:"editor-info-panel__field",children:[i.jsx("span",{children:"Name"}),i.jsx("input",{type:"text",value:y.name||"",onChange:z("name")})]}),i.jsxs("label",{className:"editor-info-panel__field",children:[i.jsx("span",{children:"Fill Color"}),i.jsx("input",{type:"color",value:y.color||"#f97316",onChange:z("color")})]}),i.jsxs("label",{className:"editor-info-panel__field",children:[i.jsx("span",{children:"Category"}),i.jsx("select",{value:y.category||Ic,onChange:z("category"),children:yh.map(R=>i.jsx("option",{value:R,children:R},R))})]}),i.jsxs("label",{className:"editor-info-panel__field editor-info-panel__field--inline",children:[i.jsx("span",{children:"Label"}),i.jsx("input",{type:"checkbox",checked:y.labelEnabled!==!1,onChange:R=>f("labelEnabled",R.target.checked)}),i.jsx("small",{children:"Show region title on map"})]}),i.jsxs("label",{className:"editor-info-panel__field",children:[i.jsx("span",{children:"Opacity"}),i.jsx("input",{type:"number",min:"0",max:"1",step:"0.05",value:y.opacity??.3,onChange:z("opacity")})]}),i.jsxs("label",{className:"editor-info-panel__field editor-info-panel__field--inline",children:[i.jsx("span",{children:"Scale With Zoom"}),i.jsx("input",{type:"checkbox",checked:y.labelScaleWithZoom!==!1,onChange:Z("labelScaleWithZoom")})]}),i.jsxs("label",{className:"editor-info-panel__field",children:[i.jsx("span",{children:"Vertical Text Size"}),i.jsx("input",{type:"range",min:"0.25",max:"3",step:"0.05",value:y.labelSize??1,onChange:z("labelSize")})]}),i.jsxs("label",{className:"editor-info-panel__field",children:[i.jsx("span",{children:"Label Width"}),i.jsx("input",{type:"range",min:"0.4",max:"2.4",step:"0.05",value:y.labelWidth??1,onChange:z("labelWidth")})]}),i.jsxs("label",{className:"editor-info-panel__field",children:[i.jsx("span",{children:"Label Offset X"}),i.jsx("input",{type:"range",min:"-400",max:"400",step:"5",value:y.labelOffsetX??0,onChange:z("labelOffsetX")})]}),i.jsxs("label",{className:"editor-info-panel__field",children:[i.jsx("span",{children:"Label Offset Y"}),i.jsx("input",{type:"range",min:"-400",max:"400",step:"5",value:y.labelOffsetY??0,onChange:z("labelOffsetY")})]}),i.jsxs("div",{className:"editor-info-panel__field",children:[i.jsx("span",{children:"Merge Regions"}),S?i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsxs("select",{value:x,onChange:R=>E(R.target.value),style:{flex:1,borderRadius:"8px",padding:"0.45rem 0.5rem",border:"1px solid rgba(255,255,255,0.25)",background:"rgba(10,16,30,0.8)",color:"#f8fafc"},children:[i.jsx("option",{value:"",children:"Select region"}),I.map(R=>i.jsx("option",{value:R.id,children:R.name||R.id},R.id))]}),i.jsx("button",{type:"button",className:"panel-button panel-button--danger",onClick:()=>{E(""),A(!1)},children:"Cancel"})]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsx("button",{type:"button",className:"panel-button",disabled:!x,onClick:()=>{x&&b&&(b(y.id,x),E(""),A(!1))},children:"Merge Selected"}),i.jsx("button",{type:"button",className:"panel-button panel-button--ghost",onClick:()=>A(!1),children:"Back"})]}),i.jsx("small",{children:"Merging keeps this region's settings and removes the other. Use Back to exit without merging."})]}):i.jsx("button",{type:"button",className:"panel-button",onClick:()=>A(!0),children:"Merge Another Region"})]}),i.jsxs("div",{className:"editor-info-panel__actions",children:[i.jsx("button",{type:"button",className:"panel-button",onClick:()=>p?.(y.id),children:"Close"}),i.jsx("button",{type:"button",className:"panel-button panel-button--danger",onClick:()=>m?.(y.id),children:"Delete Region"})]})]})]})}const ja={HOME:"home",MARKERS:"markers",REGIONS:"regions"};function Fx({isEditorMode:r,markerPalette:d,markerToolbox:f,locationEditor:m,regions:p=[],activeRegionId:b,onSelectRegion:j,onFocusRegion:C,onDeleteRegion:y,onRegionFieldChange:x,onMergeRegion:E,onStartSubregion:S,onCancelSubregion:A,regionDraftTargetId:k,canAutoSave:z=!1,isRegionMode:Z,onToggleRegionMode:I,regionDraftPoints:R=[],onFinishRegion:D,onResetRegionDraft:$,canAssignSelection:G=!1,onAssignSelection:X,selectedRegionName:ve="",selectedLocationName:F=""}){const[ue,U]=g.useState(ja.HOME),[xe,je]=g.useState("palette"),[Ce,qe]=g.useState(360),[Ze,Ie]=g.useState(()=>new Set),J=Dl.useRef(!1),B=le=>{le.preventDefault(),J.current=!0;const he=le.clientX,_e=Ce,be=we=>{if(!J.current)return;const Oe=we.clientX-he,st=Math.min(Math.max(_e+Oe,280),520);qe(st)},Le=()=>{J.current=!1,window.removeEventListener("mousemove",be),window.removeEventListener("mouseup",Le)};window.addEventListener("mousemove",be),window.addEventListener("mouseup",Le)};g.useEffect(()=>{r||U(ja.HOME)},[r]);const ee=g.useMemo(()=>p.length?`${p.length} region${p.length===1?"":"s"}`:"No regions yet",[p]);if(!r)return null;const K=()=>i.jsxs("div",{className:"editor-side-panel__home-grid",children:[i.jsxs("button",{type:"button",className:"editor-side-panel__home-card",onClick:()=>U(ja.MARKERS),children:[i.jsx("span",{className:"editor-side-panel__home-eyebrow",children:"Tools"}),i.jsx("strong",{children:"Markers"}),i.jsx("p",{children:"Drop, edit, and manage icons on the map."})]}),i.jsxs("button",{type:"button",className:"editor-side-panel__home-card",onClick:()=>U(ja.REGIONS),children:[i.jsx("span",{className:"editor-side-panel__home-eyebrow",children:"Tools"}),i.jsx("strong",{children:"Regions"}),i.jsx("p",{children:"Create areas, adjust colors, and assign markers."})]}),i.jsxs("div",{className:"editor-side-panel__home-card editor-side-panel__home-card--disabled",children:[i.jsx("span",{className:"editor-side-panel__home-eyebrow",children:"Coming Soon"}),i.jsx("strong",{children:"World Settings"}),i.jsx("p",{children:"Shared editor presets and automation will live here."})]})]}),P=()=>i.jsxs("div",{className:"editor-side-panel__section",children:[i.jsxs("div",{className:"editor-side-panel__tabs editor-side-panel__tabs--sub",children:[i.jsx("button",{type:"button",className:xe==="palette"?"active":"",onClick:()=>je("palette"),children:"Palette"}),i.jsx("button",{type:"button",className:xe==="data"?"active":"",onClick:()=>je("data"),children:"Data"}),i.jsx("button",{type:"button",className:xe==="edit"?"active":"",onClick:()=>je("edit"),children:"Edit"})]}),i.jsxs("div",{className:"editor-side-panel__section-body",children:[xe==="palette"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"editor-side-panel__section-header",children:[i.jsx("h3",{children:"Marker Palette"}),i.jsx("p",{children:"Select a category and drag icons into place."})]}),d]}),xe==="data"&&f&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"editor-side-panel__section-header",children:[i.jsx("h3",{children:"Data"}),i.jsx("p",{children:"Import or export marker data."})]}),f]}),xe==="edit"&&m&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"editor-side-panel__section-header",children:[i.jsx("h3",{children:"Edit Marker"}),i.jsx("p",{children:"Update the highlighted marker's details."})]}),m]})]})]}),T=()=>i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"editor-side-panel__section",children:i.jsxs("div",{className:"editor-side-panel__section-body",children:[i.jsx("div",{className:"editor-side-panel__actions-grid",children:i.jsxs("article",{className:"editor-side-panel__action-card",children:[i.jsxs("header",{children:[i.jsx("h4",{children:"Create / Edit Regions"}),i.jsx("p",{children:"Enable region mode to plot new areas or detached parts."})]}),i.jsx("button",{type:"button",className:"toolbox-button",onClick:I,disabled:!z,children:Z?"Exit Region Mode":"Start Region Mode"}),Z&&i.jsxs("div",{className:"editor-side-panel__region-draft",children:[i.jsxs("span",{children:["Draft points: ",R.length]}),i.jsxs("div",{children:[i.jsx("button",{type:"button",className:"toolbox-button",onClick:D,disabled:R.length<3,children:"Finish"}),i.jsx("button",{type:"button",className:"toolbox-button toolbox-button--ghost",onClick:$,children:"Clear"})]})]})]})}),i.jsxs("div",{className:"editor-side-panel__section-header",children:[i.jsx("h3",{children:"Regions"}),i.jsx("p",{children:ee})]}),i.jsxs("div",{className:"region-list custom-scrollbar",children:[p.length===0&&i.jsx("p",{className:"region-list__empty",children:"No regions yet. Start region mode to add one."}),p.map(le=>i.jsxs("div",{className:`region-item ${b===le.id?"region-item--active":""}`,children:[i.jsxs("button",{type:"button",className:"region-item__select",onClick:()=>{j(le.id),Ie(he=>{const _e=new Set(he);return _e.has(le.id)?_e.delete(le.id):_e.add(le.id),_e})},children:[i.jsx("span",{className:"region-item__color",style:{backgroundColor:le.color||"#f97316"}}),le.name]}),i.jsxs("div",{className:"region-item__actions",children:[i.jsx("button",{type:"button",onClick:()=>C(le.id),children:"Focus"}),i.jsx("button",{type:"button",onClick:()=>y(le.id),children:"Delete"})]}),Ze.has(le.id)&&i.jsx("div",{className:"region-item__details",children:i.jsx(Vx,{region:le,isOpen:!0,onFieldChange:(he,_e,be)=>x?.(_e,be,he),onDelete:he=>y(he),onClose:()=>Ie(he=>{const _e=new Set(he);return _e.delete(le.id),_e}),onMergeRegion:(he,_e)=>E?.(he,_e)})})]},le.id))]})]})}),G&&i.jsx("div",{className:"editor-side-panel__section",children:i.jsxs("button",{type:"button",className:"assign-region-button",onClick:X,children:["Assign ",F||"marker"," to ",ve||"region"]})})]}),Q=()=>ue===ja.MARKERS?P():ue===ja.REGIONS?T():K();return i.jsxs("aside",{className:"editor-side-panel","aria-label":"Map editor panel",style:{width:`${Ce}px`},children:[i.jsx("div",{className:"editor-side-panel__resizer",onMouseDown:B}),i.jsxs("header",{className:"editor-side-panel__header",children:[i.jsxs("div",{children:[i.jsx("p",{className:"editor-side-panel__label",children:"Editor Mode"}),i.jsx("h2",{children:"World Builder"})]}),i.jsxs("div",{className:"editor-side-panel__tabs",children:[i.jsx("button",{type:"button",className:ue===ja.HOME?"active":"",onClick:()=>U(ja.HOME),children:"Home"}),i.jsx("button",{type:"button",className:ue===ja.MARKERS?"active":"",onClick:()=>U(ja.MARKERS),children:"Markers"}),i.jsx("button",{type:"button",className:ue===ja.REGIONS?"active":"",onClick:()=>U(ja.REGIONS),children:"Regions"})]})]}),i.jsx("div",{className:"editor-side-panel__body custom-scrollbar",children:Q()})]})}const Kx=[{key:"city",label:"Cities"},{key:"dungeon",label:"Dungeons"},{key:"ruins",label:"Ruins"},{key:"town",label:"Towns"},{key:"landmark",label:"Landmarks"},{key:"npc",label:"NPCs"},{key:"custom",label:"Custom"},{key:"generic",label:"Other"}],Xx=[{key:"snow",label:"Snow"},{key:"leaves",label:"Leaves"},{key:"embers",label:"Embers"},{key:"magic",label:"Magic Particles"},{key:"weather",label:"Weather Overlays"}];function xc({title:r,children:d}){return i.jsxs("section",{className:"filter-hover-tab__section",children:[i.jsx("h4",{children:r}),i.jsx("div",{className:"filter-hover-tab__grid",children:d})]})}function hs({label:r,checked:d,onChange:f}){return i.jsxs("label",{className:"filter-hover-tab__toggle",children:[i.jsx("input",{type:"checkbox",checked:d,onChange:m=>f(m.target.checked)}),i.jsx("span",{children:r})]})}function Qx({isOpen:r=!1,onToggleOpen:d=()=>{},showMarkers:f,markerFilters:m={},onToggleMarkers:p,onToggleMarkerCategory:b,showRegions:j,onToggleRegions:C,particleFilters:y={},onToggleParticle:x}){const{cloudsEnabled:E,fogEnabled:S,vignetteEnabled:A,heatmapMode:k,setCloudsEnabled:z,setFogEnabled:Z,setVignetteEnabled:I,setHeatmapMode:R}=$g(),D=k!=="none",$=()=>{R(D?"none":"population")};return i.jsx("div",{className:`filter-hover-tab ${r?"filter-hover-tab--open":""}`,"aria-label":"Map filters",children:i.jsxs("div",{className:"filter-hover-tab__panel",role:"region","aria-hidden":!r,children:[i.jsxs(xc,{title:"Markers",children:[i.jsx(hs,{label:"Show all markers",checked:f,onChange:p}),Kx.map(G=>i.jsx(hs,{label:G.label,checked:m[G.key]!==!1,onChange:X=>b(G.key,X)},G.key))]}),i.jsx(xc,{title:"Regions",children:i.jsx(hs,{label:"Show regions",checked:j,onChange:C})}),i.jsx(xc,{title:"Particles",children:Xx.map(G=>i.jsx(hs,{label:G.label,checked:y[G.key]!==!1,onChange:X=>x(G.key,X)},G.key))}),i.jsxs(xc,{title:"Map Effects",children:[i.jsx(hs,{label:"Fog",checked:S,onChange:G=>Z(G)}),i.jsx(hs,{label:"Clouds",checked:E,onChange:G=>z(G)}),i.jsx(hs,{label:"Vignette",checked:A,onChange:G=>I(G)}),i.jsx(hs,{label:"Heatmap",checked:D,onChange:$})]})]})})}function Wx(r=[],d={}){const{knownTypes:f=Sx,locationIds:m=[]}=d,p=Array.isArray(r)?r:[],b=new Set,j=new Set;let C=0;p.forEach(R=>{const D=R?.id;if(D==null||D===""){C+=1;return}const $=String(D);b.has($)?j.add($):b.add($)});const y=new Set((f||[]).map(R=>String(R).toLowerCase())),x=p.filter(R=>{const D=String(R?.type||"").toLowerCase();return D?y.size?!y.has(D):!1:!0}).map(R=>R?.id||"(missing id)"),E=p.filter(R=>!R?.title).map(R=>R?.id||"(missing id)"),S=p.filter(R=>!R?.summary).map(R=>R?.id||"(missing id)"),A=new Set((m||[]).map(R=>String(R))),k=p.filter(R=>R?.mapLocationId!==null&&R?.mapLocationId!==void 0&&!A.has(String(R.mapLocationId))).map(R=>R?.id||String(R?.mapLocationId)),z=C+j.size+x.length+E.length+S.length+k.length;let Z="ok";C||j.size?Z="error":(x.length||E.length||S.length||k.length)&&(Z="warn");const I=p.length?`${p.length} entries; missing ids=${C}; duplicates=${j.size}; unknown types=${x.length}; missing titles=${E.length}; missing summaries=${S.length}; broken location refs=${k.length}`:"No content entries loaded.";return{status:p.length?Z:"warn",message:I,details:{missingIds:C,duplicateIds:Array.from(j),unknownTypes:x,missingTitles:E,missingSummaries:S,badReferences:k,issueCount:z}}}const Jx=[{id:3,name:"New City",type:"city",iconKey:"city-gold",lat:1756.0650955576998,lng:3728.0286197132973,x:1756.0650955576998,y:3728.0286197132973,description:"EEEEEEEEE",category:"City",tags:[],regionId:null,glowColor:"#F7B267"},{id:4,name:"Elverdeen",type:"city",iconKey:"city-gold",lat:2025.2667108661888,lng:3491.4714675071104,x:2025.2667108661888,y:3491.4714675071104,description:"",category:"City",tags:[],regionId:null,glowColor:"#F7B267"},{id:6,name:"New Landmark",type:"landmark",iconKey:"landmark-spire",lat:1727.9970735273573,lng:1703.9943215214932,x:1718.5013656101964,y:1688.6999038528006,description:"",category:"Landmark",tags:[],regionId:null,glowColor:"#FFDAB9"},{id:8,name:"New City",type:"city",iconKey:"city-gold",lat:2281.6840983741195,lng:2971.7851213461317,x:2281.6840983741195,y:2971.7851213461317,description:"",category:"City",tags:[],regionId:null,glowColor:"#F7B267"},{id:9,name:"New Gilded City",type:"city",iconKey:"city-gold",lat:2609.7062798096904,lng:2260.329564201985,x:2609.7062798096904,y:2260.329564201985,description:"",category:"City",tags:[],regionId:null,glowColor:"#F7B267"},{id:10,name:"New Abyss Dungeon",type:"dungeon",iconKey:"dungeon-abyss",lat:2713.94564143529,lng:1913.8802411174543,x:2713.94564143529,y:1913.8802411174543,description:"Hello There",category:"Dungeon",tags:[],regionId:null,glowColor:"#8E7CC3"},{id:11,name:"New Azure Port",type:"city",iconKey:"port-azure",lat:1947.6926748142037,lng:4090.8052655876722,x:1947.6926748142037,y:4090.8052655876722,description:"",category:"City",tags:[],regionId:null,glowColor:"#F7B267"},{id:12,name:"Ember Vault",type:"dungeon",iconKey:"dungeon-ember",lat:1400,lng:1800,x:1400,y:1800,description:"A vault suffused with auroral embers.",category:"Dungeon",tags:[],regionId:null,glowColor:"#f59e0b",secretId:"aurora-ember"},{id:13,name:"Silent Stacks",type:"city",iconKey:"city-gold",lat:1600,lng:1900,x:1600,y:1900,description:"A hidden annex of the archivists.",category:"City",tags:[],regionId:null,glowColor:"#fcd34d",secretId:"silent-archive"},{id:14,name:"Gilded Horizon Outpost",type:"landmark",iconKey:"landmark-obelisk",lat:1800,lng:2100,x:1800,y:2100,description:"An outpost that glows when the horizon turns gold.",category:"Landmark",tags:[],regionId:null,glowColor:"#fbbf24",secretId:"gilded-horizon"}],th={locations:Jx},Fg=(r,d,f)=>Math.min(Math.max(r,d),f),Kg="/p15/",eb=`${Kg}icons/cities/`,bc="/api",eg=()=>th.map(r=>({...r}));delete wa.Icon.Default.prototype._getIconUrl;wa.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const Pl=[{id:"city",label:"City",glowColor:"#F7B267"},{id:"town",label:"Town",glowColor:"#74c2e1"},{id:"dungeon",label:"Dungeon",glowColor:"#8E7CC3"},{id:"landmark",label:"Landmark",glowColor:"#FFDAB9"}],Ul={id:"generic",label:"Generic",glowColor:"#9ca3af"},tb=Pl.reduce((r,d)=>({...r,[d.id]:d}),{[Ul.id]:Ul});[...Pl.map(r=>({id:r.id,label:r.label})),(Ul.id,Ul.label)];const Ol={city:"city-gold",town:"town-oak",dungeon:"dungeon-abyss",landmark:"landmark-spire",generic:"city-gold"},nb=[{iconKey:"city-gold",label:"Gilded City",type:"city"},{iconKey:"city-blue",label:"Azure City",type:"city"},{iconKey:"city-crimson",label:"Crimson City",type:"city"},{iconKey:"city-emerald",label:"Emerald City",type:"city"},{iconKey:"town-oak",label:"Oak Town",type:"town"},{iconKey:"town-harbor",label:"Harbor Town",type:"town"},{iconKey:"town-river",label:"River Town",type:"town"},{iconKey:"dungeon-abyss",label:"Abyss Dungeon",type:"dungeon"},{iconKey:"dungeon-ember",label:"Ember Dungeon",type:"dungeon"},{iconKey:"landmark-spire",label:"Sun Spire",type:"landmark"},{iconKey:"landmark-obelisk",label:"Obelisk",type:"landmark"},{iconKey:"port-azure",label:"Azure Port",type:"city"},{iconKey:"port-sunset",label:"Sunset Port",type:"city"},{iconKey:"citadel-iron",label:"Iron Citadel",type:"city"},{iconKey:"citadel-sun",label:"Sun Citadel",type:"city"},{iconKey:"village-meadow",label:"Meadow Village",type:"town"},{iconKey:"village-sand",label:"Sand Village",type:"town"},{iconKey:"camp-northern",label:"Northern Camp",type:"landmark"},{iconKey:"camp-jungle",label:"Jungle Camp",type:"landmark"},{iconKey:"academy-star",label:"Star Academy",type:"landmark"}],ab=yh.map(r=>({id:r,label:r.charAt(0).toUpperCase()+r.slice(1)})),ib=()=>ab.reduce((r,d)=>(r[d.id]=!0,r),{}),tg=r=>!r||typeof r!="string"?Ic:r.toLowerCase(),xh=r=>Ol[r]||Ol.generic,bh=r=>{if(!r)return Ul;const d=typeof r=="string"?r.toLowerCase():r;return tb[d]||Ul},Lc=r=>r.iconKey||xh(r.type),Kr=r=>`${eb}${r}.png`,nh=r=>{const d=bh(r.type),f=r.iconKey||xh(d.id),m=r.lat??r.x??0,p=r.lng??r.y??0;return{id:r.id,name:r.name||`${d.label}`,type:d.id,iconKey:f,lat:m,lng:p,x:r.x??m,y:r.y??p,description:r.description??"",category:r.category??d.label,tags:Array.isArray(r.tags)?r.tags:[],regionId:r.regionId??null,glowColor:r.glowColor||d.glowColor}},Ir=r=>r.map(d=>nh(d)),sb=r=>{const d=(r||"").toLowerCase();return["city","town","dungeon","ruins","landmark","npc"].includes(d)?d:d==="generic"?"generic":"custom"},lb=({paletteItem:r,activeTypeId:d})=>{if(r)return{typeId:r.type,label:r.label,iconKey:r.iconKey};if(d){const f=bh(d);return{typeId:f.id,label:f.label,iconKey:xh(f.id)}}return null},Gl=256,rb=0,jh=8,ng=8,ag=3,wh=Gl*160,Sh=Gl*160,ob=wh/Gl,cb=Sh/Gl,ub=[Sh/2,wh/2],jc=200,wc=Gl*.75,Gd=wa.latLngBounds([-wc,-wc],[Sh+wc,wh+wc]),ig=.35,db=1,hb=1,fb=120,sg=Math.pow(2,jh),mb=wa.extend({},wa.CRS.Simple,{scale:r=>Math.pow(2,r)/sg,zoom:r=>Math.log(r*sg)/Math.LN2,transformation:new wa.Transformation(1,0,1,0)});let lg=!1;const pb=r=>{const d=Math.pow(2,jh-r);return{x:Math.ceil(ob/d),y:Math.ceil(cb/d)}};function gb({minZoom:r,maxZoom:d,maxNativeZoom:f,minNativeZoom:m,tileSize:p,keepBuffer:b}){const j=Uc(),C="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";return g.useEffect(()=>{const y=wa.TileLayer.extend({getTileUrl(E){const S=pb(E.z);if(E.x<0||E.y<0||E.x>=S.x||E.y>=S.y)return C;const A=S.y-1-E.y;return`${Kg}tiles/${E.z}/${E.x}/${A}.jpg`}}),x=new y("",{minZoom:r,maxZoom:d,maxNativeZoom:f,minNativeZoom:m,tileSize:p,noWrap:!0,keepBuffer:b});return x.addTo(j),()=>{x.removeFrom(j)}},[j,r,d,f,m,p,b]),null}function vb(){const r=Uc();return g.useEffect(()=>{const d=f=>{const m=r.getCenter();switch(f.key){case"ArrowUp":case"w":case"W":r.panTo([m.lat-jc,m.lng]);break;case"ArrowDown":case"s":case"S":r.panTo([m.lat+jc,m.lng]);break;case"ArrowLeft":case"a":case"A":r.panTo([m.lat,m.lng-jc]);break;case"ArrowRight":case"d":case"D":r.panTo([m.lat,m.lng+jc]);break}};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[r]),null}function _b(){const r=Uc();return i.jsxs("div",{className:"zoom-controls",children:[i.jsx("button",{className:"zoom-button",type:"button","aria-label":"Zoom in",onClick:()=>r.zoomIn(),children:"+"}),i.jsx("button",{className:"zoom-button",type:"button","aria-label":"Zoom out",onClick:()=>r.zoomOut(),children:"-"})]})}function yb({isEditorMode:r,selectedTypeId:d,onSelectType:f,jsonBuffer:m,onJsonChange:p,onExportJson:b,onImportJson:j,importError:C,showTypeButtons:y=!0}){if(!r)return null;const x=Pl.find(E=>E.id===d);return i.jsxs("div",{className:"editor-toolbox","aria-label":"Editor toolbox",children:[i.jsxs("div",{className:"editor-toolbox__header",children:[i.jsx("p",{children:"Editor Toolbox"}),y&&i.jsx("span",{className:"editor-toolbox__status",children:x?`Placing: ${x.label}`:"Select a marker type"})]}),y&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"editor-toolbox__buttons",children:Pl.map(E=>i.jsx("button",{type:"button",className:`toolbox-button ${d===E.id?"toolbox-button--active":""}`,onClick:()=>f(d===E.id?null:E.id),children:E.label},E.id))}),x&&i.jsxs("p",{className:"editor-toolbox__hint",children:["Click anywhere on the map to place a ",x.label,"."]})]}),i.jsxs("div",{className:"editor-toolbox__data",children:[i.jsxs("div",{className:"editor-toolbox__data-actions",children:[i.jsx("button",{type:"button",className:"toolbox-button toolbox-button--ghost",onClick:b,children:"Export JSON"}),i.jsx("button",{type:"button",className:"toolbox-button toolbox-button--primary",onClick:j,children:"Import JSON"})]}),i.jsx("textarea",{className:"editor-toolbox__textarea",placeholder:"Paste JSON array here...",value:m,onChange:E=>p(E.target.value),rows:6}),C&&i.jsx("p",{className:"editor-toolbox__error",children:C})]})]})}function xb({isEnabled:r,onPlaceMarker:d}){return Wd("click",f=>{r&&d(f.latlng)}),null}function bb({isActive:r,onAddPoint:d,onFinish:f}){return Wd("click",m=>{r&&d(m.latlng)}),Wd("dblclick",m=>{r&&(m.originalEvent?.preventDefault(),f())}),null}function jb({location:r,onLocationClick:d,isSelected:f,isEditorMode:m,onDragEnd:p,zoomLevel:b,resolveIcon:j}){const[C,y]=g.useState(!1),x=(()=>{const Z=1+(b-4)*.08;return Fg(36*Z,20,64)})(),E=Kr(Ol.generic),A=(j?j(r):{src:Kr(Lc(r))})?.src||E,k=(r.name||"").replace(/"/g,"&quot;");return i.jsx(Ug,{position:[r.lat,r.lng],draggable:m,icon:wa.divIcon({className:`custom-marker custom-marker--${r.type} ${f?"custom-marker--selected":""}`,html:`
          <div class="custom-marker__wrapper ${C?"is-hovered":""}">
            <img src="${A}" alt="${k}"
              class="custom-marker__image" loading="lazy"
              style="width:${x}px;height:${x}px;"
              onerror="this.onerror=null;this.dataset.missing='1';this.src='${E}'" />
          </div>
        `,iconSize:[x,x],iconAnchor:[x/2,x]}),eventHandlers:{mouseover:()=>y(!0),mouseout:()=>y(!1),click:()=>d(r),dragend:z=>{if(!m||!p)return;const{lat:Z,lng:I}=z.target.getLatLng();p(r.id,{lat:Z,lng:I})}},children:C&&i.jsx(ox,{children:i.jsx("div",{className:"location-popup",children:i.jsx("h3",{children:r.name})})})})}function wb({isEditorMode:r=!1,filtersOpen:d=!1,onToggleFilters:f}){const{role:m,token:p}=Cn(),{cloudsEnabled:b,fogEnabled:j,vignetteEnabled:C,heatmapMode:y,intensities:x,setIntensity:E}=$g(),{locations:S,setLocations:A,selectedLocationId:k,selectLocation:z}=Hc(),{regions:Z,setRegions:I,selectedRegionId:R,selectRegion:D}=Wr(),{entries:$,loading:G,error:X,issues:ve}=Vg(),[F,ue]=g.useState(null),[U,xe]=g.useState(null),[je,Ce]=g.useState(null),[qe,Ze]=g.useState(""),[Ie,J]=g.useState(""),[B,ee]=g.useState(()=>!lg),[K,P]=g.useState(null),[T,Q]=g.useState(2),[le,he]=g.useState(!1),[_e,be]=g.useState([]),[Le,we]=g.useState(null),[Oe,st]=g.useState(!0),[Wt,De]=g.useState({city:!0,town:!0,dungeon:!0,ruins:!0,landmark:!0,npc:!0,custom:!0,generic:!0}),[Je,jt]=g.useState(!0),[sn,Vt]=g.useState(()=>ib()),[ca,un]=g.useState({snow:!0,leaves:!0,embers:!0,magic:!0,weather:!0}),Zt=g.useRef(null),dn=g.useRef("[]"),hn=g.useRef(!1),Jt=g.useRef(null),Na=g.useRef("[]"),Ot=g.useRef(null),Ha=g.useRef(new Set),[Rn,en]=g.useState(""),[Tt,Za]=g.useState({}),[Ia,li]=g.useState(0),[Ca,En]=g.useState({}),It=m==="admin",yn=ub,Gt=2;Pl.find(W=>W.id===U);const xn=g.useMemo(()=>JSON.stringify(S),[S]),bn=g.useMemo(()=>JSON.stringify(Z),[Z]),jn=m==="editor"||m==="admin",Fn=g.useMemo(()=>Oe?S.filter(W=>{const re=sb(W.type);return Wt[re]!==!1}):[],[S,Wt,Oe]),Kn=g.useMemo(()=>!Je&&!le?[]:Z.filter(W=>{if(le&&W.id===R)return!0;const re=tg(W.category);return sn[re]!==!1}),[Z,sn,le,R,Je]),fn=Kn.some(W=>W.labelEnabled!==!1),et=g.useCallback((W,re)=>{Za(ye=>{const Se=ye[W]||{},ge={...Se,...re};return Se.status===ge.status&&Se.message===ge.message?ye:{...ye,[W]:ge}})},[]),Ea=()=>{Ha.current=new Set,En({}),li(W=>W+1),et("marker-icons",{status:"pending",message:"Rechecking icon sprites..."})},Ta=(W,re)=>{const ye=Fg(re,0,1.25);E(W,ye)},fs=g.useCallback(W=>{const re=Lc(W),ye=Ca[re];return ye?.status==="ok"?{key:re,src:ye.src}:ye?.status==="error"?{key:re,src:Kr(Ol.generic),fallback:!0}:{key:re,src:Kr(re)}},[Ca]);g.useEffect(()=>{let W=!0;return(async()=>{try{const ye=await fetch(`${bc}/locations`),Se=await ye.json();if(!ye.ok)throw new Error(Se.error||"Failed to load locations.");const ge=Array.isArray(Se.locations)?Ir(Se.locations):Ir(eg());W&&(A(ge),dn.current=JSON.stringify(ge),hn.current=!0)}catch(ye){if(console.error("Unable to load locations",ye),W){const Se=Ir(eg());A(Se),dn.current=JSON.stringify(Se),hn.current=!0}}})(),()=>{W=!1}},[]),g.useEffect(()=>{let W=!0;return(async()=>{try{const ye=await fetch(`${bc}/regions`),Se=await ye.json();if(!ye.ok)throw new Error(Se.error||"Failed to load regions.");if(W){const ge=Array.isArray(Se.regions)?Se.regions.map(Jp):[];I(ge),Na.current=JSON.stringify(ge)}}catch(ye){console.error("Unable to load regions",ye),W&&(I([]),Na.current="[]")}})(),()=>{W=!1}},[I]),g.useEffect(()=>{Vt(W=>{let re=!1;const ye={...W};return Z.forEach(Se=>{const ge=tg(Se.category);ge in ye||(ye[ge]=!0,re=!0)}),re?ye:W})},[Z]),g.useEffect(()=>{const W=new Set(S.map(re=>Lc(re)));W.add(Ol.generic),W.forEach(re=>{if(!re||Ha.current.has(re))return;Ha.current.add(re);const ye=Kr(re),Se=new Image;Se.onload=()=>{En(ge=>ge[re]?.status==="ok"?ge:{...ge,[re]:{status:"ok",src:ye}})},Se.onerror=()=>{En(ge=>ge[re]?.status==="error"?ge:{...ge,[re]:{status:"error",src:ye}})},Se.src=ye})},[S,Ia]),g.useEffect(()=>{const W=new Set(S.map(Dt=>Lc(Dt)));W.add(Ol.generic);let re=0,ye=0,Se=0;W.forEach(Dt=>{const Dn=Ca[Dt]?.status;Dn==="ok"?ye+=1:Dn==="error"?re+=1:Se+=1});const ge=`${S.length} markers; ${ye}/${W.size} icons loaded${re?`; ${re} using fallback`:""}${Se?`; ${Se} pending`:""}`;et("marker-icons",{status:re?"warn":Se?"pending":"ok",message:ge})},[S,Ca,et]),g.useEffect(()=>{if(G){et("content",{status:"pending",message:"Loading content entries..."});return}if(!S.length){et("content",{status:"pending",message:"Waiting for map data to validate content references."});return}const W=S.map(Se=>Se.id),{status:re,message:ye}=Wx($,{locationIds:W});et("content",{status:re,message:ye})},[$,G,S,et]),g.useEffect(()=>{if(!ve)return;const W=ve.unreadableFiles||[];if(W.length){et("content-importer",{status:"warn",message:`Unreadable files: ${W.map(Se=>Se.path).join(", ")}`});return}const re=ve.issueCount||0,ye=re?ve.status||"warn":"ok";et("content-importer",{status:ye,message:re?`Importer reported ${re} issues across ${ve.entryCount||$.length} entries.`:`Importer validated ${ve.entryCount||$.length} entries.`})},[ve,$.length,et]),g.useEffect(()=>{X&&et("content",{status:"warn",message:`Using fallback content: ${X}`})},[X,et]);const Li=W=>{if(z(W.id),r){ue({id:W.id,draft:{name:W.name||"",type:W.type||"",description:W.description||""}});return}const re="/p15/";window.location.href=`${re}location/${W.id}`},ri=()=>z(null),Xn=(W,re)=>{A(ye=>ye.map(Se=>Se.id===W?{...Se,lat:re.lat,lng:re.lng}:Se))},ms=W=>{be(re=>[...re,[W.lng,W.lat]])},ki=W=>{if(!K)return;const re=Z.find(Ve=>Ve.id===W);if(!re)return;const Se=Aa(re).flat();if(!Se.length)return;const ge=Se.map(([Ve,Dt])=>wa.latLng(Dt,Ve));K.fitBounds(wa.latLngBounds(ge).pad(.2))},Aa=g.useCallback(W=>{if(!W)return[];const re=Array.isArray(W.points)&&W.points.length>=3?[W.points]:[],ye=Array.isArray(W.parts)?W.parts.filter(Se=>Array.isArray(Se)&&Se.length>=3):[];return[...re,...ye]},[]),ua=(W,re,ye)=>{I(Se=>Se.map(ge=>ge.id===W?{...ge,[re]:re==="opacity"?Math.min(Math.max(Number(ye)||0,0),1):re==="labelEnabled"?!!ye:ye}:ge))},qt=()=>{be(W=>{if(W.length<3)return W;if(Le)return I(Se=>Se.map(ge=>{if(ge.id!==Le)return ge;const Ve=Aa(ge),[Dt,...Dn]=Ve,We=Dt?[...Dn,W]:[...Dn];return{...ge,points:Dt||W,parts:We}})),[];const re=crypto.randomUUID?crypto.randomUUID():`region-${Date.now()}`,ye={id:re,name:"New Region",color:"#f97316",borderColor:"#ea580c",opacity:.3,category:Ic,labelEnabled:!0,points:W.map(([Se,ge])=>[Se,ge]),parts:[]};return I(Se=>[...Se,ye]),D(re),[]})},ke=()=>{be([])},Ga=W=>{!W||!jn||(be([]),we(W),he(!0),D(W))},qa=()=>{be([]),we(null)},Tn=W=>{Ce(re=>{const ye=re&&re.iconKey===W.iconKey?null:W;return xe(ye?ye.type:null),ye})},Lt=()=>{he(W=>{const re=!W;return re?(Ce(null),xe(null),we(null),be([]),D(null)):(be([]),D(null),we(null)),re})},kt=(W,re,ye=R)=>{ye&&ua(ye,W,re)},Qn=(W=R)=>{W&&window.confirm("Delete this region?")&&(I(re=>re.filter(ye=>ye.id!==W)),R===W&&D(null))},On=W=>{if(r)D(W),be([]);else{const re="/p15/";window.location.href=`${re}region/${W}`}},V=(W,re)=>{!W||!re||W===re||(I(ye=>{const Se=ye.find(We=>We.id===W),ge=ye.find(We=>We.id===re);if(!Se||!ge)return ye;const Ve=[...Aa(Se),...Aa(ge)];if(!Ve.length)return ye.filter(We=>We.id!==re);const[Dt,...Dn]=Ve;return ye.filter(We=>We.id!==re).map(We=>We.id===W?{...We,points:Dt,parts:Dn}:We)}),D(W),we(null),be([]))},oe=()=>{!ze||!R||A(W=>W.map(re=>re.id===ze.id?{...re,regionId:R}:re))},Te=W=>{xe(W),W&&Ce(null)},ae=W=>{const re=lb({paletteItem:je,activeTypeId:U});if(!re)return;const ye=bh(re.typeId),Se=S.reduce((Ve,Dt)=>typeof Dt.id=="number"?Math.max(Ve,Dt.id):Ve,0)+1,ge=nh({id:Se,name:re.label?`New ${re.label}`:`New ${ye.label}`,type:re.typeId,iconKey:re.iconKey,description:"",category:ye.label,tags:[],regionId:null,lat:W.lat,lng:W.lng});A(Ve=>[...Ve,ge]),z(ge.id),ue({id:ge.id,draft:{name:ge.name,type:ge.type,description:ge.description}})},Be=W=>{Ze(W),J("")},Ue=()=>{Ze(JSON.stringify(S,null,2)),J("")},Ae=()=>{try{const W=qe.trim();if(!W)throw new Error("Please provide JSON to import.");const re=JSON.parse(W);if(!Array.isArray(re))throw new Error("JSON must be an array of locations.");const ye=re.map((ge,Ve)=>({id:typeof ge.id=="number"?ge.id:Ve+1,name:ge.name??`Location ${Ve+1}`,type:ge.type??"generic",description:ge.description??"",lore:ge.lore??"",lat:typeof ge.lat=="number"?ge.lat:0,lng:typeof ge.lng=="number"?ge.lng:0,glowColor:ge.glowColor})),Se=Ir(ye);A(Se),hn.current=!0,z(null),ue(null),J(""),Ze(JSON.stringify(Se,null,2))}catch(W){J(W.message||"Unable to import JSON.")}},Ee=g.useCallback(async W=>{if(!p){en("Please sign in again to save changes.");return}try{const re=await fetch(`${bc}/locations/save`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`},body:JSON.stringify({locations:W})}),ye=await re.json();if(!re.ok)throw new Error(ye.error||"Failed to save locations.");hn.current=!0;const Se=Ir(ye.locations);A(Se),dn.current=JSON.stringify(Se),en("")}catch(re){console.error("Unable to save locations",re),en(re.message||"Unable to save locations right now.")}},[p]),_t=g.useCallback(async W=>{if(p)try{const re=await fetch(`${bc}/regions/save`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`},body:JSON.stringify({regions:W})}),ye=await re.json();if(!re.ok)throw new Error(ye.error||"Failed to save regions.");const Se=Array.isArray(ye.regions)?ye.regions.map(Jp):[];I(Se),Na.current=JSON.stringify(Se)}catch(re){console.error("Unable to save regions",re)}},[p,I]);g.useEffect(()=>{r?z(null):(ue(null),xe(null),he(!1),be([]),D(null))},[r,z,D]),g.useEffect(()=>{if(r)return()=>{he(!1),be([])}},[r]),g.useEffect(()=>{if(!r){Zt.current&&(clearTimeout(Zt.current),Zt.current=null),dn.current=xn,en("");return}if(!jn){xn!==dn.current&&(en("Only approved editors can save changes to the shared map."),dn.current=xn);return}if(!p){en("Please sign in again to save changes.");return}if(en(""),hn.current){hn.current=!1,dn.current=xn;return}if(xn!==dn.current)return Zt.current&&clearTimeout(Zt.current),Zt.current=setTimeout(()=>{Zt.current=null,Ee(S)},400),()=>{Zt.current&&(clearTimeout(Zt.current),Zt.current=null)}},[xn,r,jn,Ee,S,p]),g.useEffect(()=>{if(!(!jn||!p)&&bn!==Na.current)return Jt.current&&clearTimeout(Jt.current),Jt.current=setTimeout(()=>{Jt.current=null,_t(Z)},500),()=>{Jt.current&&(clearTimeout(Jt.current),Jt.current=null)}},[bn,jn,_t,Z,p]),g.useEffect(()=>()=>{Zt.current&&clearTimeout(Zt.current),Jt.current&&clearTimeout(Jt.current)},[]);const ze=S.find(W=>W.id===k)||null,ln=Z.find(W=>W.id===R)||null,An=(W,re)=>{ue(ye=>ye&&{...ye,draft:{...ye.draft,[W]:re}})},mn=()=>{F&&(A(W=>W.map(re=>re.id===F.id?nh({...re,...F.draft}):re)),ue(null),jn||en("Only approved editors can save changes to the shared map."))},tt=()=>{ue(null)},mt=()=>{if(!F)return;if(!jn){en("Only approved editors can save changes to the shared map.");return}if(!(typeof window>"u"?!0:window.confirm("Are you sure you want to delete this location?")))return;const re=F.id;A(ye=>ye.filter(Se=>Se.id!==re)),ue(null),k===re&&z(null)},$a=F?.draft??null,ps=i.jsx($x,{isEditorMode:r,options:nb,selectedOption:je,onSelect:Tn,categoryOptions:Pl,groupByCategory:!0}),oi=i.jsx(yb,{isEditorMode:r,selectedTypeId:U,onSelectType:Te,jsonBuffer:qe,onJsonChange:Be,onExportJson:Ue,onImportJson:Ae,importError:Ie,showTypeButtons:!1}),Qe=r?i.jsx(mx,{isOpen:!!F,draft:$a,onFieldChange:An,onSave:mn,onCancel:tt,canAutoSave:jn,saveWarning:Rn,canDelete:jn,onDelete:mt}):null;g.useEffect(()=>{if(!K)return;Q(K.getZoom());const W=()=>{Q(K.getZoom())};return K.on("zoomend",W),()=>K.off("zoomend",W)},[K]),g.useEffect(()=>{const W=Ot.current;if(!W)return;const re=ge=>{ge.ctrlKey&&ge.preventDefault()},ye=ge=>{(ge.ctrlKey||ge.metaKey)&&["+","-","=","_","0"].includes(ge.key)&&ge.preventDefault()},Se=ge=>ge.preventDefault();return W.addEventListener("wheel",re,{passive:!1}),window.addEventListener("keydown",ye,{passive:!1}),window.addEventListener("gesturestart",Se,{passive:!1}),window.addEventListener("gesturechange",Se,{passive:!1}),()=>{W.removeEventListener("wheel",re),window.removeEventListener("keydown",ye),window.removeEventListener("gesturestart",Se),window.removeEventListener("gesturechange",Se)}},[]),g.useEffect(()=>{K&&K.invalidateSize()},[K,r]),g.useEffect(()=>{!K||!K.doubleClickZoom||(le?K.doubleClickZoom.disable():K.doubleClickZoom.enable())},[le,K]),g.useEffect(()=>{if(!le)return;const W=re=>{re.key==="Escape"&&be([])};return window.addEventListener("keydown",W),()=>window.removeEventListener("keydown",W)},[le]),g.useEffect(()=>{if(!K)return;[K.dragging,K.scrollWheelZoom,K.doubleClickZoom,K.boxZoom,K.keyboard,K.touchZoom].forEach(re=>{re&&(B&&re.disable?re.disable():!B&&re.enable&&re.enable())})},[K,B]),g.useEffect(()=>{if(!B)return;const W=Se=>{Se.ctrlKey&&Se.preventDefault()},re=Se=>{(Se.ctrlKey||Se.metaKey)&&["+","-","=","_","0"].includes(Se.key)&&Se.preventDefault()},ye=Se=>{Se.preventDefault()};return window.addEventListener("wheel",W,{passive:!1}),window.addEventListener("keydown",re,{passive:!1}),window.addEventListener("gesturestart",ye,{passive:!1}),window.addEventListener("gesturechange",ye,{passive:!1}),()=>{window.removeEventListener("wheel",W),window.removeEventListener("keydown",re),window.removeEventListener("gesturestart",ye),window.removeEventListener("gesturechange",ye)}},[B]);const gt=()=>{lg=!0,ee(!1)};return g.useEffect(()=>{K&&(K.setMaxBounds(Gd),K.options.maxBoundsViscosity=ig,K.panInsideBounds(Gd,{animate:!0,duration:.35}))},[K]),i.jsxs("div",{className:`map-wrapper ${B?"map-wrapper--locked":""}`,children:[i.jsxs("div",{className:"map-layout",children:[r&&i.jsx(Fx,{isEditorMode:r,markerPalette:ps,markerToolbox:oi,locationEditor:Qe,regions:Z,activeRegionId:R,onSelectRegion:D,onFocusRegion:ki,onDeleteRegion:Qn,canAutoSave:jn,isRegionMode:le,onToggleRegionMode:Lt,regionDraftPoints:_e,onFinishRegion:qt,onResetRegionDraft:ke,canAssignSelection:!!(r&&ze&&R),onAssignSelection:oe,selectedRegionName:ln?.name||"",selectedLocationName:ze?.name||"",onRegionFieldChange:kt,onMergeRegion:V,onStartSubregion:Ga,onCancelSubregion:qa,regionDraftTargetId:Le}),i.jsx("div",{className:"map-layout__canvas",children:i.jsxs("div",{className:"map-container-wrapper",ref:Ot,children:[i.jsxs(rx,{center:yn,zoom:Gt,minZoom:ag,maxZoom:ng,maxBounds:Gd,maxBoundsViscosity:ig,crs:mb,className:"leaflet-map",scrollWheelZoom:!0,dragging:!0,doubleClickZoom:!0,zoomControl:!1,zoomSnap:db,zoomDelta:hb,wheelPxPerZoomLevel:fb,whenCreated:P,style:{height:"100%",width:"100%"},children:[i.jsx(gb,{tileSize:Gl,minZoom:ag,maxZoom:ng,maxNativeZoom:jh,minNativeZoom:rb,keepBuffer:6}),i.jsx(xb,{isEnabled:r&&!F&&!le&&!!(je||U),onPlaceMarker:ae}),i.jsx(bb,{isActive:r&&le,onAddPoint:ms,onFinish:qt}),i.jsx(vb,{}),i.jsx(_b,{}),Fn.map(W=>i.jsx(jb,{location:W,onLocationClick:Li,isSelected:ze&&ze.id===W.id,isEditorMode:r,onDragEnd:Xn,zoomLevel:T,resolveIcon:fs},W.id)),i.jsx(Ix,{regions:Kn,draftPoints:_e,selectedRegionId:R,onRegionClick:On,interactionEnabled:!le,showLabels:fn,zoomLevel:T})]}),i.jsx(zx,{enabled:C,intensity:x.vignette,onDiagnostics:et}),i.jsx(Rx,{enabled:j,map:K,intensity:x.fog,onDiagnostics:et}),i.jsx(Ox,{enabled:b,map:K,intensity:x.clouds,onDiagnostics:et}),i.jsx(Ux,{enabled:y!=="none",map:K,locations:Fn,heatmapMode:y,onDiagnostics:et}),i.jsx(Gx,{enabled:!0,map:K,containerRef:Ot,onDiagnostics:et})]})})]}),ze&&i.jsx(cx,{location:ze,onClose:ri}),B&&i.jsx(dx,{onFinish:gt}),It&&i.jsx(qx,{diagnostics:Tt,onRefresh:Ea,intensities:x,onIntensityChange:Ta}),i.jsx(Qx,{isOpen:d,onToggleOpen:f,showMarkers:Oe,markerFilters:Wt,onToggleMarkers:()=>st(W=>!W),onToggleMarkerCategory:(W,re)=>De(ye=>({...ye,[W]:re})),showRegions:Je,onToggleRegions:()=>jt(W=>!W),particleFilters:ca,onToggleParticle:(W,re)=>un(ye=>({...ye,[W]:re}))})]})}function Sb(){const[r,d]=g.useState(!1),[f,m]=g.useState(!1),p=()=>{d(j=>!j)},b=()=>m(j=>!j);return i.jsxs("div",{className:"map-page map-page--full",children:[i.jsxs("div",{className:"map-toolbar",children:[i.jsxs("div",{className:"map-toolbar__brand",children:[i.jsx("div",{className:"map-ribbon__sigil",children:"A"}),i.jsxs("div",{children:[i.jsx("p",{className:"map-eyebrow",children:"World Map"}),i.jsx("h1",{className:"map-title",children:"Azterra"})]})]}),i.jsxs("div",{className:"map-toolbar__actions",children:[i.jsx(Vn,{to:"/about#map",className:"map-link",children:"About this map"}),i.jsx("button",{type:"button",className:`editor-toggle ${r?"editor-toggle--active":""}`,onClick:p,"aria-pressed":r,children:r?"Editing mode":"View mode"}),i.jsx("button",{type:"button",className:"map-filter-toggle",onClick:b,"aria-expanded":f,children:"Filters"})]})]}),i.jsx("div",{className:"map-page__frame",children:i.jsx("div",{className:"map-page__canvas",children:i.jsx(wb,{isEditorMode:r,filtersOpen:f,onToggleFilters:b})})})]})}const Nb=`#version 300 es
precision highp float;
uniform float u_time;
uniform vec2 u_resolution;
uniform vec4 u_modA;  // Accepts the modA prop
out vec4 out_color;

void main() {
    vec2 I = gl_FragCoord.xy;
    float t = u_time*0.2, z = 0.0, d = 0.0, s = 0.0;
    float i = 0.0;
    vec4 O = vec4(0.0);

    for(O*=i; i++<8e1; O+=(cos(s+u_modA)+1.0)/d*z) {  // <--- uses uniform
        vec3 p = z * normalize(vec3(I+I,0.0)-vec3(u_resolution, u_resolution.y));
        vec3 a = normalize(cos(vec3(1,2,0)+t-d*8.0));
        p.z += 5.0;
        a = a * dot(a,p) - cross(a,p);

        for(d=1.0; d++<9.0;)
            a += sin(a*d+t).yzx/d;

        z += d = .1*abs(length(p)-3.0) + .04 * abs(s=a.y);
    }
    out_color = tanh(O/3e4);
}
`,Cb=`#version 300 es
in vec2 a_position;
void main() {
    gl_Position = vec4(a_position, 0.0, 1.0);
}
`;function rg(r,d,f){const m=r.createShader(d);return r.shaderSource(m,f),r.compileShader(m),r.getShaderParameter(m,r.COMPILE_STATUS)?m:(console.error("Shader compile error:",r.getShaderInfoLog(m)),r.deleteShader(m),null)}function Eb(r,d,f){const m=rg(r,r.VERTEX_SHADER,d),p=rg(r,r.FRAGMENT_SHADER,f);if(!m||!p)return null;const b=r.createProgram();return r.attachShader(b,m),r.attachShader(b,p),r.linkProgram(b),r.getProgramParameter(b,r.LINK_STATUS)?(r.deleteShader(m),r.deleteShader(p),b):(console.error("Program link error:",r.getProgramInfoLog(b)),r.deleteProgram(b),null)}function Tb(r){const{clientWidth:d,clientHeight:f}=r;return r.width!==d||r.height!==f?(r.width=d,r.height=f,!0):!1}function Ab({modA:r=[0,1,2,0]}){const d=g.useRef(null),f=g.useRef(r);return g.useEffect(()=>{f.current=r},[r]),g.useEffect(()=>{const m=d.current;if(!m)return;const p=m.getContext("webgl2",{antialias:!1});if(!p){console.warn("WebGL2 not supported in this browser.");return}const b=Eb(p,Cb,Nb);if(!b)return;p.useProgram(b);const j=p.createBuffer();p.bindBuffer(p.ARRAY_BUFFER,j);const C=new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]);p.bufferData(p.ARRAY_BUFFER,C,p.STATIC_DRAW);const y=p.getAttribLocation(b,"a_position");p.enableVertexAttribArray(y),p.vertexAttribPointer(y,2,p.FLOAT,!1,0,0);const x=p.getUniformLocation(b,"u_time"),E=p.getUniformLocation(b,"u_resolution"),S=p.getUniformLocation(b,"u_modA");let A=performance.now(),k;const z=Z=>{const I=(Z-A)/1e3;Tb(p.canvas),p.viewport(0,0,p.canvas.width,p.canvas.height),p.uniform1f(x,I),p.uniform2f(E,p.canvas.width,p.canvas.height),p.uniform4fv(S,f.current),p.drawArrays(p.TRIANGLES,0,6),k=requestAnimationFrame(z)};return k=requestAnimationFrame(z),()=>{cancelAnimationFrame(k),p.deleteBuffer(j),p.deleteProgram(b)}},[]),i.jsx("canvas",{ref:d,className:"gl-shader-canvas"})}const Lb=[{name:"Silverwake Citadel",type:"Capital Stronghold",blurb:"A gleaming fortress where Azterras council gathers. The marble courtyards shimmer beneath the astral veil."},{name:"Evershade Wilds",type:"Primordial Forest",blurb:"Ancient trees whisper rites of the First Druids. Spirits guide travelers who respect the woodland accord."},{name:"Starforged Observatory",type:"Arcane Watchtower",blurb:"A lone spire that tracks the movements of twin moons. Seers interpret omens for guilds across the realm."}];function kb(){return i.jsxs("div",{className:"characters-page almanac-layout custom-scrollbar",children:[i.jsx(Ab,{}),i.jsx("div",{className:"sun-overlay","aria-hidden":"true"}),i.jsx("h1",{className:"page-title",children:"Almanac of Azterra"}),i.jsx("section",{className:"almanac-content",children:Lb.map(r=>i.jsxs("article",{className:"almanac-card",children:[i.jsxs("header",{children:[i.jsx("p",{className:"almanac-type",children:r.type}),i.jsx("h2",{children:r.name})]}),i.jsx("p",{children:r.blurb})]},r.name))})]})}function Mb(){const d=Math.floor(Math.random()*10),f=Math.floor(Math.random()*10),m=Math.floor(Math.random()*10),p=Math.floor(Math.random()*10);return[d,f,m,p]}const zb=[{id:1,name:"Aelar",title:"The Arcane Sage",race:"Elf",class:"Wizard",level:5,alignment:"Chaotic Good",background:"Sage of the Spire of Echoes, former Arcanum archivist who charts celestial anomalies",hp:31,ac:13,speed:30,stats:{str:8,dex:14,con:12,int:18,wis:15,cha:10},passivePerception:12,inspiration:!1,profBonus:3,skills:["Arcana","History","Investigation"],abilities:["Arcane Recovery","Spellcasting"],spells:["Magic Missile","Shield","Fireball"],equipment:["Amber-tipped staff etched with constellations","Spellbook bound in dragonhide, pages rimed with stasis-ink","Rope","Crystal lens for reading the weave","Starlit chalk for tracing warding circles"],notes:"Wears a blue cloak. Keeps a notebook of dream-fragments and sketched glyphs; refuses to travel without it.",lore:"Aelar spent decades within the Spire of Echoes, studying ancient scrolls that predate the Sundering. His fascination with the arcane is not merely academic; he seeks to understand the very fabric of reality to prevent a catastrophe he saw in a vision. Though often lost in thought, his mastery of the weave is undeniable, capable of bending the elements to his will with a mere whisper. He once froze an avalanche in place to evacuate a mountain pass caravan, then rewove the falling snow into shimmering sigils that guided the travelers to safety. Aelar now wanders Azterra to confirm whether the symbols from his vision match those appearing in ruins across the continent.",sheet:{core:{hitDie:"d6",raceTraits:["Darkvision","Keen Senses","Fey Ancestry","Trance"],classFeatures:["Spellcasting","Arcane Recovery"],backgroundFeature:"Researcher (Sage)",appearance:"Lean elf wrapped in layered scholar's robes, fingers smudged with ink and starlit chalk.",backstory:"Decades within the Spire of Echoes cataloging omens; now hunts matching glyphs across Azterra."},abilityMethod:"Point Buy",abilityScores:{str:8,dex:14,con:12,int:18,wis:15,cha:10},proficiencies:{savingThrows:["Intelligence","Wisdom"],armorWeapons:["Daggers","Quarterstaff","Light crossbows"],tools:["Calligrapher's supplies"],skills:["Arcana","History","Investigation"],languages:["Common","Elvish","Draconic"]},combat:{armorClass:13,initiative:"+2 (Dex)",speed:"30 ft (Elf)",hitPoints:"31",hitDice:"5d6",passivePerception:12,proficiencyBonus:"+3"},attacks:[{name:"Fire Bolt",bonus:"+7",damage:"1d10 fire",tags:["Cantrip","120 ft"]},{name:"Quarterstaff",bonus:"+2",damage:"1d6 bludgeoning",tags:["Melee"]},{name:"Magic Missile",bonus:"Auto",damage:"3 darts / 1d4+1 force each",tags:["Spell"]}],equipmentDetail:{starting:["Amber-tipped staff etched with constellations","Spellbook bound in dragonhide","Explorer's pack","Crystal lens focus"],wealth:"25 gp and assorted arcane inks"},features:{classFeatures:["Spellcasting (rituals)","Arcane Recovery"],racialTraits:["Keen Senses","Fey Ancestry","Trance"],background:"Researcher - knows where to find lore quickly",feats:[]},spellsDetail:{ability:"Intelligence",saveDC:15,attackBonus:"+7",prepared:"9 prepared / ritual casting",known:["Magic Missile","Shield","Fireball"],slots:"1st:4, 2nd:3, 3rd:2"},personality:{traits:["Keeps a meticulous star journal","Soft-spoken until discussing magic"],ideals:["Knowledge prevents catastrophe"],bonds:["Sworn to the mentors of the Spire of Echoes"],flaws:["Overanalyzes when action is needed"]},extras:{languages:["Common","Elvish","Draconic"],inventoryWeight:"42 lb",notes:"Mana hue: deep sapphire. Uses a crystal lens as arcane focus."}}},{id:2,name:"Brog",title:"The Ironbreaker",race:"Half-Orc",class:"Barbarian",level:4,alignment:"Neutral",background:"Outlander",hp:44,ac:15,speed:40,stats:{str:17,dex:13,con:16,int:8,wis:12,cha:9},passivePerception:10,inspiration:!0,profBonus:2,skills:["Athletics","Survival"],abilities:["Rage","Unarmored Defense"],spells:[],equipment:["Greataxe","Javelin (4)","Explorer's Pack"],notes:"Has a scar over left eye.",lore:"Born in the harsh badlands of Karkoth, Brog learned early that strength was the only law that mattered. He earned the name 'Ironbreaker' after shattering a warlord's shield with a single blow. Despite his fearsome reputation, Brog possesses a quiet wisdom about the natural world, respecting the spirits of the land as much as the steel in his hand.",sheet:{core:{hitDie:"d12",raceTraits:["Darkvision","Relentless Endurance","Savage Attacks"],classFeatures:["Rage (+2 damage)","Unarmored Defense"],backgroundFeature:"Wanderer (knows terrain and food sources)",appearance:"Broad-shouldered half-orc with a scarred brow and weathered travel cloak.",backstory:"Raised in the Karkoth badlands; wanders to measure strength against worthy foes."},abilityMethod:"Standard Array",abilityScores:{str:17,dex:13,con:16,int:8,wis:12,cha:9},proficiencies:{savingThrows:["Strength","Constitution"],armorWeapons:["Light/Medium armor","Shields","Simple & martial weapons"],tools:["Drum"],skills:["Athletics","Survival"],languages:["Common","Orc"]},combat:{armorClass:15,initiative:"+1 (Dex)",speed:"40 ft (fast movement)",hitPoints:"44",hitDice:"4d12",passivePerception:10,proficiencyBonus:"+2"},attacks:[{name:"Greataxe",bonus:"+5",damage:"1d12+3 slashing (+2 rage)",tags:["Melee","Heavy","Two-Handed"]},{name:"Javelin",bonus:"+5",damage:"1d6+3 piercing (30/120)",tags:["Thrown"]}],equipmentDetail:{starting:["Greataxe","Javelin (4)","Explorer's Pack","Bedroll"],wealth:"8 gp and carved clan totem"},features:{classFeatures:["Rage (3/day)","Unarmored Defense"],racialTraits:["Relentless Endurance","Savage Attacks","Darkvision"],background:"Wanderer - recalls maps and safe paths",feats:["Prefers Great Weapon Master style feats"]},spellsDetail:{ability:"None",saveDC:"",attackBonus:"",prepared:"",known:["Non-caster"],slots:""},personality:{traits:["Quiet observer of storms","Protective once angered"],ideals:["Strength proves worth"],bonds:["Keeps carved clan totem close"],flaws:["Rushes toward the loudest battle"]},extras:{languages:["Common","Orc"],inventoryWeight:"68 lb",notes:"Prefers open-sky camps; trophies hang from the explorer's pack."}}},{id:3,name:"Celeste",title:"Lightbringer",race:"Human",class:"Cleric",level:5,alignment:"Lawful Good",background:"Acolyte",hp:38,ac:18,speed:30,stats:{str:12,dex:11,con:14,int:12,wis:18,cha:15},passivePerception:15,inspiration:!0,profBonus:3,skills:["Insight","Medicine","Religion"],abilities:["Channel Divinity","Divine Domain"],spells:["Guiding Bolt","Spiritual Weapon","Mass Healing Word"],equipment:["Mace","Shield","Holy Symbol","Chain Mail"],notes:"Carries a small silver bell blessed by her temple.",lore:"Celeste was found on the steps of the Temple of Solara as an infant, bathed in the morning light. Raised by the priesthood, she has dedicated her life to bringing hope to the darkest corners of Azterra. Her faith is unwavering, a beacon that rallies her allies even in the direst of circumstances. It is said that her prayers can turn the tide of battle, calling down the very wrath of the sun.",sheet:{core:{hitDie:"d8",raceTraits:["Versatile","Bonus training from temple"],classFeatures:["Channel Divinity","Divine Domain: Light"],backgroundFeature:"Shelter of the Faithful",appearance:"Sun-embossed shield and silver holy bell, eyes warm like sunrise.",backstory:"Raised by Solara's priesthood; travels to carry that light into shadowed places."},abilityMethod:"Standard Array",abilityScores:{str:12,dex:11,con:14,int:12,wis:18,cha:15},proficiencies:{savingThrows:["Wisdom","Charisma"],armorWeapons:["Light/Medium armor","Shields","Simple weapons"],tools:["Herbalism kit"],skills:["Insight","Medicine","Religion"],languages:["Common","Celestial"]},combat:{armorClass:18,initiative:"+0 (Dex)",speed:"30 ft",hitPoints:"38",hitDice:"5d8",passivePerception:15,proficiencyBonus:"+3"},attacks:[{name:"Mace",bonus:"+4",damage:"1d6+1 bludgeoning",tags:["Melee"]},{name:"Guiding Bolt",bonus:"+7",damage:"4d6 radiant",tags:["Spell","120 ft"]},{name:"Spiritual Weapon",bonus:"+7",damage:"1d8+4 force (bonus action)",tags:["Spell"]}],equipmentDetail:{starting:["Mace","Shield","Holy Symbol","Chain Mail","Priest pack"],wealth:"15 gp tithe held for the temple"},features:{classFeatures:["Channel Divinity (2/rest)","Domain: Light"],racialTraits:["Versatile and adaptable"],background:"Shelter of the Faithful - temple lodging",feats:[]},spellsDetail:{ability:"Wisdom",saveDC:15,attackBonus:"+7",prepared:"10 prepared including domain",known:["Guiding Bolt","Spiritual Weapon","Mass Healing Word"],slots:"1st:4, 2nd:3, 3rd:2"},personality:{traits:["Comforts the wounded with song","Walks with sunrise calm"],ideals:["Hope is a shared light"],bonds:["Bell relic from Solara's altar"],flaws:["Overextends to protect strangers"]},extras:{languages:["Common","Celestial"],inventoryWeight:"56 lb",notes:"Keeps a travel journal of miracles witnessed."}}},{id:4,name:"Drusk",title:"Dragon's Shield",race:"Dragonborn",class:"Paladin",level:6,alignment:"Lawful Neutral",background:"Soldier",hp:54,ac:19,speed:30,stats:{str:18,dex:10,con:16,int:10,wis:12,cha:14},passivePerception:12,inspiration:!1,profBonus:3,skills:["Athletics","Intimidation","Persuasion"],abilities:["Lay on Hands","Divine Smite"],spells:["Bless","Shield of Faith"],equipment:["Greatsword","Plate Armor","Insignia of rank"],notes:"Armor is etched with bronze dragon motifs.",lore:"A veteran of the Scale Wars, Drusk swore an oath of vengeance against those who would threaten the innocent. His bronze scales are scarred from countless battles, each a testament to his resilience. He views himself as a living shield, placing himself between danger and his companions without hesitation. His code is strict, but his heart burns with the fire of his ancestors.",sheet:{core:{hitDie:"d10",raceTraits:["Draconic Ancestry (Bronze)","Breath Weapon (lightning)","Damage Resistance: Lightning"],classFeatures:["Lay on Hands","Divine Smite","Fighting Style: Defense"],backgroundFeature:"Military Rank",appearance:"Bronze scales scarred from war, armor engraved with draconic script.",backstory:"Veteran of the Scale Wars; sworn to stand between danger and the innocent."},abilityMethod:"Standard Array",abilityScores:{str:18,dex:10,con:16,int:10,wis:12,cha:14},proficiencies:{savingThrows:["Wisdom","Charisma"],armorWeapons:["All armor","Shields","Simple & martial weapons"],tools:["Vehicles (land)"],skills:["Athletics","Intimidation","Persuasion"],languages:["Common","Draconic"]},combat:{armorClass:19,initiative:"+0 (Dex)",speed:"30 ft",hitPoints:"54",hitDice:"6d10",passivePerception:12,proficiencyBonus:"+3"},attacks:[{name:"Greatsword",bonus:"+7",damage:"2d6+4 slashing (+2d8 radiant smite)",tags:["Melee","Heavy"]},{name:"Lay on Hands",bonus:"",damage:"Restore 30 hp pool",tags:["Healing"]},{name:"Breath Weapon",bonus:"DC 13",damage:"2d6 lightning (5x30 ft line)",tags:["Racial","Recharge"]}],equipmentDetail:{starting:["Greatsword","Plate Armor","Insignia of rank","Traveler's pack"],wealth:"20 gp and a polished bronze holy symbol"},features:{classFeatures:["Lay on Hands","Divine Smite","Fighting Style: Defense"],racialTraits:["Breath Weapon","Lightning Resistance"],background:"Military Rank - respects of other soldiers",feats:[]},spellsDetail:{ability:"Charisma",saveDC:13,attackBonus:"+5",prepared:"8 prepared (Cha mod + level)",known:["Bless","Shield of Faith"],slots:"1st:4, 2nd:3"},personality:{traits:["Stands as the first shield in danger","Polishes armor nightly"],ideals:["Discipline maintains order"],bonds:["Oathbound to fallen comrades' families"],flaws:["Overly rigid with personal codes"]},extras:{languages:["Common","Draconic"],inventoryWeight:"110 lb",notes:"Prefers to keep armor on even while resting; drinks only water on duty."}}},{id:5,name:"Elyra",title:"Songweaver",race:"Half-Elf",class:"Bard",level:5,alignment:"Chaotic Neutral",background:"Entertainer",hp:32,ac:15,speed:30,stats:{str:10,dex:14,con:12,int:13,wis:11,cha:18},passivePerception:13,inspiration:!0,profBonus:3,skills:["Performance","Deception","Persuasion","Stealth"],abilities:["Bardic Inspiration","Jack of All Trades"],spells:["Dissonant Whispers","Hypnotic Pattern","Cure Wounds"],equipment:["Rapier","Lute","Pan flute","Leather Armor"],notes:"Collects stories from every tavern she visits.",lore:"Elyra believes that the world is made of stories, and she intends to learn them all. A wanderer by nature, she weaves magic into her music, charming kings and calming beasts alike. Her laughter is infectious, but beneath her playful exterior lies a sharp wit and a keen observer. She chronicles the party's deeds, ensuring their legend will be sung for generations to come.",sheet:{core:{hitDie:"d8",raceTraits:["Darkvision","Fey Ancestry","Skill Versatility"],classFeatures:["Bardic Inspiration (d8)","Jack of All Trades","Song of Rest"],backgroundFeature:"By Popular Demand",appearance:"Half-elf with braided silver hair and a lute etched with constellations.",backstory:"Travels tavern to tavern collecting legends to weave into new songs."},abilityMethod:"Point Buy",abilityScores:{str:10,dex:14,con:12,int:13,wis:11,cha:18},proficiencies:{savingThrows:["Dexterity","Charisma"],armorWeapons:["Light armor","Simple weapons","Hand crossbows","Longswords","Rapiers","Shortswords"],tools:["Lute","Pan flute","Disguise kit"],skills:["Performance","Deception","Persuasion","Stealth"],languages:["Common","Elvish","Sylvan"]},combat:{armorClass:15,initiative:"+2 (Dex)",speed:"30 ft",hitPoints:"32",hitDice:"5d8",passivePerception:13,proficiencyBonus:"+3"},attacks:[{name:"Rapier",bonus:"+5",damage:"1d8+2 piercing",tags:["Melee","Finesse"]},{name:"Dissonant Whispers",bonus:"DC 15",damage:"3d6 psychic (1st)",tags:["Spell","Wis save"]},{name:"Hypnotic Pattern",bonus:"DC 15",damage:"Charm/incapacitate",tags:["Spell","Area control"]}],equipmentDetail:{starting:["Rapier","Lute","Pan flute","Leather Armor","Entertainer's pack"],wealth:"28 gp in performance tips"},features:{classFeatures:["Bardic Inspiration (d8)","Jack of All Trades","Song of Rest"],racialTraits:["Fey Ancestry","Skill Versatility"],background:"By Popular Demand - always finds a stage",feats:[]},spellsDetail:{ability:"Charisma",saveDC:15,attackBonus:"+7",prepared:"Knows 11 spells / 3 cantrips",known:["Dissonant Whispers","Hypnotic Pattern","Cure Wounds"],slots:"1st:4, 2nd:3, 3rd:2"},personality:{traits:["Turns every scene into a story prompt","Laughs easily, schemes quietly"],ideals:["Freedom to wander and collect songs"],bonds:["Protects the tales of those who trust her"],flaws:["Keeps secrets for the sake of a better story"]},extras:{languages:["Common","Elvish","Sylvan"],inventoryWeight:"34 lb",notes:"Writes nightly ballads about the day's heroes and villains."}}},{id:6,name:"Flint",title:"The Tinkerer",race:"Dwarf",class:"Artificer",level:4,alignment:"Neutral Good",background:"Guild Artisan",hp:34,ac:16,speed:25,stats:{str:11,dex:12,con:15,int:17,wis:10,cha:9},passivePerception:11,inspiration:!1,profBonus:2,skills:["Arcana","Investigation","Tinker's Tools"],abilities:["Infuse Item","Magical Tinkering"],spells:["Faerie Fire","Cure Wounds"],equipment:["Handaxe","Light Crossbow","Tinker satchel"],notes:"Has a mechanical raven familiar named Cog.",lore:"Flint sees magic not as a mystical force, but as a puzzle to be solved. Exiled from his clan for his unorthodox experiments, he travels the world seeking rare materials for his inventions. His mechanical companion, Cog, is his masterpiece, a testament to his genius. Flint is always tinkering, improving, and optimizing, believing that with enough gears and mana, anything is possible.",sheet:{core:{hitDie:"d8",raceTraits:["Darkvision","Dwarven Resilience","Stonecunning"],classFeatures:["Magical Tinkering","Infuse Item (2 infusions)"],backgroundFeature:"Guild Membership",appearance:"Stocky dwarf with soot-stained gloves and bronze lenses perched on his brow.",backstory:"Exiled for unorthodox experiments; roams to find rare materials for inventions."},abilityMethod:"Point Buy",abilityScores:{str:11,dex:12,con:15,int:17,wis:10,cha:9},proficiencies:{savingThrows:["Constitution","Intelligence"],armorWeapons:["Light/Medium armor","Shields","Simple weapons"],tools:["Tinker's tools","Thieves' tools","Smith's tools"],skills:["Arcana","Investigation","Tinker's Tools"],languages:["Common","Dwarvish","Gnomish"]},combat:{armorClass:16,initiative:"+1 (Dex)",speed:"25 ft",hitPoints:"34",hitDice:"4d8",passivePerception:11,proficiencyBonus:"+2"},attacks:[{name:"Light Crossbow",bonus:"+3",damage:"1d8+1 piercing",tags:["Ranged","Infused bolts"]},{name:"Handaxe",bonus:"+2",damage:"1d6 slashing",tags:["Melee","Light"]},{name:"Gadget Burst",bonus:"DC 13",damage:"1d8 thunder (prototype)",tags:["Infusion","Close burst"]}],equipmentDetail:{starting:["Handaxe","Light Crossbow","Tinker satchel","Cog the mechanical raven"],wealth:"35 gp held for guild dues"},features:{classFeatures:["Magical Tinkering","Infuse Item (2 infusions)"],racialTraits:["Dwarven Resilience","Stonecunning"],background:"Guild Membership - workshop access",feats:[]},spellsDetail:{ability:"Intelligence",saveDC:13,attackBonus:"+5",prepared:"5 prepared artificer spells",known:["Faerie Fire","Cure Wounds"],slots:"1st:3, 2nd:1"},personality:{traits:["Talks to his inventions","Records observations in gear-etched shorthand"],ideals:["Innovation makes the world safer"],bonds:["Protects Cog as proof of his craft"],flaws:["Tinkers instead of resting"]},extras:{languages:["Common","Dwarvish","Gnomish"],inventoryWeight:"62 lb",notes:"Travels with Cog the mechanical raven; keeps spare springs in beard braid."}}},{id:7,name:"Ghita",title:"Shadowbound",race:"Tiefling",class:"Warlock",level:5,alignment:"Neutral Evil",background:"Charlatan",hp:30,ac:14,speed:30,stats:{str:8,dex:14,con:13,int:11,wis:12,cha:18},passivePerception:13,inspiration:!1,profBonus:3,skills:["Arcana","Deception","Sleight of Hand"],abilities:["Eldritch Invocations","Pact of the Tome"],spells:["Eldritch Blast","Hex","Shadow of Moil"],equipment:["Dagger","Component pouch","Silken robes"],notes:"Eyes glow faint purple when channeling her patron.",lore:"Ghita struck a bargain with a shadowy entity to save her own life, a debt she is now forever paying. She walks the line between light and dark, using her deceptive charm to manipulate those around her. While her methods are questionable, her power is undeniable. She seeks a way to break her pact, but the whispers in the dark are growing louder every day.",sheet:{core:{hitDie:"d8",raceTraits:["Darkvision","Hellish Resistance","Infernal Legacy"],classFeatures:["Eldritch Invocations","Pact of the Tome"],backgroundFeature:"False Identity",appearance:"Tiefling with deep violet eyes, fine robes hiding concealed daggers.",backstory:"Bound to a shadowed patron to escape death; walks the line between need and freedom."},abilityMethod:"Point Buy",abilityScores:{str:8,dex:14,con:13,int:11,wis:12,cha:18},proficiencies:{savingThrows:["Wisdom","Charisma"],armorWeapons:["Light armor","Simple weapons"],tools:["Disguise kit","Forgery kit"],skills:["Arcana","Deception","Sleight of Hand"],languages:["Common","Infernal"]},combat:{armorClass:14,initiative:"+2 (Dex)",speed:"30 ft",hitPoints:"30",hitDice:"5d8",passivePerception:13,proficiencyBonus:"+3"},attacks:[{name:"Eldritch Blast",bonus:"+7",damage:"1d10+4 force (Agonizing)",tags:["Spell","120 ft"]},{name:"Dagger",bonus:"+5",damage:"1d4+2 piercing",tags:["Melee","Thrown"]},{name:"Hex",bonus:"Bonus",damage:"+1d6 necrotic to target",tags:["Curse","Concentration"]}],equipmentDetail:{starting:["Dagger","Component pouch","Silken robes","Book of shadows"],wealth:"15 gp hidden across false identities"},features:{classFeatures:["Eldritch Invocations","Pact of the Tome"],racialTraits:["Hellish Resistance","Infernal Legacy"],background:"False Identity - forged papers",feats:[]},spellsDetail:{ability:"Charisma",saveDC:15,attackBonus:"+7",prepared:"Knows 8 spells / 3 cantrips",known:["Eldritch Blast","Hex","Shadow of Moil"],slots:"2 pact slots (3rd level)"},personality:{traits:["Smiles while scheming","Asks questions instead of giving answers"],ideals:["Freedom from the pact above all"],bonds:["Book of shadows contains true name rune"],flaws:["Takes risks to prove she controls the darkness"]},extras:{languages:["Common","Infernal"],inventoryWeight:"29 lb",notes:"Eyes glow violet when channeling; keeps black candles for patron rites."}}},{id:8,name:"Harran",title:"Stonefist",race:"Goliath",class:"Fighter",level:5,alignment:"Chaotic Neutral",background:"Mercenary",hp:52,ac:17,speed:30,stats:{str:18,dex:12,con:16,int:9,wis:13,cha:10},passivePerception:12,inspiration:!0,profBonus:3,skills:["Athletics","Survival","Perception"],abilities:["Second Wind","Action Surge","Battlemaster Maneuvers"],spells:[],equipment:["Maul","Heavy Crossbow","Chain Mail"],notes:"Keeps tally marks engraved on his maul's haft.",lore:"Harran descends from a tribe of mountain dwellers who value strength above all else. He left his home to test his might against the strongest champions of the lowlands. His maul, 'Earthshaker', has felled giants and beasts alike. Though he speaks little, his actions speak volumes. He fights not for gold or glory, but for the thrill of the challenge and the honor of his ancestors.",sheet:{core:{hitDie:"d10",raceTraits:["Powerful Build","Stone's Endurance","Mountain Born"],classFeatures:["Second Wind","Action Surge","Battlemaster Maneuvers"],backgroundFeature:"Mercenary Life (job board contacts)",appearance:"Towering goliath with shale-grey skin and tally marks etched into his maul.",backstory:"Left the peaks to test strength against lowland champions and earn renown."},abilityMethod:"Standard Array",abilityScores:{str:18,dex:12,con:16,int:9,wis:13,cha:10},proficiencies:{savingThrows:["Strength","Constitution"],armorWeapons:["All armor","Shields","Simple & martial weapons"],tools:["Vehicles (land)","Dice set"],skills:["Athletics","Survival","Perception"],languages:["Common","Giant"]},combat:{armorClass:17,initiative:"+1 (Dex)",speed:"30 ft",hitPoints:"52",hitDice:"5d10",passivePerception:12,proficiencyBonus:"+3"},attacks:[{name:"Maul 'Earthshaker'",bonus:"+7",damage:"2d6+4 bludgeoning",tags:["Melee","Heavy","Two-Handed"]},{name:"Heavy Crossbow",bonus:"+4",damage:"1d10+1 piercing (100/400)",tags:["Ranged","Loading"]},{name:"Precision Attack",bonus:"+d8",damage:"Superiority die to hit",tags:["Maneuver"]}],equipmentDetail:{starting:["Maul","Heavy Crossbow","Chain Mail","Traveler's kit"],wealth:"35 gp and carved dice set"},features:{classFeatures:["Second Wind","Action Surge","Battlemaster Maneuvers"],racialTraits:["Powerful Build","Stone's Endurance","Mountain Born"],background:"Mercenary Life - access to job boards",feats:[]},spellsDetail:{ability:"None",saveDC:"",attackBonus:"",prepared:"",known:["Non-caster"],slots:""},personality:{traits:["Speaks with actions more than words","Measures foes with a steady gaze"],ideals:["Honor through tested strength"],bonds:["Earthshaker maul is his rite of passage"],flaws:["Seeks the toughest fight even when tactically unwise"]},extras:{languages:["Common","Giant"],inventoryWeight:"92 lb",notes:"Tallies foes on the maul; keeps quiet watch by the campfire."}}}],bt=zb.map(r=>({...r,color:Mb()})),Rb=`#version 300 es
precision highp float;
uniform float u_fade;
uniform float u_time;
uniform vec2 u_resolution;
uniform vec4 u_modA;
uniform vec4 u_modB;
out vec4 out_color;

vec4 core(vec4 params) {
    vec2 I = gl_FragCoord.xy;
    float t = u_time*0.5, z = 0.0, d = 0.0, s = 0.0;
    float i = 0.0;
    vec4 O = vec4(0.0);
    for(O*=i; i++<8e1; O+=(cos(s+params)+1.0)/d*z) {
        vec3 p = z*normalize(vec3(I+I,0.0)-vec3(u_resolution, u_resolution.y));
        vec3 a = normalize(cos(vec3(1,2,0)+t-d*7.0));
        p.z+=5.0;
        a = a*dot(a,p)-cross(a,p);
        z+=d=.1*abs(length(p)-3.0)+.04*abs(s=a.y);
    }
    return tanh(O/3e4);
}

void main() {
    vec4 colorA = core(u_modA);
    vec4 colorB = core(u_modB);
    out_color = mix(colorA, colorB, u_fade);
}
`,Ob=`#version 300 es
in vec2 a_position;
void main() {
    gl_Position = vec4(a_position, 0.0, 1.0);
}`;function og(r,d,f){const m=r.createShader(d);return r.shaderSource(m,f),r.compileShader(m),r.getShaderParameter(m,r.COMPILE_STATUS)?m:(console.error("Shader compile error:",r.getShaderInfoLog(m)),r.deleteShader(m),null)}function Db(r,d,f){const m=og(r,r.VERTEX_SHADER,d),p=og(r,r.FRAGMENT_SHADER,f);if(!m||!p)return null;const b=r.createProgram();return r.attachShader(b,m),r.attachShader(b,p),r.linkProgram(b),r.getProgramParameter(b,r.LINK_STATUS)?(r.deleteShader(m),r.deleteShader(p),b):(console.error("Program link error:",r.getProgramInfoLog(b)),r.deleteProgram(b),null)}function Bb(r){const{clientWidth:d,clientHeight:f}=r;return r.width!==d||r.height!==f?(r.width=d,r.height=f,!0):!1}function Pb({modA:r=[0,1,2,0],modB:d=[4,1,8,2],fade:f=0}){const m=g.useRef(null),p=g.useRef(f),b=g.useRef(r),j=g.useRef(d);return g.useEffect(()=>{p.current=f},[f]),g.useEffect(()=>{b.current=r},[r]),g.useEffect(()=>{j.current=d},[d]),g.useEffect(()=>{const C=m.current;if(!C)return;const y=C.getContext("webgl2",{antialias:!1});if(!y){console.warn("WebGL2 not supported in this browser.");return}const x=Db(y,Ob,Rb);if(!x)return;y.useProgram(x);const E=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,E),y.bufferData(y.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),y.STATIC_DRAW);const S=y.getAttribLocation(x,"a_position");y.enableVertexAttribArray(S),y.vertexAttribPointer(S,2,y.FLOAT,!1,0,0);const A=y.getUniformLocation(x,"u_time"),k=y.getUniformLocation(x,"u_resolution"),z=y.getUniformLocation(x,"u_fade"),Z=y.getUniformLocation(x,"u_modA"),I=y.getUniformLocation(x,"u_modB");let R=performance.now(),D;const $=G=>{const X=(G-R)/1e3;Bb(y.canvas),y.viewport(0,0,y.canvas.width,y.canvas.height),y.uniform1f(A,X),y.uniform2f(k,y.canvas.width,y.canvas.height),y.uniform1f(z,p.current),y.uniform4fv(Z,b.current),y.uniform4fv(I,j.current),y.drawArrays(y.TRIANGLES,0,6),D=requestAnimationFrame($)};return D=requestAnimationFrame($),()=>{cancelAnimationFrame(D),y.deleteBuffer(E),y.deleteProgram(x)}},[]),i.jsx("canvas",{ref:m,className:"gl-shader-canvas",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:-10,pointerEvents:"none"},tabIndex:-1})}const Ub=`#version 300 es
precision highp float;
uniform float u_fade;
uniform float u_time;
uniform vec2 u_resolution;
uniform vec4 u_modA;
uniform vec4 u_modB;
out vec4 out_color;

vec4 core(vec4 params) {
    vec2 I = gl_FragCoord.xy;
    float t = u_time, z = 0.0, d = 0.0, s = 0.0;
    float i = 0.0;
    vec4 O = vec4(0.0);
    for(O*=i; i++<8e1; O+=(cos(s+params)+1.0)/d*z) {
        vec3 p = z*normalize(vec3(I+I,0.0)-vec3(u_resolution, u_resolution.y));
        vec3 a = normalize(cos(vec3(1,2,0)+t-d*1.0));
        p.z+=4.0;
        a = a*dot(a,p)-cross(a,p);
        z+=d=.1*abs(length(p)-3.0)+.04*abs(s=a.y);
    }
    return tanh(O/3e4);
}

void main() {
    vec4 colorA = core(u_modA);
    vec4 colorB = core(u_modB);
    out_color = mix(colorA, colorB, u_fade);
}
`,Hb=`#version 300 es
in vec2 a_position;
void main() {
    gl_Position = vec4(a_position, 0.0, 1.0);
}
`;function cg(r,d,f){const m=r.createShader(d);return r.shaderSource(m,f),r.compileShader(m),r.getShaderParameter(m,r.COMPILE_STATUS)?m:(console.error("Shader compile error:",r.getShaderInfoLog(m)),r.deleteShader(m),null)}function Zb(r,d,f){const m=cg(r,r.VERTEX_SHADER,d),p=cg(r,r.FRAGMENT_SHADER,f);if(!m||!p)return null;const b=r.createProgram();return r.attachShader(b,m),r.attachShader(b,p),r.linkProgram(b),r.getProgramParameter(b,r.LINK_STATUS)?(r.deleteShader(m),r.deleteShader(p),b):(console.error("Program link error:",r.getProgramInfoLog(b)),r.deleteProgram(b),null)}function Ib(r){const{clientWidth:d,clientHeight:f}=r;return r.width!==d||r.height!==f?(r.width=d,r.height=f,!0):!1}function Gb({modA:r=[0,1,2,0],modB:d=[4,1,8,2],fade:f=0}){const m=g.useRef(null),p=g.useRef(f),b=g.useRef(r),j=g.useRef(d);return g.useEffect(()=>{p.current=f},[f]),g.useEffect(()=>{b.current=r},[r]),g.useEffect(()=>{j.current=d},[d]),g.useEffect(()=>{const C=m.current;if(!C)return;const y=C.getContext("webgl2",{antialias:!1});if(!y){console.warn("WebGL2 not supported in this browser.");return}const x=Zb(y,Hb,Ub);if(!x)return;y.useProgram(x);const E=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,E),y.bufferData(y.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),y.STATIC_DRAW);const S=y.getAttribLocation(x,"a_position");y.enableVertexAttribArray(S),y.vertexAttribPointer(S,2,y.FLOAT,!1,0,0);const A=y.getUniformLocation(x,"u_time"),k=y.getUniformLocation(x,"u_resolution"),z=y.getUniformLocation(x,"u_fade"),Z=y.getUniformLocation(x,"u_modA"),I=y.getUniformLocation(x,"u_modB");let R=performance.now(),D;const $=G=>{const X=(G-R)/1e3;Ib(y.canvas),y.viewport(0,0,y.canvas.width,y.canvas.height),y.uniform1f(A,X),y.uniform2f(k,y.canvas.width,y.canvas.height),y.uniform1f(z,p.current),y.uniform4fv(Z,b.current),y.uniform4fv(I,j.current),y.drawArrays(y.TRIANGLES,0,6),D=requestAnimationFrame($)};return D=requestAnimationFrame($),()=>{cancelAnimationFrame(D),y.deleteBuffer(E),y.deleteProgram(x)}},[]),i.jsx("canvas",{ref:m,className:"card-shader-canvas",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"inherit",pointerEvents:"none"},tabIndex:-1})}function qb({character:r,onToggleFavorite:d,isFavorite:f,onFeature:m,isFeatured:p}){const b=r.name?r.name.charAt(0).toUpperCase():"?",C=`hsl(${r.id*47%360}, 70%, 60%)`,y=r.portraitUrl||r.image;return i.jsxs("article",{className:"card-shell",style:{"--portrait-accent":C},children:[i.jsxs("div",{className:"card-portrait","aria-hidden":"true",children:[y?i.jsx("img",{src:y,alt:`${r.name} portrait`}):i.jsx("span",{className:"card-initial",children:b}),i.jsx("div",{className:"card-portrait-glow"})]}),i.jsxs("div",{className:"card-summary",children:[i.jsxs("div",{className:"card-title-row",children:[i.jsx("h2",{className:"card-name",children:r.name}),i.jsxs("span",{className:"chip chip-level",children:["Level ",r.level]})]}),r.title&&i.jsx("div",{className:"card-subtitle",children:r.title}),i.jsxs("div",{className:"card-stats-grid",children:[i.jsxs("div",{className:"stat-box",children:[i.jsx("span",{className:"stat-label",children:"Race"}),i.jsx("span",{className:"stat-value",children:r.race})]}),i.jsxs("div",{className:"stat-box",children:[i.jsx("span",{className:"stat-label",children:"Class"}),i.jsx("span",{className:"stat-value",children:r.class})]}),i.jsxs("div",{className:"stat-box",children:[i.jsx("span",{className:"stat-label",children:"Alignment"}),i.jsx("span",{className:"stat-value",children:r.alignment})]})]}),(d||m)&&i.jsxs("div",{className:"card-fav",children:[d&&i.jsx("button",{type:"button",className:`fav-btn ${f?"fav-btn--active":""}`,onClick:d,children:f?"Unfavorite":"Favorite"}),m&&i.jsx("button",{type:"button",className:`feature-btn ${p?"feature-btn--active":""}`,onClick:m,children:p?"Featured":"Set Featured"})]})]})]})}const an=["details","background","showcase"],qd={details:"Details",background:"Background",showcase:"Mana"};function $b({character:r,onClose:d,onNext:f,onPrev:m,nextName:p,prevName:b}){const[j,C]=g.useState("details"),[y,x]=g.useState(!0),[E,S]=g.useState(!1),[A,k]=g.useState(null),[z,Z]=g.useState(!1),[I,R]=g.useState(!1),[D,$]=g.useState(!1),[G,X]=g.useState(r),ve=250,F=g.useRef(null),ue=g.useRef(null);if(!r||!G)return null;const U=G.sheet||{},xe=U.abilityScores||G.stats||{},je=U.proficiencies||{},Ce=U.combat||{armorClass:G.ac,initiative:"+0",speed:`${G.speed} ft`,hitPoints:String(G.hp),hitDice:"",passivePerception:G.passivePerception,proficiencyBonus:`+${G.profBonus}`},qe=U.spellsDetail||{},Ze=U.equipmentDetail||{starting:G.equipment||[],wealth:""},Ie=(we=[],Oe="None listed")=>i.jsx("div",{className:"detail-chip-row",children:we.length>0?we.map(st=>i.jsx("span",{className:"detail-chip",children:st},st)):i.jsx("span",{className:"detail-chip detail-chip--muted",children:Oe})});g.useEffect(()=>{x(!1);const we=setTimeout(()=>{X(r),x(!0)},ve);return()=>clearTimeout(we)},[r?.id]),g.useEffect(()=>{x(!1);const we=setTimeout(()=>x(!0),ve);return()=>clearTimeout(we)},[j]),g.useEffect(()=>{j!=="showcase"&&Z(!1)},[j]),g.useEffect(()=>{if(j==="showcase"&&!I){$(!0),R(!0);const we=setTimeout(()=>$(!1),300);return()=>clearTimeout(we)}},[j,I]),g.useEffect(()=>{F.current&&y&&F.current.focus({preventScroll:!0})},[y]),g.useEffect(()=>{if(!E)return;const we=setTimeout(()=>S(!1),ve);return()=>clearTimeout(we)},[E]),g.useEffect(()=>{if(!A)return;const we=Oe=>{Oe.key==="Escape"&&k(null)};return window.addEventListener("keydown",we),()=>window.removeEventListener("keydown",we)},[A]),g.useEffect(()=>{A&&ue.current&&ue.current.focus({preventScroll:!0})},[A]);const J=()=>{if(E)return;S(!0);const Oe=(an.indexOf(j)-1+an.length)%an.length;C(an[Oe])},B=()=>{if(E)return;S(!0);const Oe=(an.indexOf(j)+1)%an.length;C(an[Oe])},ee=()=>{E||(S(!0),m())},K=()=>{E||(S(!0),f())},P=an.indexOf(j),T=qd[an[(P-1+an.length)%an.length]],Q=qd[an[(P+1)%an.length]],le=-(100/an.length)*P,he=we=>{k(we)},_e=(we,Oe)=>{(we.key==="Enter"||we.key===" ")&&(we.preventDefault(),he(Oe))},be={core:"Core Character Information",abilities:"Ability Scores",proficiencies:"Proficiencies",combat:"Combat Stats",attacks:"Attacks & Weapons",equipment:"Equipment & Wealth",features:"Features & Traits",spells:"Spells & Spellcasting",extras:"Extras & Languages",background:"Background & Description",personality:"Personality & Roleplay",notes:"Notes"},Le=(we,{showHeading:Oe=!0}={})=>{switch(we){case"core":return i.jsxs(i.Fragment,{children:[Oe&&i.jsx("h3",{children:"Core Character Information"}),i.jsxs("div",{className:"detail-pill-row",children:[i.jsxs("div",{className:"detail-mini-block",children:[i.jsx("p",{className:"detail-eyebrow",children:"Class & Level"}),i.jsxs("p",{className:"detail-line",children:[G.class,"  Level ",G.level," (Hit Die ",U.core?.hitDie||"",")"]})]}),i.jsxs("div",{className:"detail-mini-block",children:[i.jsx("p",{className:"detail-eyebrow",children:"Race"}),i.jsx("p",{className:"detail-line",children:G.race})]}),i.jsxs("div",{className:"detail-mini-block",children:[i.jsx("p",{className:"detail-eyebrow",children:"Alignment"}),i.jsx("p",{className:"detail-line",children:G.alignment})]}),i.jsxs("div",{className:"detail-mini-block",children:[i.jsx("p",{className:"detail-eyebrow",children:"Background"}),i.jsx("p",{className:"detail-line",children:G.background}),U.core?.backgroundFeature&&i.jsx("p",{className:"detail-line detail-line--muted",children:U.core.backgroundFeature})]})]}),i.jsx("div",{className:"detail-divider"}),i.jsx("p",{className:"detail-eyebrow",children:"Racial Traits"}),Ie(U.core?.raceTraits),i.jsx("p",{className:"detail-eyebrow",style:{marginTop:"0.8rem"},children:"Class Features"}),Ie(U.core?.classFeatures)]});case"abilities":return i.jsxs(i.Fragment,{children:[Oe&&i.jsx("h3",{children:"Ability Scores"}),i.jsx("p",{className:"detail-line detail-line--muted",children:U.abilityMethod||"Manual entry"}),i.jsx("div",{className:"stat-grid custom-scrollbar expanded-stat-grid",children:Object.entries(xe).map(([st,Wt])=>i.jsxs("div",{className:"stat-pill",children:[i.jsx("span",{className:"stat-pill__label",children:st.toUpperCase()}),i.jsx("span",{className:"stat-pill__value",children:Wt})]},st))})]});case"proficiencies":return i.jsxs(i.Fragment,{children:[Oe&&i.jsx("h3",{children:"Proficiencies"}),i.jsxs("div",{className:"detail-list-grid",children:[i.jsxs("div",{children:[i.jsx("p",{className:"detail-eyebrow",children:"Saving Throws"}),Ie(je.savingThrows)]}),i.jsxs("div",{children:[i.jsx("p",{className:"detail-eyebrow",children:"Armor & Weapons"}),Ie(je.armorWeapons)]}),i.jsxs("div",{children:[i.jsx("p",{className:"detail-eyebrow",children:"Tools"}),Ie(je.tools)]}),i.jsxs("div",{children:[i.jsx("p",{className:"detail-eyebrow",children:"Skills"}),Ie(je.skills||G.skills)]}),i.jsxs("div",{children:[i.jsx("p",{className:"detail-eyebrow",children:"Languages"}),Ie(je.languages||U.extras?.languages)]})]})]});case"combat":return i.jsxs(i.Fragment,{children:[Oe&&i.jsx("h3",{children:"Combat Stats"}),i.jsx("div",{className:"stat-grid custom-scrollbar",children:[{label:"Armor Class",value:Ce.armorClass??G.ac},{label:"Initiative",value:Ce.initiative||"+0"},{label:"Speed",value:Ce.speed||`${G.speed} ft`},{label:"Hit Points",value:Ce.hitPoints||G.hp},{label:"Hit Dice",value:Ce.hitDice||""},{label:"Passive Perception",value:Ce.passivePerception||G.passivePerception},{label:"Proficiency",value:Ce.proficiencyBonus||`+${G.profBonus}`}].map(st=>i.jsxs("div",{className:"stat-pill",children:[i.jsx("span",{className:"stat-pill__label",children:st.label}),i.jsx("span",{className:"stat-pill__value stat-pill__value--tight",children:st.value})]},st.label))})]});case"attacks":return!U.attacks||U.attacks.length===0?i.jsxs(i.Fragment,{children:[Oe&&i.jsx("h3",{children:"Attacks & Weapons"}),i.jsx("p",{className:"detail-line",children:"No attacks listed yet."})]}):i.jsxs(i.Fragment,{children:[Oe&&i.jsx("h3",{children:"Attacks & Weapons"}),i.jsx("div",{className:"detail-attack-list",children:(U.attacks||[]).map(st=>i.jsxs("div",{className:"attack-row",children:[i.jsxs("div",{children:[i.jsx("p",{className:"detail-line",children:st.name}),i.jsx("p",{className:"detail-line detail-line--muted",children:st.tags?.join("  ")})]}),i.jsxs("div",{className:"attack-metrics",children:[i.jsx("span",{className:"detail-chip",children:st.bonus}),i.jsx("span",{className:"detail-chip",children:st.damage})]})]},st.name))})]});case"equipment":return i.jsxs(i.Fragment,{children:[Oe&&i.jsx("h3",{children:"Equipment & Wealth"}),i.jsx("div",{className:"detail-block",children:Ze.starting?.map(st=>i.jsxs("span",{className:"detail-line",children:["- ",st]},st))}),Ze.wealth&&i.jsxs("p",{className:"detail-line detail-line--muted",style:{marginTop:"0.6rem"},children:["Wealth: ",Ze.wealth]})]});case"features":return i.jsxs(i.Fragment,{children:[Oe&&i.jsx("h3",{children:"Features & Traits"}),i.jsxs("div",{className:"detail-list-grid",children:[i.jsxs("div",{children:[i.jsx("p",{className:"detail-eyebrow",children:"Class Features"}),Ie(U.features?.classFeatures)]}),i.jsxs("div",{children:[i.jsx("p",{className:"detail-eyebrow",children:"Racial Traits"}),Ie(U.features?.racialTraits||U.core?.raceTraits)]}),i.jsxs("div",{children:[i.jsx("p",{className:"detail-eyebrow",children:"Background"}),Ie([U.features?.background].filter(Boolean))]}),i.jsxs("div",{children:[i.jsx("p",{className:"detail-eyebrow",children:"Feats"}),Ie(U.features?.feats)]})]})]});case"spells":return!qe.ability||qe.ability==="None"?i.jsxs(i.Fragment,{children:[Oe&&i.jsx("h3",{children:"Spellcasting"}),i.jsx("p",{className:"detail-line",children:"This character does not cast spells at level 1."})]}):i.jsxs(i.Fragment,{children:[Oe&&i.jsx("h3",{children:"Spellcasting"}),i.jsxs("div",{className:"detail-pill-row",children:[i.jsxs("div",{className:"detail-mini-block",children:[i.jsx("p",{className:"detail-eyebrow",children:"Spellcasting Ability"}),i.jsx("p",{className:"detail-line",children:qe.ability})]}),i.jsxs("div",{className:"detail-mini-block",children:[i.jsx("p",{className:"detail-eyebrow",children:"Spell Save DC"}),i.jsx("p",{className:"detail-line",children:qe.saveDC})]}),i.jsxs("div",{className:"detail-mini-block",children:[i.jsx("p",{className:"detail-eyebrow",children:"Spell Attack Bonus"}),i.jsx("p",{className:"detail-line",children:qe.attackBonus})]})]}),qe.slots&&i.jsxs("p",{className:"detail-line detail-line--muted",children:["Slots: ",qe.slots]}),qe.prepared&&i.jsxs("p",{className:"detail-line detail-line--muted",children:["Prepared/Known: ",qe.prepared]}),i.jsx("div",{className:"detail-block",style:{marginTop:"0.6rem"},children:Ie(qe.known||G.spells||[])})]});case"extras":return i.jsxs(i.Fragment,{children:[Oe&&i.jsx("h3",{children:"Extras & Languages"}),i.jsxs("div",{className:"detail-mini-block",children:[i.jsx("p",{className:"detail-eyebrow",children:"Languages"}),Ie(U.extras?.languages||je.languages)]}),U.extras?.inventoryWeight&&i.jsxs("p",{className:"detail-line detail-line--muted",style:{marginTop:"0.6rem"},children:["Inventory Weight: ",U.extras.inventoryWeight]}),(U.extras?.notes||G.notes)&&i.jsx("p",{className:"detail-line",style:{marginTop:"0.4rem"},children:U.extras?.notes||G.notes})]});case"background":return i.jsxs(i.Fragment,{children:[Oe&&i.jsx("h3",{children:"Background & Description"}),U.core?.appearance&&i.jsx("p",{className:"detail-line",children:U.core.appearance}),U.core?.backstory&&i.jsx("p",{className:"detail-line detail-line--muted",style:{marginTop:"0.5rem"},children:U.core.backstory}),G.lore&&i.jsx("p",{className:"detail-line",style:{marginTop:"0.8rem"},children:G.lore})]});case"personality":return i.jsxs(i.Fragment,{children:[Oe&&i.jsx("h3",{children:"Personality & Role-Play"}),i.jsxs("div",{className:"detail-list-grid",children:[i.jsxs("div",{children:[i.jsx("p",{className:"detail-eyebrow",children:"Traits"}),Ie(U.personality?.traits)]}),i.jsxs("div",{children:[i.jsx("p",{className:"detail-eyebrow",children:"Ideals"}),Ie(U.personality?.ideals)]}),i.jsxs("div",{children:[i.jsx("p",{className:"detail-eyebrow",children:"Bonds"}),Ie(U.personality?.bonds)]}),i.jsxs("div",{children:[i.jsx("p",{className:"detail-eyebrow",children:"Flaws"}),Ie(U.personality?.flaws)]})]})]});case"notes":return i.jsxs(i.Fragment,{children:[Oe&&i.jsx("h3",{children:"Notes"}),i.jsx("p",{className:"detail-line",children:G.notes})]});default:return null}};return i.jsxs("div",{className:`character-detail-overlay custom-scrollbar ${j==="showcase"?"is-showcase":""}`,children:[i.jsxs("div",{className:"detail-header",children:[i.jsxs("div",{className:"detail-hero",children:[i.jsx("h1",{className:"detail-name",children:G.name}),i.jsx("p",{className:"detail-title",children:G.title}),i.jsxs("p",{className:"detail-meta",children:[G.race," ",G.class," - Level ",G.level]})]}),i.jsxs("div",{className:"expanded-toolbar",children:[i.jsx("button",{type:"button",className:"back-btn",onClick:d,children:"< Back to Character List"}),i.jsxs("div",{className:"detail-nav",children:[i.jsxs("button",{className:"detail-nav-btn",onClick:ee,title:`Previous: ${b}`,children:["< ",i.jsx("span",{className:"detail-nav-label",children:b})]}),i.jsx("span",{className:"detail-nav-divider",children:""}),i.jsxs("button",{className:"detail-nav-btn",onClick:K,title:`Next: ${p}`,children:[i.jsx("span",{className:"detail-nav-label",children:p})," >"]})]})]})]}),i.jsxs("div",{className:"detail-tab-bar",role:"presentation",style:{gridTemplateColumns:`repeat(${an.length}, 1fr)`,"--detail-slide-count":an.length},children:[an.map(we=>i.jsx("button",{type:"button",onClick:()=>C(we),className:`detail-tab-bar__segment ${j===we?"is-active":""}`,children:i.jsx("span",{children:qd[we]})},we)),i.jsx("div",{className:"detail-tab-bar__indicator",style:{transform:`translateX(${P*100}%)`,width:`${100/an.length}%`},"aria-hidden":"true"})]}),i.jsxs("div",{className:"detail-viewport",children:[i.jsxs("div",{className:"detail-track","data-state":y?"visible":"fading","data-fade":y?"in":"out",style:{"--detail-slide-count":an.length,transform:`translateX(${le}%) translateY(var(--detail-shift, 0px))`},children:[i.jsx("div",{className:"detail-slide custom-scrollbar",role:"region","aria-label":"Character details","data-visible":y?"in":"out",children:i.jsxs("div",{className:"detail-content",tabIndex:0,ref:F,children:[i.jsxs("div",{className:"detail-columns detail-columns--tight",children:[i.jsxs("div",{className:"detail-card detail-card--interactive",role:"button",tabIndex:0,"aria-label":"Expand core information panel",onClick:()=>he("core"),onKeyDown:we=>_e(we,"core"),children:[Le("core"),i.jsx("span",{className:"detail-card__hint",children:"Click to view"})]}),i.jsxs("div",{className:"detail-card detail-card--interactive",role:"button",tabIndex:0,"aria-label":"Expand ability scores panel",onClick:()=>he("abilities"),onKeyDown:we=>_e(we,"abilities"),children:[Le("abilities"),i.jsx("span",{className:"detail-card__hint",children:"Click to view"})]})]}),i.jsxs("div",{className:"detail-columns detail-columns--tight",children:[i.jsxs("div",{className:"detail-card detail-card--interactive",role:"button",tabIndex:0,"aria-label":"Expand proficiencies panel",onClick:()=>he("proficiencies"),onKeyDown:we=>_e(we,"proficiencies"),children:[Le("proficiencies"),i.jsx("span",{className:"detail-card__hint",children:"Click to view"})]}),i.jsxs("div",{className:"detail-card detail-card--interactive",role:"button",tabIndex:0,"aria-label":"Expand combat stats panel",onClick:()=>he("combat"),onKeyDown:we=>_e(we,"combat"),children:[Le("combat"),i.jsx("span",{className:"detail-card__hint",children:"Click to view"})]})]}),i.jsxs("div",{className:"detail-columns detail-columns--tight",children:[i.jsxs("div",{className:"detail-card detail-card--interactive",role:"button",tabIndex:0,"aria-label":"Expand attacks panel",onClick:()=>he("attacks"),onKeyDown:we=>_e(we,"attacks"),children:[Le("attacks"),i.jsx("span",{className:"detail-card__hint",children:"Click to view"})]}),i.jsxs("div",{className:"detail-card detail-card--interactive",role:"button",tabIndex:0,"aria-label":"Expand equipment panel",onClick:()=>he("equipment"),onKeyDown:we=>_e(we,"equipment"),children:[Le("equipment"),i.jsx("span",{className:"detail-card__hint",children:"Click to view"})]})]}),i.jsxs("div",{className:"detail-columns detail-columns--tight",children:[i.jsxs("div",{className:"detail-card detail-card--interactive",role:"button",tabIndex:0,"aria-label":"Expand features panel",onClick:()=>he("features"),onKeyDown:we=>_e(we,"features"),children:[Le("features"),i.jsx("span",{className:"detail-card__hint",children:"Click to view"})]}),i.jsxs("div",{className:"detail-card detail-card--interactive",role:"button",tabIndex:0,"aria-label":"Expand spellcasting panel",onClick:()=>he("spells"),onKeyDown:we=>_e(we,"spells"),children:[Le("spells"),i.jsx("span",{className:"detail-card__hint",children:"Click to view"})]})]})]})}),i.jsx("div",{className:"detail-slide custom-scrollbar",role:"region","aria-label":"Character background and role-play","data-visible":y?"in":"out",children:i.jsxs("div",{className:"detail-content",tabIndex:0,children:[i.jsxs("div",{className:"detail-card detail-card--interactive",role:"button",tabIndex:0,"aria-label":"Expand background panel",onClick:()=>he("background"),onKeyDown:we=>_e(we,"background"),children:[Le("background"),i.jsx("span",{className:"detail-card__hint",children:"Click to view"})]}),i.jsxs("div",{className:"detail-columns detail-columns--tight",children:[i.jsxs("div",{className:"detail-card detail-card--interactive",role:"button",tabIndex:0,"aria-label":"Expand personality panel",onClick:()=>he("personality"),onKeyDown:we=>_e(we,"personality"),children:[Le("personality"),i.jsx("span",{className:"detail-card__hint",children:"Click to view"})]}),i.jsxs("div",{className:"detail-card detail-card--interactive",role:"button",tabIndex:0,"aria-label":"Expand extras panel",onClick:()=>he("extras"),onKeyDown:we=>_e(we,"extras"),children:[Le("extras"),i.jsx("span",{className:"detail-card__hint",children:"Click to view"})]})]}),G.notes&&i.jsxs("div",{className:"detail-card detail-card--interactive",role:"button",tabIndex:0,"aria-label":"Expand notes panel",onClick:()=>he("notes"),onKeyDown:we=>_e(we,"notes"),children:[Le("notes"),i.jsx("span",{className:"detail-card__hint",children:"Click to view"})]})]})}),i.jsx("div",{className:"detail-slide backdrop-slide custom-scrollbar",role:"region","aria-label":"Mana view","data-visible":y?"in":"out",children:i.jsx("div",{className:"detail-content backdrop-content",tabIndex:0,children:i.jsx("div",{className:"backdrop-info-area",children:i.jsxs("div",{className:"backdrop-info-wrapper",children:[i.jsx("button",{type:"button",className:"backdrop-info","aria-label":"What is this glowing circle?","aria-describedby":"backdrop-info-desc",onClick:()=>Z(we=>!we),children:"What is this glowing circle?"}),i.jsx("span",{id:"backdrop-info-desc",className:"sr-only",children:"This is the color of your mana, visit the almanac to learn more!"}),z&&i.jsx("div",{className:"backdrop-tooltip",role:"status","data-animate":D?"pulse":"rest",children:"This is the color of your mana, visit the almanac to learn more!"})]})})})})]}),i.jsxs("div",{className:"detail-carousel-bottom",children:[i.jsx("button",{type:"button",onClick:J,"aria-label":`Previous section: ${T}`,children:`< ${T}`}),i.jsx("button",{type:"button",onClick:B,"aria-label":`Next section: ${Q}`,children:`${Q} >`})]})]}),A&&i.jsxs("div",{className:"detail-modal",role:"dialog","aria-modal":"true","aria-label":`Expanded view of ${be[A]}`,children:[i.jsx("div",{className:"detail-modal__backdrop",onClick:()=>k(null)}),i.jsxs("div",{className:"detail-modal__body",role:"document",children:[i.jsxs("header",{className:"detail-modal__header",children:[i.jsxs("div",{children:[i.jsx("p",{className:"detail-eyebrow",children:"Expanded View"}),i.jsx("h2",{className:"detail-modal__title",children:be[A]})]}),i.jsx("button",{type:"button",className:"detail-modal__close",onClick:()=>k(null),"aria-label":"Close expanded panel",ref:ue,children:"Close"})]}),i.jsx("div",{className:"detail-modal__content custom-scrollbar",children:Le(A,{showHeading:!1})})]})]})]})}const Yb=(r,d,f)=>{if(r===d)return"card card-active";const m=(d-1+f)%f,p=(d+1)%f;return r===m?"card card-left":r===p?"card card-right":"card card-hidden"};function Vb(){const[r,d]=g.useState(bt[0].color),[f,m]=g.useState(bt[0].color),[p,b]=g.useState(0),j=g.useRef(),[C,y]=g.useState(null),[x,E]=g.useState(0),S=C!==null,A=S?bt[C]:null;function k(D){j.current&&cancelAnimationFrame(j.current);let $;p>0&&p<1?$=[r[0]+(f[0]-r[0])*p,r[1]+(f[1]-r[1])*p,r[2]+(f[2]-r[2])*p,r[3]+(f[3]-r[3])*p]:$=f,d($),m(D),b(0);let G=performance.now();function X(ve){let F=Math.min(1,(ve-G)/800);b(F),F<1?j.current=requestAnimationFrame(X):(d(D),b(0),j.current=null)}j.current=requestAnimationFrame(X)}g.useEffect(()=>{k(bt[x].color)},[x]);const z=g.useCallback(()=>{E(D=>(D-1+bt.length)%bt.length)},[]),Z=g.useCallback(()=>{E(D=>(D+1)%bt.length)},[]),I=g.useCallback(D=>{E(D),D===x&&(y(D),window.scrollTo({top:0,behavior:"smooth"}))},[x]),R=g.useCallback(()=>{y(null)},[]);return i.jsxs("div",{className:`characters-page custom-scrollbar ${S?"is-expanded":""}`,children:[i.jsx(Pb,{modA:r,modB:f,fade:p}),i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:`carousel-section ${S?"fade-out":""}`,children:[i.jsx("h1",{className:"page-title",children:"Stars of Azterra"}),i.jsxs("div",{className:"characters-wrapper",children:[i.jsx("p",{className:"nav-hint",children:"Use the on-screen controls to view our Heroes"}),i.jsxs("div",{className:"carousel-controls",children:[i.jsx("button",{className:"arrow-btn arrow-left",onClick:z,"aria-label":"Previous character",disabled:S,children:""}),i.jsxs("div",{className:"carousel-frame",role:"region","aria-live":"polite",children:[i.jsx("div",{className:"sun-overlay","aria-hidden":"true"}),i.jsx("div",{className:"carousel-track",children:bt.map((D,$)=>{const G=$===x;return i.jsxs("div",{className:Yb($,x,bt.length),onClick:()=>I($),children:[G&&i.jsx(Gb,{modA:r,modB:f,fade:p}),i.jsx(qb,{character:D})]},D.id)})})]}),i.jsx("button",{className:"arrow-btn arrow-right",onClick:Z,"aria-label":"Next character",disabled:S,children:""})]})]})]}),S&&i.jsx($b,{character:A,onClose:R,onNext:()=>{Z(),y(D=>(D+1)%bt.length)},onPrev:()=>{z(),y(D=>(D-1+bt.length)%bt.length)},nextName:bt[(C+1)%bt.length].name,prevName:bt[(C-1+bt.length)%bt.length].name})]})]})}const Gr="/p15/",Fb=[{id:"human",name:"Human",image:`${Gr}images/races/human.jpg`,blurb:"Adaptable folk found in every corner of the world.",tags:["Size: 5-6+ ft","Speed: 30 ft walking speed","Alignment: None"],description:"Humans are known for their ambition and versatility. They build kingdoms, trading cities, and frontier towns, and can be found in almost any rolefrom humble farmer to archmage.",traits:["Ability Score Flexibility: Humans can excel in many different classes","Cultural Variety: Traditions, dress, and beliefs change from region to region","Shorter Lives: Human lives are brief compared to many other peoples, encouraging bold choices"]},{id:"elf",name:"Elf",image:`${Gr}images/races/elf.jpg`,blurb:"Graceful, long-lived people attuned to magic and nature.",tags:["Size: 5-6 ft","Speed: 30 ft walking speed","Alignment: Chaotic Good / Evil (Drows)"],description:"Elves are lithe and perceptive, with sharp senses and a natural gift for magic. Many dwell in ancient forests or hidden enclaves, carefully guarding their traditions.",traits:["Keen Senses: Elves are hard to surprise and quick to notice details - proficient in the Perception skill","Trance: Rather than sleeping, elves enter a light meditation for 4 hours a day","Fey Ancestry: Magic is unable to put elves to sleep and elves have advantage against being charmed"]},{id:"dwarf",name:"Dwarf",image:`${Gr}images/races/dwarf.jpg`,blurb:"Stout, hardy folk with a deep love of stone and metal.",tags:["Size: 4-5 ft","Speed: 25 ft walking speed","Alignment: Lawful good"],description:"Dwarves are sturdy and determined. Many live in mountain halls or underground cities, where they mine ore and forge renowned weapons, tools, and armor.",traits:["Darkvision: Dwarves have superior vision in dark and dim conditions","Resilience: Dwarves are resistant to various poisons","Craftsmanship: Many dwarves are skilled smiths, masons, or engineers","Weapon Proficiency: Dwarves are proficient with battleaxes, handaxes, throwing hammers, and warhammers"]},{id:"halfling",name:"Halfling",image:`${Gr}images/races/halfling.jpg`,blurb:"Small, cheerful wanderers with uncanny luck.",tags:["Size: 3ft","Speed: 25 ft walking speed","Alignment: Lawful good"],description:"Halflings value comfort, good food, and close-knit communities. Many travel the world as traders or guides, using their knack for avoiding danger to stay out of trouble.",traits:["Brave: Halflings have advantage on saving throws from being frightened","Nimble: Their size makes them quick and agile in tight spaces and can move through larger creatures","Lucky: Halflings can reroll the die on a 1 roll"]},{id:"dragonborn",name:"Dragonborn",image:`${Gr}images/races/dragonborn.jpg`,blurb:"Proud, draconic humanoids who breathe elemental power.",tags:["Size: 6ft+","Speed: 30 ft walking speed","Alignment: Extreme Good / Bad"],description:"Dragonborn carry echoes of dragon heritage in their blood. Many are driven by honor, personal excellence, or the expectations of their clan or ancestry.",traits:["Breath Weapon: Dragonborn can exhale elemental energy in combat","Scaled Resilience: Their draconic ancestry often grants resistance to a damage type","Strong Identity: Each dragonborns ancestry is a key part of their story"]}];function Kb(){const[r,d]=g.useState(null),f=m=>{d(p=>p===m?null:m)};return i.jsxs("div",{className:"characters-page world-races-page custom-scrollbar",children:[i.jsx("div",{className:"sun-overlay","aria-hidden":"true"}),i.jsxs("div",{className:"world-races-content",children:[i.jsx("h1",{className:"page-title",children:"Races of Azterra"}),i.jsx("p",{className:"world-intro",children:"Explore the peoples of Azterra. Select a race to reveal deeper lore, cultural roots, and the gifts that shape their place in the realm."}),i.jsx("div",{className:"race-grid",role:"list",children:Fb.map(m=>{const p=r===m.id,b=`race-details-${m.id}`;return i.jsxs("article",{role:"listitem",className:`race-card ${p?"race-card--expanded":""}`,onClick:()=>f(m.id),children:[m.image&&i.jsx("div",{className:"race-image-wrapper",children:i.jsx("img",{src:m.image,alt:m.name,className:"race-image",loading:"lazy"})}),i.jsxs("div",{className:"race-header",children:[i.jsxs("div",{children:[i.jsx("h2",{children:m.name}),m.blurb&&i.jsx("p",{className:"race-blurb",children:m.blurb})]}),i.jsx("button",{type:"button",className:"race-toggle","aria-expanded":p,"aria-controls":b,onClick:j=>{j.stopPropagation(),f(m.id)},children:p?"Hide details":"View details"})]}),m.tags&&m.tags.length>0&&i.jsx("div",{className:"race-tags","aria-label":"Race quick facts",children:m.tags.map(j=>i.jsx("span",{className:"race-tag",children:j},j))}),i.jsxs("div",{id:b,className:"race-details","aria-hidden":!p,children:[m.description&&i.jsx("p",{className:"race-description",children:m.description}),m.traits&&m.traits.length>0&&i.jsx("ul",{className:"race-traits",children:m.traits.map((j,C)=>i.jsx("li",{children:j},C))})]})]},m.id)})})]})]})}const ug="/api",Xb=[{value:"pending",label:"Pending"},{value:"editor",label:"Editor"},{value:"admin",label:"Admin"}];function Qb(){const{role:r,token:d,user:f}=Cn(),[m,p]=g.useState([]),[b,j]=g.useState(!0),[C,y]=g.useState(""),x=r==="admin";g.useEffect(()=>{if(!x||!d){p([]),j(!1);return}(async()=>{j(!0),y("");try{const A=await fetch(`${ug}/admin/users`,{headers:{Authorization:`Bearer ${d}`}}),k=await A.json();if(!A.ok)throw new Error(k.error||"Unable to load users.");p(k.users)}catch(A){y(A.message||"Unable to load users.")}finally{j(!1)}})()},[x,d]);const E=async(S,A)=>{if(d)try{const k=await fetch(`${ug}/admin/updateRole`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({userId:S,newRole:A})}),z=await k.json();if(!k.ok)throw new Error(z.error||"Unable to update role.");p(Z=>Z.map(I=>I.id===z.user.id?{...I,role:z.user.role}:I))}catch(k){y(k.message||"Unable to update role.")}};return x?i.jsxs("div",{className:"page-container",children:[i.jsx("h1",{children:"Admin Dashboard"}),C&&i.jsx("p",{className:"editor-warning",children:C}),b?i.jsx("p",{children:"Loading users..."}):i.jsx("div",{className:"admin-table-wrapper",children:i.jsxs("table",{className:"admin-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Name"}),i.jsx("th",{children:"Email"}),i.jsx("th",{children:"Role"}),i.jsx("th",{children:"Created"}),i.jsx("th",{children:"Actions"})]})}),i.jsx("tbody",{children:m.map(S=>i.jsxs("tr",{children:[i.jsx("td",{children:S.name}),i.jsx("td",{children:S.email}),i.jsx("td",{children:S.role}),i.jsx("td",{children:new Date(S.createdAt).toLocaleString()}),i.jsx("td",{children:i.jsx("div",{className:"admin-actions",children:Xb.map(A=>i.jsx("button",{type:"button",className:`admin-action-button ${S.role===A.value?"admin-action-button--active":""}`,onClick:()=>E(S.id,A.value),disabled:S.id===f?.id&&A.value!=="admin",children:A.label},A.value))})})]},S.id))})]})})]}):i.jsxs("div",{className:"page-container",children:[i.jsx("h1",{children:"Admin Dashboard"}),i.jsx("p",{children:"You must be an admin to view this page."})]})}const dg=[{id:"kingdoms",title:"Kingdoms & Capitals",subtitle:"Seat of power, trade, and intrigue.",accent:"#facc15",keywords:["city","capital","citadel","kingdom","harbor","port","town"],icon:"K"},{id:"dungeons",title:"Dungeons & Vaults",subtitle:"Forgotten halls that hoard danger and treasure alike.",accent:"#f472b6",keywords:["dungeon","ruins","vault","crypt","catacomb","cavern","lair","temple"],icon:"D"},{id:"regions",title:"Regions & Landmarks",subtitle:"Defining features that shape the realm.",accent:"#60a5fa",keywords:["region","landmark","forest","grove","mountain","library","tower","harbor"],icon:"R"},{id:"wilds",title:"Monsters & Wilds",subtitle:"Unruly frontiers and creatures that haunt them.",accent:"#34d399",keywords:["monster","beast","dragon","wyrm","den","nest","jungle","wild"],icon:"W"}],Wb=(r="")=>r.toLowerCase(),Jb=r=>{const d=[r.type,r.category,r.subtype,r.name,r.description,r.lore];return Array.isArray(r.tags)&&d.push(r.tags.join(" ")),d.filter(Boolean).join(" ").toLowerCase()},e0=r=>{const f=[r.heroImage,r.imageUrl,r.cover,r.banner].find(Boolean);return f?f.startsWith("http")?f:`/p15/${f.replace(/^\//,"")}`:null};function t0(){const{locations:r}=Hc(),{regions:d=[]}=Wr(),[f,m]=g.useState(()=>dg[0].id),[p,b]=g.useState(null),j=g.useMemo(()=>{const S=new Map;return d.forEach(A=>{S.set(String(A.id),A.name)}),S},[d]),C=g.useMemo(()=>{const S=new Map;return dg.map(A=>{const k=r.filter(z=>{if(!z)return!1;const Z=Wb(z.type);if(A.keywords.some(R=>Z.includes(R)))return!0;let I=S.get(z.id);return I||(I=Jb(z),S.set(z.id,I)),A.keywords.some(R=>I.includes(R))});return{...A,locations:k}})},[r]),y=g.useMemo(()=>C.reduce((S,A)=>S+A.locations.length,0),[C]),x=S=>{m(A=>{const k=A===S?null:S;return k!==A&&b(null),k})},E=S=>{b(A=>A===S?null:S)};return i.jsxs("div",{className:"locations-atlas custom-scrollbar",children:[i.jsxs("header",{className:"locations-atlas__hero",children:[i.jsx("p",{className:"eyebrow",children:"World Atlas"}),i.jsx("h1",{children:"A curated look at Azterra's most storied places."}),i.jsx("p",{className:"lede",children:"Tap a realm to unfurl its tales. Every card draws directly from the interactive map but presents it in a gallery meant for readers, not cartographers."}),i.jsxs("div",{className:"locations-atlas__meta",children:[i.jsx("span",{className:"atlas-pill",children:"Live map entries"}),i.jsx("span",{className:"atlas-pill",children:"Lore-safe for players"}),i.jsx("span",{className:"atlas-pill atlas-pill--ghost",children:"Click to reveal"})]})]}),i.jsxs("div",{className:"locations-atlas__stats",children:[i.jsxs("div",{className:"atlas-stat-card",children:[i.jsx("p",{className:"atlas-stat__label",children:"Entries"}),i.jsx("p",{className:"atlas-stat__value",children:y}),i.jsx("p",{className:"atlas-stat__hint",children:"Mapped across all categories"})]}),i.jsxs("div",{className:"atlas-stat-card",children:[i.jsx("p",{className:"atlas-stat__label",children:"Regions"}),i.jsx("p",{className:"atlas-stat__value",children:d.length||""}),i.jsx("p",{className:"atlas-stat__hint",children:"Drawn from your campaign map"})]}),i.jsxs("div",{className:"atlas-stat-card",children:[i.jsx("p",{className:"atlas-stat__label",children:"Story hooks"}),i.jsx("p",{className:"atlas-stat__value",children:"Player ready"}),i.jsx("p",{className:"atlas-stat__hint",children:"Use badges to filter encounters"})]})]}),i.jsx("div",{className:"locations-atlas__sections",children:C.map(S=>i.jsxs("article",{className:"atlas-section",children:[i.jsxs("button",{type:"button",className:`atlas-section__header ${f===S.id?"atlas-section__header--open":""}`,onClick:()=>x(S.id),style:{borderColor:S.accent},children:[i.jsx("span",{className:"atlas-section__icon","aria-hidden":"true",children:S.icon}),i.jsxs("div",{children:[i.jsx("h2",{children:S.title}),i.jsx("p",{children:S.subtitle})]}),i.jsx("span",{className:"atlas-section__badge",children:S.locations.length})]}),f===S.id&&i.jsx("div",{className:"atlas-section__body",children:S.locations.length?i.jsx("div",{className:"atlas-gallery",children:S.locations.map(A=>{const k=p===A.id,z=e0(A),Z=j.get(String(A.regionId))||"Uncharted Region";return i.jsxs("div",{className:`atlas-card ${k?"atlas-card--expanded":""}`,children:[i.jsxs("button",{type:"button",className:"atlas-card__trigger",onClick:()=>E(A.id),"aria-expanded":k,children:[i.jsx("div",{className:"atlas-card__media",style:z?{backgroundImage:`url(${z})`}:void 0,"data-placeholder":!z,children:!z&&i.jsx("span",{children:S.icon})}),i.jsxs("div",{className:"atlas-card__meta",children:[i.jsx("p",{className:"atlas-card__eyebrow",children:Z}),i.jsx("h3",{children:A.name}),i.jsx("p",{className:"atlas-card__type",children:A.type||"Unknown type"})]}),i.jsx("span",{className:"atlas-card__chevron","aria-hidden":"true",children:"v"})]}),k&&i.jsx("div",{className:"atlas-card__details",children:i.jsx("p",{children:A.description||A.lore||"No description yet."})})]},A.id)})}):i.jsx("p",{className:"atlas-section__empty",children:"No entries yet. Check back soon!"})})]},S.id))})]})}const kc=[{id:"all",label:"All Features"},{id:"cities",label:"Cities",keywords:["city","town","village","harbor","port","citadel","capital","settlement"]},{id:"dungeons",label:"Dungeons",keywords:["dungeon","ruins","crypt","vault","catacomb","temple","cavern","lair"]},{id:"monsters",label:"Monsters",keywords:["monster","beast","dragon","wyrm","den","nest","encounter","hunt"]},{id:"landmarks",label:"Landmarks",keywords:["landmark","library","tower","monument","statue","grove","forest","mountain"]}],hg={search:"",region:"all",type:"all"},fg=(r,d)=>{if(d==="all")return!0;const f=kc.find(({id:p})=>p===d);if(!f||!f.keywords?.length)return!0;const m=[(r.type||"").toLowerCase(),(r.category||"").toLowerCase(),(r.subtype||"").toLowerCase(),(r.name||"").toLowerCase(),(r.description||"").toLowerCase(),(r.lore||"").toLowerCase()];return Array.isArray(r.tags)&&r.tags.forEach(p=>m.push(String(p).toLowerCase())),f.keywords.some(p=>m.some(b=>b&&b.includes(p.toLowerCase())))};function n0(){const{locations:r,setLocations:d,selectLocation:f,selectedLocationId:m}=Hc(),{regions:p=[]}=Wr(),{token:b,role:j}=Cn(),[C,y]=g.useState("all"),[x,E]=g.useState(()=>({...hg})),[S,A]=g.useState(""),k=g.useMemo(()=>[...p].sort((F,ue)=>F.name.localeCompare(ue.name)),[p]),z=g.useMemo(()=>{const F=new Map;return r.forEach(ue=>{const U=(ue.type||"").trim();if(!U)return;const xe=U.toLowerCase();F.has(xe)||F.set(xe,U)}),Array.from(F.entries()).map(([ue,U])=>({value:ue,label:U})).sort((ue,U)=>ue.label.localeCompare(U.label))},[r]),Z=g.useMemo(()=>{const F=kc.reduce((ue,U)=>({...ue,[U.id]:0}),{});return r.forEach(ue=>{kc.forEach(U=>{fg(ue,U.id)&&(F[U.id]=(F[U.id]||0)+1)})}),F},[r]),I=g.useMemo(()=>{const F=x.search.trim().toLowerCase();return r.filter(ue=>!(!fg(ue,C)||x.type!=="all"&&(ue.type||"").toLowerCase()!==x.type||x.region!=="all"&&String(ue.regionId??"")!==x.region||F&&![ue.name,ue.description,ue.lore,ue.type,ue.category,Array.isArray(ue.tags)?ue.tags.join(" "):""].filter(Boolean).join(" ").toLowerCase().includes(F)))},[r,C,x]),R=(F,ue)=>{E(U=>({...U,[F]:ue}))},D=()=>{E({...hg})},$=!!x.search.trim()||x.region!=="all"||x.type!=="all",G=(F,ue,U)=>{d(xe=>xe.map(je=>je.id===F?{...je,[ue]:ue==="regionId"?U||null:U}:je))},X=async()=>{if(!b||j!=="editor"&&j!=="admin"){A("Only editors/admins can save."),setTimeout(()=>A(""),3e3);return}A("Saving changes...");try{const F=await fetch("/api/locations/save",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({locations:r})}),ue=await F.json();if(!F.ok)throw new Error(ue.error||"Save failed");Array.isArray(ue.locations)&&d(ue.locations),A("Saved.")}catch(F){console.error("Save failed",F),A(F.message||"Save failed.")}finally{setTimeout(()=>A(""),3e3)}},ve=F=>F?p.find(U=>String(U.id)===String(F))?.name||"Unknown Region":"No region";return i.jsxs("div",{className:"locations-page",children:[i.jsxs("header",{className:"locations-header",children:[i.jsxs("div",{className:"locations-header__title",children:[i.jsx("h1",{children:"Atlas Editor"}),i.jsx("p",{className:"locations-subtitle",children:"Curate and organize every map feature before publishing it to the reader-friendly atlas."})]}),i.jsxs("div",{className:"locations-header__cta",children:[i.jsx("button",{type:"button",className:"save-button",onClick:X,children:"Save Changes"}),S&&i.jsx("p",{className:"save-status",children:S})]})]}),i.jsx("section",{className:"locations-tabs",role:"tablist","aria-label":"Location categories",children:kc.map(F=>i.jsxs("button",{type:"button",role:"tab","aria-selected":C===F.id,className:`locations-tab ${C===F.id?"locations-tab--active":""}`,tabIndex:C===F.id?0:-1,onClick:()=>y(F.id),children:[i.jsx("span",{children:F.label}),i.jsx("span",{className:"locations-tab__count",children:Z[F.id]??0})]},F.id))}),i.jsxs("section",{className:"locations-filter-panel","aria-label":"Location filters",children:[i.jsxs("div",{className:"filter-field filter-field--search",children:[i.jsx("label",{htmlFor:"locations-search",children:"Search"}),i.jsx("input",{id:"locations-search",type:"search",placeholder:"Name, lore, description...",value:x.search,onChange:F=>R("search",F.target.value)})]}),i.jsxs("div",{className:"filter-field",children:[i.jsx("label",{htmlFor:"locations-region",children:"Region"}),i.jsxs("select",{id:"locations-region",value:x.region,onChange:F=>R("region",F.target.value),children:[i.jsx("option",{value:"all",children:"All Regions"}),k.map(F=>i.jsx("option",{value:String(F.id),children:F.name},F.id))]})]}),i.jsxs("div",{className:"filter-field",children:[i.jsx("label",{htmlFor:"locations-type",children:"Type"}),i.jsxs("select",{id:"locations-type",value:x.type,onChange:F=>R("type",F.target.value),children:[i.jsx("option",{value:"all",children:"All Types"}),z.map(F=>i.jsx("option",{value:F.value,children:F.label},F.value))]})]}),i.jsx("div",{className:"filter-actions",children:i.jsx("button",{type:"button",className:"filter-clear",onClick:D,disabled:!$,children:"Clear Filters"})})]}),i.jsxs("section",{className:"locations-grid",children:[I.map(F=>i.jsxs("article",{className:`location-card ${m===F.id?"location-card--selected":""}`,onClick:()=>f(F.id),role:"button",tabIndex:0,onKeyDown:ue=>{ue.key==="Enter"&&f(F.id)},children:[i.jsxs("div",{className:"location-card__header",children:[i.jsx("input",{type:"text",value:F.name||"",onChange:ue=>G(F.id,"name",ue.target.value),placeholder:"Location name"}),i.jsxs("select",{value:F.type||"generic",onChange:ue=>G(F.id,"type",ue.target.value),children:[i.jsx("option",{value:"city",children:"City"}),i.jsx("option",{value:"town",children:"Town"}),i.jsx("option",{value:"dungeon",children:"Dungeon"}),i.jsx("option",{value:"landmark",children:"Landmark"}),i.jsx("option",{value:"generic",children:"Generic"})]})]}),i.jsx("textarea",{value:F.description||"",onChange:ue=>G(F.id,"description",ue.target.value),placeholder:"Description",rows:3}),i.jsxs("p",{className:"location-card__region",children:["Region: ",ve(F.regionId)]})]},F.id)),!I.length&&i.jsx("p",{className:"locations-empty",children:"No locations match this filter."})]})]})}const qr="/api";function a0(){const{user:r,role:d,token:f,updateAccount:m,refreshUser:p}=Cn(),[b,j]=g.useState(""),[C,y]=g.useState(""),[x,E]=g.useState(""),[S,A]=g.useState(""),[k,z]=g.useState(""),[Z,I]=g.useState([]),[R,D]=g.useState(!1),[$,G]=g.useState(""),[X,ve]=g.useState(""),[F,ue]=g.useState(!1),[U,xe]=g.useState(""),[je,Ce]=g.useState(""),[qe,Ze]=g.useState(!1),[Ie,J]=g.useState(!1),[B,ee]=g.useState(""),[K,P]=g.useState([]),[T,Q]=g.useState([]);g.useEffect(()=>{j(r?.username||""),y(r?.profilePicture||""),E(r?.profile?.bio||""),A(r?.profile?.labelOne||""),z(r?.profile?.labelTwo||""),I(Array.isArray(r?.profile?.documents)?r.profile.documents:[])},[r]);const le=g.useMemo(()=>(r?.username||r?.googleName||r?.name||r?.email||"?").charAt(0).toUpperCase(),[r]),he=()=>{const De=(b||le||"azterra").replace(/\s+/g,"-");return`https://api.dicebear.com/9.x/fantasy/svg?seed=${encodeURIComponent(De)}`},_e=async()=>{if(f){J(!0),ee("");try{const De=await fetch(`${qr}/secrets/progress`,{headers:{Authorization:`Bearer ${f}`}}),Je=await De.json();if(!De.ok)throw new Error(Je.error||"Unable to load secret progress.");P(Je.unlocked||[]),Q(Je.details||[])}catch(De){ee(De.message||"Unable to load secret progress.")}finally{J(!1)}}};if(g.useEffect(()=>{_e()},[f]),!r)return i.jsxs("div",{className:"page-container",children:[i.jsx("h1",{children:"Account Settings"}),i.jsx("p",{children:"You need to be logged in to view your account."})]});const be=async De=>{De.preventDefault(),D(!0),G(""),ve("");try{await m({username:b,profilePicture:C,profile:{bio:x,labelOne:S,labelTwo:k}}),G("Account updated.")}catch(Je){ve(Je.message||"Unable to update account.")}finally{D(!1)}},Le=()=>{y(he()),G("")},we=async De=>{if(De.preventDefault(),!!je.trim()){Ze(!0),ee("");try{const Je=await fetch(`${qr}/secrets/unlock`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${f}`},body:JSON.stringify({phrase:je})}),jt=await Je.json();if(!Je.ok)throw new Error(jt.error||"Unable to check secret.");P(jt.unlocked||[]),Q(jt.details||[]),Ce(""),await p()}catch(Je){ee(Je.message||"Unable to check secret.")}finally{Ze(!1)}}},Oe=async De=>{const Je=Array.from(De.target.files||[]);if(!(!Je.length||!f)){ue(!0),xe("");try{const jt=new FormData;Je.forEach(ca=>jt.append("files",ca));const sn=await fetch(`${qr}/files/upload`,{method:"POST",headers:{Authorization:`Bearer ${f}`},body:jt}),Vt=await sn.json();if(!sn.ok)throw new Error(Vt.error||"Unable to upload files.");I(Vt.documents||[]),await p(),De.target.value=""}catch(jt){xe(jt.message||"Unable to upload files.")}finally{ue(!1)}}},st=async De=>{if(f){ue(!0),xe("");try{const Je=await fetch(`${qr}/files/${De}`,{method:"DELETE",headers:{Authorization:`Bearer ${f}`}}),jt=await Je.json();if(!Je.ok)throw new Error(jt.error||"Unable to remove file.");I(jt.documents||[]),await p()}catch(Je){xe(Je.message||"Unable to remove file.")}finally{ue(!1)}}},Wt=async De=>{if(!(!f||!De?.id))try{const Je=await fetch(`${qr}/files/download/${De.id}`,{headers:{Authorization:`Bearer ${f}`}});if(!Je.ok)throw new Error("Unable to download file.");const jt=await Je.blob(),sn=window.URL.createObjectURL(jt),Vt=document.createElement("a");Vt.href=sn,Vt.download=De.originalName||"file",document.body.appendChild(Vt),Vt.click(),Vt.remove(),window.URL.revokeObjectURL(sn)}catch(Je){xe(Je.message||"Unable to download file.")}};return i.jsxs("div",{className:"page-container account-grid",children:[i.jsxs("div",{className:"account-card",children:[i.jsxs("header",{className:"account-card__header",children:[i.jsxs("div",{children:[i.jsx("p",{className:"account-card__eyebrow",children:"Account"}),i.jsx("h1",{children:"Account Settings"}),i.jsx("p",{className:"account-card__subtitle",children:"Personalize your presence and see your permissions."})]}),i.jsx("div",{className:"account-avatar",children:C?i.jsx("img",{src:C,alt:"Profile"}):i.jsx("span",{children:le})})]}),i.jsxs("form",{className:"account-form",onSubmit:be,children:[i.jsxs("label",{className:"account-field",children:[i.jsx("span",{children:"Email"}),i.jsx("input",{type:"email",value:r.email,disabled:!0})]}),i.jsxs("label",{className:"account-field",children:[i.jsx("span",{children:"Permission Level"}),i.jsx("input",{type:"text",value:d,disabled:!0})]}),i.jsxs("label",{className:"account-field",children:[i.jsx("span",{children:"Username"}),i.jsx("input",{type:"text",value:b,onChange:De=>j(De.target.value),placeholder:"Pick a display name"})]}),i.jsxs("label",{className:"account-field",children:[i.jsx("span",{children:"Bio"}),i.jsx("textarea",{value:x,onChange:De=>E(De.target.value),placeholder:"Write a short bio",rows:4})]}),i.jsxs("label",{className:"account-field",children:[i.jsx("span",{children:"Label One"}),i.jsx("input",{type:"text",value:S,onChange:De=>A(De.target.value),placeholder:"Optional label"})]}),i.jsxs("label",{className:"account-field",children:[i.jsx("span",{children:"Label Two"}),i.jsx("input",{type:"text",value:k,onChange:De=>z(De.target.value),placeholder:"Optional label"})]}),i.jsxs("label",{className:"account-field",children:[i.jsx("span",{children:"Profile Picture URL"}),i.jsx("input",{type:"url",value:C,onChange:De=>y(De.target.value),placeholder:"https://..."}),i.jsxs("div",{className:"account-field__actions",children:[i.jsx("button",{type:"button",onClick:Le,children:"Generate Avatar"}),i.jsx("button",{type:"button",onClick:()=>y(""),children:"Clear"})]})]}),i.jsxs("div",{className:"account-actions",children:[i.jsx("button",{type:"submit",disabled:R,children:R?"Saving...":"Save changes"}),$&&i.jsx("span",{className:"account-message",children:$}),X&&i.jsx("span",{className:"account-error",children:X})]})]}),i.jsxs("section",{className:"account-upload",children:[i.jsxs("div",{className:"account-field",children:[i.jsx("span",{children:"Upload documents (PDF or text)"}),i.jsx("input",{type:"file",accept:".pdf,text/plain",multiple:!0,onChange:Oe,disabled:!f||F}),U&&i.jsx("p",{className:"account-error",children:U}),F&&i.jsx("p",{className:"account-muted",children:"Uploading..."})]}),i.jsxs("div",{className:"list-panel",children:[i.jsx("h3",{children:"Your uploads"}),(!Z||!Z.length)&&i.jsx("p",{className:"account-muted",children:"No documents uploaded."}),Z&&Z.length>0&&i.jsx("ul",{className:"simple-list",children:Z.map(De=>i.jsxs("li",{className:"upload-row",children:[i.jsxs("div",{children:[i.jsx("strong",{children:De.originalName}),i.jsxs("p",{className:"account-muted",children:[(De.size/1024).toFixed(1)," KB  ",new Date(De.uploadedAt).toLocaleString()]})]}),i.jsxs("div",{className:"upload-actions",children:[i.jsx("button",{type:"button",onClick:()=>Wt(De),disabled:F,children:"Download"}),i.jsx("button",{type:"button",onClick:()=>st(De.id),disabled:F,children:"Remove"})]})]},De.id))})]})]})]}),i.jsxs("div",{className:"account-card",children:[i.jsx("header",{className:"account-card__header",children:i.jsxs("div",{children:[i.jsx("p",{className:"account-card__eyebrow",children:"Secrets"}),i.jsx("h2",{children:"Secret Unlocks"}),i.jsx("p",{className:"account-card__subtitle",children:"Enter phrases to reveal hidden lore and progression."})]})}),i.jsxs("form",{className:"account-form",onSubmit:we,children:[i.jsxs("label",{className:"account-field",children:[i.jsx("span",{children:"Secret Phrase"}),i.jsx("input",{type:"text",value:je,onChange:De=>Ce(De.target.value),placeholder:"Whisper a phrase...",required:!0})]}),i.jsx("button",{type:"submit",disabled:qe||!je.trim(),children:qe?"Checking...":"Unlock"}),B&&i.jsx("p",{className:"account-error",children:B})]}),i.jsxs("div",{className:"account-progress",children:[i.jsxs("div",{className:"account-progress__header",children:[i.jsx("h3",{children:"Progress"}),Ie&&i.jsx("span",{className:"account-message",children:"Loading..."})]}),T.length===0&&!Ie?i.jsx("p",{className:"account-muted",children:"No secrets unlocked yet."}):i.jsx("ul",{className:"secret-list",children:T.map(De=>i.jsxs("li",{className:"secret-list__item",children:[i.jsxs("div",{children:[i.jsx("p",{className:"secret-list__title",children:De.title}),i.jsx("p",{className:"secret-list__desc",children:De.description})]}),i.jsx("span",{className:"secret-list__badge",children:"Unlocked"})]},De.id))})]})]})]})}const $d="/api";function i0(){const{token:r,refreshUser:d,role:f}=Cn(),m=f==="admin",[p,b]=g.useState(""),[j,C]=g.useState(!1),[y,x]=g.useState(!1),[E,S]=g.useState(""),[A,k]=g.useState([]),[z,Z]=g.useState({}),[I,R]=g.useState(null),[D,$]=g.useState(!1),G=async()=>{if(!r){k([]),Z({});return}x(!0),S("");try{const U=await fetch(`${$d}/secrets/progress`,{headers:{Authorization:`Bearer ${r}`}}),xe=await U.json();if(!U.ok)throw new Error(xe.error||"Unable to load progress.");const je=xe.details||[];k(je),Z(je.reduce((Ce,qe)=>(Ce[qe.id]={title:qe.title||"",description:qe.description||"",keyword:qe.keyword||""},Ce),{}))}catch(U){S(U.message||"Unable to load progress.")}finally{x(!1)}};g.useEffect(()=>{G()},[r]),g.useEffect(()=>{m||$(!1)},[m]);const X=async U=>{if(U.preventDefault(),!(!p.trim()||!r)){C(!0),S("");try{const xe=await fetch(`${$d}/secrets/unlock`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({phrase:p})}),je=await xe.json();if(!xe.ok)throw new Error(je.error||"Unable to check secret.");const Ce=je.details||[];k(Ce),Z(Ce.reduce((qe,Ze)=>(qe[Ze.id]={title:Ze.title||"",description:Ze.description||"",keyword:Ze.keyword||""},qe),{})),b(""),await d()}catch(xe){S(xe.message||"Unable to check secret.")}finally{C(!1)}}},ve=(U,xe,je)=>{Z(Ce=>({...Ce,[U]:{...Ce[U]||{},[xe]:je}}))},F=U=>{const xe=A.find(je=>je.id===U);xe&&Z(je=>({...je,[U]:{title:xe.title||"",description:xe.description||"",keyword:xe.keyword||""}}))},ue=async U=>{if(!(!r||!z[U])){R(U),S("");try{const xe=await fetch(`${$d}/secrets/${U}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(z[U])}),je=await xe.json();if(!xe.ok)throw new Error(je.error||"Unable to save secret.");k(Ce=>Ce.map(qe=>qe.id===U?je.secret:qe)),Z(Ce=>({...Ce,[U]:{title:je.secret.title||"",description:je.secret.description||"",keyword:je.secret.keyword||""}}))}catch(xe){S(xe.message||"Unable to save secret.")}finally{R(null)}}};return i.jsxs("div",{className:"page-container progression",children:[i.jsx("header",{className:"progression__header",children:i.jsxs("div",{children:[i.jsx("p",{className:"progression__eyebrow",children:"Progression"}),i.jsx("h1",{children:"Hidden Paths"}),i.jsx("p",{className:"progression__subtitle",children:"Enter phrases to unlock secrets. The page grows as you uncover more."})]})}),m&&i.jsxs("div",{className:"progression__admin-controls",children:[i.jsx("button",{type:"button",onClick:()=>$(U=>!U),children:D?"Exit Edit Mode":"Admin Edit Mode"}),i.jsx("p",{className:"progression__muted",children:"Admin mode reveals every secret and enables inline edits."})]}),i.jsxs("form",{className:"progression__form",onSubmit:X,children:[i.jsx("input",{type:"text",value:p,onChange:U=>b(U.target.value),placeholder:"Enter a secret phrase",disabled:!r}),i.jsx("button",{type:"submit",disabled:!r||j||!p.trim(),children:j?"Checking...":"Submit"}),E&&i.jsx("p",{className:"progression__error",children:E}),!r&&i.jsx("p",{className:"progression__muted",children:"Login to record your progress."})]}),!y&&A.length===0&&i.jsx("div",{className:"progression__empty",children:i.jsx("p",{children:"Nothing unlocked yet. Keep exploring."})}),y&&i.jsx("p",{className:"progression__muted",children:"Loading your progress..."}),A.length>0&&i.jsxs(i.Fragment,{children:[i.jsx("section",{className:"progression__grid",children:A.map(U=>i.jsxs("article",{className:"progression__card",children:[i.jsx("p",{className:"progression__badge",children:m?"Admin":"Unlocked"}),D&&m?i.jsxs("div",{className:"progression__card-edit",children:[i.jsxs("label",{children:[i.jsx("span",{children:"Title"}),i.jsx("input",{type:"text",value:z[U.id]?.title||"",onChange:xe=>ve(U.id,"title",xe.target.value)})]}),i.jsxs("label",{children:[i.jsx("span",{children:"Keyword"}),i.jsx("input",{type:"text",value:z[U.id]?.keyword||"",onChange:xe=>ve(U.id,"keyword",xe.target.value)})]}),i.jsxs("label",{children:[i.jsx("span",{children:"Description"}),i.jsx("textarea",{rows:3,value:z[U.id]?.description||"",onChange:xe=>ve(U.id,"description",xe.target.value)})]}),i.jsxs("div",{className:"progression__card-actions",children:[i.jsx("button",{type:"button",onClick:()=>ue(U.id),disabled:I===U.id,children:I===U.id?"Saving...":"Save"}),i.jsx("button",{type:"button",className:"progression__ghost-button",onClick:()=>F(U.id),disabled:I===U.id,children:"Reset"})]})]}):i.jsxs(i.Fragment,{children:[i.jsx("h2",{children:U.title}),U.keyword&&i.jsxs("p",{className:"progression__keyword",children:["Keyword: ",i.jsx("code",{children:U.keyword})]}),i.jsx("p",{children:U.description})]})]},U.id))}),A.length>=2&&i.jsxs("section",{className:"progression__steps",children:[i.jsx("h3",{children:"New paths available"}),i.jsx("p",{className:"progression__muted",children:"Sections appear as you progress."}),i.jsxs("div",{className:"progression__grid",children:[i.jsxs("article",{className:"progression__card subtle",children:[i.jsx("p",{className:"progression__badge",children:"Lore"}),i.jsx("p",{children:"Unlocked fragments are now visible in their respective lore entries."})]}),A.length>=3&&i.jsxs("article",{className:"progression__card subtle",children:[i.jsx("p",{className:"progression__badge",children:"Clues"}),i.jsx("p",{children:"Future clues may surface as more secrets unlock."})]})]})]})]})]})}function s0({secretId:r,fallback:d=null,children:f}){const{isSecretUnlocked:m}=Cn();return m(r)?i.jsx(i.Fragment,{children:f}):d??null}const l0={"aurora-ember":{title:"Aurora Ember - PLACEHOLDER",body:"PLACEHOLDER: A faint ember in the northern sky awaits completed lore text."},"silent-archive":{title:"Silent Archive - PLACEHOLDER",body:"PLACEHOLDER: A sealed folio in the archivists' stacks will be described here."},"gilded-horizon":{title:"Gilded Horizon - PLACEHOLDER",body:"PLACEHOLDER: A distant golden horizon mark hides further narrative."}};function Yd({secretId:r}){const d=l0[r]||{title:"Hidden Lore - PLACEHOLDER",body:"PLACEHOLDER: Content to be filled in later."};return i.jsx("div",{className:"page-container",children:i.jsx(s0,{secretId:r,fallback:i.jsxs("div",{className:"lore-locked",children:[i.jsx("h1",{children:"Hidden Lore"}),i.jsx("p",{children:"This section remains locked. Discover and enter the right phrase to reveal it."}),i.jsx(Vn,{to:"/progress",className:"lore-locked__link",children:"Go to Progression"})]}),children:i.jsxs("div",{className:"lore-placeholder",children:[i.jsx("p",{className:"lore-placeholder__eyebrow",children:"Unlocked Secret"}),i.jsx("h1",{children:d.title}),i.jsx("p",{className:"lore-placeholder__body",children:d.body}),i.jsx("p",{className:"lore-placeholder__note",children:"This is a placeholder template for future lore content."})]})})})}const $r="/api",Vd=r=>Array.isArray(r)?r.map(d=>Number(d)).filter(d=>Number.isFinite(d)):[],Yr=async r=>{const d=await r.text();if(!d)return{};try{return console.log(d),JSON.parse(d)}catch{throw new Error("Unexpected response from server. Is the API running?")}};function r0(){const{token:r,user:d}=Cn(),[f,m]=g.useState([]),[p,b]=g.useState(!0),[j,C]=g.useState(""),[y,x]=g.useState("players"),[E,S]=g.useState(!1),[A,k]=g.useState(""),[z,Z]=g.useState({friends:[],incoming:[],outgoing:[]}),[I,R]=g.useState(""),[D,$]=g.useState({}),G=g.useMemo(()=>{const B=new Map;return bt.forEach(ee=>B.set(ee.id,ee)),B},[]),X=g.useMemo(()=>{const B=new Map;return f.forEach(ee=>B.set(ee.id,ee)),B},[f]);g.useEffect(()=>{(async()=>{if(!r){m([]),b(!1);return}b(!0),C("");try{const ee=await fetch(`${$r}/characters/player-view`,{headers:{Authorization:`Bearer ${r}`}}),K=await Yr(ee);if(!ee.ok)throw new Error(K.error||"Unable to load players.");m(K.users||[])}catch(ee){C(ee.message||"Unable to load players.")}finally{b(!1)}})()},[r]);const ve=g.useCallback(B=>{Z({friends:Vd(B?.friends),incoming:Vd(B?.incoming),outgoing:Vd(B?.outgoing)})},[]),F=g.useCallback(async()=>{if(!r){Z({friends:[],incoming:[],outgoing:[]});return}S(!0),k("");try{const B=await fetch(`${$r}/users/friends`,{headers:{Authorization:`Bearer ${r}`}}),ee=await Yr(B);if(!B.ok)throw new Error(ee.error||"Unable to load friends.");ve(ee)}catch(B){k(B.message||"Unable to load friends.")}finally{S(!1)}},[ve,r]);g.useEffect(()=>{F(),$({})},[F,r]);const ue=async B=>{if(!(!r||!B)){S(!0),k("");try{const ee=await fetch(`${$r}/users/friends/request`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({targetId:B})}),K=await Yr(ee);if(!ee.ok)throw new Error(K.error||"Unable to send request.");ve(K)}catch(ee){k(ee.message||"Unable to send request.")}finally{S(!1)}}},U=async(B,ee)=>{if(!(!r||!B)){S(!0),k("");try{const K=await fetch(`${$r}/users/friends/respond`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({requesterId:B,accept:ee})}),P=await Yr(K);if(!K.ok)throw new Error(P.error||"Unable to update request.");ve(P)}catch(K){k(K.message||"Unable to update request.")}finally{S(!1)}}},xe=async B=>{if(!(!r||!B)){S(!0),k("");try{const ee=await fetch(`${$r}/users/friends/remove`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({targetId:B})}),K=await Yr(ee);if(!ee.ok)throw new Error(K.error||"Unable to update friends.");ve(K),$(P=>{const T={...P};return delete T[B],T})}catch(ee){k(ee.message||"Unable to update friends.")}finally{S(!1)}}},je=B=>z.friends.includes(B)?"friends":z.incoming.includes(B)?"incoming":z.outgoing.includes(B)?"outgoing":"none",Ce=B=>{const ee=[];return B?.featuredCharacter&&ee.push(B.featuredCharacter),(B?.favorites||[]).forEach(K=>{ee.includes(K)||ee.push(K)}),ee};if(!r)return i.jsxs("div",{className:"page-container",children:[i.jsx("h1",{children:"Players"}),i.jsx("p",{children:"Please log in to view player info."})]});const qe=z.incoming.map(B=>X.get(B)).filter(Boolean),Ze=z.friends.map(B=>X.get(B)).filter(Boolean),Ie=I.toLowerCase(),J=f.filter(B=>B.id!==d?.id).filter(B=>!Ze.find(ee=>ee.id===B.id)).filter(B=>Ie?(B.name||"").toLowerCase().includes(Ie)||(B.username||"").toLowerCase().includes(Ie):!0);return i.jsxs("div",{className:"page-container",children:[i.jsxs("div",{className:"players-page__header",children:[i.jsxs("div",{children:[i.jsx("h1",{children:"Players"}),i.jsx("p",{className:"progression__muted",children:"Visible profiles, favorites, and featured characters. Secrets stay hidden."})]}),i.jsxs("div",{className:"players-tabs",children:[i.jsx("button",{type:"button",className:`players-tab ${y==="players"?"players-tab--active":""}`,onClick:()=>x("players"),children:"Community"}),i.jsx("button",{type:"button",className:`players-tab ${y==="friends"?"players-tab--active":""}`,onClick:()=>x("friends"),children:"Friends"})]})]}),p&&i.jsx("p",{className:"progression__muted",children:"Loading players..."}),j&&i.jsx("p",{className:"account-error",children:j}),A&&i.jsx("p",{className:"account-error",children:A}),y==="players"&&i.jsx("div",{className:"players-grid",children:f.map(B=>{const ee=B.featuredCharacter?G.get(B.featuredCharacter):null;return i.jsxs("div",{className:"player-card",children:[i.jsxs("div",{className:"player-card__header",children:[i.jsx("div",{className:"player-avatar",children:B.profilePicture?i.jsx("img",{src:B.profilePicture,alt:""}):i.jsx("span",{children:(B.username||B.name||"?")[0]})}),i.jsxs("div",{children:[i.jsx("p",{className:"player-eyebrow",children:B.role}),i.jsx("h3",{children:B.name}),B.username&&i.jsxs("p",{className:"player-username",children:["@",B.username]})]})]}),i.jsx("div",{className:"player-actions",children:i.jsx(Vn,{to:`/players/${B.id}`,className:"lore-locked__link",children:"View profile"})}),ee&&i.jsxs("div",{className:"player-featured",children:[i.jsx("span",{children:"Featured"}),i.jsx("strong",{children:ee.name})]}),i.jsxs("div",{children:[i.jsx("p",{className:"player-eyebrow",children:"Favorites"}),B.favorites&&B.favorites.length?i.jsx("ul",{className:"simple-list",children:B.favorites.map(K=>{const P=G.get(K);return i.jsx("li",{children:P?P.name:`Character ${K}`},`${B.id}-${K}`)})}):i.jsx("p",{className:"progression__muted",children:"No favorites yet."})]})]},B.id)})}),y==="friends"&&i.jsx("div",{className:"friends-layout",children:i.jsxs("div",{className:"friends-panel",children:[i.jsxs("div",{className:"friends-panel__header",children:[i.jsxs("div",{children:[i.jsx("p",{className:"player-eyebrow",children:"Roster"}),i.jsx("h2",{children:"Friends & Invites"}),i.jsx("p",{className:"progression__muted",children:"Add trusted players so you can share characters, hand out edit access, and drop campaign invites without slowing down table time."})]}),i.jsx("div",{className:"friend-actions",children:i.jsx("button",{type:"button",onClick:F,disabled:E,children:E?"Syncing...":"Refresh"})})]}),qe.length>0&&i.jsxs("div",{className:"friend-requests",children:[i.jsx("p",{className:"player-eyebrow",children:"Awaiting your approval"}),i.jsx("div",{className:"friend-chip-row",children:qe.map(B=>i.jsxs("div",{className:"friend-chip",children:[i.jsxs("div",{children:[i.jsx("strong",{children:B.name}),B.username&&i.jsxs("span",{className:"player-username",children:["@",B.username]})]}),i.jsxs("div",{className:"friend-chip__actions",children:[i.jsx("button",{type:"button",onClick:()=>U(B.id,!0),disabled:E,children:"Accept"}),i.jsx("button",{type:"button",onClick:()=>U(B.id,!1),disabled:E,children:"Decline"})]})]},B.id))})]}),i.jsxs("div",{className:"friends-panel__section",children:[i.jsxs("div",{className:"friends-panel__subheader",children:[i.jsx("h3",{children:"Your table"}),i.jsxs("span",{className:"pill",children:[Ze.length," friends"]})]}),Ze.length===0&&i.jsx("p",{className:"progression__muted",children:"No friends yet. Add players you trust to start sharing characters."}),i.jsx("div",{className:"friends-grid",children:Ze.map(B=>{const ee=B.featuredCharacter?G.get(B.featuredCharacter):null,K=Ce(B),P=D[B.id];return i.jsxs("div",{className:"friend-card",children:[i.jsxs("div",{className:"player-card__header",children:[i.jsx("div",{className:"player-avatar",children:B.profilePicture?i.jsx("img",{src:B.profilePicture,alt:""}):i.jsx("span",{children:(B.username||B.name||"?")[0]})}),i.jsxs("div",{children:[i.jsx("p",{className:"player-eyebrow",children:B.role}),i.jsx("h3",{children:B.name}),B.username&&i.jsxs("p",{className:"player-username",children:["@",B.username]})]})]}),ee&&i.jsxs("div",{className:"player-featured",children:[i.jsx("span",{children:"Featured"}),i.jsx("strong",{children:ee.name})]}),i.jsxs("div",{className:"friend-characters",children:[i.jsx("p",{className:"player-eyebrow",children:"Shareable characters"}),K.length===0&&i.jsx("p",{className:"progression__muted",children:"No shared characters yet."}),i.jsx("div",{className:"friend-character-row",children:K.map(T=>{const Q=G.get(T),le=P===T;return i.jsxs("button",{type:"button",className:`friend-character-btn ${le?"friend-character-btn--active":""}`,onClick:()=>$(he=>({...he,[B.id]:T})),children:[Q?Q.name:`Character ${T}`,le&&i.jsx("span",{className:"friend-character-tag",children:"Selected for invite"})]},`${B.id}-${T}`)})}),i.jsx("p",{className:"friend-invite-note",children:"Pick who you plan to invite and grant edit access to. Keep this circle to players you trust."})]}),i.jsxs("div",{className:"friend-card__actions",children:[i.jsx(Vn,{to:`/players/${B.id}`,className:"lore-locked__link",children:"View profile"}),i.jsx("button",{type:"button",onClick:()=>xe(B.id),disabled:E,children:"Remove"})]})]},B.id)})})]}),i.jsxs("div",{className:"friends-panel__section",children:[i.jsxs("div",{className:"friends-panel__subheader",children:[i.jsxs("div",{children:[i.jsx("h3",{children:"Add friends"}),i.jsx("p",{className:"progression__muted",children:"Invite fellow players so you can see their characters and loop them into campaigns."})]}),i.jsx("input",{type:"search",placeholder:"Search by name or @handle",value:I,onChange:B=>R(B.target.value),className:"friend-search"})]}),i.jsxs("div",{className:"players-grid",children:[J.map(B=>{const ee=B.featuredCharacter?G.get(B.featuredCharacter):null,K=je(B.id),P=K==="friends"||K==="outgoing",T=K==="friends"?"Friends":K==="incoming"?"Accept request":K==="outgoing"?"Requested":"Add friend",Q=()=>K==="incoming"?U(B.id,!0):K==="friends"?null:ue(B.id);return i.jsxs("div",{className:"player-card",children:[i.jsxs("div",{className:"player-card__header",children:[i.jsx("div",{className:"player-avatar",children:B.profilePicture?i.jsx("img",{src:B.profilePicture,alt:""}):i.jsx("span",{children:(B.username||B.name||"?")[0]})}),i.jsxs("div",{children:[i.jsx("p",{className:"player-eyebrow",children:B.role}),i.jsx("h3",{children:B.name}),B.username&&i.jsxs("p",{className:"player-username",children:["@",B.username]})]})]}),ee&&i.jsxs("div",{className:"player-featured",children:[i.jsx("span",{children:"Featured"}),i.jsx("strong",{children:ee.name})]}),i.jsx("div",{className:"player-actions",children:i.jsx("button",{type:"button",onClick:Q,disabled:E||P,children:T})}),i.jsxs("div",{children:[i.jsx("p",{className:"player-eyebrow",children:"Favorites"}),B.favorites&&B.favorites.length?i.jsx("ul",{className:"simple-list",children:B.favorites.slice(0,3).map(le=>{const he=G.get(le);return i.jsx("li",{children:he?he.name:`Character ${le}`},`${B.id}-${le}`)})}):i.jsx("p",{className:"progression__muted",children:"No favorites yet."})]}),K==="outgoing"&&i.jsx("p",{className:"progression__muted",children:"Waiting for them to confirm."}),K==="incoming"&&i.jsx("p",{className:"progression__muted",children:"They want to connect."})]},B.id)}),J.length===0&&i.jsx("p",{className:"progression__muted",children:"No other players available to add right now."})]})]}),Object.keys(D).length>0&&i.jsxs("div",{className:"friend-invite-summary",children:[i.jsx("p",{className:"player-eyebrow",children:"Invite queue"}),i.jsx("div",{className:"friend-chip-row",children:Object.entries(D).map(([B,ee])=>{const K=X.get(Number(B)),P=G.get(ee);return K?i.jsxs("div",{className:"friend-chip",children:[i.jsxs("div",{children:[i.jsx("strong",{children:K.name}),i.jsxs("p",{className:"progression__muted",children:[P?P.name:`Character ${ee}`," selected for campaign invite."]})]}),i.jsx("button",{type:"button",className:"friend-chip__remove",onClick:()=>$(T=>{const Q={...T};return delete Q[B],Q}),children:"Clear"})]},B):null})})]})]})})]})}const o0="/api";function c0(){const{id:r}=oh(),[d,f]=g.useState(null),[m,p]=g.useState(!0),[b,j]=g.useState(""),C=g.useMemo(()=>{const x=new Map;return bt.forEach(E=>x.set(E.id,E)),x},[]);if(g.useEffect(()=>{(async()=>{p(!0),j("");try{const E=await fetch(`${o0}/characters/player-view`),S=await E.json();if(!E.ok)throw new Error(S.error||"Unable to load player.");const A=(S.users||[]).find(k=>String(k.id)===String(r));A?f(A):j("Player not found.")}catch(E){j(E.message||"Unable to load player.")}finally{p(!1)}})()},[r]),m)return i.jsx("div",{className:"page-container",children:i.jsx("p",{className:"progression__muted",children:"Loading player..."})});if(b||!d)return i.jsx("div",{className:"page-container",children:i.jsx("p",{className:"account-error",children:b||"Player not found."})});const y=d.featuredCharacter?C.get(d.featuredCharacter):null;return i.jsxs("div",{className:"page-container",children:[i.jsxs("div",{className:"dashboard-hero",children:[i.jsx("div",{className:"dashboard-avatar",children:d.profilePicture?i.jsx("img",{src:d.profilePicture,alt:""}):i.jsx("span",{children:(d.username||d.name||"?")[0]})}),i.jsxs("div",{children:[i.jsx("p",{className:"account-card__eyebrow",children:"Player"}),i.jsx("h1",{children:d.name}),d.username&&i.jsxs("p",{className:"player-username",children:["@",d.username]})]})]}),i.jsxs("div",{className:"dashboard-grid",children:[i.jsxs("section",{className:"dashboard-card",children:[i.jsx("header",{children:i.jsx("h3",{children:"Favorites"})}),d.favorites&&d.favorites.length?i.jsx("ul",{className:"simple-list",children:d.favorites.map(x=>{const E=C.get(x);return i.jsx("li",{children:E?E.name:`Character ${x}`},`${d.id}-${x}`)})}):i.jsx("p",{className:"account-muted",children:"No favorites shared."})]}),i.jsxs("section",{className:"dashboard-card",children:[i.jsx("header",{children:i.jsx("h3",{children:"Featured"})}),y?i.jsx("p",{children:y.name}):i.jsx("p",{className:"account-muted",children:"No featured character."})]})]})]})}const Sc="/api";function u0(){const{user:r,token:d}=Cn(),[f,m]=g.useState({unlocked:[],details:[]}),[p,b]=g.useState([]),[j,C]=g.useState([]),[y,x]=g.useState([]),[E,S]=g.useState(""),A=g.useMemo(()=>{const z=new Map;return bt.forEach(Z=>z.set(Z.id,Z)),z},[]);if(g.useEffect(()=>{const z=async()=>{if(d)try{const R=await fetch(`${Sc}/secrets/progress`,{headers:{Authorization:`Bearer ${d}`}}),D=await R.json();R.ok&&m({unlocked:D.unlocked||[],details:D.details||[]})}catch{}},Z=async()=>{if(d)try{const R=await fetch(`${Sc}/characters/visible`),D=await R.json();R.ok&&Array.isArray(D.visibleIds)&&C(D.visibleIds);const $=await fetch(`${Sc}/characters/me`,{headers:{Authorization:`Bearer ${d}`}}),G=await $.json();$.ok&&b(Array.isArray(G.favorites)?G.favorites:[])}catch{}},I=async()=>{if(d)try{const R=await fetch(`${Sc}/files/list`,{headers:{Authorization:`Bearer ${d}`}}),D=await R.json();R.ok&&x(Array.isArray(D.documents)?D.documents:[])}catch{}};z(),Z(),I()},[d]),!r)return i.jsxs("div",{className:"page-container",children:[i.jsx("h1",{children:"Dashboard"}),i.jsx("p",{children:"Please log in to view your dashboard."})]});const k=p.filter(z=>j.includes(z)).map(z=>A.get(z)).filter(Boolean);return i.jsxs("div",{className:"page-container",children:[i.jsxs("div",{className:"dashboard-hero",children:[i.jsx("div",{className:"dashboard-avatar",children:r.profilePicture?i.jsx("img",{src:r.profilePicture,alt:""}):i.jsx("span",{children:(r.username||r.email||"?")[0]})}),i.jsxs("div",{children:[i.jsx("p",{className:"account-card__eyebrow",children:"Profile"}),i.jsx("h1",{children:r.username||r.name||"User"}),i.jsx("p",{className:"account-card__subtitle",children:r.profile?.bio||"No bio yet."}),i.jsxs("div",{className:"dashboard-labels",children:[r.profile?.labelOne&&i.jsx("span",{className:"tag",children:r.profile.labelOne}),r.profile?.labelTwo&&i.jsx("span",{className:"tag",children:r.profile.labelTwo})]})]})]}),i.jsxs("div",{className:"dashboard-grid",children:[i.jsxs("section",{className:"dashboard-card",children:[i.jsx("header",{children:i.jsx("h3",{children:"Unlocked Secrets"})}),f.details.length===0?i.jsx("p",{className:"account-muted",children:"No secrets unlocked yet."}):i.jsx("ul",{className:"simple-list",children:f.details.map(z=>i.jsx("li",{children:z.title},z.id))})]}),i.jsxs("section",{className:"dashboard-card",children:[i.jsx("header",{children:i.jsx("h3",{children:"Favorites"})}),k.length===0?i.jsx("p",{className:"account-muted",children:"No favorites selected."}):i.jsx("ul",{className:"simple-list",children:k.map(z=>i.jsx("li",{children:z.name},z.id))})]}),i.jsxs("section",{className:"dashboard-card",children:[i.jsx("header",{children:i.jsx("h3",{children:"Documents"})}),y.length===0?i.jsx("p",{className:"account-muted",children:"No uploads yet."}):i.jsx("ul",{className:"simple-list",children:y.map(z=>i.jsx("li",{children:i.jsx("strong",{children:z.originalName})},z.id))})]})]}),E&&i.jsx("p",{className:"account-error",children:E})]})}const d0=["Azterra did not begin as a grand project. It started with a group of freshmen at UW-Madison, escaping the cold Wisconsin winter in the 3rd-floor lounge of Dejope Residence Hall. What began as late-night hangouts slowly evolved into something much bigger.",'As the days shortened and the wind dragged people indoors, we filled the whiteboards with doodles - maps, ideas, small made-up games to pass the time. Those drawings became stories. The stories became heroes. And before long, someone said: "What if we actually tried Dungeons & Dragons?" So we did. Badly at first.',"None of us really followed the rulebook. We made characters that did not make sense, created spells that absolutely should not exist, and invented mechanics that would make a real DM cry. But it did not matter. We played, we laughed, and slowly a world began to form. That world was Azterra.","What started as a few whiteboard sketches turned into weekly sessions. Then twice a week. Then - during the last stretch of spring semester - three times a week. By the end, it felt like the entire floor knew about our game. Friends stopped by to watch. People took on NPC roles. Some sessions ran from 6 or 7 PM until 4 in the morning, long after the dorm had fallen silent.","Our final session of the year was unforgettable. A moral dilemma split the party. Allies turned on each other. And one of our own became a villain - because the player had to leave for military service in Korea, and we needed a farewell written in story. It was chaotic, emotional, and perfect.","When the school year ended, Azterra did not. The world stayed alive through summer campaigns, new characters, and new stories. And when we returned in the fall, many of us were now CS majors - including the ones who could not stop imagining how this could become something more.","In CS 571, we were given a golden opportunity to expand Azterra. We built tools for worldbuilding. We built a map system we had dreamed about since those whiteboard days. We built a place where our stories, characters, and campaigns could actually live.","Azterra is still growing. It started with nine friends around a table, and now it is turning into a home for anyone who loves storytelling, adventure, and building worlds together. And we are just getting started."];function h0(){return i.jsxs("div",{className:"about-page custom-scrollbar",children:[i.jsx("div",{className:"about-sheen","aria-hidden":"true"}),i.jsxs("section",{className:"about-hero",children:[i.jsx("div",{className:"about-hero__eyebrow",children:"About"}),i.jsx("h1",{className:"about-hero__title",children:"THE STORY BEHIND AZTERRA"}),i.jsx("p",{className:"about-hero__lead",children:"A world born in a lounge on the third floor of Dejope."}),i.jsxs("div",{className:"about-hero__cta-row",children:[i.jsx("div",{className:"about-badge",children:"Handcrafted campaign setting"}),i.jsx("div",{className:"about-badge about-badge--ghost",children:"Updated as the story evolves"})]})]}),i.jsx("section",{className:"about-section about-section--soft about-story",id:"story",children:i.jsx("div",{className:"about-story__narrative",children:d0.map((r,d)=>i.jsx("p",{children:r},d))})}),i.jsxs("section",{className:"about-section",children:[i.jsxs("div",{className:"about-section__header",children:[i.jsx("p",{className:"about-eyebrow",children:"Credits"}),i.jsx("h2",{className:"about-title",children:"Made by friends at the table"}),i.jsx("p",{className:"about-subtitle",children:"Co-created by a DM and a fellow player, both builders of the site that keeps Azterra alive."})]}),i.jsxs("div",{className:"about-grid",children:[i.jsxs("article",{className:"about-card",children:[i.jsx("div",{className:"about-card__shine","aria-hidden":"true"}),i.jsx("h3",{children:"Nick Galles"}),i.jsx("p",{children:"Dungeon Master, worldbuilder, and co-builder of the Azterra site."}),i.jsxs("p",{children:["Email: ",i.jsx("a",{href:"mailto:nicholasmgalles@gmail.com",children:"nicholasmgalles@gmail.com"})]}),i.jsx("p",{children:"Discord: Nickflix"})]}),i.jsxs("article",{className:"about-card",children:[i.jsx("div",{className:"about-card__shine","aria-hidden":"true"}),i.jsx("h3",{children:"Ryan Pratt"}),i.jsx("p",{children:"Player, developer, and co-builder keeping Azterra running online."}),i.jsxs("p",{children:["Email: ",i.jsx("a",{href:"mailto:ryanpratt16@outlook.com",children:"ryanpratt16@outlook.com"})]}),i.jsx("p",{children:"Discord: velere."})]})]})]}),i.jsxs("section",{className:"about-section about-section--soft",children:[i.jsxs("div",{className:"about-section__header",children:[i.jsx("p",{className:"about-eyebrow",children:"Join in"}),i.jsx("h2",{className:"about-title",children:"We save a seat for every explorer"}),i.jsx("p",{className:"about-subtitle",children:"Whether you are a Dungeon Master planning the next arc or a player dreaming up a hero, Azterra gives you a place to store, share, and grow your stories together."})]}),i.jsxs("div",{className:"about-highlight",children:[i.jsxs("div",{children:[i.jsx("h3",{children:"Bring your own legend"}),i.jsx("p",{children:"Sketch a map, drop landmarks, write lore, or track characters - everything stays connected so your table can keep playing even when schedules or cities change."})]}),i.jsx("div",{className:"about-highlight__cta",children:"Start your next session here"})]})]}),i.jsxs("section",{className:"about-section",id:"map",children:[i.jsxs("div",{className:"about-section__header",children:[i.jsx("p",{className:"about-eyebrow",children:"Cartography"}),i.jsx("h2",{className:"about-title",children:"How the map and editor work"}),i.jsx("p",{className:"about-subtitle",children:"The Map tab opens directly to the canvas: drag to explore, hold Shift while scrolling to zoom, and click pins to read lore. Switch the Editor toggle to drop regions, rename landmarks, and sync them to your Atlas entries."})]}),i.jsxs("div",{className:"about-grid",children:[i.jsxs("article",{className:"about-card",children:[i.jsx("div",{className:"about-card__shine","aria-hidden":"true"}),i.jsx("h3",{children:"Player-safe view"}),i.jsx("p",{children:"Keep spoilers hidden while players browse. Editor off means only public notes show."})]}),i.jsxs("article",{className:"about-card",children:[i.jsx("div",{className:"about-card__shine","aria-hidden":"true"}),i.jsx("h3",{children:"Live region overlays"}),i.jsx("p",{children:"Regions you add on the map populate the Atlas so you can reference them in character sheets or sessions."})]}),i.jsxs("article",{className:"about-card",children:[i.jsx("div",{className:"about-card__shine","aria-hidden":"true"}),i.jsx("h3",{children:"Session flow"}),i.jsx("p",{children:"Prep ahead by bookmarking coordinates and moving between hotspots as the party travels."})]})]})]})]})}const mg=[{id:1,name:"Seren the Scout",role:"NPC",type:"Scout",blurb:"A sharp-eyed ranger who guides travelers."},{id:2,name:"Brother Caldus",role:"NPC",type:"Cleric",blurb:"Keeps quiet notes on every pilgrim."},{id:3,name:"Verrik the Scribe",role:"NPC",type:"Scribe",blurb:"Maintains the chronicle of deeds."},{id:4,name:"Captain Lyra",role:"NPC",type:"Captain",blurb:"Commands the watch in the harbor."},{id:5,name:"Mira of the Veil",role:"NPC",type:"Seer",blurb:"Speaks in half-hidden prophecies."},{id:6,name:"Keeper of the Ember Vault",role:"NPC",type:"Guardian",blurb:"Stands watch over a chamber of auroral embers.",secretId:"aurora-ember"},{id:7,name:"Archivist of Silence",role:"NPC",type:"Scholar",blurb:"Holds the keys to a silent archive beneath the stacks.",secretId:"silent-archive"},{id:8,name:"Gilded Horizon Herald",role:"NPC",type:"Messenger",blurb:"Arrives only when the horizon shines gold.",secretId:"gilded-horizon"},{id:9,name:"Amber Custodian",role:"NPC",type:"Warden",blurb:"Guards letters sealed in amber light.",secretId:"amber-archive"},{id:10,name:"Whisper from the Shadow Court",role:"NPC",type:"Agent",blurb:"A veiled envoy from the Shadow Court.",secretId:"shadow-court"}],ra="/api",f0=["npcs","players"],m0=["All","Main","Side"],Mc=[{id:"aurora-ember",label:"Aurora Ember"},{id:"silent-archive",label:"Silent Archive"},{id:"gilded-horizon",label:"Gilded Horizon"},{id:"amber-archive",label:"Amber Archive"},{id:"shadow-court",label:"Shadow Court"}];Mc.map(r=>r.id);const Fd=[{id:"sunset",label:"Sunset Mirage",background:"linear-gradient(135deg, rgba(247, 146, 86, 0.85), rgba(23, 14, 9, 0.95))",foreground:"#ffe5ba",accent:"#f79256"},{id:"aurora",label:"Aurora Veil",background:"linear-gradient(135deg, rgba(67, 206, 162, 0.8), rgba(24, 90, 157, 0.95))",foreground:"#e7f5ff",accent:"#43cea2"},{id:"nightfall",label:"Nightfall Alloy",background:"linear-gradient(135deg, rgba(41, 31, 53, 0.95), rgba(13, 13, 20, 0.95))",foreground:"#f6d7ff",accent:"#b084f7"},{id:"oasis",label:"Oasis Bloom",background:"linear-gradient(135deg, rgba(47, 72, 88, 0.92), rgba(24, 112, 105, 0.92))",foreground:"#d6ffea",accent:"#57c5b6"},{id:"emberstorm",label:"Ember Storm",background:"linear-gradient(145deg, rgba(191, 45, 28, 0.9), rgba(49, 4, 14, 0.95))",foreground:"#ffe3d4",accent:"#ff7b54"},{id:"luminant",label:"Luminant Frost",background:"linear-gradient(135deg, rgba(62, 70, 132, 0.9), rgba(31, 43, 72, 0.95))",foreground:"#e4f3ff",accent:"#9dbbff"},{id:"verdant",label:"Verdant Canopy",background:"linear-gradient(135deg, rgba(34, 68, 56, 0.9), rgba(12, 31, 23, 0.95))",foreground:"#d9ffe0",accent:"#6fcf97"},{id:"solstice",label:"Solstice Crown",background:"linear-gradient(135deg, rgba(232, 182, 56, 0.9), rgba(118, 67, 0, 0.95))",foreground:"#fff5d6",accent:"#f5c451"},{id:"tidal",label:"Tidal Horizon",background:"linear-gradient(135deg, rgba(19, 78, 112, 0.9), rgba(3, 30, 53, 0.95))",foreground:"#d6f1ff",accent:"#4cc9f0"},{id:"amethyst",label:"Amethyst Shroud",background:"linear-gradient(135deg, rgba(126, 67, 170, 0.9), rgba(35, 13, 53, 0.95))",foreground:"#f5e0ff",accent:"#d295ff"},{id:"foundry",label:"Iron Foundry",background:"linear-gradient(135deg, rgba(67, 70, 75, 0.92), rgba(20, 20, 24, 0.95))",foreground:"#f2f2f2",accent:"#f2a365"},{id:"crimsonwood",label:"Crimson Wood",background:"linear-gradient(135deg, rgba(120, 28, 44, 0.92), rgba(45, 10, 18, 0.95))",foreground:"#ffdada",accent:"#ff5e78"},{id:"auric",label:"Auric Temple",background:"linear-gradient(135deg, rgba(191, 161, 96, 0.9), rgba(42, 34, 18, 0.95))",foreground:"#fff6db",accent:"#f0d290"},{id:"cobalt",label:"Cobalt Drift",background:"linear-gradient(135deg, rgba(25, 53, 97, 0.9), rgba(10, 17, 30, 0.95))",foreground:"#d7e8ff",accent:"#5c7cfa"},{id:"dawnlight",label:"Dawnlight",background:"linear-gradient(135deg, rgba(255, 182, 133, 0.9), rgba(237, 118, 84, 0.95))",foreground:"#fff6ec",accent:"#ff9f68"},{id:"selenic",label:"Selenic Veil",background:"linear-gradient(135deg, rgba(32, 28, 61, 0.9), rgba(5, 5, 12, 0.95))",foreground:"#e0e0ff",accent:"#a5a6f6"},{id:"mistwood",label:"Mistwood Trail",background:"linear-gradient(135deg, rgba(56, 74, 60, 0.9), rgba(24, 33, 28, 0.95))",foreground:"#eaf8ef",accent:"#9ad1b4"},{id:"emberglow",label:"Emberglow Grove",background:"linear-gradient(135deg, rgba(208, 84, 48, 0.9), rgba(109, 29, 20, 0.95))",foreground:"#ffe8d9",accent:"#ffab76"}];function p0(){const{role:r,token:d,user:f}=Cn(),{portraitConfig:m,portraitStatus:p,refreshPortraitStatus:b,generatePortrait:j}=Vg(),C=r==="admin",[y,x]=g.useState("npcs"),[E,S]=g.useState("All"),[A,k]=g.useState(!1),[z,Z]=g.useState([]),[I,R]=g.useState([]),[D,$]=g.useState([]),[G,X]=g.useState([]),[ve,F]=g.useState([]),[ue,U]=g.useState([]),[xe,je]=g.useState([]),[Ce,qe]=g.useState([]),[Ze,Ie]=g.useState(null),[J,B]=g.useState([0,0,0,1]),[ee,K]=g.useState([0,0,0,1]),[P,T]=g.useState(0),[Q,le]=g.useState(""),[he,_e]=g.useState(!1),[be,Le]=g.useState({}),[we,Oe]=g.useState({}),[st,Wt]=g.useState({}),[De,Je]=g.useState(null),[jt,sn]=g.useState(null),[Vt,ca]=g.useState(null),[un,Zt]=g.useState([]),[dn,hn]=g.useState({}),[Jt,Na]=g.useState([]),[Ot,Ha]=g.useState({locations:[],npcs:[],players:[]}),[Rn,en]=g.useState(null),[Tt,Za]=g.useState(null),[Ia,li]=g.useState("details"),[Ca,En]=g.useState({}),[It,yn]=g.useState({});g.useEffect(()=>{(async()=>{le("");try{const oe=await fetch(`${ra}/view/characters`,{headers:d?{Authorization:`Bearer ${d}`}:{}}),Te=await oe.json();oe.ok&&Z(Te.visibleIds||[]);const ae=await fetch(`${ra}/view/npcs`,{headers:d?{Authorization:`Bearer ${d}`}:{}}),Be=await ae.json();if(ae.ok){const Ee=Be.items||[],_t=Ee.filter(ze=>ze.visible!==!1).map(ze=>ze.id);R(_t),X(Ee),U(Be.truesightIds||[])}const Ue=await fetch(`${ra}/view/locations`,{headers:d?{Authorization:`Bearer ${d}`}:{}}),Ae=await Ue.json();if(Ue.ok){const Ee=Ae.items||[],_t=Ee.filter(ze=>ze.visible!==!1).map(ze=>ze.id);$(_t),F(Ee),je(Ae.truesightIds||[])}if(d){const Ee=await fetch(`${ra}/view/favorites`,{headers:{Authorization:`Bearer ${d}`}}),_t=await Ee.json();Ee.ok&&Zt(_t.viewFavorites||[]);const ze=await fetch(`${ra}/view/players`,{headers:{Authorization:`Bearer ${d}`}}),ln=await ze.json();if(ze.ok&&qe(ln.users||[]),C){const An=await fetch(`${ra}/entities/players`,{headers:{Authorization:`Bearer ${d}`}});if(An.ok){const mn=await An.json(),tt={};(mn.items||[]).forEach(mt=>{tt[mt.id]=mt}),yn(tt)}}}}catch(oe){le(oe.message||"Unable to load view data.")}})()},[d]),g.useEffect(()=>{k(C)},[C]);const Gt=g.useMemo(()=>[[255,213,128,.8],[247,146,86,.7],[255,215,0,.75]],[]),xn=(V,oe)=>V.truesight?!0:V.visible?Jd(oe,{roles:["guest","editor","admin","pending","player"],secretId:V.secretId}):!1,bn=g.useMemo(()=>{const V=(ae="Main")=>E==="All"||(ae||"Main")===E,Te={role:A&&C?"admin":r,unlockedSecrets:C&&!A?Jt:Array.isArray(f?.unlockedSecrets)?f.unlockedSecrets:[]};if(y==="npcs"){const Be=(G.length?G:mg).map(Ae=>({...Ae,visible:Ae.visible!==!1,truesight:ue.includes(Ae.id),campaign:Ae.campaign||"Main"}));return(A&&C?Be:Be.filter(Ae=>xn(Ae,Te))).filter(Ae=>V(Ae.campaign))}if(y==="players"){const ae=Ce.length&&A&&C?Ce:Ce.length?Ce.filter(Ue=>V(Ue.campaign)):bt.filter(Ue=>A&&C||z.includes(Ue.id)).map(Ue=>({id:Ue.id,name:Ue.name,character:Ue,campaign:Ue.campaign||"Main"})).filter(Ue=>V(Ue.campaign));return A&&C?ae:ae.filter(Ue=>Jd(Te,{roles:["guest","editor","admin","pending","player"],secretId:Ue.secretId}))}return[]},[y,Ce,z,G,C,E,A,r,ue,Jt,f]);g.useEffect(()=>{if(y!=="players")return;const V=new Set;bn.forEach(oe=>{const Te=oe.character||bt.find(ae=>ae.id===oe.featuredCharacter)||bt.find(ae=>ae.id===oe.id);Te?.id&&V.add(Te.id)}),V.forEach(oe=>b(oe))},[y,bn,b]),g.useEffect(()=>{Ha(V=>{const oe=bn.map(Ae=>`${y}-${Ae.id}`),Te=(V[y]||[]).filter(Ae=>oe.includes(Ae)),ae=[...Te,...oe.filter(Ae=>!Te.includes(Ae))],Be=V[y]||[];return ae.length===Be.length&&ae.every((Ae,Ee)=>Ae===Be[Ee])?V:{...V,[y]:ae}})},[bn,y]),g.useEffect(()=>{A||Za(null)},[A]),g.useEffect(()=>{if(!Tt)return;(Tt.type==="locations"?ve:Tt.type==="npcs"?G:Ce).some(Te=>String(Te.id)===String(Tt.id))||Za(null)},[Tt,ve,G,Ce]);const jn=g.useMemo(()=>{const V=Ot[y]||[],oe=new Map(bn.map(Be=>[`${y}-${Be.id}`,Be])),Te=V.map(Be=>oe.get(Be)).filter(Boolean),ae=bn.filter(Be=>!V.includes(`${y}-${Be.id}`));return[...Te,...ae]},[Ot,bn,y]);g.useEffect(()=>{if(!bn.length)return;const V=Gt[(Ze??0)%Gt.length];B(ee),K(V),T(0)},[Ze,bn.length,Gt,ee]);const Fn=async(V,oe)=>{if(!C||!d)return;const Te=oe==="npc"?"npcs/visible":"locations/visible",ae=oe==="npc"?new Set(I):new Set(D);ae.has(V)?ae.delete(V):ae.add(V);const Be={visibleIds:Array.from(ae)};try{await fetch(`${ra}/view/${Te}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify(Be)}),oe==="npc"?(R(Be.visibleIds),X(Ue=>Ue.map(Ae=>Ae.id===V?{...Ae,visible:Be.visibleIds.includes(V)}:Ae))):($(Be.visibleIds),F(Ue=>Ue.map(Ae=>Ae.id===V?{...Ae,visible:Be.visibleIds.includes(V)}:Ae)))}catch(Ue){le(Ue.message||"Unable to update visibility.")}},Kn=async(V,oe)=>{if(!C||!d)return;const Te=oe==="npc"?"npcs/truesight":"locations/truesight",ae=oe==="npc"?new Set(ue):new Set(xe);ae.has(V)?ae.delete(V):ae.add(V);const Be={truesightIds:Array.from(ae)};try{await fetch(`${ra}/view/${Te}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify(Be)}),oe==="npc"?(U(Be.truesightIds),X(Ue=>Ue.map(Ae=>Ae.id===V?{...Ae,truesight:Be.truesightIds.includes(V)}:Ae))):(je(Be.truesightIds),F(Ue=>Ue.map(Ae=>Ae.id===V?{...Ae,truesight:Be.truesightIds.includes(V)}:Ae)))}catch(Ue){le(Ue.message||"Unable to update truesight.")}},fn=(V,oe,Te)=>{Le(ae=>({...ae,[V]:{...ae[V]||{},[oe]:Te}}))},et=(V,oe,Te)=>{Oe(ae=>({...ae,[V]:{...ae[V]||{},[oe]:Te}}))},Ea=(V,oe)=>{if(!oe)return;if(!oe.type.startsWith("image/")){le("Please upload an image file (png, jpg, webp).");return}const Te=new FileReader;Te.onload=()=>{et(V,"heroImage",Te.result)},Te.readAsDataURL(oe)},Ta=(V,oe)=>{V.preventDefault(),V.stopPropagation();const Te=V.dataTransfer?.files?.[0];Ea(oe,Te)},fs=(V,oe)=>{const Te=V.target.files?.[0];Ea(oe,Te),V.target.value=""},Li=(V,oe,Te)=>{V.dataTransfer.effectAllowed="move",V.dataTransfer.setData("text/plain",Te),en(Te)},ri=(V,oe,Te)=>{V.preventDefault(),!(!Rn||Rn===Te)&&Ha(ae=>{const Be=[...ae[oe]||[]],Ue=Be.indexOf(Rn),Ae=Be.indexOf(Te);return Ue===-1||Ae===-1?ae:(Be.splice(Ue,1),Be.splice(Ae,0,Rn),{...ae,[oe]:Be})})},Xn=V=>{V.preventDefault(),en(null)},ms=()=>{en(null)},ki=async V=>{if(!(!V||!C||!d)){En(oe=>({...oe,[V]:!0})),le("");try{const oe=await j(V,d);if(oe.error)throw new Error(oe.error);await b(V)}catch(oe){le(oe.message||"Unable to generate portrait.")}finally{En(oe=>{const Te={...oe};return delete Te[V],Te})}}},Aa=(V,oe)=>{!A||!C||(Za({type:V,id:oe}),li("details"))},ua=()=>{Tt&&hn(V=>{const oe={...V};return delete oe[`${Tt.type}-${Tt.id}`],oe}),Za(null)},qt=V=>({...V,...be[V.id]||{}}),ke=V=>({...V,...we[V.id]||{}}),Ga=V=>({...V,...It[V.id]||{},...st[V.id]||{}}),qa=async V=>{if(!C||!d)return;const oe=G.find(ae=>ae.id===V);if(!oe)return;const Te=qt(oe);Je(V),le("");try{const ae=await fetch(`${ra}/entities/npcs/save`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({...Te,id:Te.id,locationId:Te.locationId||null,campaign:Te.campaign||"Main"})}),Be=await ae.json();if(!ae.ok)throw new Error(Be.error||"Unable to save NPC.");const Ue=Array.isArray(Be.items)?Be.items:[Be.item].filter(Boolean);X(Ue.map(Ae=>({...Ae,visible:I.includes(Ae.id),truesight:ue.includes(Ae.id)}))),Le(Ae=>{const Ee={...Ae};return delete Ee[V],Ee})}catch(ae){le(ae.message||"Unable to save NPC.")}finally{Je(null)}},Tn=async V=>{if(!C||!d)return;const oe=ae=>{const{visible:Be,truesight:Ue,...Ae}=ae;return{...Ae,campaign:ae.campaign||"Main",regionId:ae.regionId??null,markerId:ae.markerId??null}},Te=ve.map(ae=>ae.id===V?oe(ke(ae)):oe(ae));sn(V),le("");try{const ae=await fetch(`${ra}/locations/save`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({locations:Te})}),Be=await ae.json();if(!ae.ok)throw new Error(Be.error||"Unable to save location.");const Ue=Array.isArray(Be.locations)?Be.locations:[];F(Ue.map(Ae=>({...Ae,visible:D.includes(Ae.id),truesight:xe.includes(Ae.id)}))),Oe(Ae=>{const Ee={...Ae};return delete Ee[V],Ee})}catch(ae){le(ae.message||"Unable to save location.")}finally{sn(null)}},Lt=async V=>{if(!C||!d||!V)return;const oe=Ga(V);ca(V.id),le("");try{const Te=await fetch(`${ra}/entities/players/save`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({...oe,id:V.id,name:oe.name||V.name,description:oe.description||""})}),ae=await Te.json();if(!Te.ok)throw new Error(ae.error||"Unable to save player metadata.");const Be=Array.isArray(ae.items)?ae.items:[ae.item].filter(Boolean),Ue={};Be.forEach(Ae=>{Ue[Ae.id]=Ae}),yn(Ue),Wt(Ae=>{const Ee={...Ae};return delete Ee[V.id],Ee})}catch(Te){le(Te.message||"Unable to save player metadata.")}finally{ca(null)}},kt=async V=>{if(d){_e(!0);try{const oe=y==="players"?"character":y==="npcs"?"npc":"location";await fetch(`${ra}/view/favorite`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({type:oe,id:V,favorite:!un.includes(`${oe}:${V}`)})});const Te=await fetch(`${ra}/view/favorites`,{headers:{Authorization:`Bearer ${d}`}}),ae=await Te.json();Te.ok&&Zt(ae.viewFavorites||[])}catch{}finally{_e(!1)}}},Qn=(V,oe)=>{const Te=`${y}-${V.id}`,ae=!!dn[Te],Be=Rn===Te,Ue=()=>{Ie(oe);const Ee=!ae;hn(_t=>({..._t,[Te]:Ee})),A&&C&&(Ee?Aa(y,V.id):Tt&&Tt.type===y&&String(Tt.id)===String(V.id)&&ua())},Ae={draggable:!0,onDragStart:Ee=>Li(Ee,y,Te),onDragOver:Ee=>ri(Ee,y,Te),onDragEnd:ms,onDrop:Xn};if(y==="players"){const Ee=V.character||bt.find(mt=>mt.id===V.featuredCharacter)||bt.find(mt=>mt.id===V.id),_t=Ga(V),ze=bt.filter(mt=>A&&C||z.includes(mt.id)),ln=Ee?p[Ee.id]:null,An=ln?.url,mn=C&&A&&Ee&&(Ee.imageDescription||V.imageDescription),tt=m.checked&&!m.enabled;return i.jsxs("div",{className:`view-card ${ae?"view-card--expanded":""} ${Be?"view-card--dragging":""}`,onClick:Ue,role:"button",tabIndex:0,...Ae,children:[i.jsxs("div",{className:"view-card__header",children:[i.jsxs("div",{children:[i.jsx("p",{className:"account-card__eyebrow",children:V.username?`@${V.username}`:"Player"}),i.jsx("h3",{children:V.name||Ee?.name})]}),Ee&&i.jsx("button",{type:"button",className:`fav-btn ${un.includes(`character:${Ee.id}`)?"fav-btn--active":""}`,onClick:mt=>{mt.stopPropagation(),kt(Ee.id)},disabled:he,children:un.includes(`character:${Ee.id}`)?"":""})]}),Ee&&i.jsxs("div",{className:"view-card__body",children:[An?i.jsx("div",{className:"view-card__media",style:{maxHeight:220},children:i.jsx("img",{src:An,alt:`${Ee.name} portrait`})}):i.jsx("p",{className:"account-muted",children:"No portrait yet."}),i.jsxs("p",{className:"account-muted",children:[Ee.class,"  ",Ee.race]}),C&&A?i.jsxs("label",{className:"admin-field",children:[i.jsx("span",{children:"Description"}),i.jsx("textarea",{value:_t.description||"",rows:3,onClick:mt=>mt.stopPropagation(),onChange:mt=>Wt($a=>({...$a,[V.id]:{...$a[V.id]||{},description:mt.target.value}}))})]}):_t.description&&i.jsx("p",{className:"account-muted",children:_t.description})]}),ae&&i.jsxs("div",{className:"view-card__body",children:[i.jsx("p",{className:"account-muted",children:"Visible Characters"}),i.jsx("div",{className:"mini-list",children:ze.length?ze.map(mt=>i.jsx("span",{children:mt.name},mt.id)):i.jsx("span",{children:"No characters visible."})}),Ee&&mn&&i.jsxs("div",{className:"view-card__actions",onClick:mt=>mt.stopPropagation(),children:[i.jsx("button",{type:"button",className:"admin-toggle-btn",disabled:tt||Ca[Ee.id],title:tt?"Image generation unavailable (missing API key)":"",onClick:()=>ki(Ee.id),children:Ca[Ee.id]?"Generating...":ln?.exists?"Regenerate Portrait":"Generate Portrait"}),tt&&i.jsx("p",{className:"account-muted",children:"Portrait generation disabled (no key)."})]}),C&&A&&i.jsx("div",{className:"view-card__actions",onClick:mt=>mt.stopPropagation(),children:i.jsx("button",{type:"button",className:"admin-toggle-btn",disabled:Vt===V.id,onClick:()=>Lt(V),children:Vt===V.id?"Saving...":"Save Description"})}),C&&A&&V.secretId&&i.jsx("div",{className:"secret-meta",children:i.jsxs("p",{className:"account-muted",children:["Requires secret: ",V.secretId]})})]})]})}if(y==="npcs"){const Ee=qt(V),_t=(ve.length?ve:th.locations||[]).sort((ze,ln)=>(ze.name||"").localeCompare(ln.name||""));return i.jsxs("div",{className:`view-card ${ae?"view-card--expanded":""} ${Be?"view-card--dragging":""}`,onClick:Ue,role:"button",tabIndex:0,...Ae,children:[i.jsxs("div",{className:"view-card__header",children:[i.jsxs("div",{children:[i.jsx("p",{className:"account-card__eyebrow",children:V.type}),i.jsx("h3",{children:V.name})]}),i.jsx("div",{className:"view-card__actions",children:d&&i.jsx("button",{type:"button",className:`fav-btn ${un.includes(`npc:${V.id}`)?"fav-btn--active":""}`,onClick:ze=>{ze.stopPropagation(),kt(V.id)},disabled:he,children:un.includes(`npc:${V.id}`)?"":""})})]}),C&&A?i.jsxs("label",{className:"admin-field",onClick:ze=>ze.stopPropagation(),children:[i.jsx("span",{children:"Description"}),i.jsx("textarea",{value:Ee.blurb||"",rows:2,onChange:ze=>fn(Ee.id,"blurb",ze.target.value)})]}):i.jsx("p",{className:"account-muted",children:V.blurb}),ae&&i.jsxs("div",{className:"view-card__body",children:[i.jsx("p",{className:"account-muted",children:"Related Locations"}),i.jsx("div",{className:"mini-list",children:_t.length?_t.filter(ze=>Ee.locationId&&String(ze.id)===String(Ee.locationId)).map(ze=>i.jsx("span",{children:ze.name},ze.id)):i.jsx("span",{children:"None linked."})}),C&&A&&i.jsx("div",{className:"view-card__actions",onClick:ze=>ze.stopPropagation(),children:i.jsx("button",{type:"button",className:"admin-toggle-btn",disabled:De===V.id,onClick:()=>qa(V.id),children:De===V.id?"Saving...":"Save NPC"})}),C&&A&&V.secretId&&i.jsx("div",{className:"secret-meta",children:i.jsxs("p",{className:"account-muted",children:["Requires secret: ",V.secretId]})})]})]})}if(y==="locations"){const Ee=ke(V),_t=(G.length?G:mg).filter(tt=>tt.locationId&&String(tt.locationId)===String(Ee.id)),ze=Ce.filter(tt=>tt.locationId&&String(tt.locationId)===String(Ee.id)),ln=Ee.heroImage||Ee.image||Ee.imageUrl||"",An=Fd.find(tt=>tt.id===Ee.cardStyle)||Fd[0],mn=A&&C?i.jsxs("div",{children:[i.jsx("p",{className:"account-card__eyebrow",children:Ee.category||Ee.type}),i.jsx("h3",{children:Ee.name})]}):i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"account-card__eyebrow",children:V.category||V.type}),i.jsx("h3",{children:V.name})]});return i.jsxs("div",{className:`view-card view-card--media ${ae?"view-card--expanded":""} ${Be?"view-card--dragging":""}`,style:{background:An.background,color:An.foreground},onClick:Ue,role:"button",tabIndex:0,...Ae,children:[i.jsxs("div",{className:"view-card__media",children:[ln?i.jsx("img",{src:ln,alt:`${Ee.name} illustration`}):i.jsx("div",{className:"view-card__media-placeholder",children:"No image yet. Drop one in editor mode."}),i.jsxs("div",{className:"view-card__title-overlay",children:[i.jsx("div",{children:mn}),i.jsx("div",{className:"view-card__media-actions",children:(ae||A&&C)&&d&&i.jsx("button",{type:"button",className:`fav-btn ${un.includes(`location:${V.id}`)?"fav-btn--active":""}`,onClick:tt=>{tt.stopPropagation(),kt(V.id)},disabled:he,children:un.includes(`location:${V.id}`)?"":""})})]})]}),ae&&i.jsx("div",{className:`view-card__expanded ${A&&C?"view-card__expanded--admin":""}`,onClick:tt=>tt.stopPropagation(),children:i.jsxs("div",{className:"view-card__details",children:[i.jsxs("div",{className:"view-card__detail-block",children:[i.jsx("p",{className:"detail-label",children:"Description"}),i.jsx("p",{children:Ee.description||"No description provided."})]}),i.jsxs("div",{className:"view-card__detail-block",children:[i.jsx("p",{className:"detail-label",children:"NPCs here"}),i.jsx("div",{className:"mini-list",children:_t.length?_t.map(tt=>i.jsx("span",{children:tt.name},tt.id)):i.jsx("span",{children:"No NPCs linked."})})]}),i.jsxs("div",{className:"view-card__detail-block",children:[i.jsx("p",{className:"detail-label",children:"Characters here"}),i.jsx("div",{className:"mini-list",children:ze.length?ze.map(tt=>i.jsx("span",{children:tt.name},tt.id)):i.jsx("span",{children:"No characters linked."})})]}),ln&&i.jsx("div",{className:"view-card__detail-image",children:i.jsx("img",{src:ln,alt:`${Ee.name} detail`})}),C&&A&&V.secretId&&i.jsx("div",{className:"secret-meta",children:i.jsxs("p",{className:"account-muted",children:["Requires secret: ",V.secretId]})})]})})]})}return null},On=()=>{if(!A||!C||!Tt)return null;if(Tt.type==="locations"){const V=ve.find(ae=>String(ae.id)===String(Tt.id));if(!V)return null;const oe=ke(V),Te=oe.heroImage||oe.image||oe.imageUrl||"";return i.jsx("div",{className:"editor-panel-overlay",onClick:ua,children:i.jsxs("div",{className:"editor-panel",onClick:ae=>ae.stopPropagation(),children:[i.jsxs("div",{className:"editor-panel__header",children:[i.jsxs("div",{children:[i.jsx("p",{className:"editor-panel__eyebrow",children:"Location Editor"}),i.jsx("h2",{children:oe.name||"Unnamed Location"})]}),i.jsx("button",{type:"button",className:"editor-panel__close",onClick:ua,"aria-label":"Close editor",children:"X"})]}),i.jsx("div",{className:"editor-panel__tabs",children:["details","visual"].map(ae=>i.jsx("button",{type:"button",className:`editor-panel__tab ${Ia===ae?"editor-panel__tab--active":""}`,onClick:()=>li(ae),children:ae==="details"?"Details":"Visual"},ae))}),Ia==="details"?i.jsxs("div",{className:"editor-panel__content",children:[i.jsxs("label",{className:"admin-field",children:[i.jsx("span",{children:"Category"}),i.jsx("input",{value:oe.category||"",onChange:ae=>et(oe.id,"category",ae.target.value)})]}),i.jsxs("label",{className:"admin-field",children:[i.jsx("span",{children:"Name"}),i.jsx("input",{value:oe.name||"",onChange:ae=>et(oe.id,"name",ae.target.value)})]}),i.jsxs("label",{className:"admin-field",children:[i.jsx("span",{children:"Description"}),i.jsx("textarea",{value:oe.description||"",onChange:ae=>et(oe.id,"description",ae.target.value),rows:3})]}),i.jsxs("label",{className:"admin-field",children:[i.jsx("span",{children:"Campaign"}),i.jsx("input",{value:oe.campaign||"",onChange:ae=>et(oe.id,"campaign",ae.target.value)})]}),i.jsxs("label",{className:"admin-field",children:[i.jsx("span",{children:"Region ID"}),i.jsx("input",{value:oe.regionId??"",onChange:ae=>et(oe.id,"regionId",ae.target.value?Number(ae.target.value):null)})]}),i.jsxs("label",{className:"admin-field",children:[i.jsx("span",{children:"Marker ID"}),i.jsx("input",{value:oe.markerId??"",onChange:ae=>et(oe.id,"markerId",ae.target.value?Number(ae.target.value):null)})]}),i.jsxs("label",{className:"admin-field",children:[i.jsx("span",{children:"Secret"}),i.jsxs("select",{value:oe.secretId||"",onChange:ae=>et(oe.id,"secretId",ae.target.value||void 0),children:[i.jsx("option",{value:"",children:"None (public when visible)"}),Mc.map(ae=>i.jsx("option",{value:ae.id,children:ae.label},ae.id))]})]}),i.jsxs("div",{className:"editor-panel__toggles",children:[i.jsxs("label",{className:"visibility-toggle",children:[i.jsx("input",{type:"checkbox",checked:oe.visible!==!1,onChange:()=>Fn(oe.id,"loc")}),i.jsx("span",{children:oe.visible!==!1?"Visible":"Hidden"})]}),i.jsxs("label",{className:"visibility-toggle",children:[i.jsx("input",{type:"checkbox",checked:oe.truesight||!1,onChange:()=>Kn(oe.id,"loc")}),i.jsx("span",{children:oe.truesight?"Truesight":"No Truesight"})]})]}),i.jsx("div",{className:"editor-panel__actions",children:i.jsx("button",{type:"button",className:"admin-toggle-btn",onClick:()=>Tn(oe.id),disabled:jt===oe.id,children:jt===oe.id?"Saving...":"Save Location"})})]}):i.jsxs("div",{className:"editor-panel__content",children:[i.jsxs("div",{className:"view-card__image-drop",onDrop:ae=>Ta(ae,oe.id),onDragOver:ae=>{ae.preventDefault(),ae.stopPropagation()},children:[i.jsx("p",{children:"Drag & drop an image to update this location."}),i.jsxs("label",{className:"view-card__image-upload",children:["Browse",i.jsx("input",{type:"file",accept:"image/*",onChange:ae=>fs(ae,oe.id)})]}),Te&&i.jsx("img",{src:Te,alt:`${oe.name} preview`})]}),i.jsx("p",{className:"detail-label",children:"Card Themes"}),i.jsx("div",{className:"visual-theme-grid",children:Fd.map(ae=>i.jsx("button",{type:"button",className:`visual-theme ${oe.cardStyle===ae.id?"visual-theme--active":""}`,style:{background:ae.background,color:ae.foreground},onClick:()=>et(oe.id,"cardStyle",ae.id),children:i.jsx("span",{children:ae.label})},ae.id))})]})]})})}if(Tt.type==="npcs"){const V=G.find(ae=>String(ae.id)===String(Tt.id));if(!V)return null;const oe=qt(V),Te=(ve.length?ve:th.locations||[]).sort((ae,Be)=>(ae.name||"").localeCompare(Be.name||""));return i.jsx("div",{className:"editor-panel-overlay",onClick:ua,children:i.jsxs("div",{className:"editor-panel",onClick:ae=>ae.stopPropagation(),children:[i.jsxs("div",{className:"editor-panel__header",children:[i.jsxs("div",{children:[i.jsx("p",{className:"editor-panel__eyebrow",children:"NPC Editor"}),i.jsx("h2",{children:oe.name||"Unnamed NPC"})]}),i.jsx("button",{type:"button",className:"editor-panel__close",onClick:ua,"aria-label":"Close editor",children:"X"})]}),i.jsxs("div",{className:"editor-panel__content",children:[i.jsxs("label",{className:"admin-field",children:[i.jsx("span",{children:"Role"}),i.jsx("input",{value:oe.type||"",onChange:ae=>fn(oe.id,"type",ae.target.value)})]}),i.jsxs("label",{className:"admin-field",children:[i.jsx("span",{children:"Name"}),i.jsx("input",{value:oe.name||"",onChange:ae=>fn(oe.id,"name",ae.target.value)})]}),i.jsxs("label",{className:"admin-field",children:[i.jsx("span",{children:"Blurb"}),i.jsx("textarea",{value:oe.blurb||"",onChange:ae=>fn(oe.id,"blurb",ae.target.value),rows:3})]}),i.jsxs("label",{className:"admin-field",children:[i.jsx("span",{children:"Campaign"}),i.jsx("input",{value:oe.campaign||"",onChange:ae=>fn(oe.id,"campaign",ae.target.value)})]}),i.jsxs("label",{className:"admin-field",children:[i.jsx("span",{children:"Linked Location"}),i.jsxs("select",{value:oe.locationId||"",onChange:ae=>fn(oe.id,"locationId",ae.target.value?Number(ae.target.value):null),children:[i.jsx("option",{value:"",children:"No location"}),Te.map(ae=>i.jsx("option",{value:ae.id,children:ae.name},ae.id))]})]}),i.jsxs("label",{className:"admin-field",children:[i.jsx("span",{children:"Secret"}),i.jsxs("select",{value:oe.secretId||"",onChange:ae=>fn(oe.id,"secretId",ae.target.value||void 0),children:[i.jsx("option",{value:"",children:"None (public when visible)"}),Mc.map(ae=>i.jsx("option",{value:ae.id,children:ae.label},ae.id))]})]}),i.jsxs("div",{className:"editor-panel__toggles",children:[i.jsxs("label",{className:"visibility-toggle",children:[i.jsx("input",{type:"checkbox",checked:oe.visible!==!1,onChange:()=>Fn(oe.id,"npc")}),i.jsx("span",{children:oe.visible!==!1?"Visible":"Hidden"})]}),i.jsxs("label",{className:"visibility-toggle",children:[i.jsx("input",{type:"checkbox",checked:oe.truesight||!1,onChange:()=>Kn(oe.id,"npc")}),i.jsx("span",{children:oe.truesight?"Truesight":"No Truesight"})]})]}),i.jsx("div",{className:"editor-panel__actions",children:i.jsx("button",{type:"button",className:"admin-toggle-btn",onClick:()=>qa(oe.id),disabled:De===oe.id,children:De===oe.id?"Saving...":"Save NPC"})})]})]})})}return null};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"page-container people-page",children:["re         ",i.jsx("div",{className:"people-page__scrim","aria-hidden":"true"}),i.jsxs("header",{className:"characters-header",children:[i.jsxs("div",{children:[i.jsx("p",{className:"account-card__eyebrow",children:"People"}),i.jsx("h1",{children:"Campaign View"}),i.jsx("p",{className:"nav-hint",children:"Browse visible players, NPCs, and locations. Admins can toggle visibility."})]}),C&&i.jsxs("div",{className:"admin-toggle",children:[i.jsx("button",{type:"button",className:`admin-toggle-btn ${A?"admin-toggle-btn--active":""}`,onClick:()=>k(V=>!V),children:A?"Admin View":"User View"}),!A&&i.jsx("div",{className:"mini-list","aria-label":"Preview secrets",children:Mc.map(V=>i.jsxs("button",{type:"button",className:`secret-preview-button ${Jt.includes(V.id)?"secret-preview-button--active":""}`,onClick:()=>Na(oe=>oe.includes(V.id)?oe.filter(Te=>Te!==V.id):[...oe,V.id]),children:[Jt.includes(V.id)?"":""," ",V.label]},V.id))})]})]}),i.jsxs("div",{className:"characters-tabs",children:[f0.map(V=>i.jsxs("button",{className:`tab-btn ${y===V?"tab-btn--active":""}`,type:"button",onClick:()=>x(V),children:[V==="players"&&"Players / Characters",V==="npcs"&&"NPCs"]},V)),i.jsx("div",{className:"campaign-tabs",children:m0.map(V=>i.jsxs("button",{className:`tab-btn ${E===V?"tab-btn--active":""}`,type:"button",onClick:()=>S(V),children:[V," Campaign"]},V))})]}),Q&&i.jsx("p",{className:"account-error",children:Q}),i.jsx("div",{className:"view-grid",children:jn.map((V,oe)=>i.jsx("div",{children:Qn(V,oe)},`${y}-${V.id}`))})]}),On()]})}const Vr="/api",g0=[{id:"players",label:"Player Characters"},{id:"npcs",label:"NPCs"},{id:"majors",label:"Major Entities"}];function v0(){const{token:r,role:d}=Cn(),f=d==="admin",[m,p]=g.useState("players"),[b,j]=g.useState([]),[C,y]=g.useState([]),[x,E]=g.useState([]),[S,A]=g.useState([]),[k,z]=g.useState({id:"",name:"",description:"",entityType:"",campaign:"Main",regionId:"",markerId:"",image:"",visible:!0}),[Z,I]=g.useState(""),[R,D]=g.useState(!1),$=async()=>{if(r)try{const X=await fetch(`${Vr}/entities/${m}`,{headers:{Authorization:`Bearer ${r}`}}),ve=await X.json();if(!X.ok)throw new Error(ve.error||"Unable to load.");j(ve.items||[])}catch(X){I(X.message||"Unable to load.")}};if(g.useEffect(()=>{$()},[m,r]),g.useEffect(()=>{(async()=>{if(r)try{const ve=await fetch(`${Vr}/regions`),F=await ve.json();ve.ok&&y(F.regions||[]);const ue=await fetch(`${Vr}/locations`),U=await ue.json();ue.ok&&E(U.locations||[]),ue.ok&&A(U.locations||[])}catch{}})()},[r]),!f)return i.jsxs("div",{className:"page-container",children:[i.jsx("h1",{children:"Admin Entities"}),i.jsx("p",{children:"You must be an admin to manage entities."})]});const G=async X=>{X.preventDefault(),D(!0),I("");try{const ve=await fetch(`${Vr}/entities/${m}/save`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(k)}),F=await ve.json();if(!ve.ok)throw new Error(F.error||"Unable to save.");z({id:"",name:"",description:"",entityType:"",campaign:"Main",regionId:"",markerId:"",image:"",visible:!0}),await $()}catch(ve){I(ve.message||"Unable to save.")}finally{D(!1)}};return i.jsxs("div",{className:"page-container",children:[i.jsx("h1",{children:"Admin Entities"}),i.jsx("div",{className:"characters-tabs",children:g0.map(X=>i.jsx("button",{type:"button",className:`tab-btn ${m===X.id?"tab-btn--active":""}`,onClick:()=>p(X.id),children:X.label},X.id))}),i.jsxs("form",{className:"list-panel",onSubmit:G,children:[i.jsxs("div",{className:"account-field",children:[i.jsx("span",{children:"Name"}),i.jsx("input",{value:k.name,onChange:X=>z({...k,name:X.target.value}),required:!0})]}),i.jsxs("div",{className:"account-field",children:[i.jsx("span",{children:"Description"}),i.jsx("textarea",{value:k.description,onChange:X=>z({...k,description:X.target.value}),rows:3})]}),i.jsxs("div",{className:"account-field",children:[i.jsx("span",{children:"Type / Role"}),i.jsx("input",{value:k.entityType,onChange:X=>z({...k,entityType:X.target.value})})]}),i.jsxs("div",{className:"account-field",children:[i.jsx("span",{children:"Campaign"}),i.jsx("input",{value:k.campaign,onChange:X=>z({...k,campaign:X.target.value})})]}),i.jsxs("div",{className:"account-field",children:[i.jsx("span",{children:"Region"}),i.jsxs("select",{value:k.regionId,onChange:X=>z({...k,regionId:X.target.value}),children:[i.jsx("option",{value:"",children:" None "}),C.map(X=>i.jsx("option",{value:X.id,children:X.name||X.id},X.id))]})]}),i.jsxs("div",{className:"account-field",children:[i.jsx("span",{children:"Marker"}),i.jsxs("select",{value:k.markerId,onChange:X=>z({...k,markerId:X.target.value}),children:[i.jsx("option",{value:"",children:" None "}),x.map(X=>i.jsx("option",{value:X.id,children:X.name||X.id},X.id))]})]}),i.jsxs("div",{className:"account-field",children:[i.jsx("span",{children:"Linked Location"}),i.jsxs("select",{value:k.locationId,onChange:X=>z({...k,locationId:X.target.value}),children:[i.jsx("option",{value:"",children:" None "}),S.map(X=>i.jsx("option",{value:X.id,children:X.name||X.id},X.id))]})]}),i.jsxs("div",{className:"account-field",children:[i.jsx("span",{children:"Image URL"}),i.jsx("input",{value:k.image,onChange:X=>z({...k,image:X.target.value})})]}),i.jsxs("label",{className:"visibility-toggle",children:[i.jsx("input",{type:"checkbox",checked:k.visible,onChange:X=>z({...k,visible:X.target.checked})}),i.jsx("span",{children:"Visible"})]}),i.jsx("button",{type:"submit",disabled:R,children:R?"Saving...":"Save Entity"}),Z&&i.jsx("p",{className:"account-error",children:Z})]}),i.jsx("div",{className:"view-grid",children:b.map(X=>i.jsxs("div",{className:"view-card",children:[i.jsxs("div",{className:"view-card__header",children:[i.jsxs("div",{children:[i.jsx("p",{className:"account-card__eyebrow",children:X.entityType||m}),i.jsx("h3",{children:X.name})]}),i.jsxs("label",{className:"visibility-toggle",children:[i.jsx("input",{type:"checkbox",checked:X.visible!==!1,onChange:async()=>{await fetch(`${Vr}/entities/${m}/visibility`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({id:X.id,visible:X.visible!==!1})}),$()}}),i.jsx("span",{children:X.visible===!1?"Hidden":"Visible"})]})]}),i.jsx("p",{className:"account-muted",children:X.description}),i.jsxs("p",{className:"account-muted",children:["Campaign: ",X.campaign||"Main"]}),i.jsxs("p",{className:"account-muted",children:["Region: ",X.regionId||""," | Marker: ",X.markerId||""]}),i.jsxs("p",{className:"account-muted",children:["Location: ",X.locationId||""]}),i.jsx("button",{type:"button",className:"fav-btn",onClick:()=>z({...k,...X}),children:"Edit"})]},X.id))})]})}const _0="/api";function y0(){const{id:r}=oh(),d=Ai(),[f,m]=g.useState(null),[p,b]=g.useState("");if(g.useEffect(()=>{(async()=>{try{const A=await fetch(`${_0}/view/region/${r}`),k=await A.json();if(!A.ok)throw new Error(k.error||"Unable to load region");m(k)}catch(A){b(A.message||"Unable to load region")}})()},[r]),p)return i.jsxs("div",{className:"page-container",children:[i.jsx("h1",{children:"Region"}),i.jsx("p",{className:"account-error",children:p})]});if(!f)return i.jsxs("div",{className:"page-container",children:[i.jsx("h1",{children:"Region"}),i.jsx("p",{className:"account-muted",children:"Loading..."})]});const{region:j,locations:C,npcs:y,players:x,majors:E}=f;return i.jsxs("div",{className:"page-container",children:[i.jsx("h1",{children:j?.name||"Region"}),i.jsxs("p",{className:"account-muted",children:["Category: ",j?.category||""]}),i.jsxs("p",{className:"account-muted",children:["Campaign: ",j?.campaign||"Main"]}),i.jsx("button",{type:"button",className:"tab-btn",onClick:()=>d("/people"),children:"View in Viewer Page"}),i.jsxs("div",{className:"view-grid",children:[i.jsxs("div",{className:"view-card",children:[i.jsx("h3",{children:"Locations"}),C?.length?C.map(S=>i.jsx("p",{children:S.name},S.id)):i.jsx("p",{className:"account-muted",children:"None linked."})]}),i.jsxs("div",{className:"view-card",children:[i.jsx("h3",{children:"NPCs"}),y?.length?y.map(S=>i.jsx("p",{children:S.name},S.id)):i.jsx("p",{className:"account-muted",children:"None linked."})]}),i.jsxs("div",{className:"view-card",children:[i.jsx("h3",{children:"Players"}),x?.length?x.map(S=>i.jsx("p",{children:S.name},S.id)):i.jsx("p",{className:"account-muted",children:"None linked."})]}),i.jsxs("div",{className:"view-card",children:[i.jsx("h3",{children:"Major Entities"}),E?.length?E.map(S=>i.jsx("p",{children:S.name},S.id)):i.jsx("p",{className:"account-muted",children:"None linked."})]})]})]})}const x0="/api";function b0(){const{id:r}=oh(),d=Ai(),[f,m]=g.useState(null),[p,b]=g.useState("");if(g.useEffect(()=>{(async()=>{try{const S=await fetch(`${x0}/view/location/${r}`),A=await S.json();if(!S.ok)throw new Error(A.error||"Unable to load location");m(A)}catch(S){b(S.message||"Unable to load location")}})()},[r]),p)return i.jsxs("div",{className:"page-container",children:[i.jsx("h1",{children:"Location"}),i.jsx("p",{className:"account-error",children:p})]});if(!f)return i.jsxs("div",{className:"page-container",children:[i.jsx("h1",{children:"Location"}),i.jsx("p",{className:"account-muted",children:"Loading..."})]});const{location:j,npcs:C,players:y,majors:x}=f;return i.jsxs("div",{className:"page-container",children:[i.jsx("h1",{children:j?.name||"Location"}),i.jsx("p",{className:"account-muted",children:j?.description||"No description provided."}),i.jsxs("p",{className:"account-muted",children:["Campaign: ",j?.campaign||"Main"]}),i.jsx("button",{type:"button",className:"tab-btn",onClick:()=>d("/people"),children:"View in Viewer Page"}),i.jsxs("div",{className:"view-grid",children:[i.jsxs("div",{className:"view-card",children:[i.jsx("h3",{children:"NPCs"}),C?.length?C.map(E=>i.jsx("p",{children:E.name},E.id)):i.jsx("p",{className:"account-muted",children:"None linked."})]}),i.jsxs("div",{className:"view-card",children:[i.jsx("h3",{children:"Players"}),y?.length?y.map(E=>i.jsx("p",{children:E.name},E.id)):i.jsx("p",{className:"account-muted",children:"None linked."})]}),i.jsxs("div",{className:"view-card",children:[i.jsx("h3",{children:"Major Entities"}),x?.length?x.map(E=>i.jsx("p",{children:E.name},E.id)):i.jsx("p",{className:"account-muted",children:"None linked."})]})]})]})}function j0(){const r=Ai(),{user:d,login:f,googleLogin:m,loginGuest:p}=Cn(),[b,j]=g.useState(""),[C,y]=g.useState(""),[x,E]=g.useState(""),[S,A]=g.useState(!1),[k,z]=g.useState(!1);g.useEffect(()=>{d&&r("/",{replace:!0})},[d,r]);const Z=async D=>{if(D.preventDefault(),E(""),!b.trim()||!C){E("Please enter both email and password.");return}if(!S){A(!0);try{await f({email:b.trim(),password:C})}catch($){E($.message||"Unable to login with email.")}finally{A(!1)}}},I=()=>{p(),r("/",{replace:!0})},R=async()=>{if(E(""),!(k||S)){z(!0);try{await m({})}catch(D){E(D.message||"Unable to start Supabase login."),z(!1)}}};return i.jsx("div",{className:"auth-page",children:i.jsxs("div",{className:"auth-modal__content auth-page__content",children:[i.jsx("header",{className:"auth-modal__header",children:i.jsx("h2",{children:"Login"})}),i.jsxs("form",{className:"auth-modal__form",onSubmit:Z,children:[i.jsxs("label",{children:[i.jsx("span",{children:"Email"}),i.jsx("input",{type:"email",value:b,onChange:D=>j(D.target.value),placeholder:"you@example.com"})]}),i.jsxs("label",{children:[i.jsx("span",{children:"Password"}),i.jsx("input",{type:"password",value:C,onChange:D=>y(D.target.value),placeholder:"Enter your password"})]}),i.jsx("button",{type:"submit",className:"auth-modal__google auth-modal__google--alt",disabled:S||k,children:S?"Signing in...":"Sign in with Email"}),i.jsx("button",{type:"button",className:"auth-modal__google auth-modal__google--alt",onClick:I,disabled:S,children:"Continue as Guest"}),i.jsx("p",{className:"auth-modal__note",children:"or continue with Google"}),i.jsxs("button",{type:"button",className:"auth-modal__google",onClick:R,disabled:k||S,children:[i.jsx("span",{className:"auth-modal__google-icon","aria-hidden":"true",children:i.jsxs("svg",{viewBox:"0 0 48 48",role:"presentation",children:[i.jsx("path",{fill:"#EA4335",d:"M24 9.5c3.15 0 5.98 1.08 8.2 3.2l6.12-6.12C34.7 3.08 29.87 1 24 1 14.6 1 6.5 6.35 2.7 14l7.68 5.97C12.38 14.02 17.7 9.5 24 9.5z"}),i.jsx("path",{fill:"#4285F4",d:"M46.5 24.5c0-1.57-.15-3.08-.44-4.55H24v9.1h12.7c-.55 2.96-2.2 5.46-4.69 7.13l7.28 5.66C43.9 37.44 46.5 31.42 46.5 24.5z"}),i.jsx("path",{fill:"#FBBC05",d:"M10.38 28.03A14.47 14.47 0 0 1 9.5 24c0-1.4.24-2.75.68-4.03l-7.67-5.97A23.9 23.9 0 0 0 0 24c0 3.9.93 7.58 2.56 10.85l7.82-6.82z"}),i.jsx("path",{fill:"#34A853",d:"M24 47c6.48 0 11.9-2.13 15.86-5.83l-7.28-5.66c-2.03 1.37-4.64 2.19-8.58 2.19-6.3 0-11.62-4.52-13.66-10.47l-7.68 6C6.5 41.65 14.6 47 24 47z"}),i.jsx("path",{fill:"none",d:"M0 0h48v48H0z"})]})}),k?"Opening Google...":"Sign in with Google"]}),x&&i.jsx("p",{className:"auth-modal__error",children:x})]}),i.jsx("p",{className:"auth-modal__note",children:"Note: Editors must be approved by an admin before autosave is enabled."}),i.jsxs("div",{className:"auth-modal__switch",children:[i.jsx("span",{children:"New here?"}),i.jsx(Vn,{to:"/signup",className:"auth-modal__link",children:"Sign Up"})]})]})})}function w0(){const r=Ai(),{user:d,signup:f,googleLogin:m}=Cn(),[p,b]=g.useState(""),[j,C]=g.useState(""),[y,x]=g.useState(""),[E,S]=g.useState(""),[A,k]=g.useState(!1),[z,Z]=g.useState(!1);g.useEffect(()=>{d&&r("/",{replace:!0})},[d,r]);const I=async D=>{D.preventDefault(),S("");const $=p.trim();if(!$||!j.trim()||!y){S("Please enter a display username, email, and password.");return}if(!(A||z)){k(!0);try{await f({displayName:$,email:j.trim(),password:y})}catch(G){S(G.message||"Unable to sign up with email.")}finally{k(!1)}}},R=async()=>{S("");const D=p.trim();if(!D){S("Please choose a display username before continuing.");return}if(!(z||A)){Z(!0);try{await m({displayName:D})}catch($){S($.message||"Unable to start Supabase signup."),Z(!1)}}};return i.jsx("div",{className:"auth-page",children:i.jsxs("div",{className:"auth-modal__content auth-page__content",children:[i.jsx("header",{className:"auth-modal__header",children:i.jsx("h2",{children:"Sign Up"})}),i.jsxs("form",{className:"auth-modal__form",onSubmit:I,children:[i.jsxs("label",{children:[i.jsx("span",{children:"Username (for display)"}),i.jsx("input",{type:"text",value:p,onChange:D=>b(D.target.value),placeholder:"Choose a display name"})]}),i.jsxs("label",{children:[i.jsx("span",{children:"Email"}),i.jsx("input",{type:"email",value:j,onChange:D=>C(D.target.value),placeholder:"you@example.com"})]}),i.jsxs("label",{children:[i.jsx("span",{children:"Password"}),i.jsx("input",{type:"password",value:y,onChange:D=>x(D.target.value),placeholder:"Create a password"})]}),i.jsx("button",{type:"submit",className:"auth-modal__google auth-modal__google--alt",disabled:A||z,children:A?"Creating account...":"Sign up with Email"}),i.jsx("p",{className:"auth-modal__note",children:"Accounts are secured with Supabase. Use email + password or continue with Google to finish signup."}),i.jsxs("button",{type:"button",className:"auth-modal__google",onClick:R,disabled:z||A,children:[i.jsx("span",{className:"auth-modal__google-icon","aria-hidden":"true",children:i.jsxs("svg",{viewBox:"0 0 48 48",role:"presentation",children:[i.jsx("path",{fill:"#EA4335",d:"M24 9.5c3.15 0 5.98 1.08 8.2 3.2l6.12-6.12C34.7 3.08 29.87 1 24 1 14.6 1 6.5 6.35 2.7 14l7.68 5.97C12.38 14.02 17.7 9.5 24 9.5z"}),i.jsx("path",{fill:"#4285F4",d:"M46.5 24.5c0-1.57-.15-3.08-.44-4.55H24v9.1h12.7c-.55 2.96-2.2 5.46-4.69 7.13l7.28 5.66C43.9 37.44 46.5 31.42 46.5 24.5z"}),i.jsx("path",{fill:"#FBBC05",d:"M10.38 28.03A14.47 14.47 0 0 1 9.5 24c0-1.4.24-2.75.68-4.03l-7.67-5.97A23.9 23.9 0 0 0 0 24c0 3.9.93 7.58 2.56 10.85l7.82-6.82z"}),i.jsx("path",{fill:"#34A853",d:"M24 47c6.48 0 11.9-2.13 15.86-5.83l-7.28-5.66c-2.03 1.37-4.64 2.19-8.58 2.19-6.3 0-11.62-4.52-13.66-10.47l-7.68 6C6.5 41.65 14.6 47 24 47z"}),i.jsx("path",{fill:"none",d:"M0 0h48v48H0z"})]})}),z?"Opening Google...":"Continue with Google"]}),E&&i.jsx("p",{className:"auth-modal__error",children:E})]}),i.jsx("p",{className:"auth-modal__note",children:"New accounts start as pending until an admin approves them."}),i.jsxs("div",{className:"auth-modal__switch",children:[i.jsx("span",{children:"Already have an account?"}),i.jsx(Vn,{to:"/login",className:"auth-modal__link",children:"Login"})]})]})})}const zn={compendium:i.jsx("svg",{viewBox:"0 0 24 24",role:"presentation",children:i.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),atlas:i.jsxs("svg",{viewBox:"0 0 24 24",role:"presentation",children:[i.jsx("path",{d:"M12 21s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 7.2c0 7.3-8 11.8-8 11.8z",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("circle",{cx:"12",cy:"10",r:"3",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),map:i.jsxs("svg",{viewBox:"0 0 24 24",role:"presentation",children:[i.jsx("path",{d:"M9 4 3.5 6.5v13L9 17l6 2.5 5.5-2.5v-13L15 6.5 9 4z",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round"}),i.jsx("path",{d:"M9 4v13M15 6.5V20",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]}),campaign:i.jsxs("svg",{viewBox:"0 0 24 24",role:"presentation",children:[i.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("polyline",{points:"14 2 14 8 20 8",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("line",{x1:"10",y1:"9",x2:"8",y2:"9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),viewing:i.jsxs("svg",{viewBox:"0 0 24 24",role:"presentation",children:[i.jsx("path",{d:"M2 12s4-7 10-7 10 7 10 7-4 7-10 7-10-7-10-7z",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"none",stroke:"currentColor",strokeWidth:"1.5"})]}),admin:i.jsxs("svg",{viewBox:"0 0 24 24",role:"presentation",children:[i.jsx("path",{d:"M12 3 6 5.8v6.4c0 4 2.8 7.9 6 8.8 3.2-.9 6-4.8 6-8.8V5.8L12 3z",fill:"none",stroke:"currentColor",strokeWidth:"1.4"}),i.jsx("path",{d:"M10 11.5 12 13l3-3",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"})]}),login:i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),i.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),logout:i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),i.jsx("polyline",{points:"16 17 21 12 16 7"}),i.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),account:i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"7",r:"4"}),i.jsx("path",{d:"M4 21a8 8 0 0 1 16 0"}),i.jsx("path",{d:"M16 5.5a4 4 0 0 1 0 7"})]}),players:i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"8",cy:"7",r:"3"}),i.jsx("circle",{cx:"17",cy:"7",r:"3"}),i.jsx("path",{d:"M2 21a6 6 0 0 1 12 0"}),i.jsx("path",{d:"M12 21a6 6 0 0 1 10 0"})]}),progress:i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"12",r:"9"}),i.jsx("path",{d:"M10 14 14 10"}),i.jsx("path",{d:"m12.5 7.5-1 5-5 1 10-3.5z"})]}),about:i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"12",r:"9"}),i.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),i.jsx("circle",{cx:"12",cy:"8",r:"0.8"})]})},pg=[{to:"/",label:"Map",icon:zn.map},{to:"/campaign",label:"Campaign",icon:zn.campaign},{to:"/atlas",label:"Atlas",icon:zn.atlas},{to:"/compendium",label:"Compendium",icon:zn.compendium,children:[{to:"/compendium",label:"Almanac"},{to:"/compendium/societies",label:"Societies"},{to:"/compendium/cosmos",label:"Cosmos"},{to:"/compendium/heroes",label:"Heroes"}]},{to:"/people",label:"People",icon:zn.viewing},{to:"/players",label:"Players",icon:zn.players},{to:"/progress",label:"Progress",icon:zn.progress},{to:"/about",label:"About",icon:zn.about}];function S0(){const r=si(),d=Ai(),{user:f,role:m,logout:p,loginGuest:b}=Cn(),[j,C]=g.useState(!1),x=m==="guest"?"Exit Guest":"Logout",E=g.useMemo(()=>`${"/p15/".replace(/\/$/,"")}/icon.svg`,[]),S=I=>{I.preventDefault(),C(R=>!R)},A=()=>C(!1),k=()=>C(!1);g.useEffect(()=>{r.pathname.startsWith("/compendium")||C(!1)},[r.pathname]);const z=()=>{p(),d("/")},Z=m==="admin"?[...pg,{to:"/admin",label:"Admin",icon:zn.admin}]:pg;return i.jsx(i.Fragment,{children:i.jsxs("aside",{className:"azterra-sidebar","aria-label":"Azterra navigation",onMouseLeave:A,children:[i.jsxs("div",{className:"azterra-sidebar__brand",children:[i.jsx("div",{className:"azterra-sidebar__brand-mark",children:i.jsx("img",{src:E,alt:"Azterra icon",className:"azterra-sidebar__brand-image"})}),i.jsx("div",{className:"azterra-sidebar__brand-text",children:i.jsx("span",{children:"Azterra"})})]}),i.jsx("nav",{className:"azterra-nav",children:Z.map(({to:I,label:R,icon:D,children:$,isDisabled:G})=>{const X=r.pathname===I||I!=="/"&&r.pathname.startsWith(I),ve=R==="Compendium",F=ve&&j||X,ue=`azterra-nav__item ${$?"azterra-nav__item--parent":""} ${ve?"azterra-nav__item--compendium":""} ${ve&&j?"azterra-nav__item--open":""}`;return i.jsxs("div",{className:ue,children:[i.jsxs(Vn,{to:I,className:`azterra-nav__link ${F?"azterra-nav__link--active":""} ${G?"azterra-nav__link--disabled":""}`,"aria-current":F?"page":void 0,"aria-haspopup":$?"true":void 0,"aria-expanded":ve?j:void 0,"aria-disabled":G?"true":void 0,onClick:ve?S:G?U=>U.preventDefault():void 0,children:[i.jsx("span",{className:"azterra-nav__icon","aria-hidden":"true",children:D}),i.jsx("span",{className:"azterra-nav__label",children:R}),ve&&i.jsx("span",{className:`azterra-nav__chevron ${j?"azterra-nav__chevron--open":""}`,"aria-hidden":"true",children:i.jsx("svg",{viewBox:"0 0 24 24",role:"presentation",children:i.jsx("polyline",{points:"6 9 12 15 18 9",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),F&&i.jsx("div",{className:"azterra-nav__indicator"})]}),$&&i.jsx("div",{className:"azterra-nav__submenu",role:"menu","aria-label":`${R} shortcuts`,children:$.map(U=>{const xe=r.pathname===U.to;return i.jsx(Vn,{to:U.to,className:`azterra-nav__sublink ${xe?"azterra-nav__sublink--active":""}`,role:"menuitem",onClick:ve?k:void 0,children:U.label},U.to)})})]},I)})}),i.jsxs("div",{className:"azterra-sidebar__footer",children:[!f&&i.jsxs("div",{className:"azterra-sidebar__guest",children:[i.jsxs(Vn,{to:"/login",className:"azterra-nav__link",title:"Login",children:[i.jsx("span",{className:"azterra-nav__icon text-[#ffd700]",children:zn.login}),i.jsx("span",{className:"azterra-nav__label",children:"Login"})]}),i.jsxs(Vn,{to:"/signup",className:"azterra-nav__link",title:"Sign Up",children:[i.jsx("span",{className:"azterra-nav__icon text-[#ffd700]",children:zn.account}),i.jsx("span",{className:"azterra-nav__label",children:"Sign Up"})]}),i.jsxs("button",{type:"button",className:"azterra-nav__link azterra-nav__link--muted",onClick:()=>{b(),d("/")},title:"Browse as guest",children:[i.jsx("span",{className:"azterra-nav__icon text-[#ffd700]",children:zn.login}),i.jsx("span",{className:"azterra-nav__label",children:"Login as Guest"})]})]}),f&&i.jsxs("div",{className:"azterra-sidebar__account",children:[i.jsxs("div",{className:"azterra-sidebar__account-row",children:[i.jsx("span",{className:"azterra-nav__icon text-[#ffd700]",children:zn.login}),i.jsxs("div",{className:"azterra-sidebar__account-text",children:[i.jsx("span",{className:"azterra-sidebar__account-name",children:f.name||"User"}),i.jsx("span",{className:"azterra-sidebar__account-role",children:m})]})]}),i.jsxs(Vn,{to:"/account",className:"azterra-nav__link",title:"Account settings","data-label":"Account",children:[i.jsx("span",{className:"azterra-nav__icon text-[#ffd700]",children:zn.account}),i.jsx("span",{className:"azterra-nav__label",children:"Account"})]}),i.jsxs("button",{type:"button",className:"azterra-nav__link azterra-nav__link--muted",onClick:z,"data-label":"Logout",title:"Logout",children:[i.jsx("span",{className:"azterra-nav__icon",children:zn.logout}),i.jsx("span",{className:"azterra-nav__label",children:x})]})]})]})]})})}function gg({title:r,tabs:d,renderBottomTabs:f=!1}){const m=si(),{activeIndex:p,prevTab:b,nextTab:j}=g.useMemo(()=>{if(!d||d.length===0)return{activeIndex:-1,prevTab:null,nextTab:null};const C=d.findIndex(E=>{const S=E.to||"";return E.end?m.pathname===(S.startsWith("/")?S:`/${S}`)||m.pathname===S:m.pathname.startsWith(S.startsWith("/")?S:`/${S}`)||m.pathname.startsWith(S)});if(C===-1)return{activeIndex:-1,prevTab:null,nextTab:null};const y=d[(C-1+d.length)%d.length],x=d[(C+1)%d.length];return{activeIndex:C,prevTab:y,nextTab:x}},[m.pathname,d]);return i.jsxs("div",{className:"page-fullscreen",children:[i.jsx("div",{className:"page-content-full",children:i.jsx(my,{})}),f&&d&&d.length>0&&i.jsx("div",{className:"compendium-tabbar-wrapper",children:i.jsxs("nav",{className:"compendium-tabbar","aria-label":`${r} pages`,children:[b&&i.jsxs(Ac,{to:b.to,end:b.end,className:({isActive:C})=>`compendium-tab compendium-tab__arrow ${C?"compendium-tab--active":""}`,children:[" ",b.label]}),i.jsx("div",{className:"compendium-tabbar__list",children:d.map(C=>i.jsx(Ac,{to:C.to,end:C.end,className:({isActive:y})=>`compendium-tab ${y?"compendium-tab--active":""}`,children:C.label},C.to))}),j&&i.jsxs(Ac,{to:j.to,end:j.end,className:({isActive:C})=>`compendium-tab compendium-tab__arrow ${C?"compendium-tab--active":""}`,children:[j.label," "]})]})})]})}function N0(){const{user:r,loading:d}=Cn();return g.useEffect(()=>{},[]),g.useEffect(()=>{if(!d&&r){const m=`${"/p15/".replace(/\/$/,"")||""}/#/auth/callback`;window.location.replace(m)}},[r,d]),i.jsxs("div",{className:"page-container",children:[i.jsx("h1",{children:"Completing login"}),i.jsx("p",{children:"Finishing Supabase sign-in"})]})}function C0(){const r=Ai(),{user:d,loading:f}=Cn();return g.useEffect(()=>{!f&&d&&r("/campaign",{replace:!0})},[d,f,r]),i.jsxs("div",{className:"page-container",children:[i.jsx("h1",{children:"Completing login"}),i.jsx("p",{children:"Hang tight while we finish signing you in."})]})}function Gc(r){return Math.floor((r-10)/2)}function Nc(r){return r>=0?`+${r}`:`${r}`}function E0(r,d,f){const m=Gc(r);return f?m+d:m}function Cc(r,d,f,m=!1){const p=Gc(r);return m?p+d*2:f?p+d:p}function Kd(r,d=0){return 10+r+d}function T0(r,d=0){return Gc(r)+d}const Xg={Acrobatics:"dex","Animal Handling":"wis",Arcana:"int",Athletics:"str",Deception:"cha",History:"int",Insight:"wis",Intimidation:"cha",Investigation:"int",Medicine:"wis",Nature:"int",Perception:"wis",Performance:"cha",Persuasion:"cha",Religion:"int","Sleight of Hand":"dex",Stealth:"dex",Survival:"wis"},A0={str:"Strength",dex:"Dexterity",con:"Constitution",int:"Intelligence",wis:"Wisdom",cha:"Charisma"};function L0(){return Object.keys(Xg).sort()}const k0=["Actions","Spells","Inventory","Features","Description","Notes"],M0=["Attack","Action","Bonus","Reaction","Other"],z0=({type:r})=>{const d={melee:"",ranged:"",spell:"",default:""};return i.jsx("span",{children:d[r]||d.default})};function R0(){const[r,d]=g.useState(1),[f,m]=g.useState("Actions"),[p,b]=g.useState("Attack"),[j,C]=g.useState(null),[y,x]=g.useState(0),[E,S]=g.useState(0),[A,k]=g.useState(!1),[z,Z]=g.useState(null),I=(P,T="info")=>{Z({message:P,type:T}),setTimeout(()=>Z(null),3e3)},R=g.useMemo(()=>bt.find(P=>P.id===r)||bt[0],[r]),D=R.sheet||{},$=D.abilityScores||R.stats||{},G=D.proficiencies||{},X=D.combat||{},ve=R.profBonus||2,F=parseInt(X.hitPoints||R.hp)||0,ue=j!==null?j:F,U=g.useMemo(()=>{const P={};return Object.entries($).forEach(([T,Q])=>{P[T]=Gc(Q)}),P},[$]),xe=g.useMemo(()=>{const P=G.savingThrows||[];return{str:P.some(T=>T.toLowerCase().includes("strength")),dex:P.some(T=>T.toLowerCase().includes("dexterity")),con:P.some(T=>T.toLowerCase().includes("constitution")),int:P.some(T=>T.toLowerCase().includes("intelligence")),wis:P.some(T=>T.toLowerCase().includes("wisdom")),cha:P.some(T=>T.toLowerCase().includes("charisma"))}},[G.savingThrows]),je=g.useMemo(()=>{const P=G.skills||R.skills||[];return new Set(P.map(Q=>Q.toLowerCase()))},[G.skills,R.skills]),Ce=g.useMemo(()=>{const P=Cc($.wis||10,ve,je.has("perception")),T=Cc($.int||10,ve,je.has("investigation")),Q=Cc($.wis||10,ve,je.has("insight"));return{perception:Kd(P),investigation:Kd(T),insight:Kd(Q)}},[$,ve,je]),qe=D.attacks||[],Ze=(X.hitDice||"").match(/(\d+)d(\d+)/),Ie=Ze?parseInt(Ze[1]):R.level||1,J=Ze?parseInt(Ze[2]):8,B=Math.max(0,Ie-E),ee=()=>{if(B>0){const P=U.con||0,T=Math.floor(J/2)+1+P,Q=Math.min(F,ue+T);C(Q),S(le=>le+1),I(` Short Rest: Healed ${T} HP (${B-1} hit dice remaining)`,"success")}else I(" Short Rest: No hit dice available to spend","warning")},K=()=>{C(F),x(0);const P=Math.max(1,Math.floor(Ie/2));S(T=>Math.max(0,T-P)),I(` Long Rest: HP fully restored, ${P} hit dice recovered`,"success")};return i.jsxs("div",{className:"character-sheet-page custom-scrollbar",children:[z&&i.jsx("div",{className:`sheet-toast sheet-toast--${z.type}`,children:z.message}),A&&i.jsx("div",{className:"sheet-modal-backdrop",onClick:()=>k(!1),children:i.jsxs("div",{className:"sheet-modal",onClick:P=>P.stopPropagation(),children:[i.jsxs("header",{className:"sheet-modal__header",children:[i.jsx("h2",{children:" Sheet Settings"}),i.jsx("button",{className:"sheet-modal__close",onClick:()=>k(!1),children:""})]}),i.jsxs("div",{className:"sheet-modal__content",children:[i.jsxs("div",{className:"sheet-modal__section",children:[i.jsx("h3",{className:"sheet-card__title",children:"Character Info"}),i.jsxs("p",{children:[i.jsx("strong",{children:"Name:"})," ",R.name]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Class:"})," ",R.class," (Level ",R.level,")"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Race:"})," ",R.race]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Background:"})," ",R.background]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Alignment:"})," ",R.alignment]})]}),i.jsxs("div",{className:"sheet-modal__section",children:[i.jsx("h3",{className:"sheet-card__title",children:"Resources"}),i.jsxs("p",{children:[i.jsx("strong",{children:"Hit Dice:"})," ",B," / ",Ie," (d",J,")"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"HP:"})," ",ue," / ",F]}),y>0&&i.jsxs("p",{children:[i.jsx("strong",{children:"Temp HP:"})," ",y]})]}),i.jsxs("div",{className:"sheet-modal__section",children:[i.jsx("h3",{className:"sheet-card__title",children:"Quick Actions"}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[i.jsx("button",{className:"sheet-header__btn",onClick:()=>{C(F),I("HP reset to max","info")},children:"Reset HP"}),i.jsx("button",{className:"sheet-header__btn",onClick:()=>{S(0),I("Hit dice reset","info")},children:"Reset Hit Dice"}),i.jsx("button",{className:"sheet-header__btn",onClick:()=>{x(0),I("Temp HP cleared","info")},children:"Clear Temp HP"})]})]})]})]})}),i.jsxs("header",{className:"sheet-header",children:[i.jsx("div",{className:"sheet-header__profile",children:i.jsxs("div",{children:[i.jsx("h1",{className:"sheet-header__name",children:R.name}),i.jsxs("p",{className:"sheet-header__meta",children:[R.race," ",R.class,"  Level ",R.level]})]})}),i.jsxs("div",{className:"sheet-header__actions",children:[i.jsx("select",{className:"sheet-header__btn",value:r,onChange:P=>{d(parseInt(P.target.value)),C(null),S(0),x(0)},children:bt.map(P=>i.jsx("option",{value:P.id,children:P.name},P.id))}),i.jsx("button",{className:"sheet-header__btn sheet-header__btn--rest",onClick:ee,title:`Spend a hit die to heal (${B} available)`,children:" Short Rest"}),i.jsx("button",{className:"sheet-header__btn sheet-header__btn--rest",onClick:K,title:"Restore all HP and recover half your hit dice",children:" Long Rest"}),i.jsx("button",{className:"sheet-header__btn",onClick:()=>k(!0),title:"Open settings",children:""}),i.jsx(Vn,{to:"/campaign",className:"sheet-header__btn",children:" Back"})]})]}),i.jsxs("div",{className:"sheet-grid",children:[i.jsxs("div",{className:"sheet-column sheet-column--stats",children:[i.jsxs("div",{className:"sheet-card",children:[i.jsx("h2",{className:"sheet-card__title",children:"Ability Scores"}),i.jsx("div",{className:"ability-scores",children:Object.entries($).map(([P,T])=>i.jsxs("div",{className:"ability-card",children:[i.jsx("span",{className:"ability-card__abbr",children:P.toUpperCase()}),i.jsx("span",{className:"ability-card__mod",children:Nc(U[P])}),i.jsx("span",{className:"ability-card__score",children:T})]},P))})]}),i.jsxs("div",{className:"sheet-card",children:[i.jsx("h2",{className:"sheet-card__title",children:"Saving Throws"}),i.jsx("div",{className:"saving-throws",children:Object.entries(A0).map(([P,T])=>{const Q=xe[P],le=E0($[P]||10,ve,Q);return i.jsxs("div",{className:"save-row",children:[i.jsx("span",{className:`save-row__prof ${Q?"save-row__prof--active":""}`}),i.jsx("span",{className:"save-row__name",children:T}),i.jsx("span",{className:"save-row__mod",children:Nc(le)})]},P)})})]}),i.jsxs("div",{className:"sheet-card",children:[i.jsx("h2",{className:"sheet-card__title",children:"Passive Senses"}),i.jsxs("div",{className:"passive-senses",children:[i.jsxs("div",{className:"passive-row",children:[i.jsx("span",{className:"passive-row__label",children:"Perception"}),i.jsx("span",{className:"passive-row__value",children:Ce.perception})]}),i.jsxs("div",{className:"passive-row",children:[i.jsx("span",{className:"passive-row__label",children:"Investigation"}),i.jsx("span",{className:"passive-row__value",children:Ce.investigation})]}),i.jsxs("div",{className:"passive-row",children:[i.jsx("span",{className:"passive-row__label",children:"Insight"}),i.jsx("span",{className:"passive-row__value",children:Ce.insight})]})]}),D.core?.raceTraits?.includes("Darkvision")&&i.jsxs("div",{className:"passive-row",style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px solid rgba(255,255,255,0.06)"},children:[i.jsx("span",{className:"passive-row__label",children:"Darkvision"}),i.jsx("span",{className:"passive-row__value",children:"60 ft"})]})]}),i.jsxs("div",{className:"sheet-card",children:[i.jsx("h2",{className:"sheet-card__title",children:"Proficiencies"}),i.jsxs("div",{className:"proficiency-list",children:[(G.armorWeapons||[]).map((P,T)=>i.jsx("span",{className:"proficiency-chip",children:P},T)),(G.tools||[]).map((P,T)=>i.jsx("span",{className:"proficiency-chip",children:P},`tool-${T}`))]})]})]}),i.jsxs("div",{className:"sheet-column sheet-column--skills",children:[i.jsx("div",{className:"sheet-card",children:i.jsxs("div",{className:"combat-stats",children:[i.jsxs("div",{className:"combat-stat combat-stat--shield",children:[i.jsx("span",{className:"combat-stat__label",children:"AC"}),i.jsx("span",{className:"combat-stat__value",children:X.armorClass||R.ac})]}),i.jsxs("div",{className:"combat-stat combat-stat--shield",children:[i.jsx("span",{className:"combat-stat__label",children:"Initiative"}),i.jsx("span",{className:"combat-stat__value",children:Nc(T0($.dex||10))})]}),i.jsxs("div",{className:"combat-stat",children:[i.jsx("span",{className:"combat-stat__label",children:"Speed"}),i.jsx("span",{className:"combat-stat__value",children:R.speed||30})]})]})}),i.jsxs("div",{className:"sheet-card",children:[i.jsx("h2",{className:"sheet-card__title",children:"Hit Points"}),i.jsxs("div",{className:"hp-panel",children:[i.jsxs("div",{className:"hp-display",children:[i.jsx("input",{type:"number",className:"hp-input hp-input--current",value:ue,onChange:P=>C(parseInt(P.target.value)||0),min:0}),i.jsx("span",{className:"hp-divider",children:"/"}),i.jsx("input",{type:"number",className:"hp-input",value:F,readOnly:!0}),i.jsx("span",{className:"hp-divider",children:"+"}),i.jsx("input",{type:"number",className:"hp-input",value:y,onChange:P=>x(parseInt(P.target.value)||0),min:0,placeholder:"0"})]}),i.jsxs("div",{className:"hp-labels",children:[i.jsx("span",{children:"Current"}),i.jsx("span",{children:"Max"}),i.jsx("span",{children:"Temp"})]})]})]}),i.jsx("div",{className:"sheet-card",children:i.jsxs("div",{className:"combat-stats",style:{gridTemplateColumns:"1fr 1fr"},children:[i.jsxs("div",{className:"combat-stat",children:[i.jsx("span",{className:"combat-stat__label",children:"Proficiency"}),i.jsxs("span",{className:"combat-stat__value",children:["+",ve]})]}),i.jsxs("div",{className:"combat-stat",children:[i.jsx("span",{className:"combat-stat__label",children:"Hit Dice"}),i.jsx("span",{className:"combat-stat__value",style:{fontSize:"1rem"},children:X.hitDice||""})]})]})}),i.jsxs("div",{className:"sheet-card",style:{flex:1},children:[i.jsx("h2",{className:"sheet-card__title",children:"Skills"}),i.jsx("div",{className:"skills-table custom-scrollbar",children:L0().map(P=>{const T=Xg[P],Q=je.has(P.toLowerCase()),le=Cc($[T]||10,ve,Q);return i.jsxs("div",{className:"skill-row",children:[i.jsx("span",{className:`skill-row__prof ${Q?"skill-row__prof--active":""}`}),i.jsx("span",{className:"skill-row__ability",children:T.toUpperCase()}),i.jsx("span",{className:"skill-row__name",children:P}),i.jsx("span",{className:"skill-row__mod",children:Nc(le)})]},P)})})]})]}),i.jsx("div",{className:"sheet-column sheet-column--actions",children:i.jsxs("div",{className:"sheet-card actions-panel",children:[i.jsx("div",{className:"actions-tabs",children:k0.map(P=>i.jsx("button",{className:`actions-tab ${f===P?"actions-tab--active":""}`,onClick:()=>m(P),children:P},P))}),i.jsxs("div",{className:"actions-content custom-scrollbar",children:[f==="Actions"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"action-filters",children:M0.map(P=>i.jsx("button",{className:`action-chip ${p===P?"action-chip--active":""}`,onClick:()=>b(P),children:P},P))}),i.jsx("div",{className:"attack-list",children:qe.length>0?qe.map((P,T)=>i.jsxs("div",{className:"attack-item",children:[i.jsx("div",{className:"attack-item__icon",children:i.jsx(z0,{type:P.tags?.includes("Melee")?"melee":P.tags?.includes("Ranged")?"ranged":P.tags?.includes("Spell")?"spell":"default"})}),i.jsx("span",{className:"attack-item__name",children:P.name}),i.jsx("span",{className:"attack-item__range",children:P.tags?.join(", ")}),i.jsx("span",{className:"attack-item__hit",children:P.bonus}),i.jsx("span",{className:"attack-item__damage",children:P.damage})]},T)):i.jsx("p",{style:{color:"var(--sheet-text-muted)",fontStyle:"italic"},children:"No attacks configured."})}),i.jsxs("div",{style:{marginTop:"1.5rem",paddingTop:"1rem",borderTop:"1px solid rgba(255,255,255,0.06)"},children:[i.jsx("h3",{className:"sheet-card__title",children:"Actions in Combat"}),i.jsx("div",{className:"proficiency-list",style:{gap:"0.5rem"},children:["Attack","Cast a Spell","Dash","Disengage","Dodge","Help","Hide","Ready","Search","Use an Object"].map(P=>i.jsx("span",{className:"proficiency-chip",children:P},P))})]})]}),f==="Spells"&&i.jsx("div",{children:D.spellsDetail?.ability&&D.spellsDetail.ability!=="None"?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"combat-stats",style:{marginBottom:"1rem"},children:[i.jsxs("div",{className:"combat-stat",children:[i.jsx("span",{className:"combat-stat__label",children:"Spell DC"}),i.jsx("span",{className:"combat-stat__value",children:D.spellsDetail.saveDC})]}),i.jsxs("div",{className:"combat-stat",children:[i.jsx("span",{className:"combat-stat__label",children:"Attack"}),i.jsx("span",{className:"combat-stat__value",children:D.spellsDetail.attackBonus})]}),i.jsxs("div",{className:"combat-stat",children:[i.jsx("span",{className:"combat-stat__label",children:"Ability"}),i.jsx("span",{className:"combat-stat__value",style:{fontSize:"0.9rem"},children:D.spellsDetail.ability?.slice(0,3).toUpperCase()})]})]}),i.jsx("p",{style:{fontSize:"0.85rem",color:"var(--sheet-text-muted)",marginBottom:"0.75rem"},children:D.spellsDetail.slots}),i.jsx("div",{className:"proficiency-list",children:(D.spellsDetail.known||R.spells||[]).map((P,T)=>i.jsx("span",{className:"proficiency-chip",children:P},T))})]}):i.jsx("p",{style:{color:"var(--sheet-text-muted)",fontStyle:"italic"},children:"This character does not cast spells."})}),f==="Inventory"&&i.jsxs("div",{className:"proficiency-list",style:{gap:"0.5rem"},children:[(D.equipmentDetail?.starting||R.equipment||[]).map((P,T)=>i.jsx("span",{className:"proficiency-chip",children:P},T)),D.equipmentDetail?.wealth&&i.jsxs("span",{className:"proficiency-chip",style:{background:"rgba(207, 170, 104, 0.15)",borderColor:"var(--sheet-accent)"},children:[" ",D.equipmentDetail.wealth]})]}),f==="Features"&&i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("h3",{className:"sheet-card__title",children:"Class Features"}),i.jsx("div",{className:"proficiency-list",children:(D.features?.classFeatures||R.abilities||[]).map((P,T)=>i.jsx("span",{className:"proficiency-chip",children:P},T))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"sheet-card__title",children:"Racial Traits"}),i.jsx("div",{className:"proficiency-list",children:(D.features?.racialTraits||D.core?.raceTraits||[]).map((P,T)=>i.jsx("span",{className:"proficiency-chip",children:P},T))})]}),D.features?.feats?.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"sheet-card__title",children:"Feats"}),i.jsx("div",{className:"proficiency-list",children:D.features.feats.map((P,T)=>i.jsx("span",{className:"proficiency-chip",children:P},T))})]})]}),f==="Description"&&i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("h3",{className:"sheet-card__title",children:"Appearance"}),i.jsx("p",{style:{color:"var(--sheet-text)",lineHeight:1.6,margin:0},children:D.core?.appearance||"No appearance description."})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"sheet-card__title",children:"Backstory"}),i.jsx("p",{style:{color:"var(--sheet-text)",lineHeight:1.6,margin:0},children:D.core?.backstory||R.lore||"No backstory written."})]}),D.personality&&i.jsxs("div",{children:[i.jsx("h3",{className:"sheet-card__title",children:"Personality"}),i.jsx("div",{className:"proficiency-list",children:D.personality.traits?.map((P,T)=>i.jsx("span",{className:"proficiency-chip",children:P},T))})]})]}),f==="Notes"&&i.jsxs("div",{children:[i.jsx("p",{style:{color:"var(--sheet-text)",lineHeight:1.6,margin:0},children:D.extras?.notes||R.notes||"No notes."}),G.languages&&i.jsxs("div",{style:{marginTop:"1rem"},children:[i.jsx("h3",{className:"sheet-card__title",children:"Languages"}),i.jsx("div",{className:"proficiency-list",children:G.languages.map((P,T)=>i.jsx("span",{className:"proficiency-chip",children:P},T))})]})]})]})]})})]})]})}const Xd="/api";function O0(){const{token:r,role:d}=Cn(),f=Ai(),m=!r||d==="guest",[p,b]=g.useState([]),[j,C]=g.useState(()=>!m),[y,x]=g.useState(""),[E,S]=g.useState(!1),[A,k]=g.useState(!1),[z,Z]=g.useState(new Set),[I,R]=g.useState(new Set),[D,$]=g.useState(!1),[G,X]=g.useState(null),[ve,F]=g.useState(!1),ue=g.useMemo(()=>[{id:"guest-c1",name:"Dormfall Arc",ownerName:"Guest Preview",lastUsed:Date.now(),characters:[{id:"g-1",name:"Valen Arctis",class:"Wayfarer",race:"Human",level:7,lastUsed:Date.now()},{id:"g-2",name:"Isolde Kelm",class:"Battlemage",race:"Elf",level:6,lastUsed:Date.now()-2e4}]},{id:"guest-c2",name:"Sunspire Detour",ownerName:"Guest Preview",lastUsed:Date.now()-6e5,characters:[{id:"g-3",name:"Merrick Thorne",class:"Rogue",race:"Halfling",level:5,lastUsed:Date.now()-6e5}]}],[]),U=g.useCallback(async()=>{if(m){b(ue),C(!1),x("");return}if(!r){C(!1);return}C(!0),x("");try{const K=await fetch(`${Xd}/campaigns/me`,{headers:{Authorization:`Bearer ${r}`}}),P=await K.json();if(!K.ok)throw new Error(P.error||"Failed to load campaigns");b(P.campaigns||[])}catch(K){x(K.message)}finally{C(!1)}},[ue,m,r]);g.useEffect(()=>{U()},[U]);const xe=p.flatMap(K=>(K.characters||[]).map(P=>({...P,campaignId:K.id,campaignName:K.name}))),je=[...p].sort((K,P)=>(P.lastUsed||0)-(K.lastUsed||0)),Ce=[...xe].sort((K,P)=>(P.lastUsed||0)-(K.lastUsed||0)),qe=K=>{Z(P=>{const T=new Set(P);return T.has(K)?T.delete(K):T.add(K),T})},Ze=K=>{R(P=>{const T=new Set(P);return T.has(K)?T.delete(K):T.add(K),T})},Ie=K=>{X(K),$(!0)},J=async()=>{F(!0);try{if(G==="campaign"){for(const K of z)await fetch(`${Xd}/campaigns/${K}`,{method:"DELETE",headers:{Authorization:`Bearer ${r}`}});Z(new Set),S(!1)}else if(G==="character"){for(const K of I){const[P,T]=K.split("::");await fetch(`${Xd}/campaigns/${P}/character/${T}`,{method:"DELETE",headers:{Authorization:`Bearer ${r}`}})}R(new Set),k(!1)}await U()}catch(K){x(K.message)}finally{F(!1),$(!1)}},B=K=>{A?Ze(`${K.campaignId}::${K.id}`):f("/character-sheet",{state:{character:K}})},ee=!m;return i.jsxs("div",{className:"campaigns-page custom-scrollbar",children:[i.jsx("h1",{className:"campaigns-title",children:"Your Campaigns"}),m&&i.jsx("p",{className:"campaigns-subtitle",children:"Guest preview: browse sample campaigns and characters. Log in to create, edit, or delete your own."}),y&&i.jsx("p",{className:"campaigns-error",children:y}),j?i.jsx("p",{className:"campaigns-loading",children:"Loading your campaigns..."}):i.jsxs("div",{className:"campaigns-split-layout",children:[i.jsxs("section",{className:"campaigns-section",children:[i.jsxs("header",{className:"campaigns-section-header",children:[i.jsx("h2",{children:"Campaigns"}),i.jsxs("div",{className:"campaigns-action-bar",children:[i.jsx("button",{className:"campaigns-btn campaigns-btn--add",title:"Create Campaign (Coming Soon)",disabled:!0,children:"+"}),i.jsx("button",{className:`campaigns-btn ${E?"campaigns-btn--active":""}`,disabled:!ee,title:ee?void 0:"Log in to select campaigns",onClick:()=>{S(!E),Z(new Set)},children:E?"Cancel":"Select"}),ee&&E&&z.size>0&&i.jsxs("button",{className:"campaigns-btn campaigns-btn--delete",onClick:()=>Ie("campaign"),children:["Delete (",z.size,")"]})]})]}),i.jsx("div",{className:"campaigns-card-list",children:je.length===0?i.jsx("p",{className:"campaigns-empty",children:"No campaigns yet. Create one to get started!"}):je.map(K=>i.jsxs("div",{className:`campaigns-card campaigns-card--campaign ${z.has(K.id)?"campaigns-card--selected":""}`,onClick:()=>E&&qe(K.id),children:[E&&i.jsx("div",{className:"campaigns-checkbox",children:z.has(K.id)&&""}),i.jsx("h3",{className:"campaigns-card-name",children:K.name}),i.jsxs("p",{className:"campaigns-card-owner",children:["Owned by ",K.ownerName]}),i.jsxs("p",{className:"heroes-card-meta",children:[K.characters?.length||0," character(s)"]})]},K.id))})]}),i.jsxs("section",{className:"campaigns-section",children:[i.jsxs("header",{className:"campaigns-section-header",children:[i.jsx("h2",{children:"Characters"}),i.jsxs("div",{className:"campaigns-action-bar",children:[i.jsx("button",{className:"campaigns-btn campaigns-btn--add",title:"Create Character (Coming Soon)",disabled:!0,children:"+"}),i.jsx("button",{className:`campaigns-btn ${A?"campaigns-btn--active":""}`,disabled:!ee,title:ee?void 0:"Log in to select characters",onClick:()=>{k(!A),R(new Set)},children:A?"Cancel":"Select"}),ee&&A&&I.size>0&&i.jsxs("button",{className:"campaigns-btn campaigns-btn--delete",onClick:()=>Ie("character"),children:["Delete (",I.size,")"]})]})]}),i.jsx("div",{className:"campaigns-card-list",children:Ce.length===0?i.jsx("p",{className:"campaigns-empty",children:"No characters yet. Create one to get started!"}):Ce.map(K=>{const P=`${K.campaignId}::${K.id}`;return i.jsxs("div",{className:`campaigns-card campaigns-card--character ${I.has(P)?"campaigns-card--selected":""}`,onClick:()=>B(K),role:"button",tabIndex:0,onKeyDown:T=>T.key==="Enter"&&B(K),children:[A&&i.jsx("div",{className:"campaigns-checkbox",children:I.has(P)&&""}),i.jsx("h3",{className:"campaigns-card-name",children:K.name}),i.jsxs("div",{className:"campaigns-card-stats",children:[i.jsx("span",{className:"campaigns-stat",children:K.class||"Unknown Class"}),i.jsx("span",{className:"campaigns-stat",children:K.race||"Unknown Race"}),i.jsxs("span",{className:"campaigns-stat",children:["Lvl ",K.level||1]})]}),i.jsxs("p",{className:"campaigns-card-meta",children:["From: ",K.campaignName]})]},P)})})]})]}),D&&i.jsx("div",{className:"campaigns-modal-overlay",onClick:()=>$(!1),children:i.jsxs("div",{className:"campaigns-modal",onClick:K=>K.stopPropagation(),children:[i.jsx("h3",{children:"Confirm Deletion"}),i.jsxs("p",{children:["Are you sure you want to delete ",G==="campaign"?z.size:I.size," ",G,"(s)? This action cannot be undone."]}),i.jsxs("div",{className:"campaigns-modal-actions",children:[i.jsx("button",{className:"campaigns-btn",onClick:()=>$(!1),disabled:ve,children:"Cancel"}),i.jsx("button",{className:"campaigns-btn campaigns-btn--delete",onClick:J,disabled:ve,children:ve?"Deleting...":"Delete"})]})]})})]})}const D0=({title:r})=>i.jsxs("div",{className:"text-center p-10 text-2xl text-[#f5e5c980] italic border border-[#d4af3733] rounded-xl bg-[#00000033]",children:[r," Content Coming Soon"]});function B0(){return i.jsx(Py,{children:i.jsxs("div",{className:"app-shell",children:[i.jsx("a",{className:"skip-link",href:"#main-content",children:"Skip to main content"}),i.jsx(S0,{}),i.jsx("main",{id:"main-content",className:"app-content",role:"main",children:i.jsxs(Ag,{children:[i.jsx(ft,{path:"/",element:i.jsx(Sb,{})}),i.jsx(ft,{path:"/map",element:i.jsx(Op,{to:"/",replace:!0})}),i.jsx(ft,{path:"/about",element:i.jsx(h0,{})}),i.jsx(ft,{path:"/campaign",element:i.jsx(O0,{})}),i.jsx(ft,{path:"/character-sheet",element:i.jsx(R0,{})}),i.jsxs(ft,{path:"/atlas",element:i.jsx(gg,{title:"World Atlas",tabs:[{to:"",label:"View Map",end:!0},{to:"editor",label:"Map Editor"}]}),children:[i.jsx(ft,{index:!0,element:i.jsx(t0,{})}),i.jsx(ft,{path:"editor",element:i.jsx(n0,{})})]}),i.jsxs(ft,{path:"/compendium",element:i.jsx(gg,{title:"Azterra Compendium",renderBottomTabs:!0,tabs:[{to:"",label:"Almanac",end:!0},{to:"societies",label:"Societies"},{to:"cosmos",label:"Cosmos"},{to:"heroes",label:"Heroes"}]}),children:[i.jsx(ft,{index:!0,element:i.jsx(kb,{})}),i.jsx(ft,{path:"societies",element:i.jsx(Kb,{})}),i.jsx(ft,{path:"cosmos",element:i.jsx(D0,{title:"Magic System"})}),i.jsx(ft,{path:"heroes",element:i.jsx(Vb,{})})]}),i.jsx(ft,{path:"/progress",element:i.jsx(i0,{})}),i.jsx(ft,{path:"/lore/aurora-ember",element:i.jsx(Yd,{secretId:"aurora-ember"})}),i.jsx(ft,{path:"/lore/silent-archive",element:i.jsx(Yd,{secretId:"silent-archive"})}),i.jsx(ft,{path:"/lore/gilded-horizon",element:i.jsx(Yd,{secretId:"gilded-horizon"})}),i.jsx(ft,{path:"/account",element:i.jsx(a0,{})}),i.jsx(ft,{path:"/dashboard",element:i.jsx(u0,{})}),i.jsx(ft,{path:"/login",element:i.jsx(j0,{})}),i.jsx(ft,{path:"/signup",element:i.jsx(w0,{})}),i.jsx(ft,{path:"/auth/callback",element:i.jsx(C0,{})}),i.jsx(ft,{path:"/players",element:i.jsx(r0,{})}),i.jsx(ft,{path:"/players/:id",element:i.jsx(c0,{})}),i.jsx(ft,{path:"/people",element:i.jsx(p0,{})}),i.jsx(ft,{path:"/viewing",element:i.jsx(Op,{to:"/people",replace:!0})}),i.jsx(ft,{path:"/admin/entities",element:i.jsx(v0,{})}),i.jsx(ft,{path:"/region/:id",element:i.jsx(y0,{})}),i.jsx(ft,{path:"/location/:id",element:i.jsx(b0,{})}),i.jsx(ft,{path:"/admin",element:i.jsx(Qb,{})})]})})]})})}function P0(){const r="/p15/".replace(/\/$/,"");return typeof window<"u"&&window.location.pathname===`${r}/auth/callback`?i.jsx(By,{basename:r||"/",children:i.jsx(Ag,{children:i.jsx(ft,{path:"/auth/callback",element:i.jsx(N0,{})})})}):i.jsx(B0,{})}j_.createRoot(document.getElementById("root")).render(i.jsx(jx,{children:i.jsx(wx,{children:i.jsx(hx,{children:i.jsx(fx,{children:i.jsx(Mx,{children:i.jsx(P0,{})})})})})}));
