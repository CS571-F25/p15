(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))m(p);new MutationObserver(p=>{for(const b of p)if(b.type==="childList")for(const j of b.addedNodes)j.tagName==="LINK"&&j.rel==="modulepreload"&&m(j)}).observe(document,{childList:!0,subtree:!0});function f(p){const b={};return p.integrity&&(b.integrity=p.integrity),p.referrerPolicy&&(b.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?b.credentials="include":p.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function m(p){if(p.ep)return;p.ep=!0;const b=f(p);fetch(p.href,b)}})();function th(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Md={exports:{}},Br={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pp;function o_(){if(pp)return Br;pp=1;var r=Symbol.for("react.transitional.element"),h=Symbol.for("react.fragment");function f(m,p,b){var j=null;if(b!==void 0&&(j=""+b),p.key!==void 0&&(j=""+p.key),"key"in p){b={};for(var C in p)C!=="key"&&(b[C]=p[C])}else b=p;return p=b.ref,{$$typeof:r,type:m,key:j,ref:p!==void 0?p:null,props:b}}return Br.Fragment=h,Br.jsx=f,Br.jsxs=f,Br}var gp;function c_(){return gp||(gp=1,Md.exports=o_()),Md.exports}var i=c_(),zd={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vp;function u_(){if(vp)return Ve;vp=1;var r=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),j=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),k=Symbol.iterator;function M(T){return T===null||typeof T!="object"?null:(T=k&&T[k]||T["@@iterator"],typeof T=="function"?T:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,V={};function O(T,$,oe){this.props=T,this.context=$,this.refs=V,this.updater=oe||B}O.prototype.isReactComponent={},O.prototype.setState=function(T,$){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,$,"setState")},O.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function D(){}D.prototype=O.prototype;function q(T,$,oe){this.props=T,this.context=$,this.refs=V,this.updater=oe||B}var ae=q.prototype=new D;ae.constructor=q,H(ae,O.prototype),ae.isPureReactComponent=!0;var F=Array.isArray;function xe(){}var J={H:null,A:null,T:null,S:null},ce=Object.prototype.hasOwnProperty;function U(T,$,oe){var he=oe.ref;return{$$typeof:r,type:T,key:$,ref:he!==void 0?he:null,props:oe}}function be(T,$){return U(T.type,$,T.props)}function we(T){return typeof T=="object"&&T!==null&&T.$$typeof===r}function Ae(T){var $={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(oe){return $[oe]})}var He=/\/+/g;function qe(T,$){return typeof T=="object"&&T!==null&&T.key!=null?Ae(""+T.key):$.toString(36)}function _e(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(xe,xe):(T.status="pending",T.then(function($){T.status==="pending"&&(T.status="fulfilled",T.value=$)},function($){T.status==="pending"&&(T.status="rejected",T.reason=$)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function A(T,$,oe,he,ge){var ye=typeof T;(ye==="undefined"||ye==="boolean")&&(T=null);var ke=!1;if(T===null)ke=!0;else switch(ye){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(T.$$typeof){case r:case h:ke=!0;break;case E:return ke=T._init,A(ke(T._payload),$,oe,he,ge)}}if(ke)return ge=ge(T),ke=he===""?"."+qe(T,0):he,F(ge)?(oe="",ke!=null&&(oe=ke.replace(He,"$&/")+"/"),A(ge,$,oe,"",function(Je){return Je})):ge!=null&&(we(ge)&&(ge=be(ge,oe+(ge.key==null||T&&T.key===ge.key?"":(""+ge.key).replace(He,"$&/")+"/")+ke)),$.push(ge)),1;ke=0;var Se=he===""?".":he+":";if(F(T))for(var Be=0;Be<T.length;Be++)he=T[Be],ye=Se+qe(he,Be),ke+=A(he,$,oe,ye,ge);else if(Be=M(T),typeof Be=="function")for(T=Be.call(T),Be=0;!(he=T.next()).done;)he=he.value,ye=Se+qe(he,Be++),ke+=A(he,$,oe,ye,ge);else if(ye==="object"){if(typeof T.then=="function")return A(_e(T),$,oe,he,ge);throw $=String(T),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return ke}function K(T,$,oe){if(T==null)return T;var he=[],ge=0;return A(T,he,"","",function(ye){return $.call(oe,ye,ge++)}),he}function le(T){if(T._status===-1){var $=T._result;$=$(),$.then(function(oe){(T._status===0||T._status===-1)&&(T._status=1,T._result=oe)},function(oe){(T._status===0||T._status===-1)&&(T._status=2,T._result=oe)}),T._status===-1&&(T._status=0,T._result=$)}if(T._status===1)return T._result.default;throw T._result}var je=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},Z={map:K,forEach:function(T,$,oe){K(T,function(){$.apply(this,arguments)},oe)},count:function(T){var $=0;return K(T,function(){$++}),$},toArray:function(T){return K(T,function($){return $})||[]},only:function(T){if(!we(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return Ve.Activity=w,Ve.Children=Z,Ve.Component=O,Ve.Fragment=f,Ve.Profiler=p,Ve.PureComponent=q,Ve.StrictMode=m,Ve.Suspense=y,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=J,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(T){return J.H.useMemoCache(T)}},Ve.cache=function(T){return function(){return T.apply(null,arguments)}},Ve.cacheSignal=function(){return null},Ve.cloneElement=function(T,$,oe){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var he=H({},T.props),ge=T.key;if($!=null)for(ye in $.key!==void 0&&(ge=""+$.key),$)!ce.call($,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&$.ref===void 0||(he[ye]=$[ye]);var ye=arguments.length-2;if(ye===1)he.children=oe;else if(1<ye){for(var ke=Array(ye),Se=0;Se<ye;Se++)ke[Se]=arguments[Se+2];he.children=ke}return U(T.type,ge,he)},Ve.createContext=function(T){return T={$$typeof:j,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:b,_context:T},T},Ve.createElement=function(T,$,oe){var he,ge={},ye=null;if($!=null)for(he in $.key!==void 0&&(ye=""+$.key),$)ce.call($,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(ge[he]=$[he]);var ke=arguments.length-2;if(ke===1)ge.children=oe;else if(1<ke){for(var Se=Array(ke),Be=0;Be<ke;Be++)Se[Be]=arguments[Be+2];ge.children=Se}if(T&&T.defaultProps)for(he in ke=T.defaultProps,ke)ge[he]===void 0&&(ge[he]=ke[he]);return U(T,ye,ge)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(T){return{$$typeof:C,render:T}},Ve.isValidElement=we,Ve.lazy=function(T){return{$$typeof:E,_payload:{_status:-1,_result:T},_init:le}},Ve.memo=function(T,$){return{$$typeof:x,type:T,compare:$===void 0?null:$}},Ve.startTransition=function(T){var $=J.T,oe={};J.T=oe;try{var he=T(),ge=J.S;ge!==null&&ge(oe,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(xe,je)}catch(ye){je(ye)}finally{$!==null&&oe.types!==null&&($.types=oe.types),J.T=$}},Ve.unstable_useCacheRefresh=function(){return J.H.useCacheRefresh()},Ve.use=function(T){return J.H.use(T)},Ve.useActionState=function(T,$,oe){return J.H.useActionState(T,$,oe)},Ve.useCallback=function(T,$){return J.H.useCallback(T,$)},Ve.useContext=function(T){return J.H.useContext(T)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(T,$){return J.H.useDeferredValue(T,$)},Ve.useEffect=function(T,$){return J.H.useEffect(T,$)},Ve.useEffectEvent=function(T){return J.H.useEffectEvent(T)},Ve.useId=function(){return J.H.useId()},Ve.useImperativeHandle=function(T,$,oe){return J.H.useImperativeHandle(T,$,oe)},Ve.useInsertionEffect=function(T,$){return J.H.useInsertionEffect(T,$)},Ve.useLayoutEffect=function(T,$){return J.H.useLayoutEffect(T,$)},Ve.useMemo=function(T,$){return J.H.useMemo(T,$)},Ve.useOptimistic=function(T,$){return J.H.useOptimistic(T,$)},Ve.useReducer=function(T,$,oe){return J.H.useReducer(T,$,oe)},Ve.useRef=function(T){return J.H.useRef(T)},Ve.useState=function(T){return J.H.useState(T)},Ve.useSyncExternalStore=function(T,$,oe){return J.H.useSyncExternalStore(T,$,oe)},Ve.useTransition=function(){return J.H.useTransition()},Ve.version="19.2.0",Ve}var _p;function nh(){return _p||(_p=1,zd.exports=u_()),zd.exports}var v=nh();const Bl=th(v);var Rd={exports:{}},Pr={},Od={exports:{}},Dd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yp;function d_(){return yp||(yp=1,(function(r){function h(A,K){var le=A.length;A.push(K);e:for(;0<le;){var je=le-1>>>1,Z=A[je];if(0<p(Z,K))A[je]=K,A[le]=Z,le=je;else break e}}function f(A){return A.length===0?null:A[0]}function m(A){if(A.length===0)return null;var K=A[0],le=A.pop();if(le!==K){A[0]=le;e:for(var je=0,Z=A.length,T=Z>>>1;je<T;){var $=2*(je+1)-1,oe=A[$],he=$+1,ge=A[he];if(0>p(oe,le))he<Z&&0>p(ge,oe)?(A[je]=ge,A[he]=le,je=he):(A[je]=oe,A[$]=le,je=$);else if(he<Z&&0>p(ge,le))A[je]=ge,A[he]=le,je=he;else break e}}return K}function p(A,K){var le=A.sortIndex-K.sortIndex;return le!==0?le:A.id-K.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var b=performance;r.unstable_now=function(){return b.now()}}else{var j=Date,C=j.now();r.unstable_now=function(){return j.now()-C}}var y=[],x=[],E=1,w=null,k=3,M=!1,B=!1,H=!1,V=!1,O=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function ae(A){for(var K=f(x);K!==null;){if(K.callback===null)m(x);else if(K.startTime<=A)m(x),K.sortIndex=K.expirationTime,h(y,K);else break;K=f(x)}}function F(A){if(H=!1,ae(A),!B)if(f(y)!==null)B=!0,xe||(xe=!0,Ae());else{var K=f(x);K!==null&&_e(F,K.startTime-A)}}var xe=!1,J=-1,ce=5,U=-1;function be(){return V?!0:!(r.unstable_now()-U<ce)}function we(){if(V=!1,xe){var A=r.unstable_now();U=A;var K=!0;try{e:{B=!1,H&&(H=!1,D(J),J=-1),M=!0;var le=k;try{t:{for(ae(A),w=f(y);w!==null&&!(w.expirationTime>A&&be());){var je=w.callback;if(typeof je=="function"){w.callback=null,k=w.priorityLevel;var Z=je(w.expirationTime<=A);if(A=r.unstable_now(),typeof Z=="function"){w.callback=Z,ae(A),K=!0;break t}w===f(y)&&m(y),ae(A)}else m(y);w=f(y)}if(w!==null)K=!0;else{var T=f(x);T!==null&&_e(F,T.startTime-A),K=!1}}break e}finally{w=null,k=le,M=!1}K=void 0}}finally{K?Ae():xe=!1}}}var Ae;if(typeof q=="function")Ae=function(){q(we)};else if(typeof MessageChannel<"u"){var He=new MessageChannel,qe=He.port2;He.port1.onmessage=we,Ae=function(){qe.postMessage(null)}}else Ae=function(){O(we,0)};function _e(A,K){J=O(function(){A(r.unstable_now())},K)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(A){A.callback=null},r.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ce=0<A?Math.floor(1e3/A):5},r.unstable_getCurrentPriorityLevel=function(){return k},r.unstable_next=function(A){switch(k){case 1:case 2:case 3:var K=3;break;default:K=k}var le=k;k=K;try{return A()}finally{k=le}},r.unstable_requestPaint=function(){V=!0},r.unstable_runWithPriority=function(A,K){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var le=k;k=A;try{return K()}finally{k=le}},r.unstable_scheduleCallback=function(A,K,le){var je=r.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?je+le:je):le=je,A){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=le+Z,A={id:E++,callback:K,priorityLevel:A,startTime:le,expirationTime:Z,sortIndex:-1},le>je?(A.sortIndex=le,h(x,A),f(y)===null&&A===f(x)&&(H?(D(J),J=-1):H=!0,_e(F,le-je))):(A.sortIndex=Z,h(y,A),B||M||(B=!0,xe||(xe=!0,Ae()))),A},r.unstable_shouldYield=be,r.unstable_wrapCallback=function(A){var K=k;return function(){var le=k;k=K;try{return A.apply(this,arguments)}finally{k=le}}}})(Dd)),Dd}var xp;function h_(){return xp||(xp=1,Od.exports=d_()),Od.exports}var Bd={exports:{}},Nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bp;function f_(){if(bp)return Nn;bp=1;var r=nh();function h(y){var x="https://react.dev/errors/"+y;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)x+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+y+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function f(){}var m={d:{f,r:function(){throw Error(h(522))},D:f,C:f,L:f,m:f,X:f,S:f,M:f},p:0,findDOMNode:null},p=Symbol.for("react.portal");function b(y,x,E){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:p,key:w==null?null:""+w,children:y,containerInfo:x,implementation:E}}var j=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function C(y,x){if(y==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=m,Nn.createPortal=function(y,x){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(h(299));return b(y,x,null,E)},Nn.flushSync=function(y){var x=j.T,E=m.p;try{if(j.T=null,m.p=2,y)return y()}finally{j.T=x,m.p=E,m.d.f()}},Nn.preconnect=function(y,x){typeof y=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,m.d.C(y,x))},Nn.prefetchDNS=function(y){typeof y=="string"&&m.d.D(y)},Nn.preinit=function(y,x){if(typeof y=="string"&&x&&typeof x.as=="string"){var E=x.as,w=C(E,x.crossOrigin),k=typeof x.integrity=="string"?x.integrity:void 0,M=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;E==="style"?m.d.S(y,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:w,integrity:k,fetchPriority:M}):E==="script"&&m.d.X(y,{crossOrigin:w,integrity:k,fetchPriority:M,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Nn.preinitModule=function(y,x){if(typeof y=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var E=C(x.as,x.crossOrigin);m.d.M(y,{crossOrigin:E,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&m.d.M(y)},Nn.preload=function(y,x){if(typeof y=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var E=x.as,w=C(E,x.crossOrigin);m.d.L(y,E,{crossOrigin:w,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Nn.preloadModule=function(y,x){if(typeof y=="string")if(x){var E=C(x.as,x.crossOrigin);m.d.m(y,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:E,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else m.d.m(y)},Nn.requestFormReset=function(y){m.d.r(y)},Nn.unstable_batchedUpdates=function(y,x){return y(x)},Nn.useFormState=function(y,x,E){return j.H.useFormState(y,x,E)},Nn.useFormStatus=function(){return j.H.useHostTransitionStatus()},Nn.version="19.2.0",Nn}var jp;function ug(){if(jp)return Bd.exports;jp=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(h){console.error(h)}}return r(),Bd.exports=f_(),Bd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wp;function m_(){if(wp)return Pr;wp=1;var r=h_(),h=nh(),f=ug();function m(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function p(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function b(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function j(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function C(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function y(e){if(b(e)!==e)throw Error(m(188))}function x(e){var t=e.alternate;if(!t){if(t=b(e),t===null)throw Error(m(188));return t!==e?null:e}for(var a=e,l=t;;){var c=a.return;if(c===null)break;var u=c.alternate;if(u===null){if(l=c.return,l!==null){a=l;continue}break}if(c.child===u.child){for(u=c.child;u;){if(u===a)return y(c),e;if(u===l)return y(c),t;u=u.sibling}throw Error(m(188))}if(a.return!==l.return)a=c,l=u;else{for(var _=!1,N=c.child;N;){if(N===a){_=!0,a=c,l=u;break}if(N===l){_=!0,l=c,a=u;break}N=N.sibling}if(!_){for(N=u.child;N;){if(N===a){_=!0,a=u,l=c;break}if(N===l){_=!0,l=u,a=c;break}N=N.sibling}if(!_)throw Error(m(189))}}if(a.alternate!==l)throw Error(m(190))}if(a.tag!==3)throw Error(m(188));return a.stateNode.current===a?e:t}function E(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=E(e),t!==null)return t;e=e.sibling}return null}var w=Object.assign,k=Symbol.for("react.element"),M=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),q=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),ce=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),be=Symbol.for("react.memo_cache_sentinel"),we=Symbol.iterator;function Ae(e){return e===null||typeof e!="object"?null:(e=we&&e[we]||e["@@iterator"],typeof e=="function"?e:null)}var He=Symbol.for("react.client.reference");function qe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===He?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case H:return"Fragment";case O:return"Profiler";case V:return"StrictMode";case F:return"Suspense";case xe:return"SuspenseList";case U:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case B:return"Portal";case q:return e.displayName||"Context";case D:return(e._context.displayName||"Context")+".Consumer";case ae:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case J:return t=e.displayName||null,t!==null?t:qe(e.type)||"Memo";case ce:t=e._payload,e=e._init;try{return qe(e(t))}catch{}}return null}var _e=Array.isArray,A=h.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=f.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},je=[],Z=-1;function T(e){return{current:e}}function $(e){0>Z||(e.current=je[Z],je[Z]=null,Z--)}function oe(e,t){Z++,je[Z]=e.current,e.current=t}var he=T(null),ge=T(null),ye=T(null),ke=T(null);function Se(e,t){switch(oe(ye,t),oe(ge,e),oe(he,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Pm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Pm(t),e=Um(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}$(he),oe(he,e)}function Be(){$(he),$(ge),$(ye)}function Je(e){e.memoizedState!==null&&oe(ke,e);var t=he.current,a=Um(t,e.type);t!==a&&(oe(ge,e),oe(he,a))}function Re(e){ge.current===e&&($(he),$(ge)),ke.current===e&&($(ke),zr._currentValue=le)}var We,Ct;function Kt(e){if(We===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);We=t&&t[1]||"",Ct=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+We+e+Ct}var Gt=!1;function Yn(e,t){if(!e||Gt)return"";Gt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(se){var ne=se}Reflect.construct(e,[],pe)}else{try{pe.call()}catch(se){ne=se}e.call(pe.prototype)}}else{try{throw Error()}catch(se){ne=se}(pe=e())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(se){if(se&&ne&&typeof se.stack=="string")return[se.stack,ne.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=l.DetermineComponentFrameRoot(),_=u[0],N=u[1];if(_&&N){var R=_.split(`
`),W=N.split(`
`);for(c=l=0;l<R.length&&!R[l].includes("DetermineComponentFrameRoot");)l++;for(;c<W.length&&!W[c].includes("DetermineComponentFrameRoot");)c++;if(l===R.length||c===W.length)for(l=R.length-1,c=W.length-1;1<=l&&0<=c&&R[l]!==W[c];)c--;for(;1<=l&&0<=c;l--,c--)if(R[l]!==W[c]){if(l!==1||c!==1)do if(l--,c--,0>c||R[l]!==W[c]){var de=`
`+R[l].replace(" at new "," at ");return e.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",e.displayName)),de}while(1<=l&&0<=c);break}}}finally{Gt=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Kt(a):""}function En(e,t){switch(e.tag){case 26:case 27:case 5:return Kt(e.type);case 16:return Kt("Lazy");case 13:return e.child!==t&&t!==null?Kt("Suspense Fallback"):Kt("Suspense");case 19:return Kt("SuspenseList");case 0:case 15:return Yn(e.type,!1);case 11:return Yn(e.type.render,!1);case 1:return Yn(e.type,!0);case 31:return Kt("Activity");default:return""}}function ca(e){try{var t="",a=null;do t+=En(e,a),a=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Xt=Object.prototype.hasOwnProperty,cn=r.unstable_scheduleCallback,tn=r.unstable_cancelCallback,xn=r.unstable_shouldYield,ua=r.unstable_requestPaint,Bt=r.unstable_now,$n=r.unstable_getCurrentPriorityLevel,da=r.unstable_ImmediatePriority,ct=r.unstable_UserBlockingPriority,zn=r.unstable_NormalPriority,Ai=r.unstable_LowPriority,Ia=r.unstable_IdlePriority,li=r.log,La=r.unstable_setDisableYieldValue,Rn=null,Pt=null;function pn(e){if(typeof li=="function"&&La(e),Pt&&typeof Pt.setStrictMode=="function")try{Pt.setStrictMode(Rn,e)}catch{}}var nn=Math.clz32?Math.clz32:un,kt=Math.log,ki=Math.LN2;function un(e){return e>>>=0,e===0?32:31-(kt(e)/ki|0)|0}var Fn=256,dn=262144,an=4194304;function gt(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ga(e,t,a){var l=e.pendingLanes;if(l===0)return 0;var c=0,u=e.suspendedLanes,_=e.pingedLanes;e=e.warmLanes;var N=l&134217727;return N!==0?(l=N&~u,l!==0?c=gt(l):(_&=N,_!==0?c=gt(_):a||(a=N&~e,a!==0&&(c=gt(a))))):(N=l&~u,N!==0?c=gt(N):_!==0?c=gt(_):a||(a=l&~e,a!==0&&(c=gt(a)))),c===0?0:t!==0&&t!==c&&(t&u)===0&&(u=c&-c,a=t&-t,u>=a||u===32&&(a&4194048)!==0)?t:c}function Aa(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ms(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ha(){var e=an;return an<<=1,(an&62914560)===0&&(an=4194304),e}function ka(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Kn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ps(e,t,a,l,c,u){var _=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var N=e.entanglements,R=e.expirationTimes,W=e.hiddenUpdates;for(a=_&~a;0<a;){var de=31-nn(a),pe=1<<de;N[de]=0,R[de]=-1;var ne=W[de];if(ne!==null)for(W[de]=null,de=0;de<ne.length;de++){var se=ne[de];se!==null&&(se.lane&=-536870913)}a&=~pe}l!==0&&Mi(e,l,0),u!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=u&~(_&~t))}function Mi(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-nn(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function fa(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var l=31-nn(a),c=1<<l;c&t|e[l]&t&&(e[l]|=t),a&=~c}}function Va(e,t){var a=t&-t;return a=(a&42)!==0?1:Ot(a),(a&(e.suspendedLanes|t))!==0?0:a}function Ot(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Me(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ma(){var e=K.p;return e!==0?e:(e=window.event,e===void 0?32:op(e.type))}function ri(e,t){var a=K.p;try{return K.p=e,t()}finally{K.p=a}}var Tn=Math.random().toString(36).slice(2),Lt="__reactFiber$"+Tn,Ut="__reactProps$"+Tn,Xn="__reactContainer$"+Tn,I="__reactEvents$"+Tn,ie="__reactListeners$"+Tn,Ee="__reactHandles$"+Tn,ee="__reactResources$"+Tn,Oe="__reactMarker$"+Tn;function Ze(e){delete e[Lt],delete e[Ut],delete e[I],delete e[ie],delete e[Ee]}function Te(e){var t=e[Lt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Xn]||a[Lt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Ym(e);e!==null;){if(a=e[Lt])return a;e=Ym(e)}return t}e=a,a=e.parentNode}return null}function Le(e){if(e=e[Lt]||e[Xn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function vt(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(m(33))}function Ye(e){var t=e[ee];return t||(t=e[ee]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function rt(e){e[Oe]=!0}var bn=new Set,sn={};function at(e,t){ot(e,t),ot(e+"Capture",t)}function ot(e,t){for(sn[e]=t,e=0;e<t.length;e++)bn.add(t[e])}var ma=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gs={},vs={};function oi(e){return Xt.call(vs,e)?!0:Xt.call(gs,e)?!1:ma.test(e)?vs[e]=!0:(gs[e]=!0,!1)}function Xe(e,t,a){if(oi(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function _t(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function jn(e,t,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+l)}}function Vt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function X(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ue(e,t,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var c=l.get,u=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(_){a=""+_,u.call(this,_)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function re(e){if(!e._valueTracker){var t=X(e)?"checked":"value";e._valueTracker=ue(e,t,""+e[t])}}function ve(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),l="";return e&&(l=X(e)?e.checked?"true":"false":e.value),e=l,e!==a?(t.setValue(e),!0):!1}function Ce(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Mt=/[\n"\\]/g;function Qe(e){return e.replace(Mt,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Qn(e,t,a,l,c,u,_,N){e.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.type=_:e.removeAttribute("type"),t!=null?_==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Vt(t)):e.value!==""+Vt(t)&&(e.value=""+Vt(t)):_!=="submit"&&_!=="reset"||e.removeAttribute("value"),t!=null?za(e,_,Vt(t)):a!=null?za(e,_,Vt(a)):l!=null&&e.removeAttribute("value"),c==null&&u!=null&&(e.defaultChecked=!!u),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?e.name=""+Vt(N):e.removeAttribute("name")}function Yt(e,t,a,l,c,u,_,N){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||a!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){re(e);return}a=a!=null?""+Vt(a):"",t=t!=null?""+Vt(t):a,N||t===e.value||(e.value=t),e.defaultValue=t}l=l??c,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=N?e.checked:!!l,e.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(e.name=_),re(e)}function za(e,t,a){t==="number"&&Ce(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Et(e,t,a,l){if(e=e.options,t){t={};for(var c=0;c<a.length;c++)t["$"+a[c]]=!0;for(a=0;a<e.length;a++)c=t.hasOwnProperty("$"+e[a].value),e[a].selected!==c&&(e[a].selected=c),c&&l&&(e[a].defaultSelected=!0)}else{for(a=""+Vt(a),t=null,c=0;c<e.length;c++){if(e[c].value===a){e[c].selected=!0,l&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Ya(e,t,a){if(t!=null&&(t=""+Vt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Vt(a):""}function zi(e,t,a,l){if(t==null){if(l!=null){if(a!=null)throw Error(m(92));if(_e(l)){if(1<l.length)throw Error(m(93));l=l[0]}a=l}a==null&&(a=""),t=a}a=Vt(t),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),re(e)}function pa(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Il=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ri(e,t,a){var l=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,a):typeof a!="number"||a===0||Il.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Qs(e,t,a){if(t!=null&&typeof t!="object")throw Error(m(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var c in t)l=t[c],t.hasOwnProperty(c)&&a[c]!==l&&Ri(e,c,l)}else for(var u in t)t.hasOwnProperty(u)&&Ri(e,u,t[u])}function _s(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ws=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Gl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Oi(e){return Gl.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function On(){}var Js=null;function ys(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Di=null,Ge=null;function Wn(e){var t=Le(e);if(t&&(e=t.stateNode)){var a=e[Ut]||null;e:switch(e=t.stateNode,t.type){case"input":if(Qn(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Qe(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var l=a[t];if(l!==e&&l.form===e.form){var c=l[Ut]||null;if(!c)throw Error(m(90));Qn(l,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<a.length;t++)l=a[t],l.form===e.form&&ve(l)}break e;case"textarea":Ya(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Et(e,!!a.multiple,t,!1)}}}var yt=!1;function Vl(e,t,a){if(yt)return e(t,a);yt=!0;try{var l=e(t);return l}finally{if(yt=!1,(Di!==null||Ge!==null)&&(Ko(),Di&&(t=Di,e=Ge,Ge=Di=null,Wn(t),e)))for(t=0;t<e.length;t++)Wn(e[t])}}function ci(e,t){var a=e.stateNode;if(a===null)return null;var l=a[Ut]||null;if(l===null)return null;a=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(m(231,t,typeof a));return a}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xs=!1;if(Jn)try{var ea={};Object.defineProperty(ea,"passive",{get:function(){xs=!0}}),window.addEventListener("test",ea,ea),window.removeEventListener("test",ea,ea)}catch{xs=!1}var ga=null,ui=null,Ht=null;function $a(){if(Ht)return Ht;var e,t=ui,a=t.length,l,c="value"in ga?ga.value:ga.textContent,u=c.length;for(e=0;e<a&&t[e]===c[e];e++);var _=a-e;for(l=1;l<=_&&t[a-l]===c[u-l];l++);return Ht=c.slice(e,1<l?1-l:void 0)}function bs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function js(){return!0}function Jr(){return!1}function gn(e){function t(a,l,c,u,_){this._reactName=a,this._targetInst=c,this.type=l,this.nativeEvent=u,this.target=_,this.currentTarget=null;for(var N in e)e.hasOwnProperty(N)&&(a=e[N],this[N]=a?a(u):u[N]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?js:Jr,this.isPropagationStopped=Jr,this}return w(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=js)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=js)},persist:function(){},isPersistent:js}),t}var Ra={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},el=gn(Ra),Bi=w({},Ra,{view:0,detail:0}),it=gn(Bi),Yl,Ln,Oa,ws=w({},Bi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Oa&&(Oa&&e.type==="mousemove"?(Yl=e.screenX-Oa.screenX,Ln=e.screenY-Oa.screenY):Ln=Yl=0,Oa=e),Yl)},movementY:function(e){return"movementY"in e?e.movementY:Ln}}),eo=gn(ws),$l=w({},ws,{dataTransfer:0}),qc=gn($l),to=w({},Bi,{relatedTarget:0}),Fl=gn(to),Ic=w({},Ra,{animationName:0,elapsedTime:0,pseudoElement:0}),Kl=gn(Ic),Gc=w({},Ra,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),va=gn(Gc),Vc=w({},Ra,{data:0}),Xl=gn(Vc),Fa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},no={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ao={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ql(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ao[e])?!!t[e]:!1}function Wl(){return Ql}var io=w({},Bi,{key:function(e){if(e.key){var t=Fa[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=bs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?no[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wl,charCode:function(e){return e.type==="keypress"?bs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?bs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),so=gn(io),Yc=w({},ws,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lo=gn(Yc),Jl=w({},Bi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wl}),$c=gn(Jl),ro=w({},Ra,{propertyName:0,elapsedTime:0,pseudoElement:0}),oo=gn(ro),tl=w({},ws,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),di=gn(tl),Fc=w({},Ra,{newState:0,oldState:0}),Ss=gn(Fc),Dn=[9,13,27,32],nl=Jn&&"CompositionEvent"in window,Pi=null;Jn&&"documentMode"in document&&(Pi=document.documentMode);var Kc=Jn&&"TextEvent"in window&&!Pi,al=Jn&&(!nl||Pi&&8<Pi&&11>=Pi),il=" ",co=!1;function uo(e,t){switch(e){case"keyup":return Dn.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function er(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ui=!1;function ta(e,t){switch(e){case"compositionend":return er(t);case"keypress":return t.which!==32?null:(co=!0,il);case"textInput":return e=t.data,e===il&&co?null:e;default:return null}}function Hi(e,t){if(Ui)return e==="compositionend"||!nl&&uo(e,t)?(e=$a(),Ht=ui=ga=null,Ui=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return al&&t.locale!=="ko"?null:t.data;default:return null}}var Xc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _a(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Xc[e.type]:t==="textarea"}function ho(e,t,a,l){Di?Ge?Ge.push(l):Ge=[l]:Di=l,t=nc(t,"onChange"),0<t.length&&(a=new el("onChange","change",null,a,l),e.push({event:a,listeners:t}))}var ya=null,Ns=null;function Cs(e){Mm(e,0)}function Es(e){var t=vt(e);if(ve(t))return e}function Ts(e,t){if(e==="change")return t}var fo=!1;if(Jn){var xa;if(Jn){var Zi="oninput"in document;if(!Zi){var mo=document.createElement("div");mo.setAttribute("oninput","return;"),Zi=typeof mo.oninput=="function"}xa=Zi}else xa=!1;fo=xa&&(!document.documentMode||9<document.documentMode)}function sl(){ya&&(ya.detachEvent("onpropertychange",po),Ns=ya=null)}function po(e){if(e.propertyName==="value"&&Es(Ns)){var t=[];ho(t,Ns,e,ys(e)),Vl(Cs,t)}}function Da(e,t,a){e==="focusin"?(sl(),ya=t,Ns=a,ya.attachEvent("onpropertychange",po)):e==="focusout"&&sl()}function Qc(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Es(Ns)}function qi(e,t){if(e==="click")return Es(t)}function Wc(e,t){if(e==="input"||e==="change")return Es(t)}function Ba(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var hn=typeof Object.is=="function"?Object.is:Ba;function Ii(e,t){if(hn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),l=Object.keys(t);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var c=a[l];if(!Xt.call(t,c)||!hn(e[c],t[c]))return!1}return!0}function ll(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ls(e,t){var a=ll(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=t&&l>=t)return{node:a,offset:t-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ll(a)}}function rl(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?rl(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function As(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ce(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Ce(e.document)}return t}function Ka(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var ol=Jn&&"documentMode"in document&&11>=document.documentMode,Xa=null,cl=null,ks=null,Gi=!1;function go(e,t,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Gi||Xa==null||Xa!==Ce(l)||(l=Xa,"selectionStart"in l&&Ka(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ks&&Ii(ks,l)||(ks=l,l=nc(cl,"onSelect"),0<l.length&&(t=new el("onSelect","select",null,t,a),e.push({event:t,listeners:l}),t.target=Xa)))}function Qa(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Vi={animationend:Qa("Animation","AnimationEnd"),animationiteration:Qa("Animation","AnimationIteration"),animationstart:Qa("Animation","AnimationStart"),transitionrun:Qa("Transition","TransitionRun"),transitionstart:Qa("Transition","TransitionStart"),transitioncancel:Qa("Transition","TransitionCancel"),transitionend:Qa("Transition","TransitionEnd")},ul={},vo={};Jn&&(vo=document.createElement("div").style,"AnimationEvent"in window||(delete Vi.animationend.animation,delete Vi.animationiteration.animation,delete Vi.animationstart.animation),"TransitionEvent"in window||delete Vi.transitionend.transition);function fn(e){if(ul[e])return ul[e];if(!Vi[e])return e;var t=Vi[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in vo)return ul[e]=t[a];return e}var Ms=fn("animationend"),_o=fn("animationiteration"),zs=fn("animationstart"),Jc=fn("transitionrun"),yo=fn("transitionstart"),eu=fn("transitioncancel"),Yi=fn("transitionend"),xo=new Map,Wa="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wa.push("scrollEnd");function Bn(e,t){xo.set(e,t),at(t,[e])}var Rs=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Pn=[],wn=0,dl=0;function Os(){for(var e=wn,t=dl=wn=0;t<e;){var a=Pn[t];Pn[t++]=null;var l=Pn[t];Pn[t++]=null;var c=Pn[t];Pn[t++]=null;var u=Pn[t];if(Pn[t++]=null,l!==null&&c!==null){var _=l.pending;_===null?c.next=c:(c.next=_.next,_.next=c),l.pending=c}u!==0&&$i(a,c,u)}}function Ja(e,t,a,l){Pn[wn++]=e,Pn[wn++]=t,Pn[wn++]=a,Pn[wn++]=l,dl|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function tr(e,t,a,l){return Ja(e,t,a,l),Ds(e)}function ba(e,t){return Ja(e,null,null,t),Ds(e)}function $i(e,t,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var c=!1,u=e.return;u!==null;)u.childLanes|=a,l=u.alternate,l!==null&&(l.childLanes|=a),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(c=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,c&&t!==null&&(c=31-nn(a),e=u.hiddenUpdates,l=e[c],l===null?e[c]=[t]:l.push(t),t.lane=a|536870912),u):null}function Ds(e){if(50<Cr)throw Cr=0,nd=null,Error(m(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var hi={};function tu(e,t,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(e,t,a,l){return new tu(e,t,a,l)}function hl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ja(e,t){var a=e.alternate;return a===null?(a=Sn(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function nr(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Bs(e,t,a,l,c,u){var _=0;if(l=e,typeof e=="function")hl(e)&&(_=1);else if(typeof e=="string")_=Xv(e,a,he.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case U:return e=Sn(31,a,t,c),e.elementType=U,e.lanes=u,e;case H:return fi(a.children,c,u,t);case V:_=8,c|=24;break;case O:return e=Sn(12,a,t,c|2),e.elementType=O,e.lanes=u,e;case F:return e=Sn(13,a,t,c),e.elementType=F,e.lanes=u,e;case xe:return e=Sn(19,a,t,c),e.elementType=xe,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case q:_=10;break e;case D:_=9;break e;case ae:_=11;break e;case J:_=14;break e;case ce:_=16,l=null;break e}_=29,a=Error(m(130,e===null?"null":typeof e,"")),l=null}return t=Sn(_,a,t,c),t.elementType=e,t.type=l,t.lanes=u,t}function fi(e,t,a,l){return e=Sn(7,e,l,t),e.lanes=a,e}function fl(e,t,a){return e=Sn(6,e,null,t),e.lanes=a,e}function ar(e){var t=Sn(18,null,null,0);return t.stateNode=e,t}function ir(e,t,a){return t=Sn(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var n=new WeakMap;function s(e,t){if(typeof e=="object"&&e!==null){var a=n.get(e);return a!==void 0?a:(t={value:e,source:t,stack:ca(t)},n.set(e,t),t)}return{value:e,source:t,stack:ca(t)}}var o=[],d=0,g=null,S=0,z=[],Y=0,te=null,me=1,Ne="";function Pe(e,t){o[d++]=S,o[d++]=g,g=e,S=t}function Fe(e,t,a){z[Y++]=me,z[Y++]=Ne,z[Y++]=te,te=e;var l=me;e=Ne;var c=32-nn(l)-1;l&=~(1<<c),a+=1;var u=32-nn(t)+c;if(30<u){var _=c-c%5;u=(l&(1<<_)-1).toString(32),l>>=_,c-=_,me=1<<32-nn(t)+c|a<<c|l,Ne=u+e}else me=1<<u|a<<c|l,Ne=e}function ln(e){e.return!==null&&(Pe(e,1),Fe(e,1,0))}function Zt(e){for(;e===g;)g=o[--d],o[d]=null,S=o[--d],o[d]=null;for(;e===te;)te=z[--Y],z[Y]=null,Ne=z[--Y],z[Y]=null,me=z[--Y],z[Y]=null}function An(e,t){z[Y++]=me,z[Y++]=Ne,z[Y++]=te,me=t.id,Ne=t.overflow,te=e}var ut=null,dt=null,et=!1,ei=null,Un=!1,ml=Error(m(519));function ti(e){var t=Error(m(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ps(s(t,e)),ml}function sr(e){var t=e.stateNode,a=e.type,l=e.memoizedProps;switch(t[Lt]=e,t[Ut]=l,a){case"dialog":nt("cancel",t),nt("close",t);break;case"iframe":case"object":case"embed":nt("load",t);break;case"video":case"audio":for(a=0;a<Tr.length;a++)nt(Tr[a],t);break;case"source":nt("error",t);break;case"img":case"image":case"link":nt("error",t),nt("load",t);break;case"details":nt("toggle",t);break;case"input":nt("invalid",t),Yt(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":nt("invalid",t);break;case"textarea":nt("invalid",t),zi(t,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||l.suppressHydrationWarning===!0||Dm(t.textContent,a)?(l.popover!=null&&(nt("beforetoggle",t),nt("toggle",t)),l.onScroll!=null&&nt("scroll",t),l.onScrollEnd!=null&&nt("scrollend",t),l.onClick!=null&&(t.onclick=On),t=!0):t=!1,t||ti(e,!0)}function Dt(e){for(ut=e.return;ut;)switch(ut.tag){case 5:case 31:case 13:Un=!1;return;case 27:case 3:Un=!0;return;default:ut=ut.return}}function Pa(e){if(e!==ut)return!1;if(!et)return Dt(e),et=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||vd(e.type,e.memoizedProps)),a=!a),a&&dt&&ti(e),Dt(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(m(317));dt=Vm(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(m(317));dt=Vm(e)}else t===27?(t=dt,rs(e.type)?(e=jd,jd=null,dt=e):dt=t):dt=ut?Sa(e.stateNode.nextSibling):null;return!0}function mi(){dt=ut=null,et=!1}function lr(){var e=ei;return e!==null&&(In===null?In=e:In.push.apply(In,e),ei=null),e}function Ps(e){ei===null?ei=[e]:ei.push(e)}var Us=T(null),ni=null,Ua=null;function Fi(e,t,a){oe(Us,t._currentValue),t._currentValue=a}function pi(e){e._currentValue=Us.current,$(Us)}function nu(e,t,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===a)break;e=e.return}}function au(e,t,a,l){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var u=c.dependencies;if(u!==null){var _=c.child;u=u.firstContext;e:for(;u!==null;){var N=u;u=c;for(var R=0;R<t.length;R++)if(N.context===t[R]){u.lanes|=a,N=u.alternate,N!==null&&(N.lanes|=a),nu(u.return,a,e),l||(_=null);break e}u=N.next}}else if(c.tag===18){if(_=c.return,_===null)throw Error(m(341));_.lanes|=a,u=_.alternate,u!==null&&(u.lanes|=a),nu(_,a,e),_=null}else _=c.child;if(_!==null)_.return=c;else for(_=c;_!==null;){if(_===e){_=null;break}if(c=_.sibling,c!==null){c.return=_.return,_=c;break}_=_.return}c=_}}function pl(e,t,a,l){e=null;for(var c=t,u=!1;c!==null;){if(!u){if((c.flags&524288)!==0)u=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var _=c.alternate;if(_===null)throw Error(m(387));if(_=_.memoizedProps,_!==null){var N=c.type;hn(c.pendingProps.value,_.value)||(e!==null?e.push(N):e=[N])}}else if(c===ke.current){if(_=c.alternate,_===null)throw Error(m(387));_.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(zr):e=[zr])}c=c.return}e!==null&&au(t,e,a,l),t.flags|=262144}function bo(e){for(e=e.firstContext;e!==null;){if(!hn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Hs(e){ni=e,Ua=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function vn(e){return xh(ni,e)}function jo(e,t){return ni===null&&Hs(e),xh(e,t)}function xh(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Ua===null){if(e===null)throw Error(m(308));Ua=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ua=Ua.next=t;return a}var Yg=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},$g=r.unstable_scheduleCallback,Fg=r.unstable_NormalPriority,Qt={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function iu(){return{controller:new Yg,data:new Map,refCount:0}}function rr(e){e.refCount--,e.refCount===0&&$g(Fg,function(){e.controller.abort()})}var or=null,su=0,gl=0,vl=null;function Kg(e,t){if(or===null){var a=or=[];su=0,gl=od(),vl={status:"pending",value:void 0,then:function(l){a.push(l)}}}return su++,t.then(bh,bh),t}function bh(){if(--su===0&&or!==null){vl!==null&&(vl.status="fulfilled");var e=or;or=null,gl=0,vl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Xg(e,t){var a=[],l={status:"pending",value:null,reason:null,then:function(c){a.push(c)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var c=0;c<a.length;c++)(0,a[c])(t)},function(c){for(l.status="rejected",l.reason=c,c=0;c<a.length;c++)(0,a[c])(void 0)}),l}var jh=A.S;A.S=function(e,t){lm=Bt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Kg(e,t),jh!==null&&jh(e,t)};var Zs=T(null);function lu(){var e=Zs.current;return e!==null?e:Tt.pooledCache}function wo(e,t){t===null?oe(Zs,Zs.current):oe(Zs,t.pool)}function wh(){var e=lu();return e===null?null:{parent:Qt._currentValue,pool:e}}var _l=Error(m(460)),ru=Error(m(474)),So=Error(m(542)),No={then:function(){}};function Sh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Nh(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(On,On),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Eh(e),e;default:if(typeof t.status=="string")t.then(On,On);else{if(e=Tt,e!==null&&100<e.shellSuspendCounter)throw Error(m(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=l}},function(l){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Eh(e),e}throw Is=t,_l}}function qs(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Is=a,_l):a}}var Is=null;function Ch(){if(Is===null)throw Error(m(459));var e=Is;return Is=null,e}function Eh(e){if(e===_l||e===So)throw Error(m(483))}var yl=null,cr=0;function Co(e){var t=cr;return cr+=1,yl===null&&(yl=[]),Nh(yl,e,t)}function ur(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Eo(e,t){throw t.$$typeof===k?Error(m(525)):(e=Object.prototype.toString.call(t),Error(m(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Th(e){function t(G,P){if(e){var Q=G.deletions;Q===null?(G.deletions=[P],G.flags|=16):Q.push(P)}}function a(G,P){if(!e)return null;for(;P!==null;)t(G,P),P=P.sibling;return null}function l(G){for(var P=new Map;G!==null;)G.key!==null?P.set(G.key,G):P.set(G.index,G),G=G.sibling;return P}function c(G,P){return G=ja(G,P),G.index=0,G.sibling=null,G}function u(G,P,Q){return G.index=Q,e?(Q=G.alternate,Q!==null?(Q=Q.index,Q<P?(G.flags|=67108866,P):Q):(G.flags|=67108866,P)):(G.flags|=1048576,P)}function _(G){return e&&G.alternate===null&&(G.flags|=67108866),G}function N(G,P,Q,fe){return P===null||P.tag!==6?(P=fl(Q,G.mode,fe),P.return=G,P):(P=c(P,Q),P.return=G,P)}function R(G,P,Q,fe){var Ue=Q.type;return Ue===H?de(G,P,Q.props.children,fe,Q.key):P!==null&&(P.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===ce&&qs(Ue)===P.type)?(P=c(P,Q.props),ur(P,Q),P.return=G,P):(P=Bs(Q.type,Q.key,Q.props,null,G.mode,fe),ur(P,Q),P.return=G,P)}function W(G,P,Q,fe){return P===null||P.tag!==4||P.stateNode.containerInfo!==Q.containerInfo||P.stateNode.implementation!==Q.implementation?(P=ir(Q,G.mode,fe),P.return=G,P):(P=c(P,Q.children||[]),P.return=G,P)}function de(G,P,Q,fe,Ue){return P===null||P.tag!==7?(P=fi(Q,G.mode,fe,Ue),P.return=G,P):(P=c(P,Q),P.return=G,P)}function pe(G,P,Q){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=fl(""+P,G.mode,Q),P.return=G,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case M:return Q=Bs(P.type,P.key,P.props,null,G.mode,Q),ur(Q,P),Q.return=G,Q;case B:return P=ir(P,G.mode,Q),P.return=G,P;case ce:return P=qs(P),pe(G,P,Q)}if(_e(P)||Ae(P))return P=fi(P,G.mode,Q,null),P.return=G,P;if(typeof P.then=="function")return pe(G,Co(P),Q);if(P.$$typeof===q)return pe(G,jo(G,P),Q);Eo(G,P)}return null}function ne(G,P,Q,fe){var Ue=P!==null?P.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Ue!==null?null:N(G,P,""+Q,fe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case M:return Q.key===Ue?R(G,P,Q,fe):null;case B:return Q.key===Ue?W(G,P,Q,fe):null;case ce:return Q=qs(Q),ne(G,P,Q,fe)}if(_e(Q)||Ae(Q))return Ue!==null?null:de(G,P,Q,fe,null);if(typeof Q.then=="function")return ne(G,P,Co(Q),fe);if(Q.$$typeof===q)return ne(G,P,jo(G,Q),fe);Eo(G,Q)}return null}function se(G,P,Q,fe,Ue){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return G=G.get(Q)||null,N(P,G,""+fe,Ue);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case M:return G=G.get(fe.key===null?Q:fe.key)||null,R(P,G,fe,Ue);case B:return G=G.get(fe.key===null?Q:fe.key)||null,W(P,G,fe,Ue);case ce:return fe=qs(fe),se(G,P,Q,fe,Ue)}if(_e(fe)||Ae(fe))return G=G.get(Q)||null,de(P,G,fe,Ue,null);if(typeof fe.then=="function")return se(G,P,Q,Co(fe),Ue);if(fe.$$typeof===q)return se(G,P,Q,jo(P,fe),Ue);Eo(P,fe)}return null}function ze(G,P,Q,fe){for(var Ue=null,ht=null,De=P,Ke=P=0,lt=null;De!==null&&Ke<Q.length;Ke++){De.index>Ke?(lt=De,De=null):lt=De.sibling;var ft=ne(G,De,Q[Ke],fe);if(ft===null){De===null&&(De=lt);break}e&&De&&ft.alternate===null&&t(G,De),P=u(ft,P,Ke),ht===null?Ue=ft:ht.sibling=ft,ht=ft,De=lt}if(Ke===Q.length)return a(G,De),et&&Pe(G,Ke),Ue;if(De===null){for(;Ke<Q.length;Ke++)De=pe(G,Q[Ke],fe),De!==null&&(P=u(De,P,Ke),ht===null?Ue=De:ht.sibling=De,ht=De);return et&&Pe(G,Ke),Ue}for(De=l(De);Ke<Q.length;Ke++)lt=se(De,G,Ke,Q[Ke],fe),lt!==null&&(e&&lt.alternate!==null&&De.delete(lt.key===null?Ke:lt.key),P=u(lt,P,Ke),ht===null?Ue=lt:ht.sibling=lt,ht=lt);return e&&De.forEach(function(hs){return t(G,hs)}),et&&Pe(G,Ke),Ue}function Ie(G,P,Q,fe){if(Q==null)throw Error(m(151));for(var Ue=null,ht=null,De=P,Ke=P=0,lt=null,ft=Q.next();De!==null&&!ft.done;Ke++,ft=Q.next()){De.index>Ke?(lt=De,De=null):lt=De.sibling;var hs=ne(G,De,ft.value,fe);if(hs===null){De===null&&(De=lt);break}e&&De&&hs.alternate===null&&t(G,De),P=u(hs,P,Ke),ht===null?Ue=hs:ht.sibling=hs,ht=hs,De=lt}if(ft.done)return a(G,De),et&&Pe(G,Ke),Ue;if(De===null){for(;!ft.done;Ke++,ft=Q.next())ft=pe(G,ft.value,fe),ft!==null&&(P=u(ft,P,Ke),ht===null?Ue=ft:ht.sibling=ft,ht=ft);return et&&Pe(G,Ke),Ue}for(De=l(De);!ft.done;Ke++,ft=Q.next())ft=se(De,G,Ke,ft.value,fe),ft!==null&&(e&&ft.alternate!==null&&De.delete(ft.key===null?Ke:ft.key),P=u(ft,P,Ke),ht===null?Ue=ft:ht.sibling=ft,ht=ft);return e&&De.forEach(function(r_){return t(G,r_)}),et&&Pe(G,Ke),Ue}function Nt(G,P,Q,fe){if(typeof Q=="object"&&Q!==null&&Q.type===H&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case M:e:{for(var Ue=Q.key;P!==null;){if(P.key===Ue){if(Ue=Q.type,Ue===H){if(P.tag===7){a(G,P.sibling),fe=c(P,Q.props.children),fe.return=G,G=fe;break e}}else if(P.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===ce&&qs(Ue)===P.type){a(G,P.sibling),fe=c(P,Q.props),ur(fe,Q),fe.return=G,G=fe;break e}a(G,P);break}else t(G,P);P=P.sibling}Q.type===H?(fe=fi(Q.props.children,G.mode,fe,Q.key),fe.return=G,G=fe):(fe=Bs(Q.type,Q.key,Q.props,null,G.mode,fe),ur(fe,Q),fe.return=G,G=fe)}return _(G);case B:e:{for(Ue=Q.key;P!==null;){if(P.key===Ue)if(P.tag===4&&P.stateNode.containerInfo===Q.containerInfo&&P.stateNode.implementation===Q.implementation){a(G,P.sibling),fe=c(P,Q.children||[]),fe.return=G,G=fe;break e}else{a(G,P);break}else t(G,P);P=P.sibling}fe=ir(Q,G.mode,fe),fe.return=G,G=fe}return _(G);case ce:return Q=qs(Q),Nt(G,P,Q,fe)}if(_e(Q))return ze(G,P,Q,fe);if(Ae(Q)){if(Ue=Ae(Q),typeof Ue!="function")throw Error(m(150));return Q=Ue.call(Q),Ie(G,P,Q,fe)}if(typeof Q.then=="function")return Nt(G,P,Co(Q),fe);if(Q.$$typeof===q)return Nt(G,P,jo(G,Q),fe);Eo(G,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,P!==null&&P.tag===6?(a(G,P.sibling),fe=c(P,Q),fe.return=G,G=fe):(a(G,P),fe=fl(Q,G.mode,fe),fe.return=G,G=fe),_(G)):a(G,P)}return function(G,P,Q,fe){try{cr=0;var Ue=Nt(G,P,Q,fe);return yl=null,Ue}catch(De){if(De===_l||De===So)throw De;var ht=Sn(29,De,null,G.mode);return ht.lanes=fe,ht.return=G,ht}finally{}}}var Gs=Th(!0),Lh=Th(!1),Ki=!1;function ou(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Xi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Qi(e,t,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(pt&2)!==0){var c=l.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),l.pending=t,t=Ds(e),$i(e,null,a),t}return Ja(e,l,t,a),Ds(e)}function dr(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,fa(e,a)}}function uu(e,t){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var c=null,u=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};u===null?c=u=_:u=u.next=_,a=a.next}while(a!==null);u===null?c=u=t:u=u.next=t}else c=u=t;a={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:u,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var du=!1;function hr(){if(du){var e=vl;if(e!==null)throw e}}function fr(e,t,a,l){du=!1;var c=e.updateQueue;Ki=!1;var u=c.firstBaseUpdate,_=c.lastBaseUpdate,N=c.shared.pending;if(N!==null){c.shared.pending=null;var R=N,W=R.next;R.next=null,_===null?u=W:_.next=W,_=R;var de=e.alternate;de!==null&&(de=de.updateQueue,N=de.lastBaseUpdate,N!==_&&(N===null?de.firstBaseUpdate=W:N.next=W,de.lastBaseUpdate=R))}if(u!==null){var pe=c.baseState;_=0,de=W=R=null,N=u;do{var ne=N.lane&-536870913,se=ne!==N.lane;if(se?(st&ne)===ne:(l&ne)===ne){ne!==0&&ne===gl&&(du=!0),de!==null&&(de=de.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var ze=e,Ie=N;ne=t;var Nt=a;switch(Ie.tag){case 1:if(ze=Ie.payload,typeof ze=="function"){pe=ze.call(Nt,pe,ne);break e}pe=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=Ie.payload,ne=typeof ze=="function"?ze.call(Nt,pe,ne):ze,ne==null)break e;pe=w({},pe,ne);break e;case 2:Ki=!0}}ne=N.callback,ne!==null&&(e.flags|=64,se&&(e.flags|=8192),se=c.callbacks,se===null?c.callbacks=[ne]:se.push(ne))}else se={lane:ne,tag:N.tag,payload:N.payload,callback:N.callback,next:null},de===null?(W=de=se,R=pe):de=de.next=se,_|=ne;if(N=N.next,N===null){if(N=c.shared.pending,N===null)break;se=N,N=se.next,se.next=null,c.lastBaseUpdate=se,c.shared.pending=null}}while(!0);de===null&&(R=pe),c.baseState=R,c.firstBaseUpdate=W,c.lastBaseUpdate=de,u===null&&(c.shared.lanes=0),ns|=_,e.lanes=_,e.memoizedState=pe}}function Ah(e,t){if(typeof e!="function")throw Error(m(191,e));e.call(t)}function kh(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Ah(a[e],t)}var xl=T(null),To=T(0);function Mh(e,t){e=Si,oe(To,e),oe(xl,t),Si=e|t.baseLanes}function hu(){oe(To,Si),oe(xl,xl.current)}function fu(){Si=To.current,$(xl),$(To)}var na=T(null),wa=null;function Wi(e){var t=e.alternate;oe($t,$t.current&1),oe(na,e),wa===null&&(t===null||xl.current!==null||t.memoizedState!==null)&&(wa=e)}function mu(e){oe($t,$t.current),oe(na,e),wa===null&&(wa=e)}function zh(e){e.tag===22?(oe($t,$t.current),oe(na,e),wa===null&&(wa=e)):Ji()}function Ji(){oe($t,$t.current),oe(na,na.current)}function aa(e){$(na),wa===e&&(wa=null),$($t)}var $t=T(0);function Lo(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||xd(a)||bd(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var gi=0,$e=null,wt=null,Wt=null,Ao=!1,bl=!1,Vs=!1,ko=0,mr=0,jl=null,Qg=0;function qt(){throw Error(m(321))}function pu(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!hn(e[a],t[a]))return!1;return!0}function gu(e,t,a,l,c,u){return gi=u,$e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,A.H=e===null||e.memoizedState===null?vf:ku,Vs=!1,u=a(l,c),Vs=!1,bl&&(u=Oh(t,a,l,c)),Rh(e),u}function Rh(e){A.H=vr;var t=wt!==null&&wt.next!==null;if(gi=0,Wt=wt=$e=null,Ao=!1,mr=0,jl=null,t)throw Error(m(300));e===null||Jt||(e=e.dependencies,e!==null&&bo(e)&&(Jt=!0))}function Oh(e,t,a,l){$e=e;var c=0;do{if(bl&&(jl=null),mr=0,bl=!1,25<=c)throw Error(m(301));if(c+=1,Wt=wt=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}A.H=_f,u=t(a,l)}while(bl);return u}function Wg(){var e=A.H,t=e.useState()[0];return t=typeof t.then=="function"?pr(t):t,e=e.useState()[0],(wt!==null?wt.memoizedState:null)!==e&&($e.flags|=1024),t}function vu(){var e=ko!==0;return ko=0,e}function _u(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function yu(e){if(Ao){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Ao=!1}gi=0,Wt=wt=$e=null,bl=!1,mr=ko=0,jl=null}function kn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?$e.memoizedState=Wt=e:Wt=Wt.next=e,Wt}function Ft(){if(wt===null){var e=$e.alternate;e=e!==null?e.memoizedState:null}else e=wt.next;var t=Wt===null?$e.memoizedState:Wt.next;if(t!==null)Wt=t,wt=e;else{if(e===null)throw $e.alternate===null?Error(m(467)):Error(m(310));wt=e,e={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},Wt===null?$e.memoizedState=Wt=e:Wt=Wt.next=e}return Wt}function Mo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pr(e){var t=mr;return mr+=1,jl===null&&(jl=[]),e=Nh(jl,e,t),t=$e,(Wt===null?t.memoizedState:Wt.next)===null&&(t=t.alternate,A.H=t===null||t.memoizedState===null?vf:ku),e}function zo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return pr(e);if(e.$$typeof===q)return vn(e)}throw Error(m(438,String(e)))}function xu(e){var t=null,a=$e.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var l=$e.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Mo(),$e.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),l=0;l<e;l++)a[l]=be;return t.index++,a}function vi(e,t){return typeof t=="function"?t(e):t}function Ro(e){var t=Ft();return bu(t,wt,e)}function bu(e,t,a){var l=e.queue;if(l===null)throw Error(m(311));l.lastRenderedReducer=a;var c=e.baseQueue,u=l.pending;if(u!==null){if(c!==null){var _=c.next;c.next=u.next,u.next=_}t.baseQueue=c=u,l.pending=null}if(u=e.baseState,c===null)e.memoizedState=u;else{t=c.next;var N=_=null,R=null,W=t,de=!1;do{var pe=W.lane&-536870913;if(pe!==W.lane?(st&pe)===pe:(gi&pe)===pe){var ne=W.revertLane;if(ne===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),pe===gl&&(de=!0);else if((gi&ne)===ne){W=W.next,ne===gl&&(de=!0);continue}else pe={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},R===null?(N=R=pe,_=u):R=R.next=pe,$e.lanes|=ne,ns|=ne;pe=W.action,Vs&&a(u,pe),u=W.hasEagerState?W.eagerState:a(u,pe)}else ne={lane:pe,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},R===null?(N=R=ne,_=u):R=R.next=ne,$e.lanes|=pe,ns|=pe;W=W.next}while(W!==null&&W!==t);if(R===null?_=u:R.next=N,!hn(u,e.memoizedState)&&(Jt=!0,de&&(a=vl,a!==null)))throw a;e.memoizedState=u,e.baseState=_,e.baseQueue=R,l.lastRenderedState=u}return c===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function ju(e){var t=Ft(),a=t.queue;if(a===null)throw Error(m(311));a.lastRenderedReducer=e;var l=a.dispatch,c=a.pending,u=t.memoizedState;if(c!==null){a.pending=null;var _=c=c.next;do u=e(u,_.action),_=_.next;while(_!==c);hn(u,t.memoizedState)||(Jt=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),a.lastRenderedState=u}return[u,l]}function Dh(e,t,a){var l=$e,c=Ft(),u=et;if(u){if(a===void 0)throw Error(m(407));a=a()}else a=t();var _=!hn((wt||c).memoizedState,a);if(_&&(c.memoizedState=a,Jt=!0),c=c.queue,Nu(Uh.bind(null,l,c,e),[e]),c.getSnapshot!==t||_||Wt!==null&&Wt.memoizedState.tag&1){if(l.flags|=2048,wl(9,{destroy:void 0},Ph.bind(null,l,c,a,t),null),Tt===null)throw Error(m(349));u||(gi&127)!==0||Bh(l,t,a)}return a}function Bh(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=$e.updateQueue,t===null?(t=Mo(),$e.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Ph(e,t,a,l){t.value=a,t.getSnapshot=l,Hh(t)&&Zh(e)}function Uh(e,t,a){return a(function(){Hh(t)&&Zh(e)})}function Hh(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!hn(e,a)}catch{return!0}}function Zh(e){var t=ba(e,2);t!==null&&Gn(t,e,2)}function wu(e){var t=kn();if(typeof e=="function"){var a=e;if(e=a(),Vs){pn(!0);try{a()}finally{pn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:e},t}function qh(e,t,a,l){return e.baseState=a,bu(e,wt,typeof l=="function"?l:vi)}function Jg(e,t,a,l,c){if(Bo(e))throw Error(m(485));if(e=t.action,e!==null){var u={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){u.listeners.push(_)}};A.T!==null?a(!0):u.isTransition=!1,l(u),a=t.pending,a===null?(u.next=t.pending=u,Ih(t,u)):(u.next=a.next,t.pending=a.next=u)}}function Ih(e,t){var a=t.action,l=t.payload,c=e.state;if(t.isTransition){var u=A.T,_={};A.T=_;try{var N=a(c,l),R=A.S;R!==null&&R(_,N),Gh(e,t,N)}catch(W){Su(e,t,W)}finally{u!==null&&_.types!==null&&(u.types=_.types),A.T=u}}else try{u=a(c,l),Gh(e,t,u)}catch(W){Su(e,t,W)}}function Gh(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Vh(e,t,l)},function(l){return Su(e,t,l)}):Vh(e,t,a)}function Vh(e,t,a){t.status="fulfilled",t.value=a,Yh(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Ih(e,a)))}function Su(e,t,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=a,Yh(t),t=t.next;while(t!==l)}e.action=null}function Yh(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function $h(e,t){return t}function Fh(e,t){if(et){var a=Tt.formState;if(a!==null){e:{var l=$e;if(et){if(dt){t:{for(var c=dt,u=Un;c.nodeType!==8;){if(!u){c=null;break t}if(c=Sa(c.nextSibling),c===null){c=null;break t}}u=c.data,c=u==="F!"||u==="F"?c:null}if(c){dt=Sa(c.nextSibling),l=c.data==="F!";break e}}ti(l)}l=!1}l&&(t=a[0])}}return a=kn(),a.memoizedState=a.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$h,lastRenderedState:t},a.queue=l,a=mf.bind(null,$e,l),l.dispatch=a,l=wu(!1),u=Au.bind(null,$e,!1,l.queue),l=kn(),c={state:t,dispatch:null,action:e,pending:null},l.queue=c,a=Jg.bind(null,$e,c,u,a),c.dispatch=a,l.memoizedState=e,[t,a,!1]}function Kh(e){var t=Ft();return Xh(t,wt,e)}function Xh(e,t,a){if(t=bu(e,t,$h)[0],e=Ro(vi)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=pr(t)}catch(_){throw _===_l?So:_}else l=t;t=Ft();var c=t.queue,u=c.dispatch;return a!==t.memoizedState&&($e.flags|=2048,wl(9,{destroy:void 0},ev.bind(null,c,a),null)),[l,u,e]}function ev(e,t){e.action=t}function Qh(e){var t=Ft(),a=wt;if(a!==null)return Xh(t,a,e);Ft(),t=t.memoizedState,a=Ft();var l=a.queue.dispatch;return a.memoizedState=e,[t,l,!1]}function wl(e,t,a,l){return e={tag:e,create:a,deps:l,inst:t,next:null},t=$e.updateQueue,t===null&&(t=Mo(),$e.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,t.lastEffect=e),e}function Wh(){return Ft().memoizedState}function Oo(e,t,a,l){var c=kn();$e.flags|=e,c.memoizedState=wl(1|t,{destroy:void 0},a,l===void 0?null:l)}function Do(e,t,a,l){var c=Ft();l=l===void 0?null:l;var u=c.memoizedState.inst;wt!==null&&l!==null&&pu(l,wt.memoizedState.deps)?c.memoizedState=wl(t,u,a,l):($e.flags|=e,c.memoizedState=wl(1|t,u,a,l))}function Jh(e,t){Oo(8390656,8,e,t)}function Nu(e,t){Do(2048,8,e,t)}function tv(e){$e.flags|=4;var t=$e.updateQueue;if(t===null)t=Mo(),$e.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function ef(e){var t=Ft().memoizedState;return tv({ref:t,nextImpl:e}),function(){if((pt&2)!==0)throw Error(m(440));return t.impl.apply(void 0,arguments)}}function tf(e,t){return Do(4,2,e,t)}function nf(e,t){return Do(4,4,e,t)}function af(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function sf(e,t,a){a=a!=null?a.concat([e]):null,Do(4,4,af.bind(null,t,e),a)}function Cu(){}function lf(e,t){var a=Ft();t=t===void 0?null:t;var l=a.memoizedState;return t!==null&&pu(t,l[1])?l[0]:(a.memoizedState=[e,t],e)}function rf(e,t){var a=Ft();t=t===void 0?null:t;var l=a.memoizedState;if(t!==null&&pu(t,l[1]))return l[0];if(l=e(),Vs){pn(!0);try{e()}finally{pn(!1)}}return a.memoizedState=[l,t],l}function Eu(e,t,a){return a===void 0||(gi&1073741824)!==0&&(st&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=om(),$e.lanes|=e,ns|=e,a)}function of(e,t,a,l){return hn(a,t)?a:xl.current!==null?(e=Eu(e,a,l),hn(e,t)||(Jt=!0),e):(gi&42)===0||(gi&1073741824)!==0&&(st&261930)===0?(Jt=!0,e.memoizedState=a):(e=om(),$e.lanes|=e,ns|=e,t)}function cf(e,t,a,l,c){var u=K.p;K.p=u!==0&&8>u?u:8;var _=A.T,N={};A.T=N,Au(e,!1,t,a);try{var R=c(),W=A.S;if(W!==null&&W(N,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var de=Xg(R,l);gr(e,t,de,la(e))}else gr(e,t,l,la(e))}catch(pe){gr(e,t,{then:function(){},status:"rejected",reason:pe},la())}finally{K.p=u,_!==null&&N.types!==null&&(_.types=N.types),A.T=_}}function nv(){}function Tu(e,t,a,l){if(e.tag!==5)throw Error(m(476));var c=uf(e).queue;cf(e,c,t,le,a===null?nv:function(){return df(e),a(l)})}function uf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:le},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function df(e){var t=uf(e);t.next===null&&(t=e.alternate.memoizedState),gr(e,t.next.queue,{},la())}function Lu(){return vn(zr)}function hf(){return Ft().memoizedState}function ff(){return Ft().memoizedState}function av(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=la();e=Xi(a);var l=Qi(t,e,a);l!==null&&(Gn(l,t,a),dr(l,t,a)),t={cache:iu()},e.payload=t;return}t=t.return}}function iv(e,t,a){var l=la();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Bo(e)?pf(t,a):(a=tr(e,t,a,l),a!==null&&(Gn(a,e,l),gf(a,t,l)))}function mf(e,t,a){var l=la();gr(e,t,a,l)}function gr(e,t,a,l){var c={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Bo(e))pf(t,c);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var _=t.lastRenderedState,N=u(_,a);if(c.hasEagerState=!0,c.eagerState=N,hn(N,_))return Ja(e,t,c,0),Tt===null&&Os(),!1}catch{}finally{}if(a=tr(e,t,c,l),a!==null)return Gn(a,e,l),gf(a,t,l),!0}return!1}function Au(e,t,a,l){if(l={lane:2,revertLane:od(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Bo(e)){if(t)throw Error(m(479))}else t=tr(e,a,l,2),t!==null&&Gn(t,e,2)}function Bo(e){var t=e.alternate;return e===$e||t!==null&&t===$e}function pf(e,t){bl=Ao=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function gf(e,t,a){if((a&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,fa(e,a)}}var vr={readContext:vn,use:zo,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useLayoutEffect:qt,useInsertionEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useSyncExternalStore:qt,useId:qt,useHostTransitionStatus:qt,useFormState:qt,useActionState:qt,useOptimistic:qt,useMemoCache:qt,useCacheRefresh:qt};vr.useEffectEvent=qt;var vf={readContext:vn,use:zo,useCallback:function(e,t){return kn().memoizedState=[e,t===void 0?null:t],e},useContext:vn,useEffect:Jh,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Oo(4194308,4,af.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Oo(4194308,4,e,t)},useInsertionEffect:function(e,t){Oo(4,2,e,t)},useMemo:function(e,t){var a=kn();t=t===void 0?null:t;var l=e();if(Vs){pn(!0);try{e()}finally{pn(!1)}}return a.memoizedState=[l,t],l},useReducer:function(e,t,a){var l=kn();if(a!==void 0){var c=a(t);if(Vs){pn(!0);try{a(t)}finally{pn(!1)}}}else c=t;return l.memoizedState=l.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},l.queue=e,e=e.dispatch=iv.bind(null,$e,e),[l.memoizedState,e]},useRef:function(e){var t=kn();return e={current:e},t.memoizedState=e},useState:function(e){e=wu(e);var t=e.queue,a=mf.bind(null,$e,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Cu,useDeferredValue:function(e,t){var a=kn();return Eu(a,e,t)},useTransition:function(){var e=wu(!1);return e=cf.bind(null,$e,e.queue,!0,!1),kn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var l=$e,c=kn();if(et){if(a===void 0)throw Error(m(407));a=a()}else{if(a=t(),Tt===null)throw Error(m(349));(st&127)!==0||Bh(l,t,a)}c.memoizedState=a;var u={value:a,getSnapshot:t};return c.queue=u,Jh(Uh.bind(null,l,u,e),[e]),l.flags|=2048,wl(9,{destroy:void 0},Ph.bind(null,l,u,a,t),null),a},useId:function(){var e=kn(),t=Tt.identifierPrefix;if(et){var a=Ne,l=me;a=(l&~(1<<32-nn(l)-1)).toString(32)+a,t="_"+t+"R_"+a,a=ko++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=Qg++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Lu,useFormState:Fh,useActionState:Fh,useOptimistic:function(e){var t=kn();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Au.bind(null,$e,!0,a),a.dispatch=t,[e,t]},useMemoCache:xu,useCacheRefresh:function(){return kn().memoizedState=av.bind(null,$e)},useEffectEvent:function(e){var t=kn(),a={impl:e};return t.memoizedState=a,function(){if((pt&2)!==0)throw Error(m(440));return a.impl.apply(void 0,arguments)}}},ku={readContext:vn,use:zo,useCallback:lf,useContext:vn,useEffect:Nu,useImperativeHandle:sf,useInsertionEffect:tf,useLayoutEffect:nf,useMemo:rf,useReducer:Ro,useRef:Wh,useState:function(){return Ro(vi)},useDebugValue:Cu,useDeferredValue:function(e,t){var a=Ft();return of(a,wt.memoizedState,e,t)},useTransition:function(){var e=Ro(vi)[0],t=Ft().memoizedState;return[typeof e=="boolean"?e:pr(e),t]},useSyncExternalStore:Dh,useId:hf,useHostTransitionStatus:Lu,useFormState:Kh,useActionState:Kh,useOptimistic:function(e,t){var a=Ft();return qh(a,wt,e,t)},useMemoCache:xu,useCacheRefresh:ff};ku.useEffectEvent=ef;var _f={readContext:vn,use:zo,useCallback:lf,useContext:vn,useEffect:Nu,useImperativeHandle:sf,useInsertionEffect:tf,useLayoutEffect:nf,useMemo:rf,useReducer:ju,useRef:Wh,useState:function(){return ju(vi)},useDebugValue:Cu,useDeferredValue:function(e,t){var a=Ft();return wt===null?Eu(a,e,t):of(a,wt.memoizedState,e,t)},useTransition:function(){var e=ju(vi)[0],t=Ft().memoizedState;return[typeof e=="boolean"?e:pr(e),t]},useSyncExternalStore:Dh,useId:hf,useHostTransitionStatus:Lu,useFormState:Qh,useActionState:Qh,useOptimistic:function(e,t){var a=Ft();return wt!==null?qh(a,wt,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:xu,useCacheRefresh:ff};_f.useEffectEvent=ef;function Mu(e,t,a,l){t=e.memoizedState,a=a(l,t),a=a==null?t:w({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var zu={enqueueSetState:function(e,t,a){e=e._reactInternals;var l=la(),c=Xi(l);c.payload=t,a!=null&&(c.callback=a),t=Qi(e,c,l),t!==null&&(Gn(t,e,l),dr(t,e,l))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var l=la(),c=Xi(l);c.tag=1,c.payload=t,a!=null&&(c.callback=a),t=Qi(e,c,l),t!==null&&(Gn(t,e,l),dr(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=la(),l=Xi(a);l.tag=2,t!=null&&(l.callback=t),t=Qi(e,l,a),t!==null&&(Gn(t,e,a),dr(t,e,a))}};function yf(e,t,a,l,c,u,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,u,_):t.prototype&&t.prototype.isPureReactComponent?!Ii(a,l)||!Ii(c,u):!0}function xf(e,t,a,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,l),t.state!==e&&zu.enqueueReplaceState(t,t.state,null)}function Ys(e,t){var a=t;if("ref"in t){a={};for(var l in t)l!=="ref"&&(a[l]=t[l])}if(e=e.defaultProps){a===t&&(a=w({},a));for(var c in e)a[c]===void 0&&(a[c]=e[c])}return a}function bf(e){Rs(e)}function jf(e){console.error(e)}function wf(e){Rs(e)}function Po(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function Sf(e,t,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Ru(e,t,a){return a=Xi(a),a.tag=3,a.payload={element:null},a.callback=function(){Po(e,t)},a}function Nf(e){return e=Xi(e),e.tag=3,e}function Cf(e,t,a,l){var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var u=l.value;e.payload=function(){return c(u)},e.callback=function(){Sf(t,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(e.callback=function(){Sf(t,a,l),typeof c!="function"&&(as===null?as=new Set([this]):as.add(this));var N=l.stack;this.componentDidCatch(l.value,{componentStack:N!==null?N:""})})}function sv(e,t,a,l,c){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=a.alternate,t!==null&&pl(t,a,c,!0),a=na.current,a!==null){switch(a.tag){case 31:case 13:return wa===null?Xo():a.alternate===null&&It===0&&(It=3),a.flags&=-257,a.flags|=65536,a.lanes=c,l===No?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([l]):t.add(l),sd(e,l,c)),!1;case 22:return a.flags|=65536,l===No?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([l]):a.add(l)),sd(e,l,c)),!1}throw Error(m(435,a.tag))}return sd(e,l,c),Xo(),!1}if(et)return t=na.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,l!==ml&&(e=Error(m(422),{cause:l}),Ps(s(e,a)))):(l!==ml&&(t=Error(m(423),{cause:l}),Ps(s(t,a))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,l=s(l,a),c=Ru(e.stateNode,l,c),uu(e,c),It!==4&&(It=2)),!1;var u=Error(m(520),{cause:l});if(u=s(u,a),Nr===null?Nr=[u]:Nr.push(u),It!==4&&(It=2),t===null)return!0;l=s(l,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=c&-c,a.lanes|=e,e=Ru(a.stateNode,l,e),uu(a,e),!1;case 1:if(t=a.type,u=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(as===null||!as.has(u))))return a.flags|=65536,c&=-c,a.lanes|=c,c=Nf(c),Cf(c,e,a,l),uu(a,c),!1}a=a.return}while(a!==null);return!1}var Ou=Error(m(461)),Jt=!1;function _n(e,t,a,l){t.child=e===null?Lh(t,null,a,l):Gs(t,e.child,a,l)}function Ef(e,t,a,l,c){a=a.render;var u=t.ref;if("ref"in l){var _={};for(var N in l)N!=="ref"&&(_[N]=l[N])}else _=l;return Hs(t),l=gu(e,t,a,_,u,c),N=vu(),e!==null&&!Jt?(_u(e,t,c),_i(e,t,c)):(et&&N&&ln(t),t.flags|=1,_n(e,t,l,c),t.child)}function Tf(e,t,a,l,c){if(e===null){var u=a.type;return typeof u=="function"&&!hl(u)&&u.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=u,Lf(e,t,u,l,c)):(e=Bs(a.type,null,l,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!Iu(e,c)){var _=u.memoizedProps;if(a=a.compare,a=a!==null?a:Ii,a(_,l)&&e.ref===t.ref)return _i(e,t,c)}return t.flags|=1,e=ja(u,l),e.ref=t.ref,e.return=t,t.child=e}function Lf(e,t,a,l,c){if(e!==null){var u=e.memoizedProps;if(Ii(u,l)&&e.ref===t.ref)if(Jt=!1,t.pendingProps=l=u,Iu(e,c))(e.flags&131072)!==0&&(Jt=!0);else return t.lanes=e.lanes,_i(e,t,c)}return Du(e,t,a,l,c)}function Af(e,t,a,l){var c=l.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|a:a,e!==null){for(l=t.child=e.child,c=0;l!==null;)c=c|l.lanes|l.childLanes,l=l.sibling;l=c&~u}else l=0,t.child=null;return kf(e,t,u,a,l)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&wo(t,u!==null?u.cachePool:null),u!==null?Mh(t,u):hu(),zh(t);else return l=t.lanes=536870912,kf(e,t,u!==null?u.baseLanes|a:a,a,l)}else u!==null?(wo(t,u.cachePool),Mh(t,u),Ji(),t.memoizedState=null):(e!==null&&wo(t,null),hu(),Ji());return _n(e,t,c,a),t.child}function _r(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function kf(e,t,a,l,c){var u=lu();return u=u===null?null:{parent:Qt._currentValue,pool:u},t.memoizedState={baseLanes:a,cachePool:u},e!==null&&wo(t,null),hu(),zh(t),e!==null&&pl(e,t,l,!0),t.childLanes=c,null}function Uo(e,t){return t=Zo({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Mf(e,t,a){return Gs(t,e.child,null,a),e=Uo(t,t.pendingProps),e.flags|=2,aa(t),t.memoizedState=null,e}function lv(e,t,a){var l=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(et){if(l.mode==="hidden")return e=Uo(t,l),t.lanes=536870912,_r(null,e);if(mu(t),(e=dt)?(e=Gm(e,Un),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:te!==null?{id:me,overflow:Ne}:null,retryLane:536870912,hydrationErrors:null},a=ar(e),a.return=t,t.child=a,ut=t,dt=null)):e=null,e===null)throw ti(t);return t.lanes=536870912,null}return Uo(t,l)}var u=e.memoizedState;if(u!==null){var _=u.dehydrated;if(mu(t),c)if(t.flags&256)t.flags&=-257,t=Mf(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(m(558));else if(Jt||pl(e,t,a,!1),c=(a&e.childLanes)!==0,Jt||c){if(l=Tt,l!==null&&(_=Va(l,a),_!==0&&_!==u.retryLane))throw u.retryLane=_,ba(e,_),Gn(l,e,_),Ou;Xo(),t=Mf(e,t,a)}else e=u.treeContext,dt=Sa(_.nextSibling),ut=t,et=!0,ei=null,Un=!1,e!==null&&An(t,e),t=Uo(t,l),t.flags|=4096;return t}return e=ja(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Ho(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(m(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Du(e,t,a,l,c){return Hs(t),a=gu(e,t,a,l,void 0,c),l=vu(),e!==null&&!Jt?(_u(e,t,c),_i(e,t,c)):(et&&l&&ln(t),t.flags|=1,_n(e,t,a,c),t.child)}function zf(e,t,a,l,c,u){return Hs(t),t.updateQueue=null,a=Oh(t,l,a,c),Rh(e),l=vu(),e!==null&&!Jt?(_u(e,t,u),_i(e,t,u)):(et&&l&&ln(t),t.flags|=1,_n(e,t,a,u),t.child)}function Rf(e,t,a,l,c){if(Hs(t),t.stateNode===null){var u=hi,_=a.contextType;typeof _=="object"&&_!==null&&(u=vn(_)),u=new a(l,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=zu,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=l,u.state=t.memoizedState,u.refs={},ou(t),_=a.contextType,u.context=typeof _=="object"&&_!==null?vn(_):hi,u.state=t.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Mu(t,a,_,l),u.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(_=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),_!==u.state&&zu.enqueueReplaceState(u,u.state,null),fr(t,l,u,c),hr(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){u=t.stateNode;var N=t.memoizedProps,R=Ys(a,N);u.props=R;var W=u.context,de=a.contextType;_=hi,typeof de=="object"&&de!==null&&(_=vn(de));var pe=a.getDerivedStateFromProps;de=typeof pe=="function"||typeof u.getSnapshotBeforeUpdate=="function",N=t.pendingProps!==N,de||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(N||W!==_)&&xf(t,u,l,_),Ki=!1;var ne=t.memoizedState;u.state=ne,fr(t,l,u,c),hr(),W=t.memoizedState,N||ne!==W||Ki?(typeof pe=="function"&&(Mu(t,a,pe,l),W=t.memoizedState),(R=Ki||yf(t,a,R,l,ne,W,_))?(de||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=W),u.props=l,u.state=W,u.context=_,l=R):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{u=t.stateNode,cu(e,t),_=t.memoizedProps,de=Ys(a,_),u.props=de,pe=t.pendingProps,ne=u.context,W=a.contextType,R=hi,typeof W=="object"&&W!==null&&(R=vn(W)),N=a.getDerivedStateFromProps,(W=typeof N=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(_!==pe||ne!==R)&&xf(t,u,l,R),Ki=!1,ne=t.memoizedState,u.state=ne,fr(t,l,u,c),hr();var se=t.memoizedState;_!==pe||ne!==se||Ki||e!==null&&e.dependencies!==null&&bo(e.dependencies)?(typeof N=="function"&&(Mu(t,a,N,l),se=t.memoizedState),(de=Ki||yf(t,a,de,l,ne,se,R)||e!==null&&e.dependencies!==null&&bo(e.dependencies))?(W||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(l,se,R),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(l,se,R)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||_===e.memoizedProps&&ne===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&ne===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=se),u.props=l,u.state=se,u.context=R,l=de):(typeof u.componentDidUpdate!="function"||_===e.memoizedProps&&ne===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&ne===e.memoizedState||(t.flags|=1024),l=!1)}return u=l,Ho(e,t),l=(t.flags&128)!==0,u||l?(u=t.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&l?(t.child=Gs(t,e.child,null,c),t.child=Gs(t,null,a,c)):_n(e,t,a,c),t.memoizedState=u.state,e=t.child):e=_i(e,t,c),e}function Of(e,t,a,l){return mi(),t.flags|=256,_n(e,t,a,l),t.child}var Bu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pu(e){return{baseLanes:e,cachePool:wh()}}function Uu(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=sa),e}function Df(e,t,a){var l=t.pendingProps,c=!1,u=(t.flags&128)!==0,_;if((_=u)||(_=e!==null&&e.memoizedState===null?!1:($t.current&2)!==0),_&&(c=!0,t.flags&=-129),_=(t.flags&32)!==0,t.flags&=-33,e===null){if(et){if(c?Wi(t):Ji(),(e=dt)?(e=Gm(e,Un),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:te!==null?{id:me,overflow:Ne}:null,retryLane:536870912,hydrationErrors:null},a=ar(e),a.return=t,t.child=a,ut=t,dt=null)):e=null,e===null)throw ti(t);return bd(e)?t.lanes=32:t.lanes=536870912,null}var N=l.children;return l=l.fallback,c?(Ji(),c=t.mode,N=Zo({mode:"hidden",children:N},c),l=fi(l,c,a,null),N.return=t,l.return=t,N.sibling=l,t.child=N,l=t.child,l.memoizedState=Pu(a),l.childLanes=Uu(e,_,a),t.memoizedState=Bu,_r(null,l)):(Wi(t),Hu(t,N))}var R=e.memoizedState;if(R!==null&&(N=R.dehydrated,N!==null)){if(u)t.flags&256?(Wi(t),t.flags&=-257,t=Zu(e,t,a)):t.memoizedState!==null?(Ji(),t.child=e.child,t.flags|=128,t=null):(Ji(),N=l.fallback,c=t.mode,l=Zo({mode:"visible",children:l.children},c),N=fi(N,c,a,null),N.flags|=2,l.return=t,N.return=t,l.sibling=N,t.child=l,Gs(t,e.child,null,a),l=t.child,l.memoizedState=Pu(a),l.childLanes=Uu(e,_,a),t.memoizedState=Bu,t=_r(null,l));else if(Wi(t),bd(N)){if(_=N.nextSibling&&N.nextSibling.dataset,_)var W=_.dgst;_=W,l=Error(m(419)),l.stack="",l.digest=_,Ps({value:l,source:null,stack:null}),t=Zu(e,t,a)}else if(Jt||pl(e,t,a,!1),_=(a&e.childLanes)!==0,Jt||_){if(_=Tt,_!==null&&(l=Va(_,a),l!==0&&l!==R.retryLane))throw R.retryLane=l,ba(e,l),Gn(_,e,l),Ou;xd(N)||Xo(),t=Zu(e,t,a)}else xd(N)?(t.flags|=192,t.child=e.child,t=null):(e=R.treeContext,dt=Sa(N.nextSibling),ut=t,et=!0,ei=null,Un=!1,e!==null&&An(t,e),t=Hu(t,l.children),t.flags|=4096);return t}return c?(Ji(),N=l.fallback,c=t.mode,R=e.child,W=R.sibling,l=ja(R,{mode:"hidden",children:l.children}),l.subtreeFlags=R.subtreeFlags&65011712,W!==null?N=ja(W,N):(N=fi(N,c,a,null),N.flags|=2),N.return=t,l.return=t,l.sibling=N,t.child=l,_r(null,l),l=t.child,N=e.child.memoizedState,N===null?N=Pu(a):(c=N.cachePool,c!==null?(R=Qt._currentValue,c=c.parent!==R?{parent:R,pool:R}:c):c=wh(),N={baseLanes:N.baseLanes|a,cachePool:c}),l.memoizedState=N,l.childLanes=Uu(e,_,a),t.memoizedState=Bu,_r(e.child,l)):(Wi(t),a=e.child,e=a.sibling,a=ja(a,{mode:"visible",children:l.children}),a.return=t,a.sibling=null,e!==null&&(_=t.deletions,_===null?(t.deletions=[e],t.flags|=16):_.push(e)),t.child=a,t.memoizedState=null,a)}function Hu(e,t){return t=Zo({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Zo(e,t){return e=Sn(22,e,null,t),e.lanes=0,e}function Zu(e,t,a){return Gs(t,e.child,null,a),e=Hu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Bf(e,t,a){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),nu(e.return,t,a)}function qu(e,t,a,l,c,u){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:c,treeForkCount:u}:(_.isBackwards=t,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=c,_.treeForkCount=u)}function Pf(e,t,a){var l=t.pendingProps,c=l.revealOrder,u=l.tail;l=l.children;var _=$t.current,N=(_&2)!==0;if(N?(_=_&1|2,t.flags|=128):_&=1,oe($t,_),_n(e,t,l,a),l=et?S:0,!N&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Bf(e,a,t);else if(e.tag===19)Bf(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(a=t.child,c=null;a!==null;)e=a.alternate,e!==null&&Lo(e)===null&&(c=a),a=a.sibling;a=c,a===null?(c=t.child,t.child=null):(c=a.sibling,a.sibling=null),qu(t,!1,c,a,u,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Lo(e)===null){t.child=c;break}e=c.sibling,c.sibling=a,a=c,c=e}qu(t,!0,a,null,u,l);break;case"together":qu(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function _i(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),ns|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(pl(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(m(153));if(t.child!==null){for(e=t.child,a=ja(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=ja(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Iu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&bo(e)))}function rv(e,t,a){switch(t.tag){case 3:Se(t,t.stateNode.containerInfo),Fi(t,Qt,e.memoizedState.cache),mi();break;case 27:case 5:Je(t);break;case 4:Se(t,t.stateNode.containerInfo);break;case 10:Fi(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,mu(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Wi(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Df(e,t,a):(Wi(t),e=_i(e,t,a),e!==null?e.sibling:null);Wi(t);break;case 19:var c=(e.flags&128)!==0;if(l=(a&t.childLanes)!==0,l||(pl(e,t,a,!1),l=(a&t.childLanes)!==0),c){if(l)return Pf(e,t,a);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),oe($t,$t.current),l)break;return null;case 22:return t.lanes=0,Af(e,t,a,t.pendingProps);case 24:Fi(t,Qt,e.memoizedState.cache)}return _i(e,t,a)}function Uf(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Jt=!0;else{if(!Iu(e,a)&&(t.flags&128)===0)return Jt=!1,rv(e,t,a);Jt=(e.flags&131072)!==0}else Jt=!1,et&&(t.flags&1048576)!==0&&Fe(t,S,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=qs(t.elementType),t.type=e,typeof e=="function")hl(e)?(l=Ys(e,l),t.tag=1,t=Rf(null,t,e,l,a)):(t.tag=0,t=Du(null,t,e,l,a));else{if(e!=null){var c=e.$$typeof;if(c===ae){t.tag=11,t=Ef(null,t,e,l,a);break e}else if(c===J){t.tag=14,t=Tf(null,t,e,l,a);break e}}throw t=qe(e)||e,Error(m(306,t,""))}}return t;case 0:return Du(e,t,t.type,t.pendingProps,a);case 1:return l=t.type,c=Ys(l,t.pendingProps),Rf(e,t,l,c,a);case 3:e:{if(Se(t,t.stateNode.containerInfo),e===null)throw Error(m(387));l=t.pendingProps;var u=t.memoizedState;c=u.element,cu(e,t),fr(t,l,null,a);var _=t.memoizedState;if(l=_.cache,Fi(t,Qt,l),l!==u.cache&&au(t,[Qt],a,!0),hr(),l=_.element,u.isDehydrated)if(u={element:l,isDehydrated:!1,cache:_.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=Of(e,t,l,a);break e}else if(l!==c){c=s(Error(m(424)),t),Ps(c),t=Of(e,t,l,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(dt=Sa(e.firstChild),ut=t,et=!0,ei=null,Un=!0,a=Lh(t,null,l,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(mi(),l===c){t=_i(e,t,a);break e}_n(e,t,l,a)}t=t.child}return t;case 26:return Ho(e,t),e===null?(a=Xm(t.type,null,t.pendingProps,null))?t.memoizedState=a:et||(a=t.type,e=t.pendingProps,l=ac(ye.current).createElement(a),l[Lt]=t,l[Ut]=e,yn(l,a,e),rt(l),t.stateNode=l):t.memoizedState=Xm(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Je(t),e===null&&et&&(l=t.stateNode=$m(t.type,t.pendingProps,ye.current),ut=t,Un=!0,c=dt,rs(t.type)?(jd=c,dt=Sa(l.firstChild)):dt=c),_n(e,t,t.pendingProps.children,a),Ho(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&et&&((c=l=dt)&&(l=Bv(l,t.type,t.pendingProps,Un),l!==null?(t.stateNode=l,ut=t,dt=Sa(l.firstChild),Un=!1,c=!0):c=!1),c||ti(t)),Je(t),c=t.type,u=t.pendingProps,_=e!==null?e.memoizedProps:null,l=u.children,vd(c,u)?l=null:_!==null&&vd(c,_)&&(t.flags|=32),t.memoizedState!==null&&(c=gu(e,t,Wg,null,null,a),zr._currentValue=c),Ho(e,t),_n(e,t,l,a),t.child;case 6:return e===null&&et&&((e=a=dt)&&(a=Pv(a,t.pendingProps,Un),a!==null?(t.stateNode=a,ut=t,dt=null,e=!0):e=!1),e||ti(t)),null;case 13:return Df(e,t,a);case 4:return Se(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Gs(t,null,l,a):_n(e,t,l,a),t.child;case 11:return Ef(e,t,t.type,t.pendingProps,a);case 7:return _n(e,t,t.pendingProps,a),t.child;case 8:return _n(e,t,t.pendingProps.children,a),t.child;case 12:return _n(e,t,t.pendingProps.children,a),t.child;case 10:return l=t.pendingProps,Fi(t,t.type,l.value),_n(e,t,l.children,a),t.child;case 9:return c=t.type._context,l=t.pendingProps.children,Hs(t),c=vn(c),l=l(c),t.flags|=1,_n(e,t,l,a),t.child;case 14:return Tf(e,t,t.type,t.pendingProps,a);case 15:return Lf(e,t,t.type,t.pendingProps,a);case 19:return Pf(e,t,a);case 31:return lv(e,t,a);case 22:return Af(e,t,a,t.pendingProps);case 24:return Hs(t),l=vn(Qt),e===null?(c=lu(),c===null&&(c=Tt,u=iu(),c.pooledCache=u,u.refCount++,u!==null&&(c.pooledCacheLanes|=a),c=u),t.memoizedState={parent:l,cache:c},ou(t),Fi(t,Qt,c)):((e.lanes&a)!==0&&(cu(e,t),fr(t,null,null,a),hr()),c=e.memoizedState,u=t.memoizedState,c.parent!==l?(c={parent:l,cache:l},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),Fi(t,Qt,l)):(l=u.cache,Fi(t,Qt,l),l!==c.cache&&au(t,[Qt],a,!0))),_n(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(m(156,t.tag))}function yi(e){e.flags|=4}function Gu(e,t,a,l,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(hm())e.flags|=8192;else throw Is=No,ru}else e.flags&=-16777217}function Hf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!tp(t))if(hm())e.flags|=8192;else throw Is=No,ru}function qo(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?ha():536870912,e.lanes|=t,El|=t)}function yr(e,t){if(!et)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function At(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(t)for(var c=e.child;c!==null;)a|=c.lanes|c.childLanes,l|=c.subtreeFlags&65011712,l|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)a|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=l,e.childLanes=a,t}function ov(e,t,a){var l=t.pendingProps;switch(Zt(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(t),null;case 1:return At(t),null;case 3:return a=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),pi(Qt),Be(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Pa(t)?yi(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,lr())),At(t),null;case 26:var c=t.type,u=t.memoizedState;return e===null?(yi(t),u!==null?(At(t),Hf(t,u)):(At(t),Gu(t,c,null,l,a))):u?u!==e.memoizedState?(yi(t),At(t),Hf(t,u)):(At(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&yi(t),At(t),Gu(t,c,e,l,a)),null;case 27:if(Re(t),a=ye.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&yi(t);else{if(!l){if(t.stateNode===null)throw Error(m(166));return At(t),null}e=he.current,Pa(t)?sr(t):(e=$m(c,l,a),t.stateNode=e,yi(t))}return At(t),null;case 5:if(Re(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&yi(t);else{if(!l){if(t.stateNode===null)throw Error(m(166));return At(t),null}if(u=he.current,Pa(t))sr(t);else{var _=ac(ye.current);switch(u){case 1:u=_.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:u=_.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":u=_.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":u=_.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":u=_.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?u.multiple=!0:l.size&&(u.size=l.size);break;default:u=typeof l.is=="string"?_.createElement(c,{is:l.is}):_.createElement(c)}}u[Lt]=t,u[Ut]=l;e:for(_=t.child;_!==null;){if(_.tag===5||_.tag===6)u.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===t)break e;for(;_.sibling===null;){if(_.return===null||_.return===t)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}t.stateNode=u;e:switch(yn(u,c,l),c){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&yi(t)}}return At(t),Gu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&yi(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(m(166));if(e=ye.current,Pa(t)){if(e=t.stateNode,a=t.memoizedProps,l=null,c=ut,c!==null)switch(c.tag){case 27:case 5:l=c.memoizedProps}e[Lt]=t,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Dm(e.nodeValue,a)),e||ti(t,!0)}else e=ac(e).createTextNode(l),e[Lt]=t,t.stateNode=e}return At(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(l=Pa(t),a!==null){if(e===null){if(!l)throw Error(m(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(m(557));e[Lt]=t}else mi(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;At(t),e=!1}else a=lr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(aa(t),t):(aa(t),null);if((t.flags&128)!==0)throw Error(m(558))}return At(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=Pa(t),l!==null&&l.dehydrated!==null){if(e===null){if(!c)throw Error(m(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(m(317));c[Lt]=t}else mi(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;At(t),c=!1}else c=lr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(aa(t),t):(aa(t),null)}return aa(t),(t.flags&128)!==0?(t.lanes=a,t):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=t.child,c=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(c=l.alternate.memoizedState.cachePool.pool),u=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(u=l.memoizedState.cachePool.pool),u!==c&&(l.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),qo(t,t.updateQueue),At(t),null);case 4:return Be(),e===null&&hd(t.stateNode.containerInfo),At(t),null;case 10:return pi(t.type),At(t),null;case 19:if($($t),l=t.memoizedState,l===null)return At(t),null;if(c=(t.flags&128)!==0,u=l.rendering,u===null)if(c)yr(l,!1);else{if(It!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=Lo(e),u!==null){for(t.flags|=128,yr(l,!1),e=u.updateQueue,t.updateQueue=e,qo(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)nr(a,e),a=a.sibling;return oe($t,$t.current&1|2),et&&Pe(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&Bt()>$o&&(t.flags|=128,c=!0,yr(l,!1),t.lanes=4194304)}else{if(!c)if(e=Lo(u),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,qo(t,e),yr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!u.alternate&&!et)return At(t),null}else 2*Bt()-l.renderingStartTime>$o&&a!==536870912&&(t.flags|=128,c=!0,yr(l,!1),t.lanes=4194304);l.isBackwards?(u.sibling=t.child,t.child=u):(e=l.last,e!==null?e.sibling=u:t.child=u,l.last=u)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Bt(),e.sibling=null,a=$t.current,oe($t,c?a&1|2:a&1),et&&Pe(t,l.treeForkCount),e):(At(t),null);case 22:case 23:return aa(t),fu(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(a&536870912)!==0&&(t.flags&128)===0&&(At(t),t.subtreeFlags&6&&(t.flags|=8192)):At(t),a=t.updateQueue,a!==null&&qo(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==a&&(t.flags|=2048),e!==null&&$(Zs),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),pi(Qt),At(t),null;case 25:return null;case 30:return null}throw Error(m(156,t.tag))}function cv(e,t){switch(Zt(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return pi(Qt),Be(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Re(t),null;case 31:if(t.memoizedState!==null){if(aa(t),t.alternate===null)throw Error(m(340));mi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(aa(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(m(340));mi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return $($t),null;case 4:return Be(),null;case 10:return pi(t.type),null;case 22:case 23:return aa(t),fu(),e!==null&&$(Zs),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return pi(Qt),null;case 25:return null;default:return null}}function Zf(e,t){switch(Zt(t),t.tag){case 3:pi(Qt),Be();break;case 26:case 27:case 5:Re(t);break;case 4:Be();break;case 31:t.memoizedState!==null&&aa(t);break;case 13:aa(t);break;case 19:$($t);break;case 10:pi(t.type);break;case 22:case 23:aa(t),fu(),e!==null&&$(Zs);break;case 24:pi(Qt)}}function xr(e,t){try{var a=t.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var c=l.next;a=c;do{if((a.tag&e)===e){l=void 0;var u=a.create,_=a.inst;l=u(),_.destroy=l}a=a.next}while(a!==c)}}catch(N){bt(t,t.return,N)}}function es(e,t,a){try{var l=t.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var u=c.next;l=u;do{if((l.tag&e)===e){var _=l.inst,N=_.destroy;if(N!==void 0){_.destroy=void 0,c=t;var R=a,W=N;try{W()}catch(de){bt(c,R,de)}}}l=l.next}while(l!==u)}}catch(de){bt(t,t.return,de)}}function qf(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{kh(t,a)}catch(l){bt(e,e.return,l)}}}function If(e,t,a){a.props=Ys(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){bt(e,t,l)}}function br(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(c){bt(e,t,c)}}function ai(e,t){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(c){bt(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(c){bt(e,t,c)}else a.current=null}function Gf(e){var t=e.type,a=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(c){bt(e,e.return,c)}}function Vu(e,t,a){try{var l=e.stateNode;kv(l,e.type,a,t),l[Ut]=t}catch(c){bt(e,e.return,c)}}function Vf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&rs(e.type)||e.tag===4}function Yu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Vf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&rs(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $u(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=On));else if(l!==4&&(l===27&&rs(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for($u(e,t,a),e=e.sibling;e!==null;)$u(e,t,a),e=e.sibling}function Io(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(l!==4&&(l===27&&rs(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Io(e,t,a),e=e.sibling;e!==null;)Io(e,t,a),e=e.sibling}function Yf(e){var t=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);yn(t,l,a),t[Lt]=e,t[Ut]=a}catch(u){bt(e,e.return,u)}}var xi=!1,en=!1,Fu=!1,$f=typeof WeakSet=="function"?WeakSet:Set,mn=null;function uv(e,t){if(e=e.containerInfo,pd=uc,e=As(e),Ka(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var c=l.anchorOffset,u=l.focusNode;l=l.focusOffset;try{a.nodeType,u.nodeType}catch{a=null;break e}var _=0,N=-1,R=-1,W=0,de=0,pe=e,ne=null;t:for(;;){for(var se;pe!==a||c!==0&&pe.nodeType!==3||(N=_+c),pe!==u||l!==0&&pe.nodeType!==3||(R=_+l),pe.nodeType===3&&(_+=pe.nodeValue.length),(se=pe.firstChild)!==null;)ne=pe,pe=se;for(;;){if(pe===e)break t;if(ne===a&&++W===c&&(N=_),ne===u&&++de===l&&(R=_),(se=pe.nextSibling)!==null)break;pe=ne,ne=pe.parentNode}pe=se}a=N===-1||R===-1?null:{start:N,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(gd={focusedElem:e,selectionRange:a},uc=!1,mn=t;mn!==null;)if(t=mn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,mn=e;else for(;mn!==null;){switch(t=mn,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)c=e[a],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,a=t,c=u.memoizedProps,u=u.memoizedState,l=a.stateNode;try{var ze=Ys(a.type,c);e=l.getSnapshotBeforeUpdate(ze,u),l.__reactInternalSnapshotBeforeUpdate=e}catch(Ie){bt(a,a.return,Ie)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)yd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":yd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(m(163))}if(e=t.sibling,e!==null){e.return=t.return,mn=e;break}mn=t.return}}function Ff(e,t,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ji(e,a),l&4&&xr(5,a);break;case 1:if(ji(e,a),l&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(_){bt(a,a.return,_)}else{var c=Ys(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(_){bt(a,a.return,_)}}l&64&&qf(a),l&512&&br(a,a.return);break;case 3:if(ji(e,a),l&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{kh(e,t)}catch(_){bt(a,a.return,_)}}break;case 27:t===null&&l&4&&Yf(a);case 26:case 5:ji(e,a),t===null&&l&4&&Gf(a),l&512&&br(a,a.return);break;case 12:ji(e,a);break;case 31:ji(e,a),l&4&&Qf(e,a);break;case 13:ji(e,a),l&4&&Wf(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=yv.bind(null,a),Uv(e,a))));break;case 22:if(l=a.memoizedState!==null||xi,!l){t=t!==null&&t.memoizedState!==null||en,c=xi;var u=en;xi=l,(en=t)&&!u?wi(e,a,(a.subtreeFlags&8772)!==0):ji(e,a),xi=c,en=u}break;case 30:break;default:ji(e,a)}}function Kf(e){var t=e.alternate;t!==null&&(e.alternate=null,Kf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Ze(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var zt=null,Hn=!1;function bi(e,t,a){for(a=a.child;a!==null;)Xf(e,t,a),a=a.sibling}function Xf(e,t,a){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(Rn,a)}catch{}switch(a.tag){case 26:en||ai(a,t),bi(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:en||ai(a,t);var l=zt,c=Hn;rs(a.type)&&(zt=a.stateNode,Hn=!1),bi(e,t,a),Ar(a.stateNode),zt=l,Hn=c;break;case 5:en||ai(a,t);case 6:if(l=zt,c=Hn,zt=null,bi(e,t,a),zt=l,Hn=c,zt!==null)if(Hn)try{(zt.nodeType===9?zt.body:zt.nodeName==="HTML"?zt.ownerDocument.body:zt).removeChild(a.stateNode)}catch(u){bt(a,t,u)}else try{zt.removeChild(a.stateNode)}catch(u){bt(a,t,u)}break;case 18:zt!==null&&(Hn?(e=zt,qm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Ol(e)):qm(zt,a.stateNode));break;case 4:l=zt,c=Hn,zt=a.stateNode.containerInfo,Hn=!0,bi(e,t,a),zt=l,Hn=c;break;case 0:case 11:case 14:case 15:es(2,a,t),en||es(4,a,t),bi(e,t,a);break;case 1:en||(ai(a,t),l=a.stateNode,typeof l.componentWillUnmount=="function"&&If(a,t,l)),bi(e,t,a);break;case 21:bi(e,t,a);break;case 22:en=(l=en)||a.memoizedState!==null,bi(e,t,a),en=l;break;default:bi(e,t,a)}}function Qf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ol(e)}catch(a){bt(t,t.return,a)}}}function Wf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ol(e)}catch(a){bt(t,t.return,a)}}function dv(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new $f),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new $f),t;default:throw Error(m(435,e.tag))}}function Go(e,t){var a=dv(e);t.forEach(function(l){if(!a.has(l)){a.add(l);var c=xv.bind(null,e,l);l.then(c,c)}})}function Zn(e,t){var a=t.deletions;if(a!==null)for(var l=0;l<a.length;l++){var c=a[l],u=e,_=t,N=_;e:for(;N!==null;){switch(N.tag){case 27:if(rs(N.type)){zt=N.stateNode,Hn=!1;break e}break;case 5:zt=N.stateNode,Hn=!1;break e;case 3:case 4:zt=N.stateNode.containerInfo,Hn=!0;break e}N=N.return}if(zt===null)throw Error(m(160));Xf(u,_,c),zt=null,Hn=!1,u=c.alternate,u!==null&&(u.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Jf(t,e),t=t.sibling}var Ha=null;function Jf(e,t){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Zn(t,e),qn(e),l&4&&(es(3,e,e.return),xr(3,e),es(5,e,e.return));break;case 1:Zn(t,e),qn(e),l&512&&(en||a===null||ai(a,a.return)),l&64&&xi&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var c=Ha;if(Zn(t,e),qn(e),l&512&&(en||a===null||ai(a,a.return)),l&4){var u=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){e:{l=e.type,a=e.memoizedProps,c=c.ownerDocument||c;t:switch(l){case"title":u=c.getElementsByTagName("title")[0],(!u||u[Oe]||u[Lt]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=c.createElement(l),c.head.insertBefore(u,c.querySelector("head > title"))),yn(u,l,a),u[Lt]=e,rt(u),l=u;break e;case"link":var _=Jm("link","href",c).get(l+(a.href||""));if(_){for(var N=0;N<_.length;N++)if(u=_[N],u.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&u.getAttribute("rel")===(a.rel==null?null:a.rel)&&u.getAttribute("title")===(a.title==null?null:a.title)&&u.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(N,1);break t}}u=c.createElement(l),yn(u,l,a),c.head.appendChild(u);break;case"meta":if(_=Jm("meta","content",c).get(l+(a.content||""))){for(N=0;N<_.length;N++)if(u=_[N],u.getAttribute("content")===(a.content==null?null:""+a.content)&&u.getAttribute("name")===(a.name==null?null:a.name)&&u.getAttribute("property")===(a.property==null?null:a.property)&&u.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&u.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(N,1);break t}}u=c.createElement(l),yn(u,l,a),c.head.appendChild(u);break;default:throw Error(m(468,l))}u[Lt]=e,rt(u),l=u}e.stateNode=l}else ep(c,e.type,e.stateNode);else e.stateNode=Wm(c,l,e.memoizedProps);else u!==l?(u===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):u.count--,l===null?ep(c,e.type,e.stateNode):Wm(c,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Vu(e,e.memoizedProps,a.memoizedProps)}break;case 27:Zn(t,e),qn(e),l&512&&(en||a===null||ai(a,a.return)),a!==null&&l&4&&Vu(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Zn(t,e),qn(e),l&512&&(en||a===null||ai(a,a.return)),e.flags&32){c=e.stateNode;try{pa(c,"")}catch(ze){bt(e,e.return,ze)}}l&4&&e.stateNode!=null&&(c=e.memoizedProps,Vu(e,c,a!==null?a.memoizedProps:c)),l&1024&&(Fu=!0);break;case 6:if(Zn(t,e),qn(e),l&4){if(e.stateNode===null)throw Error(m(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(ze){bt(e,e.return,ze)}}break;case 3:if(lc=null,c=Ha,Ha=ic(t.containerInfo),Zn(t,e),Ha=c,qn(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Ol(t.containerInfo)}catch(ze){bt(e,e.return,ze)}Fu&&(Fu=!1,em(e));break;case 4:l=Ha,Ha=ic(e.stateNode.containerInfo),Zn(t,e),qn(e),Ha=l;break;case 12:Zn(t,e),qn(e);break;case 31:Zn(t,e),qn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Go(e,l)));break;case 13:Zn(t,e),qn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Yo=Bt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Go(e,l)));break;case 22:c=e.memoizedState!==null;var R=a!==null&&a.memoizedState!==null,W=xi,de=en;if(xi=W||c,en=de||R,Zn(t,e),en=de,xi=W,qn(e),l&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(a===null||R||xi||en||$s(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){R=a=t;try{if(u=R.stateNode,c)_=u.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{N=R.stateNode;var pe=R.memoizedProps.style,ne=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;N.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(ze){bt(R,R.return,ze)}}}else if(t.tag===6){if(a===null){R=t;try{R.stateNode.nodeValue=c?"":R.memoizedProps}catch(ze){bt(R,R.return,ze)}}}else if(t.tag===18){if(a===null){R=t;try{var se=R.stateNode;c?Im(se,!0):Im(R.stateNode,!1)}catch(ze){bt(R,R.return,ze)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Go(e,a))));break;case 19:Zn(t,e),qn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Go(e,l)));break;case 30:break;case 21:break;default:Zn(t,e),qn(e)}}function qn(e){var t=e.flags;if(t&2){try{for(var a,l=e.return;l!==null;){if(Vf(l)){a=l;break}l=l.return}if(a==null)throw Error(m(160));switch(a.tag){case 27:var c=a.stateNode,u=Yu(e);Io(e,u,c);break;case 5:var _=a.stateNode;a.flags&32&&(pa(_,""),a.flags&=-33);var N=Yu(e);Io(e,N,_);break;case 3:case 4:var R=a.stateNode.containerInfo,W=Yu(e);$u(e,W,R);break;default:throw Error(m(161))}}catch(de){bt(e,e.return,de)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function em(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;em(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ji(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Ff(e,t.alternate,t),t=t.sibling}function $s(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:es(4,t,t.return),$s(t);break;case 1:ai(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&If(t,t.return,a),$s(t);break;case 27:Ar(t.stateNode);case 26:case 5:ai(t,t.return),$s(t);break;case 22:t.memoizedState===null&&$s(t);break;case 30:$s(t);break;default:$s(t)}e=e.sibling}}function wi(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,c=e,u=t,_=u.flags;switch(u.tag){case 0:case 11:case 15:wi(c,u,a),xr(4,u);break;case 1:if(wi(c,u,a),l=u,c=l.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(W){bt(l,l.return,W)}if(l=u,c=l.updateQueue,c!==null){var N=l.stateNode;try{var R=c.shared.hiddenCallbacks;if(R!==null)for(c.shared.hiddenCallbacks=null,c=0;c<R.length;c++)Ah(R[c],N)}catch(W){bt(l,l.return,W)}}a&&_&64&&qf(u),br(u,u.return);break;case 27:Yf(u);case 26:case 5:wi(c,u,a),a&&l===null&&_&4&&Gf(u),br(u,u.return);break;case 12:wi(c,u,a);break;case 31:wi(c,u,a),a&&_&4&&Qf(c,u);break;case 13:wi(c,u,a),a&&_&4&&Wf(c,u);break;case 22:u.memoizedState===null&&wi(c,u,a),br(u,u.return);break;case 30:break;default:wi(c,u,a)}t=t.sibling}}function Ku(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&rr(a))}function Xu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&rr(e))}function Za(e,t,a,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)tm(e,t,a,l),t=t.sibling}function tm(e,t,a,l){var c=t.flags;switch(t.tag){case 0:case 11:case 15:Za(e,t,a,l),c&2048&&xr(9,t);break;case 1:Za(e,t,a,l);break;case 3:Za(e,t,a,l),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&rr(e)));break;case 12:if(c&2048){Za(e,t,a,l),e=t.stateNode;try{var u=t.memoizedProps,_=u.id,N=u.onPostCommit;typeof N=="function"&&N(_,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){bt(t,t.return,R)}}else Za(e,t,a,l);break;case 31:Za(e,t,a,l);break;case 13:Za(e,t,a,l);break;case 23:break;case 22:u=t.stateNode,_=t.alternate,t.memoizedState!==null?u._visibility&2?Za(e,t,a,l):jr(e,t):u._visibility&2?Za(e,t,a,l):(u._visibility|=2,Sl(e,t,a,l,(t.subtreeFlags&10256)!==0||!1)),c&2048&&Ku(_,t);break;case 24:Za(e,t,a,l),c&2048&&Xu(t.alternate,t);break;default:Za(e,t,a,l)}}function Sl(e,t,a,l,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,_=t,N=a,R=l,W=_.flags;switch(_.tag){case 0:case 11:case 15:Sl(u,_,N,R,c),xr(8,_);break;case 23:break;case 22:var de=_.stateNode;_.memoizedState!==null?de._visibility&2?Sl(u,_,N,R,c):jr(u,_):(de._visibility|=2,Sl(u,_,N,R,c)),c&&W&2048&&Ku(_.alternate,_);break;case 24:Sl(u,_,N,R,c),c&&W&2048&&Xu(_.alternate,_);break;default:Sl(u,_,N,R,c)}t=t.sibling}}function jr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,l=t,c=l.flags;switch(l.tag){case 22:jr(a,l),c&2048&&Ku(l.alternate,l);break;case 24:jr(a,l),c&2048&&Xu(l.alternate,l);break;default:jr(a,l)}t=t.sibling}}var wr=8192;function Nl(e,t,a){if(e.subtreeFlags&wr)for(e=e.child;e!==null;)nm(e,t,a),e=e.sibling}function nm(e,t,a){switch(e.tag){case 26:Nl(e,t,a),e.flags&wr&&e.memoizedState!==null&&Qv(a,Ha,e.memoizedState,e.memoizedProps);break;case 5:Nl(e,t,a);break;case 3:case 4:var l=Ha;Ha=ic(e.stateNode.containerInfo),Nl(e,t,a),Ha=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=wr,wr=16777216,Nl(e,t,a),wr=l):Nl(e,t,a));break;default:Nl(e,t,a)}}function am(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Sr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];mn=l,sm(l,e)}am(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)im(e),e=e.sibling}function im(e){switch(e.tag){case 0:case 11:case 15:Sr(e),e.flags&2048&&es(9,e,e.return);break;case 3:Sr(e);break;case 12:Sr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Vo(e)):Sr(e);break;default:Sr(e)}}function Vo(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];mn=l,sm(l,e)}am(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:es(8,t,t.return),Vo(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Vo(t));break;default:Vo(t)}e=e.sibling}}function sm(e,t){for(;mn!==null;){var a=mn;switch(a.tag){case 0:case 11:case 15:es(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:rr(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,mn=l;else e:for(a=e;mn!==null;){l=mn;var c=l.sibling,u=l.return;if(Kf(l),l===a){mn=null;break e}if(c!==null){c.return=u,mn=c;break e}mn=u}}}var hv={getCacheForType:function(e){var t=vn(Qt),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return vn(Qt).controller.signal}},fv=typeof WeakMap=="function"?WeakMap:Map,pt=0,Tt=null,tt=null,st=0,xt=0,ia=null,ts=!1,Cl=!1,Qu=!1,Si=0,It=0,ns=0,Fs=0,Wu=0,sa=0,El=0,Nr=null,In=null,Ju=!1,Yo=0,lm=0,$o=1/0,Fo=null,as=null,rn=0,is=null,Tl=null,Ni=0,ed=0,td=null,rm=null,Cr=0,nd=null;function la(){return(pt&2)!==0&&st!==0?st&-st:A.T!==null?od():Ma()}function om(){if(sa===0)if((st&536870912)===0||et){var e=dn;dn<<=1,(dn&3932160)===0&&(dn=262144),sa=e}else sa=536870912;return e=na.current,e!==null&&(e.flags|=32),sa}function Gn(e,t,a){(e===Tt&&(xt===2||xt===9)||e.cancelPendingCommit!==null)&&(Ll(e,0),ss(e,st,sa,!1)),Kn(e,a),((pt&2)===0||e!==Tt)&&(e===Tt&&((pt&2)===0&&(Fs|=a),It===4&&ss(e,st,sa,!1)),ii(e))}function cm(e,t,a){if((pt&6)!==0)throw Error(m(327));var l=!a&&(t&127)===0&&(t&e.expiredLanes)===0||Aa(e,t),c=l?gv(e,t):id(e,t,!0),u=l;do{if(c===0){Cl&&!l&&ss(e,t,0,!1);break}else{if(a=e.current.alternate,u&&!mv(a)){c=id(e,t,!1),u=!1;continue}if(c===2){if(u=t,e.errorRecoveryDisabledLanes&u)var _=0;else _=e.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){t=_;e:{var N=e;c=Nr;var R=N.current.memoizedState.isDehydrated;if(R&&(Ll(N,_).flags|=256),_=id(N,_,!1),_!==2){if(Qu&&!R){N.errorRecoveryDisabledLanes|=u,Fs|=u,c=4;break e}u=In,In=c,u!==null&&(In===null?In=u:In.push.apply(In,u))}c=_}if(u=!1,c!==2)continue}}if(c===1){Ll(e,0),ss(e,t,0,!0);break}e:{switch(l=e,u=c,u){case 0:case 1:throw Error(m(345));case 4:if((t&4194048)!==t)break;case 6:ss(l,t,sa,!ts);break e;case 2:In=null;break;case 3:case 5:break;default:throw Error(m(329))}if((t&62914560)===t&&(c=Yo+300-Bt(),10<c)){if(ss(l,t,sa,!ts),Ga(l,0,!0)!==0)break e;Ni=t,l.timeoutHandle=Hm(um.bind(null,l,a,In,Fo,Ju,t,sa,Fs,El,ts,u,"Throttled",-0,0),c);break e}um(l,a,In,Fo,Ju,t,sa,Fs,El,ts,u,null,-0,0)}}break}while(!0);ii(e)}function um(e,t,a,l,c,u,_,N,R,W,de,pe,ne,se){if(e.timeoutHandle=-1,pe=t.subtreeFlags,pe&8192||(pe&16785408)===16785408){pe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:On},nm(t,u,pe);var ze=(u&62914560)===u?Yo-Bt():(u&4194048)===u?lm-Bt():0;if(ze=Wv(pe,ze),ze!==null){Ni=u,e.cancelPendingCommit=ze(_m.bind(null,e,t,u,a,l,c,_,N,R,de,pe,null,ne,se)),ss(e,u,_,!W);return}}_m(e,t,u,a,l,c,_,N,R)}function mv(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var c=a[l],u=c.getSnapshot;c=c.value;try{if(!hn(u(),c))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ss(e,t,a,l){t&=~Wu,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var c=t;0<c;){var u=31-nn(c),_=1<<u;l[u]=-1,c&=~_}a!==0&&Mi(e,a,t)}function Ko(){return(pt&6)===0?(Er(0),!1):!0}function ad(){if(tt!==null){if(xt===0)var e=tt.return;else e=tt,Ua=ni=null,yu(e),yl=null,cr=0,e=tt;for(;e!==null;)Zf(e.alternate,e),e=e.return;tt=null}}function Ll(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Rv(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Ni=0,ad(),Tt=e,tt=a=ja(e.current,null),st=t,xt=0,ia=null,ts=!1,Cl=Aa(e,t),Qu=!1,El=sa=Wu=Fs=ns=It=0,In=Nr=null,Ju=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var c=31-nn(l),u=1<<c;t|=e[c],l&=~u}return Si=t,Os(),a}function dm(e,t){$e=null,A.H=vr,t===_l||t===So?(t=Ch(),xt=3):t===ru?(t=Ch(),xt=4):xt=t===Ou?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,ia=t,tt===null&&(It=1,Po(e,s(t,e.current)))}function hm(){var e=na.current;return e===null?!0:(st&4194048)===st?wa===null:(st&62914560)===st||(st&536870912)!==0?e===wa:!1}function fm(){var e=A.H;return A.H=vr,e===null?vr:e}function mm(){var e=A.A;return A.A=hv,e}function Xo(){It=4,ts||(st&4194048)!==st&&na.current!==null||(Cl=!0),(ns&134217727)===0&&(Fs&134217727)===0||Tt===null||ss(Tt,st,sa,!1)}function id(e,t,a){var l=pt;pt|=2;var c=fm(),u=mm();(Tt!==e||st!==t)&&(Fo=null,Ll(e,t)),t=!1;var _=It;e:do try{if(xt!==0&&tt!==null){var N=tt,R=ia;switch(xt){case 8:ad(),_=6;break e;case 3:case 2:case 9:case 6:na.current===null&&(t=!0);var W=xt;if(xt=0,ia=null,Al(e,N,R,W),a&&Cl){_=0;break e}break;default:W=xt,xt=0,ia=null,Al(e,N,R,W)}}pv(),_=It;break}catch(de){dm(e,de)}while(!0);return t&&e.shellSuspendCounter++,Ua=ni=null,pt=l,A.H=c,A.A=u,tt===null&&(Tt=null,st=0,Os()),_}function pv(){for(;tt!==null;)pm(tt)}function gv(e,t){var a=pt;pt|=2;var l=fm(),c=mm();Tt!==e||st!==t?(Fo=null,$o=Bt()+500,Ll(e,t)):Cl=Aa(e,t);e:do try{if(xt!==0&&tt!==null){t=tt;var u=ia;t:switch(xt){case 1:xt=0,ia=null,Al(e,t,u,1);break;case 2:case 9:if(Sh(u)){xt=0,ia=null,gm(t);break}t=function(){xt!==2&&xt!==9||Tt!==e||(xt=7),ii(e)},u.then(t,t);break e;case 3:xt=7;break e;case 4:xt=5;break e;case 7:Sh(u)?(xt=0,ia=null,gm(t)):(xt=0,ia=null,Al(e,t,u,7));break;case 5:var _=null;switch(tt.tag){case 26:_=tt.memoizedState;case 5:case 27:var N=tt;if(_?tp(_):N.stateNode.complete){xt=0,ia=null;var R=N.sibling;if(R!==null)tt=R;else{var W=N.return;W!==null?(tt=W,Qo(W)):tt=null}break t}}xt=0,ia=null,Al(e,t,u,5);break;case 6:xt=0,ia=null,Al(e,t,u,6);break;case 8:ad(),It=6;break e;default:throw Error(m(462))}}vv();break}catch(de){dm(e,de)}while(!0);return Ua=ni=null,A.H=l,A.A=c,pt=a,tt!==null?0:(Tt=null,st=0,Os(),It)}function vv(){for(;tt!==null&&!xn();)pm(tt)}function pm(e){var t=Uf(e.alternate,e,Si);e.memoizedProps=e.pendingProps,t===null?Qo(e):tt=t}function gm(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=zf(a,t,t.pendingProps,t.type,void 0,st);break;case 11:t=zf(a,t,t.pendingProps,t.type.render,t.ref,st);break;case 5:yu(t);default:Zf(a,t),t=tt=nr(t,Si),t=Uf(a,t,Si)}e.memoizedProps=e.pendingProps,t===null?Qo(e):tt=t}function Al(e,t,a,l){Ua=ni=null,yu(t),yl=null,cr=0;var c=t.return;try{if(sv(e,c,t,a,st)){It=1,Po(e,s(a,e.current)),tt=null;return}}catch(u){if(c!==null)throw tt=c,u;It=1,Po(e,s(a,e.current)),tt=null;return}t.flags&32768?(et||l===1?e=!0:Cl||(st&536870912)!==0?e=!1:(ts=e=!0,(l===2||l===9||l===3||l===6)&&(l=na.current,l!==null&&l.tag===13&&(l.flags|=16384))),vm(t,e)):Qo(t)}function Qo(e){var t=e;do{if((t.flags&32768)!==0){vm(t,ts);return}e=t.return;var a=ov(t.alternate,t,Si);if(a!==null){tt=a;return}if(t=t.sibling,t!==null){tt=t;return}tt=t=e}while(t!==null);It===0&&(It=5)}function vm(e,t){do{var a=cv(e.alternate,e);if(a!==null){a.flags&=32767,tt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){tt=e;return}tt=e=a}while(e!==null);It=6,tt=null}function _m(e,t,a,l,c,u,_,N,R){e.cancelPendingCommit=null;do Wo();while(rn!==0);if((pt&6)!==0)throw Error(m(327));if(t!==null){if(t===e.current)throw Error(m(177));if(u=t.lanes|t.childLanes,u|=dl,ps(e,a,u,_,N,R),e===Tt&&(tt=Tt=null,st=0),Tl=t,is=e,Ni=a,ed=u,td=c,rm=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,bv(zn,function(){return wm(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=A.T,A.T=null,c=K.p,K.p=2,_=pt,pt|=4;try{uv(e,t,a)}finally{pt=_,K.p=c,A.T=l}}rn=1,ym(),xm(),bm()}}function ym(){if(rn===1){rn=0;var e=is,t=Tl,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=A.T,A.T=null;var l=K.p;K.p=2;var c=pt;pt|=4;try{Jf(t,e);var u=gd,_=As(e.containerInfo),N=u.focusedElem,R=u.selectionRange;if(_!==N&&N&&N.ownerDocument&&rl(N.ownerDocument.documentElement,N)){if(R!==null&&Ka(N)){var W=R.start,de=R.end;if(de===void 0&&(de=W),"selectionStart"in N)N.selectionStart=W,N.selectionEnd=Math.min(de,N.value.length);else{var pe=N.ownerDocument||document,ne=pe&&pe.defaultView||window;if(ne.getSelection){var se=ne.getSelection(),ze=N.textContent.length,Ie=Math.min(R.start,ze),Nt=R.end===void 0?Ie:Math.min(R.end,ze);!se.extend&&Ie>Nt&&(_=Nt,Nt=Ie,Ie=_);var G=Ls(N,Ie),P=Ls(N,Nt);if(G&&P&&(se.rangeCount!==1||se.anchorNode!==G.node||se.anchorOffset!==G.offset||se.focusNode!==P.node||se.focusOffset!==P.offset)){var Q=pe.createRange();Q.setStart(G.node,G.offset),se.removeAllRanges(),Ie>Nt?(se.addRange(Q),se.extend(P.node,P.offset)):(Q.setEnd(P.node,P.offset),se.addRange(Q))}}}}for(pe=[],se=N;se=se.parentNode;)se.nodeType===1&&pe.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<pe.length;N++){var fe=pe[N];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}uc=!!pd,gd=pd=null}finally{pt=c,K.p=l,A.T=a}}e.current=t,rn=2}}function xm(){if(rn===2){rn=0;var e=is,t=Tl,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=A.T,A.T=null;var l=K.p;K.p=2;var c=pt;pt|=4;try{Ff(e,t.alternate,t)}finally{pt=c,K.p=l,A.T=a}}rn=3}}function bm(){if(rn===4||rn===3){rn=0,ua();var e=is,t=Tl,a=Ni,l=rm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?rn=5:(rn=0,Tl=is=null,jm(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(as=null),Me(a),t=t.stateNode,Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(Rn,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=A.T,c=K.p,K.p=2,A.T=null;try{for(var u=e.onRecoverableError,_=0;_<l.length;_++){var N=l[_];u(N.value,{componentStack:N.stack})}}finally{A.T=t,K.p=c}}(Ni&3)!==0&&Wo(),ii(e),c=e.pendingLanes,(a&261930)!==0&&(c&42)!==0?e===nd?Cr++:(Cr=0,nd=e):Cr=0,Er(0)}}function jm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,rr(t)))}function Wo(){return ym(),xm(),bm(),wm()}function wm(){if(rn!==5)return!1;var e=is,t=ed;ed=0;var a=Me(Ni),l=A.T,c=K.p;try{K.p=32>a?32:a,A.T=null,a=td,td=null;var u=is,_=Ni;if(rn=0,Tl=is=null,Ni=0,(pt&6)!==0)throw Error(m(331));var N=pt;if(pt|=4,im(u.current),tm(u,u.current,_,a),pt=N,Er(0,!1),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(Rn,u)}catch{}return!0}finally{K.p=c,A.T=l,jm(e,t)}}function Sm(e,t,a){t=s(a,t),t=Ru(e.stateNode,t,2),e=Qi(e,t,2),e!==null&&(Kn(e,2),ii(e))}function bt(e,t,a){if(e.tag===3)Sm(e,e,a);else for(;t!==null;){if(t.tag===3){Sm(t,e,a);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(as===null||!as.has(l))){e=s(a,e),a=Nf(2),l=Qi(t,a,2),l!==null&&(Cf(a,l,t,e),Kn(l,2),ii(l));break}}t=t.return}}function sd(e,t,a){var l=e.pingCache;if(l===null){l=e.pingCache=new fv;var c=new Set;l.set(t,c)}else c=l.get(t),c===void 0&&(c=new Set,l.set(t,c));c.has(a)||(Qu=!0,c.add(a),e=_v.bind(null,e,t,a),t.then(e,e))}function _v(e,t,a){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Tt===e&&(st&a)===a&&(It===4||It===3&&(st&62914560)===st&&300>Bt()-Yo?(pt&2)===0&&Ll(e,0):Wu|=a,El===st&&(El=0)),ii(e)}function Nm(e,t){t===0&&(t=ha()),e=ba(e,t),e!==null&&(Kn(e,t),ii(e))}function yv(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Nm(e,a)}function xv(e,t){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,c=e.memoizedState;c!==null&&(a=c.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(m(314))}l!==null&&l.delete(t),Nm(e,a)}function bv(e,t){return cn(e,t)}var Jo=null,kl=null,ld=!1,ec=!1,rd=!1,ls=0;function ii(e){e!==kl&&e.next===null&&(kl===null?Jo=kl=e:kl=kl.next=e),ec=!0,ld||(ld=!0,wv())}function Er(e,t){if(!rd&&ec){rd=!0;do for(var a=!1,l=Jo;l!==null;){if(e!==0){var c=l.pendingLanes;if(c===0)var u=0;else{var _=l.suspendedLanes,N=l.pingedLanes;u=(1<<31-nn(42|e)+1)-1,u&=c&~(_&~N),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(a=!0,Lm(l,u))}else u=st,u=Ga(l,l===Tt?u:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(u&3)===0||Aa(l,u)||(a=!0,Lm(l,u));l=l.next}while(a);rd=!1}}function jv(){Cm()}function Cm(){ec=ld=!1;var e=0;ls!==0&&zv()&&(e=ls);for(var t=Bt(),a=null,l=Jo;l!==null;){var c=l.next,u=Em(l,t);u===0?(l.next=null,a===null?Jo=c:a.next=c,c===null&&(kl=a)):(a=l,(e!==0||(u&3)!==0)&&(ec=!0)),l=c}rn!==0&&rn!==5||Er(e),ls!==0&&(ls=0)}function Em(e,t){for(var a=e.suspendedLanes,l=e.pingedLanes,c=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var _=31-nn(u),N=1<<_,R=c[_];R===-1?((N&a)===0||(N&l)!==0)&&(c[_]=ms(N,t)):R<=t&&(e.expiredLanes|=N),u&=~N}if(t=Tt,a=st,a=Ga(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===t&&(xt===2||xt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&tn(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Aa(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(l!==null&&tn(l),Me(a)){case 2:case 8:a=ct;break;case 32:a=zn;break;case 268435456:a=Ia;break;default:a=zn}return l=Tm.bind(null,e),a=cn(a,l),e.callbackPriority=t,e.callbackNode=a,t}return l!==null&&l!==null&&tn(l),e.callbackPriority=2,e.callbackNode=null,2}function Tm(e,t){if(rn!==0&&rn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Wo()&&e.callbackNode!==a)return null;var l=st;return l=Ga(e,e===Tt?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(cm(e,l,t),Em(e,Bt()),e.callbackNode!=null&&e.callbackNode===a?Tm.bind(null,e):null)}function Lm(e,t){if(Wo())return null;cm(e,t,!0)}function wv(){Ov(function(){(pt&6)!==0?cn(da,jv):Cm()})}function od(){if(ls===0){var e=gl;e===0&&(e=Fn,Fn<<=1,(Fn&261888)===0&&(Fn=256)),ls=e}return ls}function Am(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Oi(""+e)}function km(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function Sv(e,t,a,l,c){if(t==="submit"&&a&&a.stateNode===c){var u=Am((c[Ut]||null).action),_=l.submitter;_&&(t=(t=_[Ut]||null)?Am(t.formAction):_.getAttribute("formAction"),t!==null&&(u=t,_=null));var N=new el("action","action",null,l,c);e.push({event:N,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ls!==0){var R=_?km(c,_):new FormData(c);Tu(a,{pending:!0,data:R,method:c.method,action:u},null,R)}}else typeof u=="function"&&(N.preventDefault(),R=_?km(c,_):new FormData(c),Tu(a,{pending:!0,data:R,method:c.method,action:u},u,R))},currentTarget:c}]})}}for(var cd=0;cd<Wa.length;cd++){var ud=Wa[cd],Nv=ud.toLowerCase(),Cv=ud[0].toUpperCase()+ud.slice(1);Bn(Nv,"on"+Cv)}Bn(Ms,"onAnimationEnd"),Bn(_o,"onAnimationIteration"),Bn(zs,"onAnimationStart"),Bn("dblclick","onDoubleClick"),Bn("focusin","onFocus"),Bn("focusout","onBlur"),Bn(Jc,"onTransitionRun"),Bn(yo,"onTransitionStart"),Bn(eu,"onTransitionCancel"),Bn(Yi,"onTransitionEnd"),ot("onMouseEnter",["mouseout","mouseover"]),ot("onMouseLeave",["mouseout","mouseover"]),ot("onPointerEnter",["pointerout","pointerover"]),ot("onPointerLeave",["pointerout","pointerover"]),at("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),at("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),at("onBeforeInput",["compositionend","keypress","textInput","paste"]),at("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),at("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),at("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ev=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tr));function Mm(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],c=l.event;l=l.listeners;e:{var u=void 0;if(t)for(var _=l.length-1;0<=_;_--){var N=l[_],R=N.instance,W=N.currentTarget;if(N=N.listener,R!==u&&c.isPropagationStopped())break e;u=N,c.currentTarget=W;try{u(c)}catch(de){Rs(de)}c.currentTarget=null,u=R}else for(_=0;_<l.length;_++){if(N=l[_],R=N.instance,W=N.currentTarget,N=N.listener,R!==u&&c.isPropagationStopped())break e;u=N,c.currentTarget=W;try{u(c)}catch(de){Rs(de)}c.currentTarget=null,u=R}}}}function nt(e,t){var a=t[I];a===void 0&&(a=t[I]=new Set);var l=e+"__bubble";a.has(l)||(zm(t,e,2,!1),a.add(l))}function dd(e,t,a){var l=0;t&&(l|=4),zm(a,e,l,t)}var tc="_reactListening"+Math.random().toString(36).slice(2);function hd(e){if(!e[tc]){e[tc]=!0,bn.forEach(function(a){a!=="selectionchange"&&(Ev.has(a)||dd(a,!1,e),dd(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[tc]||(t[tc]=!0,dd("selectionchange",!1,t))}}function zm(e,t,a,l){switch(op(t)){case 2:var c=t_;break;case 8:c=n_;break;default:c=Ed}a=c.bind(null,t,a,e),c=void 0,!xs||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),l?c!==void 0?e.addEventListener(t,a,{capture:!0,passive:c}):e.addEventListener(t,a,!0):c!==void 0?e.addEventListener(t,a,{passive:c}):e.addEventListener(t,a,!1)}function fd(e,t,a,l,c){var u=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var N=l.stateNode.containerInfo;if(N===c)break;if(_===4)for(_=l.return;_!==null;){var R=_.tag;if((R===3||R===4)&&_.stateNode.containerInfo===c)return;_=_.return}for(;N!==null;){if(_=Te(N),_===null)return;if(R=_.tag,R===5||R===6||R===26||R===27){l=u=_;continue e}N=N.parentNode}}l=l.return}Vl(function(){var W=u,de=ys(a),pe=[];e:{var ne=xo.get(e);if(ne!==void 0){var se=el,ze=e;switch(e){case"keypress":if(bs(a)===0)break e;case"keydown":case"keyup":se=so;break;case"focusin":ze="focus",se=Fl;break;case"focusout":ze="blur",se=Fl;break;case"beforeblur":case"afterblur":se=Fl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=eo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=qc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=$c;break;case Ms:case _o:case zs:se=Kl;break;case Yi:se=oo;break;case"scroll":case"scrollend":se=it;break;case"wheel":se=di;break;case"copy":case"cut":case"paste":se=va;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=lo;break;case"toggle":case"beforetoggle":se=Ss}var Ie=(t&4)!==0,Nt=!Ie&&(e==="scroll"||e==="scrollend"),G=Ie?ne!==null?ne+"Capture":null:ne;Ie=[];for(var P=W,Q;P!==null;){var fe=P;if(Q=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||Q===null||G===null||(fe=ci(P,G),fe!=null&&Ie.push(Lr(P,fe,Q))),Nt)break;P=P.return}0<Ie.length&&(ne=new se(ne,ze,null,a,de),pe.push({event:ne,listeners:Ie}))}}if((t&7)===0){e:{if(ne=e==="mouseover"||e==="pointerover",se=e==="mouseout"||e==="pointerout",ne&&a!==Js&&(ze=a.relatedTarget||a.fromElement)&&(Te(ze)||ze[Xn]))break e;if((se||ne)&&(ne=de.window===de?de:(ne=de.ownerDocument)?ne.defaultView||ne.parentWindow:window,se?(ze=a.relatedTarget||a.toElement,se=W,ze=ze?Te(ze):null,ze!==null&&(Nt=b(ze),Ie=ze.tag,ze!==Nt||Ie!==5&&Ie!==27&&Ie!==6)&&(ze=null)):(se=null,ze=W),se!==ze)){if(Ie=eo,fe="onMouseLeave",G="onMouseEnter",P="mouse",(e==="pointerout"||e==="pointerover")&&(Ie=lo,fe="onPointerLeave",G="onPointerEnter",P="pointer"),Nt=se==null?ne:vt(se),Q=ze==null?ne:vt(ze),ne=new Ie(fe,P+"leave",se,a,de),ne.target=Nt,ne.relatedTarget=Q,fe=null,Te(de)===W&&(Ie=new Ie(G,P+"enter",ze,a,de),Ie.target=Q,Ie.relatedTarget=Nt,fe=Ie),Nt=fe,se&&ze)t:{for(Ie=Tv,G=se,P=ze,Q=0,fe=G;fe;fe=Ie(fe))Q++;fe=0;for(var Ue=P;Ue;Ue=Ie(Ue))fe++;for(;0<Q-fe;)G=Ie(G),Q--;for(;0<fe-Q;)P=Ie(P),fe--;for(;Q--;){if(G===P||P!==null&&G===P.alternate){Ie=G;break t}G=Ie(G),P=Ie(P)}Ie=null}else Ie=null;se!==null&&Rm(pe,ne,se,Ie,!1),ze!==null&&Nt!==null&&Rm(pe,Nt,ze,Ie,!0)}}e:{if(ne=W?vt(W):window,se=ne.nodeName&&ne.nodeName.toLowerCase(),se==="select"||se==="input"&&ne.type==="file")var ht=Ts;else if(_a(ne))if(fo)ht=Wc;else{ht=Qc;var De=Da}else se=ne.nodeName,!se||se.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?W&&_s(W.elementType)&&(ht=Ts):ht=qi;if(ht&&(ht=ht(e,W))){ho(pe,ht,a,de);break e}De&&De(e,ne,W),e==="focusout"&&W&&ne.type==="number"&&W.memoizedProps.value!=null&&za(ne,"number",ne.value)}switch(De=W?vt(W):window,e){case"focusin":(_a(De)||De.contentEditable==="true")&&(Xa=De,cl=W,ks=null);break;case"focusout":ks=cl=Xa=null;break;case"mousedown":Gi=!0;break;case"contextmenu":case"mouseup":case"dragend":Gi=!1,go(pe,a,de);break;case"selectionchange":if(ol)break;case"keydown":case"keyup":go(pe,a,de)}var Ke;if(nl)e:{switch(e){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else Ui?uo(e,a)&&(lt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(lt="onCompositionStart");lt&&(al&&a.locale!=="ko"&&(Ui||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&Ui&&(Ke=$a()):(ga=de,ui="value"in ga?ga.value:ga.textContent,Ui=!0)),De=nc(W,lt),0<De.length&&(lt=new Xl(lt,e,null,a,de),pe.push({event:lt,listeners:De}),Ke?lt.data=Ke:(Ke=er(a),Ke!==null&&(lt.data=Ke)))),(Ke=Kc?ta(e,a):Hi(e,a))&&(lt=nc(W,"onBeforeInput"),0<lt.length&&(De=new Xl("onBeforeInput","beforeinput",null,a,de),pe.push({event:De,listeners:lt}),De.data=Ke)),Sv(pe,e,W,a,de)}Mm(pe,t)})}function Lr(e,t,a){return{instance:e,listener:t,currentTarget:a}}function nc(e,t){for(var a=t+"Capture",l=[];e!==null;){var c=e,u=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||u===null||(c=ci(e,a),c!=null&&l.unshift(Lr(e,c,u)),c=ci(e,t),c!=null&&l.push(Lr(e,c,u))),e.tag===3)return l;e=e.return}return[]}function Tv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Rm(e,t,a,l,c){for(var u=t._reactName,_=[];a!==null&&a!==l;){var N=a,R=N.alternate,W=N.stateNode;if(N=N.tag,R!==null&&R===l)break;N!==5&&N!==26&&N!==27||W===null||(R=W,c?(W=ci(a,u),W!=null&&_.unshift(Lr(a,W,R))):c||(W=ci(a,u),W!=null&&_.push(Lr(a,W,R)))),a=a.return}_.length!==0&&e.push({event:t,listeners:_})}var Lv=/\r\n?/g,Av=/\u0000|\uFFFD/g;function Om(e){return(typeof e=="string"?e:""+e).replace(Lv,`
`).replace(Av,"")}function Dm(e,t){return t=Om(t),Om(e)===t}function St(e,t,a,l,c,u){switch(a){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||pa(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&pa(e,""+l);break;case"className":_t(e,"class",l);break;case"tabIndex":_t(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":_t(e,a,l);break;case"style":Qs(e,l,u);break;case"data":if(t!=="object"){_t(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Oi(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(a==="formAction"?(t!=="input"&&St(e,t,"name",c.name,c,null),St(e,t,"formEncType",c.formEncType,c,null),St(e,t,"formMethod",c.formMethod,c,null),St(e,t,"formTarget",c.formTarget,c,null)):(St(e,t,"encType",c.encType,c,null),St(e,t,"method",c.method,c,null),St(e,t,"target",c.target,c,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Oi(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=On);break;case"onScroll":l!=null&&nt("scroll",e);break;case"onScrollEnd":l!=null&&nt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(m(61));if(a=l.__html,a!=null){if(c.children!=null)throw Error(m(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=Oi(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":nt("beforetoggle",e),nt("toggle",e),Xe(e,"popover",l);break;case"xlinkActuate":jn(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":jn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":jn(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":jn(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":jn(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":jn(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":jn(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":jn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":jn(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Xe(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ws.get(a)||a,Xe(e,a,l))}}function md(e,t,a,l,c,u){switch(a){case"style":Qs(e,l,u);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(m(61));if(a=l.__html,a!=null){if(c.children!=null)throw Error(m(60));e.innerHTML=a}}break;case"children":typeof l=="string"?pa(e,l):(typeof l=="number"||typeof l=="bigint")&&pa(e,""+l);break;case"onScroll":l!=null&&nt("scroll",e);break;case"onScrollEnd":l!=null&&nt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=On);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sn.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(c=a.endsWith("Capture"),t=a.slice(2,c?a.length-7:void 0),u=e[Ut]||null,u=u!=null?u[a]:null,typeof u=="function"&&e.removeEventListener(t,u,c),typeof l=="function")){typeof u!="function"&&u!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,l,c);break e}a in e?e[a]=l:l===!0?e.setAttribute(a,""):Xe(e,a,l)}}}function yn(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nt("error",e),nt("load",e);var l=!1,c=!1,u;for(u in a)if(a.hasOwnProperty(u)){var _=a[u];if(_!=null)switch(u){case"src":l=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(m(137,t));default:St(e,t,u,_,a,null)}}c&&St(e,t,"srcSet",a.srcSet,a,null),l&&St(e,t,"src",a.src,a,null);return;case"input":nt("invalid",e);var N=u=_=c=null,R=null,W=null;for(l in a)if(a.hasOwnProperty(l)){var de=a[l];if(de!=null)switch(l){case"name":c=de;break;case"type":_=de;break;case"checked":R=de;break;case"defaultChecked":W=de;break;case"value":u=de;break;case"defaultValue":N=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(m(137,t));break;default:St(e,t,l,de,a,null)}}Yt(e,u,N,R,W,_,c,!1);return;case"select":nt("invalid",e),l=_=u=null;for(c in a)if(a.hasOwnProperty(c)&&(N=a[c],N!=null))switch(c){case"value":u=N;break;case"defaultValue":_=N;break;case"multiple":l=N;default:St(e,t,c,N,a,null)}t=u,a=_,e.multiple=!!l,t!=null?Et(e,!!l,t,!1):a!=null&&Et(e,!!l,a,!0);return;case"textarea":nt("invalid",e),u=c=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(N=a[_],N!=null))switch(_){case"value":l=N;break;case"defaultValue":c=N;break;case"children":u=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(m(91));break;default:St(e,t,_,N,a,null)}zi(e,l,c,u);return;case"option":for(R in a)if(a.hasOwnProperty(R)&&(l=a[R],l!=null))switch(R){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:St(e,t,R,l,a,null)}return;case"dialog":nt("beforetoggle",e),nt("toggle",e),nt("cancel",e),nt("close",e);break;case"iframe":case"object":nt("load",e);break;case"video":case"audio":for(l=0;l<Tr.length;l++)nt(Tr[l],e);break;case"image":nt("error",e),nt("load",e);break;case"details":nt("toggle",e);break;case"embed":case"source":case"link":nt("error",e),nt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in a)if(a.hasOwnProperty(W)&&(l=a[W],l!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(m(137,t));default:St(e,t,W,l,a,null)}return;default:if(_s(t)){for(de in a)a.hasOwnProperty(de)&&(l=a[de],l!==void 0&&md(e,t,de,l,a,void 0));return}}for(N in a)a.hasOwnProperty(N)&&(l=a[N],l!=null&&St(e,t,N,l,a,null))}function kv(e,t,a,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,u=null,_=null,N=null,R=null,W=null,de=null;for(se in a){var pe=a[se];if(a.hasOwnProperty(se)&&pe!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":R=pe;default:l.hasOwnProperty(se)||St(e,t,se,null,l,pe)}}for(var ne in l){var se=l[ne];if(pe=a[ne],l.hasOwnProperty(ne)&&(se!=null||pe!=null))switch(ne){case"type":u=se;break;case"name":c=se;break;case"checked":W=se;break;case"defaultChecked":de=se;break;case"value":_=se;break;case"defaultValue":N=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(m(137,t));break;default:se!==pe&&St(e,t,ne,se,l,pe)}}Qn(e,_,N,R,W,de,u,c);return;case"select":se=_=N=ne=null;for(u in a)if(R=a[u],a.hasOwnProperty(u)&&R!=null)switch(u){case"value":break;case"multiple":se=R;default:l.hasOwnProperty(u)||St(e,t,u,null,l,R)}for(c in l)if(u=l[c],R=a[c],l.hasOwnProperty(c)&&(u!=null||R!=null))switch(c){case"value":ne=u;break;case"defaultValue":N=u;break;case"multiple":_=u;default:u!==R&&St(e,t,c,u,l,R)}t=N,a=_,l=se,ne!=null?Et(e,!!a,ne,!1):!!l!=!!a&&(t!=null?Et(e,!!a,t,!0):Et(e,!!a,a?[]:"",!1));return;case"textarea":se=ne=null;for(N in a)if(c=a[N],a.hasOwnProperty(N)&&c!=null&&!l.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:St(e,t,N,null,l,c)}for(_ in l)if(c=l[_],u=a[_],l.hasOwnProperty(_)&&(c!=null||u!=null))switch(_){case"value":ne=c;break;case"defaultValue":se=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(m(91));break;default:c!==u&&St(e,t,_,c,l,u)}Ya(e,ne,se);return;case"option":for(var ze in a)if(ne=a[ze],a.hasOwnProperty(ze)&&ne!=null&&!l.hasOwnProperty(ze))switch(ze){case"selected":e.selected=!1;break;default:St(e,t,ze,null,l,ne)}for(R in l)if(ne=l[R],se=a[R],l.hasOwnProperty(R)&&ne!==se&&(ne!=null||se!=null))switch(R){case"selected":e.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:St(e,t,R,ne,l,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in a)ne=a[Ie],a.hasOwnProperty(Ie)&&ne!=null&&!l.hasOwnProperty(Ie)&&St(e,t,Ie,null,l,ne);for(W in l)if(ne=l[W],se=a[W],l.hasOwnProperty(W)&&ne!==se&&(ne!=null||se!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(m(137,t));break;default:St(e,t,W,ne,l,se)}return;default:if(_s(t)){for(var Nt in a)ne=a[Nt],a.hasOwnProperty(Nt)&&ne!==void 0&&!l.hasOwnProperty(Nt)&&md(e,t,Nt,void 0,l,ne);for(de in l)ne=l[de],se=a[de],!l.hasOwnProperty(de)||ne===se||ne===void 0&&se===void 0||md(e,t,de,ne,l,se);return}}for(var G in a)ne=a[G],a.hasOwnProperty(G)&&ne!=null&&!l.hasOwnProperty(G)&&St(e,t,G,null,l,ne);for(pe in l)ne=l[pe],se=a[pe],!l.hasOwnProperty(pe)||ne===se||ne==null&&se==null||St(e,t,pe,ne,l,se)}function Bm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Mv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var c=a[l],u=c.transferSize,_=c.initiatorType,N=c.duration;if(u&&N&&Bm(_)){for(_=0,N=c.responseEnd,l+=1;l<a.length;l++){var R=a[l],W=R.startTime;if(W>N)break;var de=R.transferSize,pe=R.initiatorType;de&&Bm(pe)&&(R=R.responseEnd,_+=de*(R<N?1:(N-W)/(R-W)))}if(--l,t+=8*(u+_)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var pd=null,gd=null;function ac(e){return e.nodeType===9?e:e.ownerDocument}function Pm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Um(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function vd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var _d=null;function zv(){var e=window.event;return e&&e.type==="popstate"?e===_d?!1:(_d=e,!0):(_d=null,!1)}var Hm=typeof setTimeout=="function"?setTimeout:void 0,Rv=typeof clearTimeout=="function"?clearTimeout:void 0,Zm=typeof Promise=="function"?Promise:void 0,Ov=typeof queueMicrotask=="function"?queueMicrotask:typeof Zm<"u"?function(e){return Zm.resolve(null).then(e).catch(Dv)}:Hm;function Dv(e){setTimeout(function(){throw e})}function rs(e){return e==="head"}function qm(e,t){var a=t,l=0;do{var c=a.nextSibling;if(e.removeChild(a),c&&c.nodeType===8)if(a=c.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(c),Ol(t);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Ar(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Ar(a);for(var u=a.firstChild;u;){var _=u.nextSibling,N=u.nodeName;u[Oe]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&u.rel.toLowerCase()==="stylesheet"||a.removeChild(u),u=_}}else a==="body"&&Ar(e.ownerDocument.body);a=c}while(a);Ol(t)}function Im(e,t){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function yd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":yd(a),Ze(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Bv(e,t,a,l){for(;e.nodeType===1;){var c=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Oe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=Sa(e.nextSibling),e===null)break}return null}function Pv(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Sa(e.nextSibling),e===null))return null;return e}function Gm(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Sa(e.nextSibling),e===null))return null;return e}function xd(e){return e.data==="$?"||e.data==="$~"}function bd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Uv(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var l=function(){t(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Sa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var jd=null;function Vm(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Sa(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function Ym(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function $m(e,t,a){switch(t=ac(a),e){case"html":if(e=t.documentElement,!e)throw Error(m(452));return e;case"head":if(e=t.head,!e)throw Error(m(453));return e;case"body":if(e=t.body,!e)throw Error(m(454));return e;default:throw Error(m(451))}}function Ar(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ze(e)}var Na=new Map,Fm=new Set;function ic(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ci=K.d;K.d={f:Hv,r:Zv,D:qv,C:Iv,L:Gv,m:Vv,X:$v,S:Yv,M:Fv};function Hv(){var e=Ci.f(),t=Ko();return e||t}function Zv(e){var t=Le(e);t!==null&&t.tag===5&&t.type==="form"?df(t):Ci.r(e)}var Ml=typeof document>"u"?null:document;function Km(e,t,a){var l=Ml;if(l&&typeof t=="string"&&t){var c=Qe(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof a=="string"&&(c+='[crossorigin="'+a+'"]'),Fm.has(c)||(Fm.add(c),e={rel:e,crossOrigin:a,href:t},l.querySelector(c)===null&&(t=l.createElement("link"),yn(t,"link",e),rt(t),l.head.appendChild(t)))}}function qv(e){Ci.D(e),Km("dns-prefetch",e,null)}function Iv(e,t){Ci.C(e,t),Km("preconnect",e,t)}function Gv(e,t,a){Ci.L(e,t,a);var l=Ml;if(l&&e&&t){var c='link[rel="preload"][as="'+Qe(t)+'"]';t==="image"&&a&&a.imageSrcSet?(c+='[imagesrcset="'+Qe(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(c+='[imagesizes="'+Qe(a.imageSizes)+'"]')):c+='[href="'+Qe(e)+'"]';var u=c;switch(t){case"style":u=zl(e);break;case"script":u=Rl(e)}Na.has(u)||(e=w({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Na.set(u,e),l.querySelector(c)!==null||t==="style"&&l.querySelector(kr(u))||t==="script"&&l.querySelector(Mr(u))||(t=l.createElement("link"),yn(t,"link",e),rt(t),l.head.appendChild(t)))}}function Vv(e,t){Ci.m(e,t);var a=Ml;if(a&&e){var l=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+Qe(l)+'"][href="'+Qe(e)+'"]',u=c;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=Rl(e)}if(!Na.has(u)&&(e=w({rel:"modulepreload",href:e},t),Na.set(u,e),a.querySelector(c)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Mr(u)))return}l=a.createElement("link"),yn(l,"link",e),rt(l),a.head.appendChild(l)}}}function Yv(e,t,a){Ci.S(e,t,a);var l=Ml;if(l&&e){var c=Ye(l).hoistableStyles,u=zl(e);t=t||"default";var _=c.get(u);if(!_){var N={loading:0,preload:null};if(_=l.querySelector(kr(u)))N.loading=5;else{e=w({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Na.get(u))&&wd(e,a);var R=_=l.createElement("link");rt(R),yn(R,"link",e),R._p=new Promise(function(W,de){R.onload=W,R.onerror=de}),R.addEventListener("load",function(){N.loading|=1}),R.addEventListener("error",function(){N.loading|=2}),N.loading|=4,sc(_,t,l)}_={type:"stylesheet",instance:_,count:1,state:N},c.set(u,_)}}}function $v(e,t){Ci.X(e,t);var a=Ml;if(a&&e){var l=Ye(a).hoistableScripts,c=Rl(e),u=l.get(c);u||(u=a.querySelector(Mr(c)),u||(e=w({src:e,async:!0},t),(t=Na.get(c))&&Sd(e,t),u=a.createElement("script"),rt(u),yn(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},l.set(c,u))}}function Fv(e,t){Ci.M(e,t);var a=Ml;if(a&&e){var l=Ye(a).hoistableScripts,c=Rl(e),u=l.get(c);u||(u=a.querySelector(Mr(c)),u||(e=w({src:e,async:!0,type:"module"},t),(t=Na.get(c))&&Sd(e,t),u=a.createElement("script"),rt(u),yn(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},l.set(c,u))}}function Xm(e,t,a,l){var c=(c=ye.current)?ic(c):null;if(!c)throw Error(m(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=zl(a.href),a=Ye(c).hoistableStyles,l=a.get(t),l||(l={type:"style",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=zl(a.href);var u=Ye(c).hoistableStyles,_=u.get(e);if(_||(c=c.ownerDocument||c,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,_),(u=c.querySelector(kr(e)))&&!u._p&&(_.instance=u,_.state.loading=5),Na.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Na.set(e,a),u||Kv(c,e,a,_.state))),t&&l===null)throw Error(m(528,""));return _}if(t&&l!==null)throw Error(m(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Rl(a),a=Ye(c).hoistableScripts,l=a.get(t),l||(l={type:"script",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(m(444,e))}}function zl(e){return'href="'+Qe(e)+'"'}function kr(e){return'link[rel="stylesheet"]['+e+"]"}function Qm(e){return w({},e,{"data-precedence":e.precedence,precedence:null})}function Kv(e,t,a,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),yn(t,"link",a),rt(t),e.head.appendChild(t))}function Rl(e){return'[src="'+Qe(e)+'"]'}function Mr(e){return"script[async]"+e}function Wm(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+Qe(a.href)+'"]');if(l)return t.instance=l,rt(l),l;var c=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),rt(l),yn(l,"style",c),sc(l,a.precedence,e),t.instance=l;case"stylesheet":c=zl(a.href);var u=e.querySelector(kr(c));if(u)return t.state.loading|=4,t.instance=u,rt(u),u;l=Qm(a),(c=Na.get(c))&&wd(l,c),u=(e.ownerDocument||e).createElement("link"),rt(u);var _=u;return _._p=new Promise(function(N,R){_.onload=N,_.onerror=R}),yn(u,"link",l),t.state.loading|=4,sc(u,a.precedence,e),t.instance=u;case"script":return u=Rl(a.src),(c=e.querySelector(Mr(u)))?(t.instance=c,rt(c),c):(l=a,(c=Na.get(u))&&(l=w({},a),Sd(l,c)),e=e.ownerDocument||e,c=e.createElement("script"),rt(c),yn(c,"link",l),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(m(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,sc(l,a.precedence,e));return t.instance}function sc(e,t,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=l.length?l[l.length-1]:null,u=c,_=0;_<l.length;_++){var N=l[_];if(N.dataset.precedence===t)u=N;else if(u!==c)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function wd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Sd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var lc=null;function Jm(e,t,a){if(lc===null){var l=new Map,c=lc=new Map;c.set(a,l)}else c=lc,l=c.get(a),l||(l=new Map,c.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),c=0;c<a.length;c++){var u=a[c];if(!(u[Oe]||u[Lt]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var _=u.getAttribute(t)||"";_=e+_;var N=l.get(_);N?N.push(u):l.set(_,[u])}}return l}function ep(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Xv(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function tp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Qv(e,t,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var c=zl(l.href),u=t.querySelector(kr(c));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=rc.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=u,rt(u);return}u=t.ownerDocument||t,l=Qm(l),(c=Na.get(c))&&wd(l,c),u=u.createElement("link"),rt(u);var _=u;_._p=new Promise(function(N,R){_.onload=N,_.onerror=R}),yn(u,"link",l),a.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=rc.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var Nd=0;function Wv(e,t){return e.stylesheets&&e.count===0&&cc(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&cc(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&Nd===0&&(Nd=62500*Mv());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&cc(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>Nd?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(c)}}:null}function rc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)cc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var oc=null;function cc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,oc=new Map,t.forEach(Jv,e),oc=null,rc.call(e))}function Jv(e,t){if(!(t.state.loading&4)){var a=oc.get(e);if(a)var l=a.get(null);else{a=new Map,oc.set(e,a);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<c.length;u++){var _=c[u];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}c=t.instance,_=c.getAttribute("data-precedence"),u=a.get(_)||l,u===l&&a.set(null,c),a.set(_,c),this.count++,l=rc.bind(this),c.addEventListener("load",l),c.addEventListener("error",l),u?u.parentNode.insertBefore(c,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var zr={$$typeof:q,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function e_(e,t,a,l,c,u,_,N,R){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ka(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ka(0),this.hiddenUpdates=ka(null),this.identifierPrefix=l,this.onUncaughtError=c,this.onCaughtError=u,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function np(e,t,a,l,c,u,_,N,R,W,de,pe){return e=new e_(e,t,a,_,R,W,de,pe,N),t=1,u===!0&&(t|=24),u=Sn(3,null,null,t),e.current=u,u.stateNode=e,t=iu(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:l,isDehydrated:a,cache:t},ou(u),e}function ap(e){return e?(e=hi,e):hi}function ip(e,t,a,l,c,u){c=ap(c),l.context===null?l.context=c:l.pendingContext=c,l=Xi(t),l.payload={element:a},u=u===void 0?null:u,u!==null&&(l.callback=u),a=Qi(e,l,t),a!==null&&(Gn(a,e,t),dr(a,e,t))}function sp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Cd(e,t){sp(e,t),(e=e.alternate)&&sp(e,t)}function lp(e){if(e.tag===13||e.tag===31){var t=ba(e,67108864);t!==null&&Gn(t,e,67108864),Cd(e,67108864)}}function rp(e){if(e.tag===13||e.tag===31){var t=la();t=Ot(t);var a=ba(e,t);a!==null&&Gn(a,e,t),Cd(e,t)}}var uc=!0;function t_(e,t,a,l){var c=A.T;A.T=null;var u=K.p;try{K.p=2,Ed(e,t,a,l)}finally{K.p=u,A.T=c}}function n_(e,t,a,l){var c=A.T;A.T=null;var u=K.p;try{K.p=8,Ed(e,t,a,l)}finally{K.p=u,A.T=c}}function Ed(e,t,a,l){if(uc){var c=Td(l);if(c===null)fd(e,t,l,dc,a),cp(e,l);else if(i_(c,e,t,a,l))l.stopPropagation();else if(cp(e,l),t&4&&-1<a_.indexOf(e)){for(;c!==null;){var u=Le(c);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var _=gt(u.pendingLanes);if(_!==0){var N=u;for(N.pendingLanes|=2,N.entangledLanes|=2;_;){var R=1<<31-nn(_);N.entanglements[1]|=R,_&=~R}ii(u),(pt&6)===0&&($o=Bt()+500,Er(0))}}break;case 31:case 13:N=ba(u,2),N!==null&&Gn(N,u,2),Ko(),Cd(u,2)}if(u=Td(l),u===null&&fd(e,t,l,dc,a),u===c)break;c=u}c!==null&&l.stopPropagation()}else fd(e,t,l,null,a)}}function Td(e){return e=ys(e),Ld(e)}var dc=null;function Ld(e){if(dc=null,e=Te(e),e!==null){var t=b(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=j(t),e!==null)return e;e=null}else if(a===31){if(e=C(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return dc=e,null}function op(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($n()){case da:return 2;case ct:return 8;case zn:case Ai:return 32;case Ia:return 268435456;default:return 32}default:return 32}}var Ad=!1,os=null,cs=null,us=null,Rr=new Map,Or=new Map,ds=[],a_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cp(e,t){switch(e){case"focusin":case"focusout":os=null;break;case"dragenter":case"dragleave":cs=null;break;case"mouseover":case"mouseout":us=null;break;case"pointerover":case"pointerout":Rr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Or.delete(t.pointerId)}}function Dr(e,t,a,l,c,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:a,eventSystemFlags:l,nativeEvent:u,targetContainers:[c]},t!==null&&(t=Le(t),t!==null&&lp(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function i_(e,t,a,l,c){switch(t){case"focusin":return os=Dr(os,e,t,a,l,c),!0;case"dragenter":return cs=Dr(cs,e,t,a,l,c),!0;case"mouseover":return us=Dr(us,e,t,a,l,c),!0;case"pointerover":var u=c.pointerId;return Rr.set(u,Dr(Rr.get(u)||null,e,t,a,l,c)),!0;case"gotpointercapture":return u=c.pointerId,Or.set(u,Dr(Or.get(u)||null,e,t,a,l,c)),!0}return!1}function up(e){var t=Te(e.target);if(t!==null){var a=b(t);if(a!==null){if(t=a.tag,t===13){if(t=j(a),t!==null){e.blockedOn=t,ri(e.priority,function(){rp(a)});return}}else if(t===31){if(t=C(a),t!==null){e.blockedOn=t,ri(e.priority,function(){rp(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Td(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Js=l,a.target.dispatchEvent(l),Js=null}else return t=Le(a),t!==null&&lp(t),e.blockedOn=a,!1;t.shift()}return!0}function dp(e,t,a){hc(e)&&a.delete(t)}function s_(){Ad=!1,os!==null&&hc(os)&&(os=null),cs!==null&&hc(cs)&&(cs=null),us!==null&&hc(us)&&(us=null),Rr.forEach(dp),Or.forEach(dp)}function fc(e,t){e.blockedOn===t&&(e.blockedOn=null,Ad||(Ad=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,s_)))}var mc=null;function hp(e){mc!==e&&(mc=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){mc===e&&(mc=null);for(var t=0;t<e.length;t+=3){var a=e[t],l=e[t+1],c=e[t+2];if(typeof l!="function"){if(Ld(l||a)===null)continue;break}var u=Le(a);u!==null&&(e.splice(t,3),t-=3,Tu(u,{pending:!0,data:c,method:a.method,action:l},l,c))}}))}function Ol(e){function t(R){return fc(R,e)}os!==null&&fc(os,e),cs!==null&&fc(cs,e),us!==null&&fc(us,e),Rr.forEach(t),Or.forEach(t);for(var a=0;a<ds.length;a++){var l=ds[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<ds.length&&(a=ds[0],a.blockedOn===null);)up(a),a.blockedOn===null&&ds.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var c=a[l],u=a[l+1],_=c[Ut]||null;if(typeof u=="function")_||hp(a);else if(_){var N=null;if(u&&u.hasAttribute("formAction")){if(c=u,_=u[Ut]||null)N=_.formAction;else if(Ld(c)!==null)continue}else N=_.action;typeof N=="function"?a[l+1]=N:(a.splice(l,3),l-=3),hp(a)}}}function fp(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(_){return c=_})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function kd(e){this._internalRoot=e}pc.prototype.render=kd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(m(409));var a=t.current,l=la();ip(a,l,e,t,null,null)},pc.prototype.unmount=kd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ip(e.current,2,null,e,null,null),Ko(),t[Xn]=null}};function pc(e){this._internalRoot=e}pc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ma();e={blockedOn:null,target:e,priority:t};for(var a=0;a<ds.length&&t!==0&&t<ds[a].priority;a++);ds.splice(a,0,e),a===0&&up(e)}};var mp=h.version;if(mp!=="19.2.0")throw Error(m(527,mp,"19.2.0"));K.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(m(188)):(e=Object.keys(e).join(","),Error(m(268,e)));return e=x(t),e=e!==null?E(e):null,e=e===null?null:e.stateNode,e};var l_={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:A,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gc.isDisabled&&gc.supportsFiber)try{Rn=gc.inject(l_),Pt=gc}catch{}}return Pr.createRoot=function(e,t){if(!p(e))throw Error(m(299));var a=!1,l="",c=bf,u=jf,_=wf;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(_=t.onRecoverableError)),t=np(e,1,!1,null,null,a,l,null,c,u,_,fp),e[Xn]=t.current,hd(e),new kd(t)},Pr.hydrateRoot=function(e,t,a){if(!p(e))throw Error(m(299));var l=!1,c="",u=bf,_=jf,N=wf,R=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(u=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(N=a.onRecoverableError),a.formState!==void 0&&(R=a.formState)),t=np(e,1,!0,t,a??null,l,c,R,u,_,N,fp),t.context=ap(null),a=t.current,l=la(),l=Ot(l),c=Xi(l),c.callback=null,Qi(a,c,l),a=l,t.current.lanes=a,Kn(t,a),ii(t),e[Xn]=t.current,hd(e),new pc(t)},Pr.version="19.2.0",Pr}var Sp;function p_(){if(Sp)return Rd.exports;Sp=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(h){console.error(h)}}return r(),Rd.exports=m_(),Rd.exports}var g_=p_();const v_=th(g_);/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Np="popstate";function __(r={}){function h(m,p){let{pathname:b,search:j,hash:C}=m.location;return Mc("",{pathname:b,search:j,hash:C},p.state&&p.state.usr||null,p.state&&p.state.key||"default")}function f(m,p){return typeof p=="string"?p:Pl(p)}return dg(h,f,null,r)}function y_(r={}){function h(p,b){let{pathname:j="/",search:C="",hash:y=""}=Ks(p.location.hash.substring(1));return!j.startsWith("/")&&!j.startsWith(".")&&(j="/"+j),Mc("",{pathname:j,search:C,hash:y},b.state&&b.state.usr||null,b.state&&b.state.key||"default")}function f(p,b){let j=p.document.querySelector("base"),C="";if(j&&j.getAttribute("href")){let y=p.location.href,x=y.indexOf("#");C=x===-1?y:y.slice(0,x)}return C+"#"+(typeof b=="string"?b:Pl(b))}function m(p,b){oa(p.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(b)})`)}return dg(h,f,m,r)}function Rt(r,h){if(r===!1||r===null||typeof r>"u")throw new Error(h)}function oa(r,h){if(!r){typeof console<"u"&&console.warn(h);try{throw new Error(h)}catch{}}}function x_(){return Math.random().toString(36).substring(2,10)}function Cp(r,h){return{usr:r.state,key:r.key,idx:h}}function Mc(r,h,f=null,m){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof h=="string"?Ks(h):h,state:f,key:h&&h.key||m||x_()}}function Pl({pathname:r="/",search:h="",hash:f=""}){return h&&h!=="?"&&(r+=h.charAt(0)==="?"?h:"?"+h),f&&f!=="#"&&(r+=f.charAt(0)==="#"?f:"#"+f),r}function Ks(r){let h={};if(r){let f=r.indexOf("#");f>=0&&(h.hash=r.substring(f),r=r.substring(0,f));let m=r.indexOf("?");m>=0&&(h.search=r.substring(m),r=r.substring(0,m)),r&&(h.pathname=r)}return h}function dg(r,h,f,m={}){let{window:p=document.defaultView,v5Compat:b=!1}=m,j=p.history,C="POP",y=null,x=E();x==null&&(x=0,j.replaceState({...j.state,idx:x},""));function E(){return(j.state||{idx:null}).idx}function w(){C="POP";let V=E(),O=V==null?null:V-x;x=V,y&&y({action:C,location:H.location,delta:O})}function k(V,O){C="PUSH";let D=Mc(H.location,V,O);f&&f(D,V),x=E()+1;let q=Cp(D,x),ae=H.createHref(D);try{j.pushState(q,"",ae)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;p.location.assign(ae)}b&&y&&y({action:C,location:H.location,delta:1})}function M(V,O){C="REPLACE";let D=Mc(H.location,V,O);f&&f(D,V),x=E();let q=Cp(D,x),ae=H.createHref(D);j.replaceState(q,"",ae),b&&y&&y({action:C,location:H.location,delta:0})}function B(V){return b_(V)}let H={get action(){return C},get location(){return r(p,j)},listen(V){if(y)throw new Error("A history only accepts one active listener");return p.addEventListener(Np,w),y=V,()=>{p.removeEventListener(Np,w),y=null}},createHref(V){return h(p,V)},createURL:B,encodeLocation(V){let O=B(V);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:k,replace:M,go(V){return j.go(V)}};return H}function b_(r,h=!1){let f="http://localhost";typeof window<"u"&&(f=window.location.origin!=="null"?window.location.origin:window.location.href),Rt(f,"No window.location.(origin|href) available to create URL");let m=typeof r=="string"?r:Pl(r);return m=m.replace(/ $/,"%20"),!h&&m.startsWith("//")&&(m=f+m),new URL(m,f)}function hg(r,h,f="/"){return j_(r,h,f,!1)}function j_(r,h,f,m){let p=typeof h=="string"?Ks(h):h,b=Ti(p.pathname||"/",f);if(b==null)return null;let j=fg(r);w_(j);let C=null;for(let y=0;C==null&&y<j.length;++y){let x=R_(b);C=M_(j[y],x,m)}return C}function fg(r,h=[],f=[],m="",p=!1){let b=(j,C,y=p,x)=>{let E={relativePath:x===void 0?j.path||"":x,caseSensitive:j.caseSensitive===!0,childrenIndex:C,route:j};if(E.relativePath.startsWith("/")){if(!E.relativePath.startsWith(m)&&y)return;Rt(E.relativePath.startsWith(m),`Absolute route path "${E.relativePath}" nested under path "${m}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),E.relativePath=E.relativePath.slice(m.length)}let w=Ei([m,E.relativePath]),k=f.concat(E);j.children&&j.children.length>0&&(Rt(j.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),fg(j.children,h,k,w,y)),!(j.path==null&&!j.index)&&h.push({path:w,score:A_(w,j.index),routesMeta:k})};return r.forEach((j,C)=>{if(j.path===""||!j.path?.includes("?"))b(j,C);else for(let y of mg(j.path))b(j,C,!0,y)}),h}function mg(r){let h=r.split("/");if(h.length===0)return[];let[f,...m]=h,p=f.endsWith("?"),b=f.replace(/\?$/,"");if(m.length===0)return p?[b,""]:[b];let j=mg(m.join("/")),C=[];return C.push(...j.map(y=>y===""?b:[b,y].join("/"))),p&&C.push(...j),C.map(y=>r.startsWith("/")&&y===""?"/":y)}function w_(r){r.sort((h,f)=>h.score!==f.score?f.score-h.score:k_(h.routesMeta.map(m=>m.childrenIndex),f.routesMeta.map(m=>m.childrenIndex)))}var S_=/^:[\w-]+$/,N_=3,C_=2,E_=1,T_=10,L_=-2,Ep=r=>r==="*";function A_(r,h){let f=r.split("/"),m=f.length;return f.some(Ep)&&(m+=L_),h&&(m+=C_),f.filter(p=>!Ep(p)).reduce((p,b)=>p+(S_.test(b)?N_:b===""?E_:T_),m)}function k_(r,h){return r.length===h.length&&r.slice(0,-1).every((m,p)=>m===h[p])?r[r.length-1]-h[h.length-1]:0}function M_(r,h,f=!1){let{routesMeta:m}=r,p={},b="/",j=[];for(let C=0;C<m.length;++C){let y=m[C],x=C===m.length-1,E=b==="/"?h:h.slice(b.length)||"/",w=zc({path:y.relativePath,caseSensitive:y.caseSensitive,end:x},E),k=y.route;if(!w&&x&&f&&!m[m.length-1].route.index&&(w=zc({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},E)),!w)return null;Object.assign(p,w.params),j.push({params:p,pathname:Ei([b,w.pathname]),pathnameBase:U_(Ei([b,w.pathnameBase])),route:k}),w.pathnameBase!=="/"&&(b=Ei([b,w.pathnameBase]))}return j}function zc(r,h){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[f,m]=z_(r.path,r.caseSensitive,r.end),p=h.match(f);if(!p)return null;let b=p[0],j=b.replace(/(.)\/+$/,"$1"),C=p.slice(1);return{params:m.reduce((x,{paramName:E,isOptional:w},k)=>{if(E==="*"){let B=C[k]||"";j=b.slice(0,b.length-B.length).replace(/(.)\/+$/,"$1")}const M=C[k];return w&&!M?x[E]=void 0:x[E]=(M||"").replace(/%2F/g,"/"),x},{}),pathname:b,pathnameBase:j,pattern:r}}function z_(r,h=!1,f=!0){oa(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let m=[],p="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(j,C,y)=>(m.push({paramName:C,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(m.push({paramName:"*"}),p+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):f?p+="\\/*$":r!==""&&r!=="/"&&(p+="(?:(?=\\/|$))"),[new RegExp(p,h?void 0:"i"),m]}function R_(r){try{return r.split("/").map(h=>decodeURIComponent(h).replace(/\//g,"%2F")).join("/")}catch(h){return oa(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${h}).`),r}}function Ti(r,h){if(h==="/")return r;if(!r.toLowerCase().startsWith(h.toLowerCase()))return null;let f=h.endsWith("/")?h.length-1:h.length,m=r.charAt(f);return m&&m!=="/"?null:r.slice(f)||"/"}var O_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,D_=r=>O_.test(r);function B_(r,h="/"){let{pathname:f,search:m="",hash:p=""}=typeof r=="string"?Ks(r):r,b;if(f)if(D_(f))b=f;else{if(f.includes("//")){let j=f;f=f.replace(/\/\/+/g,"/"),oa(!1,`Pathnames cannot have embedded double slashes - normalizing ${j} -> ${f}`)}f.startsWith("/")?b=Tp(f.substring(1),"/"):b=Tp(f,h)}else b=h;return{pathname:b,search:H_(m),hash:Z_(p)}}function Tp(r,h){let f=h.replace(/\/+$/,"").split("/");return r.split("/").forEach(p=>{p===".."?f.length>1&&f.pop():p!=="."&&f.push(p)}),f.length>1?f.join("/"):"/"}function Pd(r,h,f,m){return`Cannot include a '${r}' character in a manually specified \`to.${h}\` field [${JSON.stringify(m)}].  Please separate it out to the \`to.${f}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function P_(r){return r.filter((h,f)=>f===0||h.route.path&&h.route.path.length>0)}function ah(r){let h=P_(r);return h.map((f,m)=>m===h.length-1?f.pathname:f.pathnameBase)}function ih(r,h,f,m=!1){let p;typeof r=="string"?p=Ks(r):(p={...r},Rt(!p.pathname||!p.pathname.includes("?"),Pd("?","pathname","search",p)),Rt(!p.pathname||!p.pathname.includes("#"),Pd("#","pathname","hash",p)),Rt(!p.search||!p.search.includes("#"),Pd("#","search","hash",p)));let b=r===""||p.pathname==="",j=b?"/":p.pathname,C;if(j==null)C=f;else{let w=h.length-1;if(!m&&j.startsWith("..")){let k=j.split("/");for(;k[0]==="..";)k.shift(),w-=1;p.pathname=k.join("/")}C=w>=0?h[w]:"/"}let y=B_(p,C),x=j&&j!=="/"&&j.endsWith("/"),E=(b||j===".")&&f.endsWith("/");return!y.pathname.endsWith("/")&&(x||E)&&(y.pathname+="/"),y}var Ei=r=>r.join("/").replace(/\/\/+/g,"/"),U_=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),H_=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Z_=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function q_(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var pg=["POST","PUT","PATCH","DELETE"];new Set(pg);var I_=["GET",...pg];new Set(I_);var Zl=v.createContext(null);Zl.displayName="DataRouter";var Rc=v.createContext(null);Rc.displayName="DataRouterState";v.createContext(!1);var gg=v.createContext({isTransitioning:!1});gg.displayName="ViewTransition";var G_=v.createContext(new Map);G_.displayName="Fetchers";var V_=v.createContext(null);V_.displayName="Await";var qa=v.createContext(null);qa.displayName="Navigation";var Kr=v.createContext(null);Kr.displayName="Location";var Ta=v.createContext({outlet:null,matches:[],isDataRoute:!1});Ta.displayName="Route";var sh=v.createContext(null);sh.displayName="RouteError";function Y_(r,{relative:h}={}){Rt(ql(),"useHref() may be used only in the context of a <Router> component.");let{basename:f,navigator:m}=v.useContext(qa),{hash:p,pathname:b,search:j}=Xr(r,{relative:h}),C=b;return f!=="/"&&(C=b==="/"?f:Ei([f,b])),m.createHref({pathname:C,search:j,hash:p})}function ql(){return v.useContext(Kr)!=null}function si(){return Rt(ql(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(Kr).location}var vg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function _g(r){v.useContext(qa).static||v.useLayoutEffect(r)}function Li(){let{isDataRoute:r}=v.useContext(Ta);return r?ry():$_()}function $_(){Rt(ql(),"useNavigate() may be used only in the context of a <Router> component.");let r=v.useContext(Zl),{basename:h,navigator:f}=v.useContext(qa),{matches:m}=v.useContext(Ta),{pathname:p}=si(),b=JSON.stringify(ah(m)),j=v.useRef(!1);return _g(()=>{j.current=!0}),v.useCallback((y,x={})=>{if(oa(j.current,vg),!j.current)return;if(typeof y=="number"){f.go(y);return}let E=ih(y,JSON.parse(b),p,x.relative==="path");r==null&&h!=="/"&&(E.pathname=E.pathname==="/"?h:Ei([h,E.pathname])),(x.replace?f.replace:f.push)(E,x.state,x)},[h,f,b,p,r])}var F_=v.createContext(null);function K_(r){let h=v.useContext(Ta).outlet;return v.useMemo(()=>h&&v.createElement(F_.Provider,{value:r},h),[h,r])}function lh(){let{matches:r}=v.useContext(Ta),h=r[r.length-1];return h?h.params:{}}function Xr(r,{relative:h}={}){let{matches:f}=v.useContext(Ta),{pathname:m}=si(),p=JSON.stringify(ah(f));return v.useMemo(()=>ih(r,JSON.parse(p),m,h==="path"),[r,p,m,h])}function X_(r,h){return yg(r,h)}function yg(r,h,f,m,p){Rt(ql(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:b}=v.useContext(qa),{matches:j}=v.useContext(Ta),C=j[j.length-1],y=C?C.params:{},x=C?C.pathname:"/",E=C?C.pathnameBase:"/",w=C&&C.route;{let D=w&&w.path||"";xg(x,!w||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let k=si(),M;if(h){let D=typeof h=="string"?Ks(h):h;Rt(E==="/"||D.pathname?.startsWith(E),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${D.pathname}" was given in the \`location\` prop.`),M=D}else M=k;let B=M.pathname||"/",H=B;if(E!=="/"){let D=E.replace(/^\//,"").split("/");H="/"+B.replace(/^\//,"").split("/").slice(D.length).join("/")}let V=hg(r,{pathname:H});oa(w||V!=null,`No routes matched location "${M.pathname}${M.search}${M.hash}" `),oa(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${M.pathname}${M.search}${M.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let O=ty(V&&V.map(D=>Object.assign({},D,{params:Object.assign({},y,D.params),pathname:Ei([E,b.encodeLocation?b.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?E:Ei([E,b.encodeLocation?b.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),j,f,m,p);return h&&O?v.createElement(Kr.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...M},navigationType:"POP"}},O):O}function Q_(){let r=ly(),h=q_(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),f=r instanceof Error?r.stack:null,m="rgba(200,200,200, 0.5)",p={padding:"0.5rem",backgroundColor:m},b={padding:"2px 4px",backgroundColor:m},j=null;return console.error("Error handled by React Router default ErrorBoundary:",r),j=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:b},"ErrorBoundary")," or"," ",v.createElement("code",{style:b},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},h),f?v.createElement("pre",{style:p},f):null,j)}var W_=v.createElement(Q_,null),J_=class extends v.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,h){return h.location!==r.location||h.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:h.error,location:h.location,revalidation:r.revalidation||h.revalidation}}componentDidCatch(r,h){this.props.onError?this.props.onError(r,h):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?v.createElement(Ta.Provider,{value:this.props.routeContext},v.createElement(sh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ey({routeContext:r,match:h,children:f}){let m=v.useContext(Zl);return m&&m.static&&m.staticContext&&(h.route.errorElement||h.route.ErrorBoundary)&&(m.staticContext._deepestRenderedBoundaryId=h.route.id),v.createElement(Ta.Provider,{value:r},f)}function ty(r,h=[],f=null,m=null,p=null){if(r==null){if(!f)return null;if(f.errors)r=f.matches;else if(h.length===0&&!f.initialized&&f.matches.length>0)r=f.matches;else return null}let b=r,j=f?.errors;if(j!=null){let E=b.findIndex(w=>w.route.id&&j?.[w.route.id]!==void 0);Rt(E>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(j).join(",")}`),b=b.slice(0,Math.min(b.length,E+1))}let C=!1,y=-1;if(f)for(let E=0;E<b.length;E++){let w=b[E];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(y=E),w.route.id){let{loaderData:k,errors:M}=f,B=w.route.loader&&!k.hasOwnProperty(w.route.id)&&(!M||M[w.route.id]===void 0);if(w.route.lazy||B){C=!0,y>=0?b=b.slice(0,y+1):b=[b[0]];break}}}let x=f&&m?(E,w)=>{m(E,{location:f.location,params:f.matches?.[0]?.params??{},errorInfo:w})}:void 0;return b.reduceRight((E,w,k)=>{let M,B=!1,H=null,V=null;f&&(M=j&&w.route.id?j[w.route.id]:void 0,H=w.route.errorElement||W_,C&&(y<0&&k===0?(xg("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),B=!0,V=null):y===k&&(B=!0,V=w.route.hydrateFallbackElement||null)));let O=h.concat(b.slice(0,k+1)),D=()=>{let q;return M?q=H:B?q=V:w.route.Component?q=v.createElement(w.route.Component,null):w.route.element?q=w.route.element:q=E,v.createElement(ey,{match:w,routeContext:{outlet:E,matches:O,isDataRoute:f!=null},children:q})};return f&&(w.route.ErrorBoundary||w.route.errorElement||k===0)?v.createElement(J_,{location:f.location,revalidation:f.revalidation,component:H,error:M,children:D(),routeContext:{outlet:null,matches:O,isDataRoute:!0},onError:x}):D()},null)}function rh(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ny(r){let h=v.useContext(Zl);return Rt(h,rh(r)),h}function ay(r){let h=v.useContext(Rc);return Rt(h,rh(r)),h}function iy(r){let h=v.useContext(Ta);return Rt(h,rh(r)),h}function oh(r){let h=iy(r),f=h.matches[h.matches.length-1];return Rt(f.route.id,`${r} can only be used on routes that contain a unique "id"`),f.route.id}function sy(){return oh("useRouteId")}function ly(){let r=v.useContext(sh),h=ay("useRouteError"),f=oh("useRouteError");return r!==void 0?r:h.errors?.[f]}function ry(){let{router:r}=ny("useNavigate"),h=oh("useNavigate"),f=v.useRef(!1);return _g(()=>{f.current=!0}),v.useCallback(async(p,b={})=>{oa(f.current,vg),f.current&&(typeof p=="number"?r.navigate(p):await r.navigate(p,{fromRouteId:h,...b}))},[r,h])}var Lp={};function xg(r,h,f){!h&&!Lp[r]&&(Lp[r]=!0,oa(!1,f))}v.memo(oy);function oy({routes:r,future:h,state:f,unstable_onError:m}){return yg(r,void 0,f,m,h)}function Ap({to:r,replace:h,state:f,relative:m}){Rt(ql(),"<Navigate> may be used only in the context of a <Router> component.");let{static:p}=v.useContext(qa);oa(!p,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:b}=v.useContext(Ta),{pathname:j}=si(),C=Li(),y=ih(r,ah(b),j,m==="path"),x=JSON.stringify(y);return v.useEffect(()=>{C(JSON.parse(x),{replace:h,state:f,relative:m})},[C,x,m,h,f]),null}function cy(r){return K_(r.context)}function mt(r){Rt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function bg({basename:r="/",children:h=null,location:f,navigationType:m="POP",navigator:p,static:b=!1}){Rt(!ql(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let j=r.replace(/^\/*/,"/"),C=v.useMemo(()=>({basename:j,navigator:p,static:b,future:{}}),[j,p,b]);typeof f=="string"&&(f=Ks(f));let{pathname:y="/",search:x="",hash:E="",state:w=null,key:k="default"}=f,M=v.useMemo(()=>{let B=Ti(y,j);return B==null?null:{location:{pathname:B,search:x,hash:E,state:w,key:k},navigationType:m}},[j,y,x,E,w,k,m]);return oa(M!=null,`<Router basename="${j}"> is not able to match the URL "${y}${x}${E}" because it does not start with the basename, so the <Router> won't render anything.`),M==null?null:v.createElement(qa.Provider,{value:C},v.createElement(Kr.Provider,{children:h,value:M}))}function jg({children:r,location:h}){return X_(Kd(r),h)}function Kd(r,h=[]){let f=[];return v.Children.forEach(r,(m,p)=>{if(!v.isValidElement(m))return;let b=[...h,p];if(m.type===v.Fragment){f.push.apply(f,Kd(m.props.children,b));return}Rt(m.type===mt,`[${typeof m.type=="string"?m.type:m.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Rt(!m.props.index||!m.props.children,"An index route cannot have child routes.");let j={id:m.props.id||b.join("-"),caseSensitive:m.props.caseSensitive,element:m.props.element,Component:m.props.Component,index:m.props.index,path:m.props.path,middleware:m.props.middleware,loader:m.props.loader,action:m.props.action,hydrateFallbackElement:m.props.hydrateFallbackElement,HydrateFallback:m.props.HydrateFallback,errorElement:m.props.errorElement,ErrorBoundary:m.props.ErrorBoundary,hasErrorBoundary:m.props.hasErrorBoundary===!0||m.props.ErrorBoundary!=null||m.props.errorElement!=null,shouldRevalidate:m.props.shouldRevalidate,handle:m.props.handle,lazy:m.props.lazy};m.props.children&&(j.children=Kd(m.props.children,b)),f.push(j)}),f}var Cc="get",Ec="application/x-www-form-urlencoded";function Oc(r){return r!=null&&typeof r.tagName=="string"}function uy(r){return Oc(r)&&r.tagName.toLowerCase()==="button"}function dy(r){return Oc(r)&&r.tagName.toLowerCase()==="form"}function hy(r){return Oc(r)&&r.tagName.toLowerCase()==="input"}function fy(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function my(r,h){return r.button===0&&(!h||h==="_self")&&!fy(r)}var vc=null;function py(){if(vc===null)try{new FormData(document.createElement("form"),0),vc=!1}catch{vc=!0}return vc}var gy=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ud(r){return r!=null&&!gy.has(r)?(oa(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ec}"`),null):r}function vy(r,h){let f,m,p,b,j;if(dy(r)){let C=r.getAttribute("action");m=C?Ti(C,h):null,f=r.getAttribute("method")||Cc,p=Ud(r.getAttribute("enctype"))||Ec,b=new FormData(r)}else if(uy(r)||hy(r)&&(r.type==="submit"||r.type==="image")){let C=r.form;if(C==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=r.getAttribute("formaction")||C.getAttribute("action");if(m=y?Ti(y,h):null,f=r.getAttribute("formmethod")||C.getAttribute("method")||Cc,p=Ud(r.getAttribute("formenctype"))||Ud(C.getAttribute("enctype"))||Ec,b=new FormData(C,r),!py()){let{name:x,type:E,value:w}=r;if(E==="image"){let k=x?`${x}.`:"";b.append(`${k}x`,"0"),b.append(`${k}y`,"0")}else x&&b.append(x,w)}}else{if(Oc(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');f=Cc,m=null,p=Ec,j=r}return b&&p==="text/plain"&&(j=b,b=void 0),{action:m,method:f.toLowerCase(),encType:p,formData:b,body:j}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ch(r,h){if(r===!1||r===null||typeof r>"u")throw new Error(h)}function _y(r,h,f){let m=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return m.pathname==="/"?m.pathname=`_root.${f}`:h&&Ti(m.pathname,h)==="/"?m.pathname=`${h.replace(/\/$/,"")}/_root.${f}`:m.pathname=`${m.pathname.replace(/\/$/,"")}.${f}`,m}async function yy(r,h){if(r.id in h)return h[r.id];try{let f=await import(r.module);return h[r.id]=f,f}catch(f){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(f),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function xy(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function by(r,h,f){let m=await Promise.all(r.map(async p=>{let b=h.routes[p.route.id];if(b){let j=await yy(b,f);return j.links?j.links():[]}return[]}));return Ny(m.flat(1).filter(xy).filter(p=>p.rel==="stylesheet"||p.rel==="preload").map(p=>p.rel==="stylesheet"?{...p,rel:"prefetch",as:"style"}:{...p,rel:"prefetch"}))}function kp(r,h,f,m,p,b){let j=(y,x)=>f[x]?y.route.id!==f[x].route.id:!0,C=(y,x)=>f[x].pathname!==y.pathname||f[x].route.path?.endsWith("*")&&f[x].params["*"]!==y.params["*"];return b==="assets"?h.filter((y,x)=>j(y,x)||C(y,x)):b==="data"?h.filter((y,x)=>{let E=m.routes[y.route.id];if(!E||!E.hasLoader)return!1;if(j(y,x)||C(y,x))return!0;if(y.route.shouldRevalidate){let w=y.route.shouldRevalidate({currentUrl:new URL(p.pathname+p.search+p.hash,window.origin),currentParams:f[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function jy(r,h,{includeHydrateFallback:f}={}){return wy(r.map(m=>{let p=h.routes[m.route.id];if(!p)return[];let b=[p.module];return p.clientActionModule&&(b=b.concat(p.clientActionModule)),p.clientLoaderModule&&(b=b.concat(p.clientLoaderModule)),f&&p.hydrateFallbackModule&&(b=b.concat(p.hydrateFallbackModule)),p.imports&&(b=b.concat(p.imports)),b}).flat(1))}function wy(r){return[...new Set(r)]}function Sy(r){let h={},f=Object.keys(r).sort();for(let m of f)h[m]=r[m];return h}function Ny(r,h){let f=new Set;return new Set(h),r.reduce((m,p)=>{let b=JSON.stringify(Sy(p));return f.has(b)||(f.add(b),m.push({key:b,link:p})),m},[])}function wg(){let r=v.useContext(Zl);return ch(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Cy(){let r=v.useContext(Rc);return ch(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var uh=v.createContext(void 0);uh.displayName="FrameworkContext";function Sg(){let r=v.useContext(uh);return ch(r,"You must render this element inside a <HydratedRouter> element"),r}function Ey(r,h){let f=v.useContext(uh),[m,p]=v.useState(!1),[b,j]=v.useState(!1),{onFocus:C,onBlur:y,onMouseEnter:x,onMouseLeave:E,onTouchStart:w}=h,k=v.useRef(null);v.useEffect(()=>{if(r==="render"&&j(!0),r==="viewport"){let H=O=>{O.forEach(D=>{j(D.isIntersecting)})},V=new IntersectionObserver(H,{threshold:.5});return k.current&&V.observe(k.current),()=>{V.disconnect()}}},[r]),v.useEffect(()=>{if(m){let H=setTimeout(()=>{j(!0)},100);return()=>{clearTimeout(H)}}},[m]);let M=()=>{p(!0)},B=()=>{p(!1),j(!1)};return f?r!=="intent"?[b,k,{}]:[b,k,{onFocus:Ur(C,M),onBlur:Ur(y,B),onMouseEnter:Ur(x,M),onMouseLeave:Ur(E,B),onTouchStart:Ur(w,M)}]:[!1,k,{}]}function Ur(r,h){return f=>{r&&r(f),f.defaultPrevented||h(f)}}function Ty({page:r,...h}){let{router:f}=wg(),m=v.useMemo(()=>hg(f.routes,r,f.basename),[f.routes,r,f.basename]);return m?v.createElement(Ay,{page:r,matches:m,...h}):null}function Ly(r){let{manifest:h,routeModules:f}=Sg(),[m,p]=v.useState([]);return v.useEffect(()=>{let b=!1;return by(r,h,f).then(j=>{b||p(j)}),()=>{b=!0}},[r,h,f]),m}function Ay({page:r,matches:h,...f}){let m=si(),{manifest:p,routeModules:b}=Sg(),{basename:j}=wg(),{loaderData:C,matches:y}=Cy(),x=v.useMemo(()=>kp(r,h,y,p,m,"data"),[r,h,y,p,m]),E=v.useMemo(()=>kp(r,h,y,p,m,"assets"),[r,h,y,p,m]),w=v.useMemo(()=>{if(r===m.pathname+m.search+m.hash)return[];let B=new Set,H=!1;if(h.forEach(O=>{let D=p.routes[O.route.id];!D||!D.hasLoader||(!x.some(q=>q.route.id===O.route.id)&&O.route.id in C&&b[O.route.id]?.shouldRevalidate||D.hasClientLoader?H=!0:B.add(O.route.id))}),B.size===0)return[];let V=_y(r,j,"data");return H&&B.size>0&&V.searchParams.set("_routes",h.filter(O=>B.has(O.route.id)).map(O=>O.route.id).join(",")),[V.pathname+V.search]},[j,C,m,p,x,h,r,b]),k=v.useMemo(()=>jy(E,p),[E,p]),M=Ly(E);return v.createElement(v.Fragment,null,w.map(B=>v.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...f})),k.map(B=>v.createElement("link",{key:B,rel:"modulepreload",href:B,...f})),M.map(({key:B,link:H})=>v.createElement("link",{key:B,nonce:f.nonce,...H})))}function ky(...r){return h=>{r.forEach(f=>{typeof f=="function"?f(h):f!=null&&(f.current=h)})}}var Ng=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ng&&(window.__reactRouterVersion="7.9.6")}catch{}function My({basename:r,children:h,window:f}){let m=v.useRef();m.current==null&&(m.current=__({window:f,v5Compat:!0}));let p=m.current,[b,j]=v.useState({action:p.action,location:p.location}),C=v.useCallback(y=>{v.startTransition(()=>j(y))},[j]);return v.useLayoutEffect(()=>p.listen(C),[p,C]),v.createElement(bg,{basename:r,children:h,location:b.location,navigationType:b.action,navigator:p})}function zy({basename:r,children:h,window:f}){let m=v.useRef();m.current==null&&(m.current=y_({window:f,v5Compat:!0}));let p=m.current,[b,j]=v.useState({action:p.action,location:p.location}),C=v.useCallback(y=>{v.startTransition(()=>j(y))},[j]);return v.useLayoutEffect(()=>p.listen(C),[p,C]),v.createElement(bg,{basename:r,children:h,location:b.location,navigationType:b.action,navigator:p})}var Cg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mn=v.forwardRef(function({onClick:h,discover:f="render",prefetch:m="none",relative:p,reloadDocument:b,replace:j,state:C,target:y,to:x,preventScrollReset:E,viewTransition:w,...k},M){let{basename:B}=v.useContext(qa),H=typeof x=="string"&&Cg.test(x),V,O=!1;if(typeof x=="string"&&H&&(V=x,Ng))try{let U=new URL(window.location.href),be=x.startsWith("//")?new URL(U.protocol+x):new URL(x),we=Ti(be.pathname,B);be.origin===U.origin&&we!=null?x=we+be.search+be.hash:O=!0}catch{oa(!1,`<Link to="${x}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=Y_(x,{relative:p}),[q,ae,F]=Ey(m,k),xe=Dy(x,{replace:j,state:C,target:y,preventScrollReset:E,relative:p,viewTransition:w});function J(U){h&&h(U),U.defaultPrevented||xe(U)}let ce=v.createElement("a",{...k,...F,href:V||D,onClick:O||b?h:J,ref:ky(M,ae),target:y,"data-discover":!H&&f==="render"?"true":void 0});return q&&!H?v.createElement(v.Fragment,null,ce,v.createElement(Ty,{page:D})):ce});Mn.displayName="Link";var Tc=v.forwardRef(function({"aria-current":h="page",caseSensitive:f=!1,className:m="",end:p=!1,style:b,to:j,viewTransition:C,children:y,...x},E){let w=Xr(j,{relative:x.relative}),k=si(),M=v.useContext(Rc),{navigator:B,basename:H}=v.useContext(qa),V=M!=null&&Zy(w)&&C===!0,O=B.encodeLocation?B.encodeLocation(w).pathname:w.pathname,D=k.pathname,q=M&&M.navigation&&M.navigation.location?M.navigation.location.pathname:null;f||(D=D.toLowerCase(),q=q?q.toLowerCase():null,O=O.toLowerCase()),q&&H&&(q=Ti(q,H)||q);const ae=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let F=D===O||!p&&D.startsWith(O)&&D.charAt(ae)==="/",xe=q!=null&&(q===O||!p&&q.startsWith(O)&&q.charAt(O.length)==="/"),J={isActive:F,isPending:xe,isTransitioning:V},ce=F?h:void 0,U;typeof m=="function"?U=m(J):U=[m,F?"active":null,xe?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let be=typeof b=="function"?b(J):b;return v.createElement(Mn,{...x,"aria-current":ce,className:U,ref:E,style:be,to:j,viewTransition:C},typeof y=="function"?y(J):y)});Tc.displayName="NavLink";var Ry=v.forwardRef(({discover:r="render",fetcherKey:h,navigate:f,reloadDocument:m,replace:p,state:b,method:j=Cc,action:C,onSubmit:y,relative:x,preventScrollReset:E,viewTransition:w,...k},M)=>{let B=Uy(),H=Hy(C,{relative:x}),V=j.toLowerCase()==="get"?"get":"post",O=typeof C=="string"&&Cg.test(C),D=q=>{if(y&&y(q),q.defaultPrevented)return;q.preventDefault();let ae=q.nativeEvent.submitter,F=ae?.getAttribute("formmethod")||j;B(ae||q.currentTarget,{fetcherKey:h,method:F,navigate:f,replace:p,state:b,relative:x,preventScrollReset:E,viewTransition:w})};return v.createElement("form",{ref:M,method:V,action:H,onSubmit:m?y:D,...k,"data-discover":!O&&r==="render"?"true":void 0})});Ry.displayName="Form";function Oy(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Eg(r){let h=v.useContext(Zl);return Rt(h,Oy(r)),h}function Dy(r,{target:h,replace:f,state:m,preventScrollReset:p,relative:b,viewTransition:j}={}){let C=Li(),y=si(),x=Xr(r,{relative:b});return v.useCallback(E=>{if(my(E,h)){E.preventDefault();let w=f!==void 0?f:Pl(y)===Pl(x);C(r,{replace:w,state:m,preventScrollReset:p,relative:b,viewTransition:j})}},[y,C,x,f,m,h,r,p,b,j])}var By=0,Py=()=>`__${String(++By)}__`;function Uy(){let{router:r}=Eg("useSubmit"),{basename:h}=v.useContext(qa),f=sy();return v.useCallback(async(m,p={})=>{let{action:b,method:j,encType:C,formData:y,body:x}=vy(m,h);if(p.navigate===!1){let E=p.fetcherKey||Py();await r.fetch(E,f,p.action||b,{preventScrollReset:p.preventScrollReset,formData:y,body:x,formMethod:p.method||j,formEncType:p.encType||C,flushSync:p.flushSync})}else await r.navigate(p.action||b,{preventScrollReset:p.preventScrollReset,formData:y,body:x,formMethod:p.method||j,formEncType:p.encType||C,replace:p.replace,state:p.state,fromRouteId:f,flushSync:p.flushSync,viewTransition:p.viewTransition})},[r,h,f])}function Hy(r,{relative:h}={}){let{basename:f}=v.useContext(qa),m=v.useContext(Ta);Rt(m,"useFormAction must be used inside a RouteContext");let[p]=m.matches.slice(-1),b={...Xr(r||".",{relative:h})},j=si();if(r==null){b.search=j.search;let C=new URLSearchParams(b.search),y=C.getAll("index");if(y.some(E=>E==="")){C.delete("index"),y.filter(w=>w).forEach(w=>C.append("index",w));let E=C.toString();b.search=E?`?${E}`:""}}return(!r||r===".")&&p.route.index&&(b.search=b.search?b.search.replace(/^\?/,"?index&"):"?index"),f!=="/"&&(b.pathname=b.pathname==="/"?f:Ei([f,b.pathname])),Pl(b)}function Zy(r,{relative:h}={}){let f=v.useContext(gg);Rt(f!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:m}=Eg("useViewTransitionState"),p=Xr(r,{relative:h});if(!f.isTransitioning)return!1;let b=Ti(f.currentLocation.pathname,m)||f.currentLocation.pathname,j=Ti(f.nextLocation.pathname,m)||f.nextLocation.pathname;return zc(p.pathname,j)!=null||zc(p.pathname,b)!=null}var qy=ug();function Tg(r,h){const f=v.useRef(h);v.useEffect(function(){h!==f.current&&r.attributionControl!=null&&(f.current!=null&&r.attributionControl.removeAttribution(f.current),h!=null&&r.attributionControl.addAttribution(h)),f.current=h},[r,h])}const Iy=1;function Gy(r){return Object.freeze({__version:Iy,map:r})}function dh(r,h){return Object.freeze({...r,...h})}const hh=v.createContext(null);function Dc(){const r=v.use(hh);if(r==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return r}function Lg(r){function h(f,m){const{instance:p,context:b}=r(f).current;v.useImperativeHandle(m,()=>p);const{children:j}=f;return j==null?null:Bl.createElement(hh,{value:b},j)}return v.forwardRef(h)}function Vy(r){function h(f,m){const[p,b]=v.useState(!1),{instance:j}=r(f,b).current;v.useImperativeHandle(m,()=>j),v.useEffect(function(){p&&j.update()},[j,p,f.children]);const C=j._contentNode;return C?qy.createPortal(f.children,C):null}return v.forwardRef(h)}function Yy(r){function h(f,m){const{instance:p}=r(f).current;return v.useImperativeHandle(m,()=>p),null}return v.forwardRef(h)}function fh(r,h){const f=v.useRef(void 0);v.useEffect(function(){return h!=null&&r.instance.on(h),f.current=h,function(){f.current!=null&&r.instance.off(f.current),f.current=null}},[r,h])}function Bc(r,h){const f=r.pane??h.pane;return f?{...r,pane:f}:r}function $y(r,h){return function(m,p){const b=Dc(),j=r(Bc(m,b),b);return Tg(b.map,m.attribution),fh(j.current,m.eventHandlers),h(j.current,b,m,p),j}}var Yr={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var Fy=Yr.exports,Mp;function Ky(){return Mp||(Mp=1,(function(r,h){(function(f,m){m(h)})(Fy,(function(f){var m="1.9.4";function p(n){var s,o,d,g;for(o=1,d=arguments.length;o<d;o++){g=arguments[o];for(s in g)n[s]=g[s]}return n}var b=Object.create||(function(){function n(){}return function(s){return n.prototype=s,new n}})();function j(n,s){var o=Array.prototype.slice;if(n.bind)return n.bind.apply(n,o.call(arguments,1));var d=o.call(arguments,2);return function(){return n.apply(s,d.length?d.concat(o.call(arguments)):arguments)}}var C=0;function y(n){return"_leaflet_id"in n||(n._leaflet_id=++C),n._leaflet_id}function x(n,s,o){var d,g,S,z;return z=function(){d=!1,g&&(S.apply(o,g),g=!1)},S=function(){d?g=arguments:(n.apply(o,arguments),setTimeout(z,s),d=!0)},S}function E(n,s,o){var d=s[1],g=s[0],S=d-g;return n===d&&o?n:((n-g)%S+S)%S+g}function w(){return!1}function k(n,s){if(s===!1)return n;var o=Math.pow(10,s===void 0?6:s);return Math.round(n*o)/o}function M(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function B(n){return M(n).split(/\s+/)}function H(n,s){Object.prototype.hasOwnProperty.call(n,"options")||(n.options=n.options?b(n.options):{});for(var o in s)n.options[o]=s[o];return n.options}function V(n,s,o){var d=[];for(var g in n)d.push(encodeURIComponent(o?g.toUpperCase():g)+"="+encodeURIComponent(n[g]));return(!s||s.indexOf("?")===-1?"?":"&")+d.join("&")}var O=/\{ *([\w_ -]+) *\}/g;function D(n,s){return n.replace(O,function(o,d){var g=s[d];if(g===void 0)throw new Error("No value provided for variable "+o);return typeof g=="function"&&(g=g(s)),g})}var q=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function ae(n,s){for(var o=0;o<n.length;o++)if(n[o]===s)return o;return-1}var F="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function xe(n){return window["webkit"+n]||window["moz"+n]||window["ms"+n]}var J=0;function ce(n){var s=+new Date,o=Math.max(0,16-(s-J));return J=s+o,window.setTimeout(n,o)}var U=window.requestAnimationFrame||xe("RequestAnimationFrame")||ce,be=window.cancelAnimationFrame||xe("CancelAnimationFrame")||xe("CancelRequestAnimationFrame")||function(n){window.clearTimeout(n)};function we(n,s,o){if(o&&U===ce)n.call(s);else return U.call(window,j(n,s))}function Ae(n){n&&be.call(window,n)}var He={__proto__:null,extend:p,create:b,bind:j,get lastId(){return C},stamp:y,throttle:x,wrapNum:E,falseFn:w,formatNum:k,trim:M,splitWords:B,setOptions:H,getParamString:V,template:D,isArray:q,indexOf:ae,emptyImageUrl:F,requestFn:U,cancelFn:be,requestAnimFrame:we,cancelAnimFrame:Ae};function qe(){}qe.extend=function(n){var s=function(){H(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=s.__super__=this.prototype,d=b(o);d.constructor=s,s.prototype=d;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(s[g]=this[g]);return n.statics&&p(s,n.statics),n.includes&&(_e(n.includes),p.apply(null,[d].concat(n.includes))),p(d,n),delete d.statics,delete d.includes,d.options&&(d.options=o.options?b(o.options):{},p(d.options,n.options)),d._initHooks=[],d.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var S=0,z=d._initHooks.length;S<z;S++)d._initHooks[S].call(this)}},s},qe.include=function(n){var s=this.prototype.options;return p(this.prototype,n),n.options&&(this.prototype.options=s,this.mergeOptions(n.options)),this},qe.mergeOptions=function(n){return p(this.prototype.options,n),this},qe.addInitHook=function(n){var s=Array.prototype.slice.call(arguments,1),o=typeof n=="function"?n:function(){this[n].apply(this,s)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(o),this};function _e(n){if(!(typeof L>"u"||!L||!L.Mixin)){n=q(n)?n:[n];for(var s=0;s<n.length;s++)n[s]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var A={on:function(n,s,o){if(typeof n=="object")for(var d in n)this._on(d,n[d],s);else{n=B(n);for(var g=0,S=n.length;g<S;g++)this._on(n[g],s,o)}return this},off:function(n,s,o){if(!arguments.length)delete this._events;else if(typeof n=="object")for(var d in n)this._off(d,n[d],s);else{n=B(n);for(var g=arguments.length===1,S=0,z=n.length;S<z;S++)g?this._off(n[S]):this._off(n[S],s,o)}return this},_on:function(n,s,o,d){if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}if(this._listens(n,s,o)===!1){o===this&&(o=void 0);var g={fn:s,ctx:o};d&&(g.once=!0),this._events=this._events||{},this._events[n]=this._events[n]||[],this._events[n].push(g)}},_off:function(n,s,o){var d,g,S;if(this._events&&(d=this._events[n],!!d)){if(arguments.length===1){if(this._firingCount)for(g=0,S=d.length;g<S;g++)d[g].fn=w;delete this._events[n];return}if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}var z=this._listens(n,s,o);if(z!==!1){var Y=d[z];this._firingCount&&(Y.fn=w,this._events[n]=d=d.slice()),d.splice(z,1)}}},fire:function(n,s,o){if(!this.listens(n,o))return this;var d=p({},s,{type:n,target:this,sourceTarget:s&&s.sourceTarget||this});if(this._events){var g=this._events[n];if(g){this._firingCount=this._firingCount+1||1;for(var S=0,z=g.length;S<z;S++){var Y=g[S],te=Y.fn;Y.once&&this.off(n,te,Y.ctx),te.call(Y.ctx||this,d)}this._firingCount--}}return o&&this._propagateEvent(d),this},listens:function(n,s,o,d){typeof n!="string"&&console.warn('"string" type argument expected');var g=s;typeof s!="function"&&(d=!!s,g=void 0,o=void 0);var S=this._events&&this._events[n];if(S&&S.length&&this._listens(n,g,o)!==!1)return!0;if(d){for(var z in this._eventParents)if(this._eventParents[z].listens(n,s,o,d))return!0}return!1},_listens:function(n,s,o){if(!this._events)return!1;var d=this._events[n]||[];if(!s)return!!d.length;o===this&&(o=void 0);for(var g=0,S=d.length;g<S;g++)if(d[g].fn===s&&d[g].ctx===o)return g;return!1},once:function(n,s,o){if(typeof n=="object")for(var d in n)this._on(d,n[d],s,!0);else{n=B(n);for(var g=0,S=n.length;g<S;g++)this._on(n[g],s,o,!0)}return this},addEventParent:function(n){return this._eventParents=this._eventParents||{},this._eventParents[y(n)]=n,this},removeEventParent:function(n){return this._eventParents&&delete this._eventParents[y(n)],this},_propagateEvent:function(n){for(var s in this._eventParents)this._eventParents[s].fire(n.type,p({layer:n.target,propagatedFrom:n.target},n),!0)}};A.addEventListener=A.on,A.removeEventListener=A.clearAllEventListeners=A.off,A.addOneTimeEventListener=A.once,A.fireEvent=A.fire,A.hasEventListeners=A.listens;var K=qe.extend(A);function le(n,s,o){this.x=o?Math.round(n):n,this.y=o?Math.round(s):s}var je=Math.trunc||function(n){return n>0?Math.floor(n):Math.ceil(n)};le.prototype={clone:function(){return new le(this.x,this.y)},add:function(n){return this.clone()._add(Z(n))},_add:function(n){return this.x+=n.x,this.y+=n.y,this},subtract:function(n){return this.clone()._subtract(Z(n))},_subtract:function(n){return this.x-=n.x,this.y-=n.y,this},divideBy:function(n){return this.clone()._divideBy(n)},_divideBy:function(n){return this.x/=n,this.y/=n,this},multiplyBy:function(n){return this.clone()._multiplyBy(n)},_multiplyBy:function(n){return this.x*=n,this.y*=n,this},scaleBy:function(n){return new le(this.x*n.x,this.y*n.y)},unscaleBy:function(n){return new le(this.x/n.x,this.y/n.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=je(this.x),this.y=je(this.y),this},distanceTo:function(n){n=Z(n);var s=n.x-this.x,o=n.y-this.y;return Math.sqrt(s*s+o*o)},equals:function(n){return n=Z(n),n.x===this.x&&n.y===this.y},contains:function(n){return n=Z(n),Math.abs(n.x)<=Math.abs(this.x)&&Math.abs(n.y)<=Math.abs(this.y)},toString:function(){return"Point("+k(this.x)+", "+k(this.y)+")"}};function Z(n,s,o){return n instanceof le?n:q(n)?new le(n[0],n[1]):n==null?n:typeof n=="object"&&"x"in n&&"y"in n?new le(n.x,n.y):new le(n,s,o)}function T(n,s){if(n)for(var o=s?[n,s]:n,d=0,g=o.length;d<g;d++)this.extend(o[d])}T.prototype={extend:function(n){var s,o;if(!n)return this;if(n instanceof le||typeof n[0]=="number"||"x"in n)s=o=Z(n);else if(n=$(n),s=n.min,o=n.max,!s||!o)return this;return!this.min&&!this.max?(this.min=s.clone(),this.max=o.clone()):(this.min.x=Math.min(s.x,this.min.x),this.max.x=Math.max(o.x,this.max.x),this.min.y=Math.min(s.y,this.min.y),this.max.y=Math.max(o.y,this.max.y)),this},getCenter:function(n){return Z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,n)},getBottomLeft:function(){return Z(this.min.x,this.max.y)},getTopRight:function(){return Z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(n){var s,o;return typeof n[0]=="number"||n instanceof le?n=Z(n):n=$(n),n instanceof T?(s=n.min,o=n.max):s=o=n,s.x>=this.min.x&&o.x<=this.max.x&&s.y>=this.min.y&&o.y<=this.max.y},intersects:function(n){n=$(n);var s=this.min,o=this.max,d=n.min,g=n.max,S=g.x>=s.x&&d.x<=o.x,z=g.y>=s.y&&d.y<=o.y;return S&&z},overlaps:function(n){n=$(n);var s=this.min,o=this.max,d=n.min,g=n.max,S=g.x>s.x&&d.x<o.x,z=g.y>s.y&&d.y<o.y;return S&&z},isValid:function(){return!!(this.min&&this.max)},pad:function(n){var s=this.min,o=this.max,d=Math.abs(s.x-o.x)*n,g=Math.abs(s.y-o.y)*n;return $(Z(s.x-d,s.y-g),Z(o.x+d,o.y+g))},equals:function(n){return n?(n=$(n),this.min.equals(n.getTopLeft())&&this.max.equals(n.getBottomRight())):!1}};function $(n,s){return!n||n instanceof T?n:new T(n,s)}function oe(n,s){if(n)for(var o=s?[n,s]:n,d=0,g=o.length;d<g;d++)this.extend(o[d])}oe.prototype={extend:function(n){var s=this._southWest,o=this._northEast,d,g;if(n instanceof ge)d=n,g=n;else if(n instanceof oe){if(d=n._southWest,g=n._northEast,!d||!g)return this}else return n?this.extend(ye(n)||he(n)):this;return!s&&!o?(this._southWest=new ge(d.lat,d.lng),this._northEast=new ge(g.lat,g.lng)):(s.lat=Math.min(d.lat,s.lat),s.lng=Math.min(d.lng,s.lng),o.lat=Math.max(g.lat,o.lat),o.lng=Math.max(g.lng,o.lng)),this},pad:function(n){var s=this._southWest,o=this._northEast,d=Math.abs(s.lat-o.lat)*n,g=Math.abs(s.lng-o.lng)*n;return new oe(new ge(s.lat-d,s.lng-g),new ge(o.lat+d,o.lng+g))},getCenter:function(){return new ge((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ge(this.getNorth(),this.getWest())},getSouthEast:function(){return new ge(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(n){typeof n[0]=="number"||n instanceof ge||"lat"in n?n=ye(n):n=he(n);var s=this._southWest,o=this._northEast,d,g;return n instanceof oe?(d=n.getSouthWest(),g=n.getNorthEast()):d=g=n,d.lat>=s.lat&&g.lat<=o.lat&&d.lng>=s.lng&&g.lng<=o.lng},intersects:function(n){n=he(n);var s=this._southWest,o=this._northEast,d=n.getSouthWest(),g=n.getNorthEast(),S=g.lat>=s.lat&&d.lat<=o.lat,z=g.lng>=s.lng&&d.lng<=o.lng;return S&&z},overlaps:function(n){n=he(n);var s=this._southWest,o=this._northEast,d=n.getSouthWest(),g=n.getNorthEast(),S=g.lat>s.lat&&d.lat<o.lat,z=g.lng>s.lng&&d.lng<o.lng;return S&&z},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(n,s){return n?(n=he(n),this._southWest.equals(n.getSouthWest(),s)&&this._northEast.equals(n.getNorthEast(),s)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function he(n,s){return n instanceof oe?n:new oe(n,s)}function ge(n,s,o){if(isNaN(n)||isNaN(s))throw new Error("Invalid LatLng object: ("+n+", "+s+")");this.lat=+n,this.lng=+s,o!==void 0&&(this.alt=+o)}ge.prototype={equals:function(n,s){if(!n)return!1;n=ye(n);var o=Math.max(Math.abs(this.lat-n.lat),Math.abs(this.lng-n.lng));return o<=(s===void 0?1e-9:s)},toString:function(n){return"LatLng("+k(this.lat,n)+", "+k(this.lng,n)+")"},distanceTo:function(n){return Se.distance(this,ye(n))},wrap:function(){return Se.wrapLatLng(this)},toBounds:function(n){var s=180*n/40075017,o=s/Math.cos(Math.PI/180*this.lat);return he([this.lat-s,this.lng-o],[this.lat+s,this.lng+o])},clone:function(){return new ge(this.lat,this.lng,this.alt)}};function ye(n,s,o){return n instanceof ge?n:q(n)&&typeof n[0]!="object"?n.length===3?new ge(n[0],n[1],n[2]):n.length===2?new ge(n[0],n[1]):null:n==null?n:typeof n=="object"&&"lat"in n?new ge(n.lat,"lng"in n?n.lng:n.lon,n.alt):s===void 0?null:new ge(n,s,o)}var ke={latLngToPoint:function(n,s){var o=this.projection.project(n),d=this.scale(s);return this.transformation._transform(o,d)},pointToLatLng:function(n,s){var o=this.scale(s),d=this.transformation.untransform(n,o);return this.projection.unproject(d)},project:function(n){return this.projection.project(n)},unproject:function(n){return this.projection.unproject(n)},scale:function(n){return 256*Math.pow(2,n)},zoom:function(n){return Math.log(n/256)/Math.LN2},getProjectedBounds:function(n){if(this.infinite)return null;var s=this.projection.bounds,o=this.scale(n),d=this.transformation.transform(s.min,o),g=this.transformation.transform(s.max,o);return new T(d,g)},infinite:!1,wrapLatLng:function(n){var s=this.wrapLng?E(n.lng,this.wrapLng,!0):n.lng,o=this.wrapLat?E(n.lat,this.wrapLat,!0):n.lat,d=n.alt;return new ge(o,s,d)},wrapLatLngBounds:function(n){var s=n.getCenter(),o=this.wrapLatLng(s),d=s.lat-o.lat,g=s.lng-o.lng;if(d===0&&g===0)return n;var S=n.getSouthWest(),z=n.getNorthEast(),Y=new ge(S.lat-d,S.lng-g),te=new ge(z.lat-d,z.lng-g);return new oe(Y,te)}},Se=p({},ke,{wrapLng:[-180,180],R:6371e3,distance:function(n,s){var o=Math.PI/180,d=n.lat*o,g=s.lat*o,S=Math.sin((s.lat-n.lat)*o/2),z=Math.sin((s.lng-n.lng)*o/2),Y=S*S+Math.cos(d)*Math.cos(g)*z*z,te=2*Math.atan2(Math.sqrt(Y),Math.sqrt(1-Y));return this.R*te}}),Be=6378137,Je={R:Be,MAX_LATITUDE:85.0511287798,project:function(n){var s=Math.PI/180,o=this.MAX_LATITUDE,d=Math.max(Math.min(o,n.lat),-o),g=Math.sin(d*s);return new le(this.R*n.lng*s,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(n){var s=180/Math.PI;return new ge((2*Math.atan(Math.exp(n.y/this.R))-Math.PI/2)*s,n.x*s/this.R)},bounds:(function(){var n=Be*Math.PI;return new T([-n,-n],[n,n])})()};function Re(n,s,o,d){if(q(n)){this._a=n[0],this._b=n[1],this._c=n[2],this._d=n[3];return}this._a=n,this._b=s,this._c=o,this._d=d}Re.prototype={transform:function(n,s){return this._transform(n.clone(),s)},_transform:function(n,s){return s=s||1,n.x=s*(this._a*n.x+this._b),n.y=s*(this._c*n.y+this._d),n},untransform:function(n,s){return s=s||1,new le((n.x/s-this._b)/this._a,(n.y/s-this._d)/this._c)}};function We(n,s,o,d){return new Re(n,s,o,d)}var Ct=p({},Se,{code:"EPSG:3857",projection:Je,transformation:(function(){var n=.5/(Math.PI*Je.R);return We(n,.5,-n,.5)})()}),Kt=p({},Ct,{code:"EPSG:900913"});function Gt(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function Yn(n,s){var o="",d,g,S,z,Y,te;for(d=0,S=n.length;d<S;d++){for(Y=n[d],g=0,z=Y.length;g<z;g++)te=Y[g],o+=(g?"L":"M")+te.x+" "+te.y;o+=s?Me.svg?"z":"x":""}return o||"M0 0"}var En=document.documentElement.style,ca="ActiveXObject"in window,Xt=ca&&!document.addEventListener,cn="msLaunchUri"in navigator&&!("documentMode"in document),tn=Ot("webkit"),xn=Ot("android"),ua=Ot("android 2")||Ot("android 3"),Bt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),$n=xn&&Ot("Google")&&Bt<537&&!("AudioNode"in window),da=!!window.opera,ct=!cn&&Ot("chrome"),zn=Ot("gecko")&&!tn&&!da&&!ca,Ai=!ct&&Ot("safari"),Ia=Ot("phantom"),li="OTransition"in En,La=navigator.platform.indexOf("Win")===0,Rn=ca&&"transition"in En,Pt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ua,pn="MozPerspective"in En,nn=!window.L_DISABLE_3D&&(Rn||Pt||pn)&&!li&&!Ia,kt=typeof orientation<"u"||Ot("mobile"),ki=kt&&tn,un=kt&&Pt,Fn=!window.PointerEvent&&window.MSPointerEvent,dn=!!(window.PointerEvent||Fn),an="ontouchstart"in window||!!window.TouchEvent,gt=!window.L_NO_TOUCH&&(an||dn),Ga=kt&&da,Aa=kt&&zn,ms=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ha=(function(){var n=!1;try{var s=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("testPassiveEventSupport",w,s),window.removeEventListener("testPassiveEventSupport",w,s)}catch{}return n})(),ka=(function(){return!!document.createElement("canvas").getContext})(),Kn=!!(document.createElementNS&&Gt("svg").createSVGRect),ps=!!Kn&&(function(){var n=document.createElement("div");return n.innerHTML="<svg/>",(n.firstChild&&n.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Mi=!Kn&&(function(){try{var n=document.createElement("div");n.innerHTML='<v:shape adj="1"/>';var s=n.firstChild;return s.style.behavior="url(#default#VML)",s&&typeof s.adj=="object"}catch{return!1}})(),fa=navigator.platform.indexOf("Mac")===0,Va=navigator.platform.indexOf("Linux")===0;function Ot(n){return navigator.userAgent.toLowerCase().indexOf(n)>=0}var Me={ie:ca,ielt9:Xt,edge:cn,webkit:tn,android:xn,android23:ua,androidStock:$n,opera:da,chrome:ct,gecko:zn,safari:Ai,phantom:Ia,opera12:li,win:La,ie3d:Rn,webkit3d:Pt,gecko3d:pn,any3d:nn,mobile:kt,mobileWebkit:ki,mobileWebkit3d:un,msPointer:Fn,pointer:dn,touch:gt,touchNative:an,mobileOpera:Ga,mobileGecko:Aa,retina:ms,passiveEvents:ha,canvas:ka,svg:Kn,vml:Mi,inlineSvg:ps,mac:fa,linux:Va},Ma=Me.msPointer?"MSPointerDown":"pointerdown",ri=Me.msPointer?"MSPointerMove":"pointermove",Tn=Me.msPointer?"MSPointerUp":"pointerup",Lt=Me.msPointer?"MSPointerCancel":"pointercancel",Ut={touchstart:Ma,touchmove:ri,touchend:Tn,touchcancel:Lt},Xn={touchstart:Ye,touchmove:vt,touchend:vt,touchcancel:vt},I={},ie=!1;function Ee(n,s,o){return s==="touchstart"&&Le(),Xn[s]?(o=Xn[s].bind(this,o),n.addEventListener(Ut[s],o,!1),o):(console.warn("wrong event specified:",s),w)}function ee(n,s,o){if(!Ut[s]){console.warn("wrong event specified:",s);return}n.removeEventListener(Ut[s],o,!1)}function Oe(n){I[n.pointerId]=n}function Ze(n){I[n.pointerId]&&(I[n.pointerId]=n)}function Te(n){delete I[n.pointerId]}function Le(){ie||(document.addEventListener(Ma,Oe,!0),document.addEventListener(ri,Ze,!0),document.addEventListener(Tn,Te,!0),document.addEventListener(Lt,Te,!0),ie=!0)}function vt(n,s){if(s.pointerType!==(s.MSPOINTER_TYPE_MOUSE||"mouse")){s.touches=[];for(var o in I)s.touches.push(I[o]);s.changedTouches=[s],n(s)}}function Ye(n,s){s.MSPOINTER_TYPE_TOUCH&&s.pointerType===s.MSPOINTER_TYPE_TOUCH&&Ht(s),vt(n,s)}function rt(n){var s={},o,d;for(d in n)o=n[d],s[d]=o&&o.bind?o.bind(n):o;return n=s,s.type="dblclick",s.detail=2,s.isTrusted=!1,s._simulated=!0,s}var bn=200;function sn(n,s){n.addEventListener("dblclick",s);var o=0,d;function g(S){if(S.detail!==1){d=S.detail;return}if(!(S.pointerType==="mouse"||S.sourceCapabilities&&!S.sourceCapabilities.firesTouchEvents)){var z=bs(S);if(!(z.some(function(te){return te instanceof HTMLLabelElement&&te.attributes.for})&&!z.some(function(te){return te instanceof HTMLInputElement||te instanceof HTMLSelectElement}))){var Y=Date.now();Y-o<=bn?(d++,d===2&&s(rt(S))):d=1,o=Y}}}return n.addEventListener("click",g),{dblclick:s,simDblclick:g}}function at(n,s){n.removeEventListener("dblclick",s.dblclick),n.removeEventListener("click",s.simDblclick)}var ot=Yt(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ma=Yt(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),gs=ma==="webkitTransition"||ma==="OTransition"?ma+"End":"transitionend";function vs(n){return typeof n=="string"?document.getElementById(n):n}function oi(n,s){var o=n.style[s]||n.currentStyle&&n.currentStyle[s];if((!o||o==="auto")&&document.defaultView){var d=document.defaultView.getComputedStyle(n,null);o=d?d[s]:null}return o==="auto"?null:o}function Xe(n,s,o){var d=document.createElement(n);return d.className=s||"",o&&o.appendChild(d),d}function _t(n){var s=n.parentNode;s&&s.removeChild(n)}function jn(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function Vt(n){var s=n.parentNode;s&&s.lastChild!==n&&s.appendChild(n)}function X(n){var s=n.parentNode;s&&s.firstChild!==n&&s.insertBefore(n,s.firstChild)}function ue(n,s){if(n.classList!==void 0)return n.classList.contains(s);var o=Mt(n);return o.length>0&&new RegExp("(^|\\s)"+s+"(\\s|$)").test(o)}function re(n,s){if(n.classList!==void 0)for(var o=B(s),d=0,g=o.length;d<g;d++)n.classList.add(o[d]);else if(!ue(n,s)){var S=Mt(n);Ce(n,(S?S+" ":"")+s)}}function ve(n,s){n.classList!==void 0?n.classList.remove(s):Ce(n,M((" "+Mt(n)+" ").replace(" "+s+" "," ")))}function Ce(n,s){n.className.baseVal===void 0?n.className=s:n.className.baseVal=s}function Mt(n){return n.correspondingElement&&(n=n.correspondingElement),n.className.baseVal===void 0?n.className:n.className.baseVal}function Qe(n,s){"opacity"in n.style?n.style.opacity=s:"filter"in n.style&&Qn(n,s)}function Qn(n,s){var o=!1,d="DXImageTransform.Microsoft.Alpha";try{o=n.filters.item(d)}catch{if(s===1)return}s=Math.round(s*100),o?(o.Enabled=s!==100,o.Opacity=s):n.style.filter+=" progid:"+d+"(opacity="+s+")"}function Yt(n){for(var s=document.documentElement.style,o=0;o<n.length;o++)if(n[o]in s)return n[o];return!1}function za(n,s,o){var d=s||new le(0,0);n.style[ot]=(Me.ie3d?"translate("+d.x+"px,"+d.y+"px)":"translate3d("+d.x+"px,"+d.y+"px,0)")+(o?" scale("+o+")":"")}function Et(n,s){n._leaflet_pos=s,Me.any3d?za(n,s):(n.style.left=s.x+"px",n.style.top=s.y+"px")}function Ya(n){return n._leaflet_pos||new le(0,0)}var zi,pa,Il;if("onselectstart"in document)zi=function(){Ge(window,"selectstart",Ht)},pa=function(){yt(window,"selectstart",Ht)};else{var Ri=Yt(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);zi=function(){if(Ri){var n=document.documentElement.style;Il=n[Ri],n[Ri]="none"}},pa=function(){Ri&&(document.documentElement.style[Ri]=Il,Il=void 0)}}function Qs(){Ge(window,"dragstart",Ht)}function _s(){yt(window,"dragstart",Ht)}var Ws,Gl;function Oi(n){for(;n.tabIndex===-1;)n=n.parentNode;n.style&&(On(),Ws=n,Gl=n.style.outlineStyle,n.style.outlineStyle="none",Ge(window,"keydown",On))}function On(){Ws&&(Ws.style.outlineStyle=Gl,Ws=void 0,Gl=void 0,yt(window,"keydown",On))}function Js(n){do n=n.parentNode;while((!n.offsetWidth||!n.offsetHeight)&&n!==document.body);return n}function ys(n){var s=n.getBoundingClientRect();return{x:s.width/n.offsetWidth||1,y:s.height/n.offsetHeight||1,boundingClientRect:s}}var Di={__proto__:null,TRANSFORM:ot,TRANSITION:ma,TRANSITION_END:gs,get:vs,getStyle:oi,create:Xe,remove:_t,empty:jn,toFront:Vt,toBack:X,hasClass:ue,addClass:re,removeClass:ve,setClass:Ce,getClass:Mt,setOpacity:Qe,testProp:Yt,setTransform:za,setPosition:Et,getPosition:Ya,get disableTextSelection(){return zi},get enableTextSelection(){return pa},disableImageDrag:Qs,enableImageDrag:_s,preventOutline:Oi,restoreOutline:On,getSizedParentNode:Js,getScale:ys};function Ge(n,s,o,d){if(s&&typeof s=="object")for(var g in s)Jn(n,g,s[g],o);else{s=B(s);for(var S=0,z=s.length;S<z;S++)Jn(n,s[S],o,d)}return this}var Wn="_leaflet_events";function yt(n,s,o,d){if(arguments.length===1)Vl(n),delete n[Wn];else if(s&&typeof s=="object")for(var g in s)xs(n,g,s[g],o);else if(s=B(s),arguments.length===2)Vl(n,function(Y){return ae(s,Y)!==-1});else for(var S=0,z=s.length;S<z;S++)xs(n,s[S],o,d);return this}function Vl(n,s){for(var o in n[Wn]){var d=o.split(/\d/)[0];(!s||s(d))&&xs(n,d,null,null,o)}}var ci={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Jn(n,s,o,d){var g=s+y(o)+(d?"_"+y(d):"");if(n[Wn]&&n[Wn][g])return this;var S=function(Y){return o.call(d||n,Y||window.event)},z=S;!Me.touchNative&&Me.pointer&&s.indexOf("touch")===0?S=Ee(n,s,S):Me.touch&&s==="dblclick"?S=sn(n,S):"addEventListener"in n?s==="touchstart"||s==="touchmove"||s==="wheel"||s==="mousewheel"?n.addEventListener(ci[s]||s,S,Me.passiveEvents?{passive:!1}:!1):s==="mouseenter"||s==="mouseleave"?(S=function(Y){Y=Y||window.event,Ra(n,Y)&&z(Y)},n.addEventListener(ci[s],S,!1)):n.addEventListener(s,z,!1):n.attachEvent("on"+s,S),n[Wn]=n[Wn]||{},n[Wn][g]=S}function xs(n,s,o,d,g){g=g||s+y(o)+(d?"_"+y(d):"");var S=n[Wn]&&n[Wn][g];if(!S)return this;!Me.touchNative&&Me.pointer&&s.indexOf("touch")===0?ee(n,s,S):Me.touch&&s==="dblclick"?at(n,S):"removeEventListener"in n?n.removeEventListener(ci[s]||s,S,!1):n.detachEvent("on"+s,S),n[Wn][g]=null}function ea(n){return n.stopPropagation?n.stopPropagation():n.originalEvent?n.originalEvent._stopped=!0:n.cancelBubble=!0,this}function ga(n){return Jn(n,"wheel",ea),this}function ui(n){return Ge(n,"mousedown touchstart dblclick contextmenu",ea),n._leaflet_disable_click=!0,this}function Ht(n){return n.preventDefault?n.preventDefault():n.returnValue=!1,this}function $a(n){return Ht(n),ea(n),this}function bs(n){if(n.composedPath)return n.composedPath();for(var s=[],o=n.target;o;)s.push(o),o=o.parentNode;return s}function js(n,s){if(!s)return new le(n.clientX,n.clientY);var o=ys(s),d=o.boundingClientRect;return new le((n.clientX-d.left)/o.x-s.clientLeft,(n.clientY-d.top)/o.y-s.clientTop)}var Jr=Me.linux&&Me.chrome?window.devicePixelRatio:Me.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function gn(n){return Me.edge?n.wheelDeltaY/2:n.deltaY&&n.deltaMode===0?-n.deltaY/Jr:n.deltaY&&n.deltaMode===1?-n.deltaY*20:n.deltaY&&n.deltaMode===2?-n.deltaY*60:n.deltaX||n.deltaZ?0:n.wheelDelta?(n.wheelDeltaY||n.wheelDelta)/2:n.detail&&Math.abs(n.detail)<32765?-n.detail*20:n.detail?n.detail/-32765*60:0}function Ra(n,s){var o=s.relatedTarget;if(!o)return!0;try{for(;o&&o!==n;)o=o.parentNode}catch{return!1}return o!==n}var el={__proto__:null,on:Ge,off:yt,stopPropagation:ea,disableScrollPropagation:ga,disableClickPropagation:ui,preventDefault:Ht,stop:$a,getPropagationPath:bs,getMousePosition:js,getWheelDelta:gn,isExternalTarget:Ra,addListener:Ge,removeListener:yt},Bi=K.extend({run:function(n,s,o,d){this.stop(),this._el=n,this._inProgress=!0,this._duration=o||.25,this._easeOutPower=1/Math.max(d||.5,.2),this._startPos=Ya(n),this._offset=s.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=we(this._animate,this),this._step()},_step:function(n){var s=+new Date-this._startTime,o=this._duration*1e3;s<o?this._runFrame(this._easeOut(s/o),n):(this._runFrame(1),this._complete())},_runFrame:function(n,s){var o=this._startPos.add(this._offset.multiplyBy(n));s&&o._round(),Et(this._el,o),this.fire("step")},_complete:function(){Ae(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(n){return 1-Math.pow(1-n,this._easeOutPower)}}),it=K.extend({options:{crs:Ct,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(n,s){s=H(this,s),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(n),this._initLayout(),this._onResize=j(this._onResize,this),this._initEvents(),s.maxBounds&&this.setMaxBounds(s.maxBounds),s.zoom!==void 0&&(this._zoom=this._limitZoom(s.zoom)),s.center&&s.zoom!==void 0&&this.setView(ye(s.center),s.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ma&&Me.any3d&&!Me.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ge(this._proxy,gs,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(n,s,o){if(s=s===void 0?this._zoom:this._limitZoom(s),n=this._limitCenter(ye(n),s,this.options.maxBounds),o=o||{},this._stop(),this._loaded&&!o.reset&&o!==!0){o.animate!==void 0&&(o.zoom=p({animate:o.animate},o.zoom),o.pan=p({animate:o.animate,duration:o.duration},o.pan));var d=this._zoom!==s?this._tryAnimatedZoom&&this._tryAnimatedZoom(n,s,o.zoom):this._tryAnimatedPan(n,o.pan);if(d)return clearTimeout(this._sizeTimer),this}return this._resetView(n,s,o.pan&&o.pan.noMoveStart),this},setZoom:function(n,s){return this._loaded?this.setView(this.getCenter(),n,{zoom:s}):(this._zoom=n,this)},zoomIn:function(n,s){return n=n||(Me.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+n,s)},zoomOut:function(n,s){return n=n||(Me.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-n,s)},setZoomAround:function(n,s,o){var d=this.getZoomScale(s),g=this.getSize().divideBy(2),S=n instanceof le?n:this.latLngToContainerPoint(n),z=S.subtract(g).multiplyBy(1-1/d),Y=this.containerPointToLatLng(g.add(z));return this.setView(Y,s,{zoom:o})},_getBoundsCenterZoom:function(n,s){s=s||{},n=n.getBounds?n.getBounds():he(n);var o=Z(s.paddingTopLeft||s.padding||[0,0]),d=Z(s.paddingBottomRight||s.padding||[0,0]),g=this.getBoundsZoom(n,!1,o.add(d));if(g=typeof s.maxZoom=="number"?Math.min(s.maxZoom,g):g,g===1/0)return{center:n.getCenter(),zoom:g};var S=d.subtract(o).divideBy(2),z=this.project(n.getSouthWest(),g),Y=this.project(n.getNorthEast(),g),te=this.unproject(z.add(Y).divideBy(2).add(S),g);return{center:te,zoom:g}},fitBounds:function(n,s){if(n=he(n),!n.isValid())throw new Error("Bounds are not valid.");var o=this._getBoundsCenterZoom(n,s);return this.setView(o.center,o.zoom,s)},fitWorld:function(n){return this.fitBounds([[-90,-180],[90,180]],n)},panTo:function(n,s){return this.setView(n,this._zoom,{pan:s})},panBy:function(n,s){if(n=Z(n).round(),s=s||{},!n.x&&!n.y)return this.fire("moveend");if(s.animate!==!0&&!this.getSize().contains(n))return this._resetView(this.unproject(this.project(this.getCenter()).add(n)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Bi,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),s.noMoveStart||this.fire("movestart"),s.animate!==!1){re(this._mapPane,"leaflet-pan-anim");var o=this._getMapPanePos().subtract(n).round();this._panAnim.run(this._mapPane,o,s.duration||.25,s.easeLinearity)}else this._rawPanBy(n),this.fire("move").fire("moveend");return this},flyTo:function(n,s,o){if(o=o||{},o.animate===!1||!Me.any3d)return this.setView(n,s,o);this._stop();var d=this.project(this.getCenter()),g=this.project(n),S=this.getSize(),z=this._zoom;n=ye(n),s=s===void 0?z:s;var Y=Math.max(S.x,S.y),te=Y*this.getZoomScale(z,s),me=g.distanceTo(d)||1,Ne=1.42,Pe=Ne*Ne;function Fe(Dt){var Pa=Dt?-1:1,mi=Dt?te:Y,lr=te*te-Y*Y+Pa*Pe*Pe*me*me,Ps=2*mi*Pe*me,Us=lr/Ps,ni=Math.sqrt(Us*Us+1)-Us,Ua=ni<1e-9?-18:Math.log(ni);return Ua}function ln(Dt){return(Math.exp(Dt)-Math.exp(-Dt))/2}function Zt(Dt){return(Math.exp(Dt)+Math.exp(-Dt))/2}function An(Dt){return ln(Dt)/Zt(Dt)}var ut=Fe(0);function dt(Dt){return Y*(Zt(ut)/Zt(ut+Ne*Dt))}function et(Dt){return Y*(Zt(ut)*An(ut+Ne*Dt)-ln(ut))/Pe}function ei(Dt){return 1-Math.pow(1-Dt,1.5)}var Un=Date.now(),ml=(Fe(1)-ut)/Ne,ti=o.duration?1e3*o.duration:1e3*ml*.8;function sr(){var Dt=(Date.now()-Un)/ti,Pa=ei(Dt)*ml;Dt<=1?(this._flyToFrame=we(sr,this),this._move(this.unproject(d.add(g.subtract(d).multiplyBy(et(Pa)/me)),z),this.getScaleZoom(Y/dt(Pa),z),{flyTo:!0})):this._move(n,s)._moveEnd(!0)}return this._moveStart(!0,o.noMoveStart),sr.call(this),this},flyToBounds:function(n,s){var o=this._getBoundsCenterZoom(n,s);return this.flyTo(o.center,o.zoom,s)},setMaxBounds:function(n){return n=he(n),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),n.isValid()?(this.options.maxBounds=n,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(n){var s=this.options.minZoom;return this.options.minZoom=n,this._loaded&&s!==n&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(n):this},setMaxZoom:function(n){var s=this.options.maxZoom;return this.options.maxZoom=n,this._loaded&&s!==n&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(n):this},panInsideBounds:function(n,s){this._enforcingBounds=!0;var o=this.getCenter(),d=this._limitCenter(o,this._zoom,he(n));return o.equals(d)||this.panTo(d,s),this._enforcingBounds=!1,this},panInside:function(n,s){s=s||{};var o=Z(s.paddingTopLeft||s.padding||[0,0]),d=Z(s.paddingBottomRight||s.padding||[0,0]),g=this.project(this.getCenter()),S=this.project(n),z=this.getPixelBounds(),Y=$([z.min.add(o),z.max.subtract(d)]),te=Y.getSize();if(!Y.contains(S)){this._enforcingBounds=!0;var me=S.subtract(Y.getCenter()),Ne=Y.extend(S).getSize().subtract(te);g.x+=me.x<0?-Ne.x:Ne.x,g.y+=me.y<0?-Ne.y:Ne.y,this.panTo(this.unproject(g),s),this._enforcingBounds=!1}return this},invalidateSize:function(n){if(!this._loaded)return this;n=p({animate:!1,pan:!0},n===!0?{animate:!0}:n);var s=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),d=s.divideBy(2).round(),g=o.divideBy(2).round(),S=d.subtract(g);return!S.x&&!S.y?this:(n.animate&&n.pan?this.panBy(S):(n.pan&&this._rawPanBy(S),this.fire("move"),n.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(j(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:s,newSize:o}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(n){if(n=this._locateOptions=p({timeout:1e4,watch:!1},n),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var s=j(this._handleGeolocationResponse,this),o=j(this._handleGeolocationError,this);return n.watch?this._locationWatchId=navigator.geolocation.watchPosition(s,o,n):navigator.geolocation.getCurrentPosition(s,o,n),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(n){if(this._container._leaflet_id){var s=n.code,o=n.message||(s===1?"permission denied":s===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:s,message:"Geolocation error: "+o+"."})}},_handleGeolocationResponse:function(n){if(this._container._leaflet_id){var s=n.coords.latitude,o=n.coords.longitude,d=new ge(s,o),g=d.toBounds(n.coords.accuracy*2),S=this._locateOptions;if(S.setView){var z=this.getBoundsZoom(g);this.setView(d,S.maxZoom?Math.min(z,S.maxZoom):z)}var Y={latlng:d,bounds:g,timestamp:n.timestamp};for(var te in n.coords)typeof n.coords[te]=="number"&&(Y[te]=n.coords[te]);this.fire("locationfound",Y)}},addHandler:function(n,s){if(!s)return this;var o=this[n]=new s(this);return this._handlers.push(o),this.options[n]&&o.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),_t(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Ae(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var n;for(n in this._layers)this._layers[n].remove();for(n in this._panes)_t(this._panes[n]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(n,s){var o="leaflet-pane"+(n?" leaflet-"+n.replace("Pane","")+"-pane":""),d=Xe("div",o,s||this._mapPane);return n&&(this._panes[n]=d),d},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var n=this.getPixelBounds(),s=this.unproject(n.getBottomLeft()),o=this.unproject(n.getTopRight());return new oe(s,o)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(n,s,o){n=he(n),o=Z(o||[0,0]);var d=this.getZoom()||0,g=this.getMinZoom(),S=this.getMaxZoom(),z=n.getNorthWest(),Y=n.getSouthEast(),te=this.getSize().subtract(o),me=$(this.project(Y,d),this.project(z,d)).getSize(),Ne=Me.any3d?this.options.zoomSnap:1,Pe=te.x/me.x,Fe=te.y/me.y,ln=s?Math.max(Pe,Fe):Math.min(Pe,Fe);return d=this.getScaleZoom(ln,d),Ne&&(d=Math.round(d/(Ne/100))*(Ne/100),d=s?Math.ceil(d/Ne)*Ne:Math.floor(d/Ne)*Ne),Math.max(g,Math.min(S,d))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new le(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(n,s){var o=this._getTopLeftPoint(n,s);return new T(o,o.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(n){return this.options.crs.getProjectedBounds(n===void 0?this.getZoom():n)},getPane:function(n){return typeof n=="string"?this._panes[n]:n},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(n,s){var o=this.options.crs;return s=s===void 0?this._zoom:s,o.scale(n)/o.scale(s)},getScaleZoom:function(n,s){var o=this.options.crs;s=s===void 0?this._zoom:s;var d=o.zoom(n*o.scale(s));return isNaN(d)?1/0:d},project:function(n,s){return s=s===void 0?this._zoom:s,this.options.crs.latLngToPoint(ye(n),s)},unproject:function(n,s){return s=s===void 0?this._zoom:s,this.options.crs.pointToLatLng(Z(n),s)},layerPointToLatLng:function(n){var s=Z(n).add(this.getPixelOrigin());return this.unproject(s)},latLngToLayerPoint:function(n){var s=this.project(ye(n))._round();return s._subtract(this.getPixelOrigin())},wrapLatLng:function(n){return this.options.crs.wrapLatLng(ye(n))},wrapLatLngBounds:function(n){return this.options.crs.wrapLatLngBounds(he(n))},distance:function(n,s){return this.options.crs.distance(ye(n),ye(s))},containerPointToLayerPoint:function(n){return Z(n).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(n){return Z(n).add(this._getMapPanePos())},containerPointToLatLng:function(n){var s=this.containerPointToLayerPoint(Z(n));return this.layerPointToLatLng(s)},latLngToContainerPoint:function(n){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ye(n)))},mouseEventToContainerPoint:function(n){return js(n,this._container)},mouseEventToLayerPoint:function(n){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(n))},mouseEventToLatLng:function(n){return this.layerPointToLatLng(this.mouseEventToLayerPoint(n))},_initContainer:function(n){var s=this._container=vs(n);if(s){if(s._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ge(s,"scroll",this._onScroll,this),this._containerId=y(s)},_initLayout:function(){var n=this._container;this._fadeAnimated=this.options.fadeAnimation&&Me.any3d,re(n,"leaflet-container"+(Me.touch?" leaflet-touch":"")+(Me.retina?" leaflet-retina":"")+(Me.ielt9?" leaflet-oldie":"")+(Me.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var s=oi(n,"position");s!=="absolute"&&s!=="relative"&&s!=="fixed"&&s!=="sticky"&&(n.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var n=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Et(this._mapPane,new le(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(re(n.markerPane,"leaflet-zoom-hide"),re(n.shadowPane,"leaflet-zoom-hide"))},_resetView:function(n,s,o){Et(this._mapPane,new le(0,0));var d=!this._loaded;this._loaded=!0,s=this._limitZoom(s),this.fire("viewprereset");var g=this._zoom!==s;this._moveStart(g,o)._move(n,s)._moveEnd(g),this.fire("viewreset"),d&&this.fire("load")},_moveStart:function(n,s){return n&&this.fire("zoomstart"),s||this.fire("movestart"),this},_move:function(n,s,o,d){s===void 0&&(s=this._zoom);var g=this._zoom!==s;return this._zoom=s,this._lastCenter=n,this._pixelOrigin=this._getNewPixelOrigin(n),d?o&&o.pinch&&this.fire("zoom",o):((g||o&&o.pinch)&&this.fire("zoom",o),this.fire("move",o)),this},_moveEnd:function(n){return n&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Ae(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(n){Et(this._mapPane,this._getMapPanePos().subtract(n))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(n){this._targets={},this._targets[y(this._container)]=this;var s=n?yt:Ge;s(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&s(window,"resize",this._onResize,this),Me.any3d&&this.options.transform3DLimit&&(n?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Ae(this._resizeRequest),this._resizeRequest=we(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var n=this._getMapPanePos();Math.max(Math.abs(n.x),Math.abs(n.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(n,s){for(var o=[],d,g=s==="mouseout"||s==="mouseover",S=n.target||n.srcElement,z=!1;S;){if(d=this._targets[y(S)],d&&(s==="click"||s==="preclick")&&this._draggableMoved(d)){z=!0;break}if(d&&d.listens(s,!0)&&(g&&!Ra(S,n)||(o.push(d),g))||S===this._container)break;S=S.parentNode}return!o.length&&!z&&!g&&this.listens(s,!0)&&(o=[this]),o},_isClickDisabled:function(n){for(;n&&n!==this._container;){if(n._leaflet_disable_click)return!0;n=n.parentNode}},_handleDOMEvent:function(n){var s=n.target||n.srcElement;if(!(!this._loaded||s._leaflet_disable_events||n.type==="click"&&this._isClickDisabled(s))){var o=n.type;o==="mousedown"&&Oi(s),this._fireDOMEvent(n,o)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(n,s,o){if(n.type==="click"){var d=p({},n);d.type="preclick",this._fireDOMEvent(d,d.type,o)}var g=this._findEventTargets(n,s);if(o){for(var S=[],z=0;z<o.length;z++)o[z].listens(s,!0)&&S.push(o[z]);g=S.concat(g)}if(g.length){s==="contextmenu"&&Ht(n);var Y=g[0],te={originalEvent:n};if(n.type!=="keypress"&&n.type!=="keydown"&&n.type!=="keyup"){var me=Y.getLatLng&&(!Y._radius||Y._radius<=10);te.containerPoint=me?this.latLngToContainerPoint(Y.getLatLng()):this.mouseEventToContainerPoint(n),te.layerPoint=this.containerPointToLayerPoint(te.containerPoint),te.latlng=me?Y.getLatLng():this.layerPointToLatLng(te.layerPoint)}for(z=0;z<g.length;z++)if(g[z].fire(s,te,!0),te.originalEvent._stopped||g[z].options.bubblingMouseEvents===!1&&ae(this._mouseEvents,s)!==-1)return}},_draggableMoved:function(n){return n=n.dragging&&n.dragging.enabled()?n:this,n.dragging&&n.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var n=0,s=this._handlers.length;n<s;n++)this._handlers[n].disable()},whenReady:function(n,s){return this._loaded?n.call(s||this,{target:this}):this.on("load",n,s),this},_getMapPanePos:function(){return Ya(this._mapPane)||new le(0,0)},_moved:function(){var n=this._getMapPanePos();return n&&!n.equals([0,0])},_getTopLeftPoint:function(n,s){var o=n&&s!==void 0?this._getNewPixelOrigin(n,s):this.getPixelOrigin();return o.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(n,s){var o=this.getSize()._divideBy(2);return this.project(n,s)._subtract(o)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(n,s,o){var d=this._getNewPixelOrigin(o,s);return this.project(n,s)._subtract(d)},_latLngBoundsToNewLayerBounds:function(n,s,o){var d=this._getNewPixelOrigin(o,s);return $([this.project(n.getSouthWest(),s)._subtract(d),this.project(n.getNorthWest(),s)._subtract(d),this.project(n.getSouthEast(),s)._subtract(d),this.project(n.getNorthEast(),s)._subtract(d)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(n){return this.latLngToLayerPoint(n).subtract(this._getCenterLayerPoint())},_limitCenter:function(n,s,o){if(!o)return n;var d=this.project(n,s),g=this.getSize().divideBy(2),S=new T(d.subtract(g),d.add(g)),z=this._getBoundsOffset(S,o,s);return Math.abs(z.x)<=1&&Math.abs(z.y)<=1?n:this.unproject(d.add(z),s)},_limitOffset:function(n,s){if(!s)return n;var o=this.getPixelBounds(),d=new T(o.min.add(n),o.max.add(n));return n.add(this._getBoundsOffset(d,s))},_getBoundsOffset:function(n,s,o){var d=$(this.project(s.getNorthEast(),o),this.project(s.getSouthWest(),o)),g=d.min.subtract(n.min),S=d.max.subtract(n.max),z=this._rebound(g.x,-S.x),Y=this._rebound(g.y,-S.y);return new le(z,Y)},_rebound:function(n,s){return n+s>0?Math.round(n-s)/2:Math.max(0,Math.ceil(n))-Math.max(0,Math.floor(s))},_limitZoom:function(n){var s=this.getMinZoom(),o=this.getMaxZoom(),d=Me.any3d?this.options.zoomSnap:1;return d&&(n=Math.round(n/d)*d),Math.max(s,Math.min(o,n))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ve(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(n,s){var o=this._getCenterOffset(n)._trunc();return(s&&s.animate)!==!0&&!this.getSize().contains(o)?!1:(this.panBy(o,s),!0)},_createAnimProxy:function(){var n=this._proxy=Xe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(n),this.on("zoomanim",function(s){var o=ot,d=this._proxy.style[o];za(this._proxy,this.project(s.center,s.zoom),this.getZoomScale(s.zoom,1)),d===this._proxy.style[o]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){_t(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var n=this.getCenter(),s=this.getZoom();za(this._proxy,this.project(n,s),this.getZoomScale(s,1))},_catchTransitionEnd:function(n){this._animatingZoom&&n.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(n,s,o){if(this._animatingZoom)return!0;if(o=o||{},!this._zoomAnimated||o.animate===!1||this._nothingToAnimate()||Math.abs(s-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(s),g=this._getCenterOffset(n)._divideBy(1-1/d);return o.animate!==!0&&!this.getSize().contains(g)?!1:(we(function(){this._moveStart(!0,o.noMoveStart||!1)._animateZoom(n,s,!0)},this),!0)},_animateZoom:function(n,s,o,d){this._mapPane&&(o&&(this._animatingZoom=!0,this._animateToCenter=n,this._animateToZoom=s,re(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:n,zoom:s,noUpdate:d}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(j(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ve(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Yl(n,s){return new it(n,s)}var Ln=qe.extend({options:{position:"topright"},initialize:function(n){H(this,n)},getPosition:function(){return this.options.position},setPosition:function(n){var s=this._map;return s&&s.removeControl(this),this.options.position=n,s&&s.addControl(this),this},getContainer:function(){return this._container},addTo:function(n){this.remove(),this._map=n;var s=this._container=this.onAdd(n),o=this.getPosition(),d=n._controlCorners[o];return re(s,"leaflet-control"),o.indexOf("bottom")!==-1?d.insertBefore(s,d.firstChild):d.appendChild(s),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(_t(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(n){this._map&&n&&n.screenX>0&&n.screenY>0&&this._map.getContainer().focus()}}),Oa=function(n){return new Ln(n)};it.include({addControl:function(n){return n.addTo(this),this},removeControl:function(n){return n.remove(),this},_initControlPos:function(){var n=this._controlCorners={},s="leaflet-",o=this._controlContainer=Xe("div",s+"control-container",this._container);function d(g,S){var z=s+g+" "+s+S;n[g+S]=Xe("div",z,o)}d("top","left"),d("top","right"),d("bottom","left"),d("bottom","right")},_clearControlPos:function(){for(var n in this._controlCorners)_t(this._controlCorners[n]);_t(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ws=Ln.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(n,s,o,d){return o<d?-1:d<o?1:0}},initialize:function(n,s,o){H(this,o),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var d in n)this._addLayer(n[d],d);for(d in s)this._addLayer(s[d],d,!0)},onAdd:function(n){this._initLayout(),this._update(),this._map=n,n.on("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(n){return Ln.prototype.addTo.call(this,n),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(n,s){return this._addLayer(n,s),this._map?this._update():this},addOverlay:function(n,s){return this._addLayer(n,s,!0),this._map?this._update():this},removeLayer:function(n){n.off("add remove",this._onLayerChange,this);var s=this._getLayer(y(n));return s&&this._layers.splice(this._layers.indexOf(s),1),this._map?this._update():this},expand:function(){re(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var n=this._map.getSize().y-(this._container.offsetTop+50);return n<this._section.clientHeight?(re(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=n+"px"):ve(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ve(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var n="leaflet-control-layers",s=this._container=Xe("div",n),o=this.options.collapsed;s.setAttribute("aria-haspopup",!0),ui(s),ga(s);var d=this._section=Xe("section",n+"-list");o&&(this._map.on("click",this.collapse,this),Ge(s,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=Xe("a",n+"-toggle",s);g.href="#",g.title="Layers",g.setAttribute("role","button"),Ge(g,{keydown:function(S){S.keyCode===13&&this._expandSafely()},click:function(S){Ht(S),this._expandSafely()}},this),o||this.expand(),this._baseLayersList=Xe("div",n+"-base",d),this._separator=Xe("div",n+"-separator",d),this._overlaysList=Xe("div",n+"-overlays",d),s.appendChild(d)},_getLayer:function(n){for(var s=0;s<this._layers.length;s++)if(this._layers[s]&&y(this._layers[s].layer)===n)return this._layers[s]},_addLayer:function(n,s,o){this._map&&n.on("add remove",this._onLayerChange,this),this._layers.push({layer:n,name:s,overlay:o}),this.options.sortLayers&&this._layers.sort(j(function(d,g){return this.options.sortFunction(d.layer,g.layer,d.name,g.name)},this)),this.options.autoZIndex&&n.setZIndex&&(this._lastZIndex++,n.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;jn(this._baseLayersList),jn(this._overlaysList),this._layerControlInputs=[];var n,s,o,d,g=0;for(o=0;o<this._layers.length;o++)d=this._layers[o],this._addItem(d),s=s||d.overlay,n=n||!d.overlay,g+=d.overlay?0:1;return this.options.hideSingleBase&&(n=n&&g>1,this._baseLayersList.style.display=n?"":"none"),this._separator.style.display=s&&n?"":"none",this},_onLayerChange:function(n){this._handlingClick||this._update();var s=this._getLayer(y(n.target)),o=s.overlay?n.type==="add"?"overlayadd":"overlayremove":n.type==="add"?"baselayerchange":null;o&&this._map.fire(o,s)},_createRadioElement:function(n,s){var o='<input type="radio" class="leaflet-control-layers-selector" name="'+n+'"'+(s?' checked="checked"':"")+"/>",d=document.createElement("div");return d.innerHTML=o,d.firstChild},_addItem:function(n){var s=document.createElement("label"),o=this._map.hasLayer(n.layer),d;n.overlay?(d=document.createElement("input"),d.type="checkbox",d.className="leaflet-control-layers-selector",d.defaultChecked=o):d=this._createRadioElement("leaflet-base-layers_"+y(this),o),this._layerControlInputs.push(d),d.layerId=y(n.layer),Ge(d,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+n.name;var S=document.createElement("span");s.appendChild(S),S.appendChild(d),S.appendChild(g);var z=n.overlay?this._overlaysList:this._baseLayersList;return z.appendChild(s),this._checkDisabledLayers(),s},_onInputClick:function(){if(!this._preventClick){var n=this._layerControlInputs,s,o,d=[],g=[];this._handlingClick=!0;for(var S=n.length-1;S>=0;S--)s=n[S],o=this._getLayer(s.layerId).layer,s.checked?d.push(o):s.checked||g.push(o);for(S=0;S<g.length;S++)this._map.hasLayer(g[S])&&this._map.removeLayer(g[S]);for(S=0;S<d.length;S++)this._map.hasLayer(d[S])||this._map.addLayer(d[S]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var n=this._layerControlInputs,s,o,d=this._map.getZoom(),g=n.length-1;g>=0;g--)s=n[g],o=this._getLayer(s.layerId).layer,s.disabled=o.options.minZoom!==void 0&&d<o.options.minZoom||o.options.maxZoom!==void 0&&d>o.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var n=this._section;this._preventClick=!0,Ge(n,"click",Ht),this.expand();var s=this;setTimeout(function(){yt(n,"click",Ht),s._preventClick=!1})}}),eo=function(n,s,o){return new ws(n,s,o)},$l=Ln.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(n){var s="leaflet-control-zoom",o=Xe("div",s+" leaflet-bar"),d=this.options;return this._zoomInButton=this._createButton(d.zoomInText,d.zoomInTitle,s+"-in",o,this._zoomIn),this._zoomOutButton=this._createButton(d.zoomOutText,d.zoomOutTitle,s+"-out",o,this._zoomOut),this._updateDisabled(),n.on("zoomend zoomlevelschange",this._updateDisabled,this),o},onRemove:function(n){n.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(n){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(n.shiftKey?3:1))},_zoomOut:function(n){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(n.shiftKey?3:1))},_createButton:function(n,s,o,d,g){var S=Xe("a",o,d);return S.innerHTML=n,S.href="#",S.title=s,S.setAttribute("role","button"),S.setAttribute("aria-label",s),ui(S),Ge(S,"click",$a),Ge(S,"click",g,this),Ge(S,"click",this._refocusOnMap,this),S},_updateDisabled:function(){var n=this._map,s="leaflet-disabled";ve(this._zoomInButton,s),ve(this._zoomOutButton,s),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||n._zoom===n.getMinZoom())&&(re(this._zoomOutButton,s),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||n._zoom===n.getMaxZoom())&&(re(this._zoomInButton,s),this._zoomInButton.setAttribute("aria-disabled","true"))}});it.mergeOptions({zoomControl:!0}),it.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new $l,this.addControl(this.zoomControl))});var qc=function(n){return new $l(n)},to=Ln.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(n){var s="leaflet-control-scale",o=Xe("div",s),d=this.options;return this._addScales(d,s+"-line",o),n.on(d.updateWhenIdle?"moveend":"move",this._update,this),n.whenReady(this._update,this),o},onRemove:function(n){n.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(n,s,o){n.metric&&(this._mScale=Xe("div",s,o)),n.imperial&&(this._iScale=Xe("div",s,o))},_update:function(){var n=this._map,s=n.getSize().y/2,o=n.distance(n.containerPointToLatLng([0,s]),n.containerPointToLatLng([this.options.maxWidth,s]));this._updateScales(o)},_updateScales:function(n){this.options.metric&&n&&this._updateMetric(n),this.options.imperial&&n&&this._updateImperial(n)},_updateMetric:function(n){var s=this._getRoundNum(n),o=s<1e3?s+" m":s/1e3+" km";this._updateScale(this._mScale,o,s/n)},_updateImperial:function(n){var s=n*3.2808399,o,d,g;s>5280?(o=s/5280,d=this._getRoundNum(o),this._updateScale(this._iScale,d+" mi",d/o)):(g=this._getRoundNum(s),this._updateScale(this._iScale,g+" ft",g/s))},_updateScale:function(n,s,o){n.style.width=Math.round(this.options.maxWidth*o)+"px",n.innerHTML=s},_getRoundNum:function(n){var s=Math.pow(10,(Math.floor(n)+"").length-1),o=n/s;return o=o>=10?10:o>=5?5:o>=3?3:o>=2?2:1,s*o}}),Fl=function(n){return new to(n)},Ic='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Kl=Ln.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Me.inlineSvg?Ic+" ":"")+"Leaflet</a>"},initialize:function(n){H(this,n),this._attributions={}},onAdd:function(n){n.attributionControl=this,this._container=Xe("div","leaflet-control-attribution"),ui(this._container);for(var s in n._layers)n._layers[s].getAttribution&&this.addAttribution(n._layers[s].getAttribution());return this._update(),n.on("layeradd",this._addAttribution,this),this._container},onRemove:function(n){n.off("layeradd",this._addAttribution,this)},_addAttribution:function(n){n.layer.getAttribution&&(this.addAttribution(n.layer.getAttribution()),n.layer.once("remove",function(){this.removeAttribution(n.layer.getAttribution())},this))},setPrefix:function(n){return this.options.prefix=n,this._update(),this},addAttribution:function(n){return n?(this._attributions[n]||(this._attributions[n]=0),this._attributions[n]++,this._update(),this):this},removeAttribution:function(n){return n?(this._attributions[n]&&(this._attributions[n]--,this._update()),this):this},_update:function(){if(this._map){var n=[];for(var s in this._attributions)this._attributions[s]&&n.push(s);var o=[];this.options.prefix&&o.push(this.options.prefix),n.length&&o.push(n.join(", ")),this._container.innerHTML=o.join(' <span aria-hidden="true">|</span> ')}}});it.mergeOptions({attributionControl:!0}),it.addInitHook(function(){this.options.attributionControl&&new Kl().addTo(this)});var Gc=function(n){return new Kl(n)};Ln.Layers=ws,Ln.Zoom=$l,Ln.Scale=to,Ln.Attribution=Kl,Oa.layers=eo,Oa.zoom=qc,Oa.scale=Fl,Oa.attribution=Gc;var va=qe.extend({initialize:function(n){this._map=n},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});va.addTo=function(n,s){return n.addHandler(s,this),this};var Vc={Events:A},Xl=Me.touch?"touchstart mousedown":"mousedown",Fa=K.extend({options:{clickTolerance:3},initialize:function(n,s,o,d){H(this,d),this._element=n,this._dragStartTarget=s||n,this._preventOutline=o},enable:function(){this._enabled||(Ge(this._dragStartTarget,Xl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Fa._dragging===this&&this.finishDrag(!0),yt(this._dragStartTarget,Xl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(n){if(this._enabled&&(this._moved=!1,!ue(this._element,"leaflet-zoom-anim"))){if(n.touches&&n.touches.length!==1){Fa._dragging===this&&this.finishDrag();return}if(!(Fa._dragging||n.shiftKey||n.which!==1&&n.button!==1&&!n.touches)&&(Fa._dragging=this,this._preventOutline&&Oi(this._element),Qs(),zi(),!this._moving)){this.fire("down");var s=n.touches?n.touches[0]:n,o=Js(this._element);this._startPoint=new le(s.clientX,s.clientY),this._startPos=Ya(this._element),this._parentScale=ys(o);var d=n.type==="mousedown";Ge(document,d?"mousemove":"touchmove",this._onMove,this),Ge(document,d?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(n){if(this._enabled){if(n.touches&&n.touches.length>1){this._moved=!0;return}var s=n.touches&&n.touches.length===1?n.touches[0]:n,o=new le(s.clientX,s.clientY)._subtract(this._startPoint);!o.x&&!o.y||Math.abs(o.x)+Math.abs(o.y)<this.options.clickTolerance||(o.x/=this._parentScale.x,o.y/=this._parentScale.y,Ht(n),this._moved||(this.fire("dragstart"),this._moved=!0,re(document.body,"leaflet-dragging"),this._lastTarget=n.target||n.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),re(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(o),this._moving=!0,this._lastEvent=n,this._updatePosition())}},_updatePosition:function(){var n={originalEvent:this._lastEvent};this.fire("predrag",n),Et(this._element,this._newPos),this.fire("drag",n)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(n){ve(document.body,"leaflet-dragging"),this._lastTarget&&(ve(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),yt(document,"mousemove touchmove",this._onMove,this),yt(document,"mouseup touchend touchcancel",this._onUp,this),_s(),pa();var s=this._moved&&this._moving;this._moving=!1,Fa._dragging=!1,s&&this.fire("dragend",{noInertia:n,distance:this._newPos.distanceTo(this._startPos)})}});function no(n,s,o){var d,g=[1,4,2,8],S,z,Y,te,me,Ne,Pe,Fe;for(S=0,Ne=n.length;S<Ne;S++)n[S]._code=di(n[S],s);for(Y=0;Y<4;Y++){for(Pe=g[Y],d=[],S=0,Ne=n.length,z=Ne-1;S<Ne;z=S++)te=n[S],me=n[z],te._code&Pe?me._code&Pe||(Fe=tl(me,te,Pe,s,o),Fe._code=di(Fe,s),d.push(Fe)):(me._code&Pe&&(Fe=tl(me,te,Pe,s,o),Fe._code=di(Fe,s),d.push(Fe)),d.push(te));n=d}return n}function ao(n,s){var o,d,g,S,z,Y,te,me,Ne;if(!n||n.length===0)throw new Error("latlngs not passed");Dn(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var Pe=ye([0,0]),Fe=he(n),ln=Fe.getNorthWest().distanceTo(Fe.getSouthWest())*Fe.getNorthEast().distanceTo(Fe.getNorthWest());ln<1700&&(Pe=Ql(n));var Zt=n.length,An=[];for(o=0;o<Zt;o++){var ut=ye(n[o]);An.push(s.project(ye([ut.lat-Pe.lat,ut.lng-Pe.lng])))}for(Y=te=me=0,o=0,d=Zt-1;o<Zt;d=o++)g=An[o],S=An[d],z=g.y*S.x-S.y*g.x,te+=(g.x+S.x)*z,me+=(g.y+S.y)*z,Y+=z*3;Y===0?Ne=An[0]:Ne=[te/Y,me/Y];var dt=s.unproject(Z(Ne));return ye([dt.lat+Pe.lat,dt.lng+Pe.lng])}function Ql(n){for(var s=0,o=0,d=0,g=0;g<n.length;g++){var S=ye(n[g]);s+=S.lat,o+=S.lng,d++}return ye([s/d,o/d])}var Wl={__proto__:null,clipPolygon:no,polygonCenter:ao,centroid:Ql};function io(n,s){if(!s||!n.length)return n.slice();var o=s*s;return n=$c(n,o),n=lo(n,o),n}function so(n,s,o){return Math.sqrt(Ss(n,s,o,!0))}function Yc(n,s,o){return Ss(n,s,o)}function lo(n,s){var o=n.length,d=typeof Uint8Array<"u"?Uint8Array:Array,g=new d(o);g[0]=g[o-1]=1,Jl(n,g,s,0,o-1);var S,z=[];for(S=0;S<o;S++)g[S]&&z.push(n[S]);return z}function Jl(n,s,o,d,g){var S=0,z,Y,te;for(Y=d+1;Y<=g-1;Y++)te=Ss(n[Y],n[d],n[g],!0),te>S&&(z=Y,S=te);S>o&&(s[z]=1,Jl(n,s,o,d,z),Jl(n,s,o,z,g))}function $c(n,s){for(var o=[n[0]],d=1,g=0,S=n.length;d<S;d++)Fc(n[d],n[g])>s&&(o.push(n[d]),g=d);return g<S-1&&o.push(n[S-1]),o}var ro;function oo(n,s,o,d,g){var S=d?ro:di(n,o),z=di(s,o),Y,te,me;for(ro=z;;){if(!(S|z))return[n,s];if(S&z)return!1;Y=S||z,te=tl(n,s,Y,o,g),me=di(te,o),Y===S?(n=te,S=me):(s=te,z=me)}}function tl(n,s,o,d,g){var S=s.x-n.x,z=s.y-n.y,Y=d.min,te=d.max,me,Ne;return o&8?(me=n.x+S*(te.y-n.y)/z,Ne=te.y):o&4?(me=n.x+S*(Y.y-n.y)/z,Ne=Y.y):o&2?(me=te.x,Ne=n.y+z*(te.x-n.x)/S):o&1&&(me=Y.x,Ne=n.y+z*(Y.x-n.x)/S),new le(me,Ne,g)}function di(n,s){var o=0;return n.x<s.min.x?o|=1:n.x>s.max.x&&(o|=2),n.y<s.min.y?o|=4:n.y>s.max.y&&(o|=8),o}function Fc(n,s){var o=s.x-n.x,d=s.y-n.y;return o*o+d*d}function Ss(n,s,o,d){var g=s.x,S=s.y,z=o.x-g,Y=o.y-S,te=z*z+Y*Y,me;return te>0&&(me=((n.x-g)*z+(n.y-S)*Y)/te,me>1?(g=o.x,S=o.y):me>0&&(g+=z*me,S+=Y*me)),z=n.x-g,Y=n.y-S,d?z*z+Y*Y:new le(g,S)}function Dn(n){return!q(n[0])||typeof n[0][0]!="object"&&typeof n[0][0]<"u"}function nl(n){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Dn(n)}function Pi(n,s){var o,d,g,S,z,Y,te,me;if(!n||n.length===0)throw new Error("latlngs not passed");Dn(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var Ne=ye([0,0]),Pe=he(n),Fe=Pe.getNorthWest().distanceTo(Pe.getSouthWest())*Pe.getNorthEast().distanceTo(Pe.getNorthWest());Fe<1700&&(Ne=Ql(n));var ln=n.length,Zt=[];for(o=0;o<ln;o++){var An=ye(n[o]);Zt.push(s.project(ye([An.lat-Ne.lat,An.lng-Ne.lng])))}for(o=0,d=0;o<ln-1;o++)d+=Zt[o].distanceTo(Zt[o+1])/2;if(d===0)me=Zt[0];else for(o=0,S=0;o<ln-1;o++)if(z=Zt[o],Y=Zt[o+1],g=z.distanceTo(Y),S+=g,S>d){te=(S-d)/g,me=[Y.x-te*(Y.x-z.x),Y.y-te*(Y.y-z.y)];break}var ut=s.unproject(Z(me));return ye([ut.lat+Ne.lat,ut.lng+Ne.lng])}var Kc={__proto__:null,simplify:io,pointToSegmentDistance:so,closestPointOnSegment:Yc,clipSegment:oo,_getEdgeIntersection:tl,_getBitCode:di,_sqClosestPointOnSegment:Ss,isFlat:Dn,_flat:nl,polylineCenter:Pi},al={project:function(n){return new le(n.lng,n.lat)},unproject:function(n){return new ge(n.y,n.x)},bounds:new T([-180,-90],[180,90])},il={R:6378137,R_MINOR:6356752314245179e-9,bounds:new T([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(n){var s=Math.PI/180,o=this.R,d=n.lat*s,g=this.R_MINOR/o,S=Math.sqrt(1-g*g),z=S*Math.sin(d),Y=Math.tan(Math.PI/4-d/2)/Math.pow((1-z)/(1+z),S/2);return d=-o*Math.log(Math.max(Y,1e-10)),new le(n.lng*s*o,d)},unproject:function(n){for(var s=180/Math.PI,o=this.R,d=this.R_MINOR/o,g=Math.sqrt(1-d*d),S=Math.exp(-n.y/o),z=Math.PI/2-2*Math.atan(S),Y=0,te=.1,me;Y<15&&Math.abs(te)>1e-7;Y++)me=g*Math.sin(z),me=Math.pow((1-me)/(1+me),g/2),te=Math.PI/2-2*Math.atan(S*me)-z,z+=te;return new ge(z*s,n.x*s/o)}},co={__proto__:null,LonLat:al,Mercator:il,SphericalMercator:Je},uo=p({},Se,{code:"EPSG:3395",projection:il,transformation:(function(){var n=.5/(Math.PI*il.R);return We(n,.5,-n,.5)})()}),er=p({},Se,{code:"EPSG:4326",projection:al,transformation:We(1/180,1,-1/180,.5)}),Ui=p({},ke,{projection:al,transformation:We(1,0,-1,0),scale:function(n){return Math.pow(2,n)},zoom:function(n){return Math.log(n)/Math.LN2},distance:function(n,s){var o=s.lng-n.lng,d=s.lat-n.lat;return Math.sqrt(o*o+d*d)},infinite:!0});ke.Earth=Se,ke.EPSG3395=uo,ke.EPSG3857=Ct,ke.EPSG900913=Kt,ke.EPSG4326=er,ke.Simple=Ui;var ta=K.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(n){return n.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(n){return n&&n.removeLayer(this),this},getPane:function(n){return this._map.getPane(n?this.options[n]||n:this.options.pane)},addInteractiveTarget:function(n){return this._map._targets[y(n)]=this,this},removeInteractiveTarget:function(n){return delete this._map._targets[y(n)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(n){var s=n.target;if(s.hasLayer(this)){if(this._map=s,this._zoomAnimated=s._zoomAnimated,this.getEvents){var o=this.getEvents();s.on(o,this),this.once("remove",function(){s.off(o,this)},this)}this.onAdd(s),this.fire("add"),s.fire("layeradd",{layer:this})}}});it.include({addLayer:function(n){if(!n._layerAdd)throw new Error("The provided object is not a Layer.");var s=y(n);return this._layers[s]?this:(this._layers[s]=n,n._mapToAdd=this,n.beforeAdd&&n.beforeAdd(this),this.whenReady(n._layerAdd,n),this)},removeLayer:function(n){var s=y(n);return this._layers[s]?(this._loaded&&n.onRemove(this),delete this._layers[s],this._loaded&&(this.fire("layerremove",{layer:n}),n.fire("remove")),n._map=n._mapToAdd=null,this):this},hasLayer:function(n){return y(n)in this._layers},eachLayer:function(n,s){for(var o in this._layers)n.call(s,this._layers[o]);return this},_addLayers:function(n){n=n?q(n)?n:[n]:[];for(var s=0,o=n.length;s<o;s++)this.addLayer(n[s])},_addZoomLimit:function(n){(!isNaN(n.options.maxZoom)||!isNaN(n.options.minZoom))&&(this._zoomBoundLayers[y(n)]=n,this._updateZoomLevels())},_removeZoomLimit:function(n){var s=y(n);this._zoomBoundLayers[s]&&(delete this._zoomBoundLayers[s],this._updateZoomLevels())},_updateZoomLevels:function(){var n=1/0,s=-1/0,o=this._getZoomSpan();for(var d in this._zoomBoundLayers){var g=this._zoomBoundLayers[d].options;n=g.minZoom===void 0?n:Math.min(n,g.minZoom),s=g.maxZoom===void 0?s:Math.max(s,g.maxZoom)}this._layersMaxZoom=s===-1/0?void 0:s,this._layersMinZoom=n===1/0?void 0:n,o!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Hi=ta.extend({initialize:function(n,s){H(this,s),this._layers={};var o,d;if(n)for(o=0,d=n.length;o<d;o++)this.addLayer(n[o])},addLayer:function(n){var s=this.getLayerId(n);return this._layers[s]=n,this._map&&this._map.addLayer(n),this},removeLayer:function(n){var s=n in this._layers?n:this.getLayerId(n);return this._map&&this._layers[s]&&this._map.removeLayer(this._layers[s]),delete this._layers[s],this},hasLayer:function(n){var s=typeof n=="number"?n:this.getLayerId(n);return s in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(n){var s=Array.prototype.slice.call(arguments,1),o,d;for(o in this._layers)d=this._layers[o],d[n]&&d[n].apply(d,s);return this},onAdd:function(n){this.eachLayer(n.addLayer,n)},onRemove:function(n){this.eachLayer(n.removeLayer,n)},eachLayer:function(n,s){for(var o in this._layers)n.call(s,this._layers[o]);return this},getLayer:function(n){return this._layers[n]},getLayers:function(){var n=[];return this.eachLayer(n.push,n),n},setZIndex:function(n){return this.invoke("setZIndex",n)},getLayerId:function(n){return y(n)}}),Xc=function(n,s){return new Hi(n,s)},_a=Hi.extend({addLayer:function(n){return this.hasLayer(n)?this:(n.addEventParent(this),Hi.prototype.addLayer.call(this,n),this.fire("layeradd",{layer:n}))},removeLayer:function(n){return this.hasLayer(n)?(n in this._layers&&(n=this._layers[n]),n.removeEventParent(this),Hi.prototype.removeLayer.call(this,n),this.fire("layerremove",{layer:n})):this},setStyle:function(n){return this.invoke("setStyle",n)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var n=new oe;for(var s in this._layers){var o=this._layers[s];n.extend(o.getBounds?o.getBounds():o.getLatLng())}return n}}),ho=function(n,s){return new _a(n,s)},ya=qe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(n){H(this,n)},createIcon:function(n){return this._createIcon("icon",n)},createShadow:function(n){return this._createIcon("shadow",n)},_createIcon:function(n,s){var o=this._getIconUrl(n);if(!o){if(n==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d=this._createImg(o,s&&s.tagName==="IMG"?s:null);return this._setIconStyles(d,n),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),d},_setIconStyles:function(n,s){var o=this.options,d=o[s+"Size"];typeof d=="number"&&(d=[d,d]);var g=Z(d),S=Z(s==="shadow"&&o.shadowAnchor||o.iconAnchor||g&&g.divideBy(2,!0));n.className="leaflet-marker-"+s+" "+(o.className||""),S&&(n.style.marginLeft=-S.x+"px",n.style.marginTop=-S.y+"px"),g&&(n.style.width=g.x+"px",n.style.height=g.y+"px")},_createImg:function(n,s){return s=s||document.createElement("img"),s.src=n,s},_getIconUrl:function(n){return Me.retina&&this.options[n+"RetinaUrl"]||this.options[n+"Url"]}});function Ns(n){return new ya(n)}var Cs=ya.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(n){return typeof Cs.imagePath!="string"&&(Cs.imagePath=this._detectIconPath()),(this.options.imagePath||Cs.imagePath)+ya.prototype._getIconUrl.call(this,n)},_stripUrl:function(n){var s=function(o,d,g){var S=d.exec(o);return S&&S[g]};return n=s(n,/^url\((['"])?(.+)\1\)$/,2),n&&s(n,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var n=Xe("div","leaflet-default-icon-path",document.body),s=oi(n,"background-image")||oi(n,"backgroundImage");if(document.body.removeChild(n),s=this._stripUrl(s),s)return s;var o=document.querySelector('link[href$="leaflet.css"]');return o?o.href.substring(0,o.href.length-11-1):""}}),Es=va.extend({initialize:function(n){this._marker=n},addHooks:function(){var n=this._marker._icon;this._draggable||(this._draggable=new Fa(n,n,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),re(n,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ve(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(n){var s=this._marker,o=s._map,d=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,S=Ya(s._icon),z=o.getPixelBounds(),Y=o.getPixelOrigin(),te=$(z.min._subtract(Y).add(g),z.max._subtract(Y).subtract(g));if(!te.contains(S)){var me=Z((Math.max(te.max.x,S.x)-te.max.x)/(z.max.x-te.max.x)-(Math.min(te.min.x,S.x)-te.min.x)/(z.min.x-te.min.x),(Math.max(te.max.y,S.y)-te.max.y)/(z.max.y-te.max.y)-(Math.min(te.min.y,S.y)-te.min.y)/(z.min.y-te.min.y)).multiplyBy(d);o.panBy(me,{animate:!1}),this._draggable._newPos._add(me),this._draggable._startPos._add(me),Et(s._icon,this._draggable._newPos),this._onDrag(n),this._panRequest=we(this._adjustPan.bind(this,n))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(n){this._marker.options.autoPan&&(Ae(this._panRequest),this._panRequest=we(this._adjustPan.bind(this,n)))},_onDrag:function(n){var s=this._marker,o=s._shadow,d=Ya(s._icon),g=s._map.layerPointToLatLng(d);o&&Et(o,d),s._latlng=g,n.latlng=g,n.oldLatLng=this._oldLatLng,s.fire("move",n).fire("drag",n)},_onDragEnd:function(n){Ae(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",n)}}),Ts=ta.extend({options:{icon:new Cs,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(n,s){H(this,s),this._latlng=ye(n)},onAdd:function(n){this._zoomAnimated=this._zoomAnimated&&n.options.markerZoomAnimation,this._zoomAnimated&&n.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(n){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&n.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(n){var s=this._latlng;return this._latlng=ye(n),this.update(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},setZIndexOffset:function(n){return this.options.zIndexOffset=n,this.update()},getIcon:function(){return this.options.icon},setIcon:function(n){return this.options.icon=n,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var n=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(n)}return this},_initIcon:function(){var n=this.options,s="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),o=n.icon.createIcon(this._icon),d=!1;o!==this._icon&&(this._icon&&this._removeIcon(),d=!0,n.title&&(o.title=n.title),o.tagName==="IMG"&&(o.alt=n.alt||"")),re(o,s),n.keyboard&&(o.tabIndex="0",o.setAttribute("role","button")),this._icon=o,n.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ge(o,"focus",this._panOnFocus,this);var g=n.icon.createShadow(this._shadow),S=!1;g!==this._shadow&&(this._removeShadow(),S=!0),g&&(re(g,s),g.alt=""),this._shadow=g,n.opacity<1&&this._updateOpacity(),d&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&S&&this.getPane(n.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&yt(this._icon,"focus",this._panOnFocus,this),_t(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&_t(this._shadow),this._shadow=null},_setPos:function(n){this._icon&&Et(this._icon,n),this._shadow&&Et(this._shadow,n),this._zIndex=n.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(n){this._icon&&(this._icon.style.zIndex=this._zIndex+n)},_animateZoom:function(n){var s=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center).round();this._setPos(s)},_initInteraction:function(){if(this.options.interactive&&(re(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Es)){var n=this.options.draggable;this.dragging&&(n=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Es(this),n&&this.dragging.enable()}},setOpacity:function(n){return this.options.opacity=n,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var n=this.options.opacity;this._icon&&Qe(this._icon,n),this._shadow&&Qe(this._shadow,n)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var n=this._map;if(n){var s=this.options.icon.options,o=s.iconSize?Z(s.iconSize):Z(0,0),d=s.iconAnchor?Z(s.iconAnchor):Z(0,0);n.panInside(this._latlng,{paddingTopLeft:d,paddingBottomRight:o.subtract(d)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function fo(n,s){return new Ts(n,s)}var xa=ta.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(n){this._renderer=n.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(n){return H(this,n),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&n&&Object.prototype.hasOwnProperty.call(n,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Zi=xa.extend({options:{fill:!0,radius:10},initialize:function(n,s){H(this,s),this._latlng=ye(n),this._radius=this.options.radius},setLatLng:function(n){var s=this._latlng;return this._latlng=ye(n),this.redraw(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(n){return this.options.radius=this._radius=n,this.redraw()},getRadius:function(){return this._radius},setStyle:function(n){var s=n&&n.radius||this._radius;return xa.prototype.setStyle.call(this,n),this.setRadius(s),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var n=this._radius,s=this._radiusY||n,o=this._clickTolerance(),d=[n+o,s+o];this._pxBounds=new T(this._point.subtract(d),this._point.add(d))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(n){return n.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function mo(n,s){return new Zi(n,s)}var sl=Zi.extend({initialize:function(n,s,o){if(typeof s=="number"&&(s=p({},o,{radius:s})),H(this,s),this._latlng=ye(n),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(n){return this._mRadius=n,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var n=[this._radius,this._radiusY||this._radius];return new oe(this._map.layerPointToLatLng(this._point.subtract(n)),this._map.layerPointToLatLng(this._point.add(n)))},setStyle:xa.prototype.setStyle,_project:function(){var n=this._latlng.lng,s=this._latlng.lat,o=this._map,d=o.options.crs;if(d.distance===Se.distance){var g=Math.PI/180,S=this._mRadius/Se.R/g,z=o.project([s+S,n]),Y=o.project([s-S,n]),te=z.add(Y).divideBy(2),me=o.unproject(te).lat,Ne=Math.acos((Math.cos(S*g)-Math.sin(s*g)*Math.sin(me*g))/(Math.cos(s*g)*Math.cos(me*g)))/g;(isNaN(Ne)||Ne===0)&&(Ne=S/Math.cos(Math.PI/180*s)),this._point=te.subtract(o.getPixelOrigin()),this._radius=isNaN(Ne)?0:te.x-o.project([me,n-Ne]).x,this._radiusY=te.y-z.y}else{var Pe=d.unproject(d.project(this._latlng).subtract([this._mRadius,0]));this._point=o.latLngToLayerPoint(this._latlng),this._radius=this._point.x-o.latLngToLayerPoint(Pe).x}this._updateBounds()}});function po(n,s,o){return new sl(n,s,o)}var Da=xa.extend({options:{smoothFactor:1,noClip:!1},initialize:function(n,s){H(this,s),this._setLatLngs(n)},getLatLngs:function(){return this._latlngs},setLatLngs:function(n){return this._setLatLngs(n),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(n){for(var s=1/0,o=null,d=Ss,g,S,z=0,Y=this._parts.length;z<Y;z++)for(var te=this._parts[z],me=1,Ne=te.length;me<Ne;me++){g=te[me-1],S=te[me];var Pe=d(n,g,S,!0);Pe<s&&(s=Pe,o=d(n,g,S))}return o&&(o.distance=Math.sqrt(s)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Pi(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(n,s){return s=s||this._defaultShape(),n=ye(n),s.push(n),this._bounds.extend(n),this.redraw()},_setLatLngs:function(n){this._bounds=new oe,this._latlngs=this._convertLatLngs(n)},_defaultShape:function(){return Dn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(n){for(var s=[],o=Dn(n),d=0,g=n.length;d<g;d++)o?(s[d]=ye(n[d]),this._bounds.extend(s[d])):s[d]=this._convertLatLngs(n[d]);return s},_project:function(){var n=new T;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,n),this._bounds.isValid()&&n.isValid()&&(this._rawPxBounds=n,this._updateBounds())},_updateBounds:function(){var n=this._clickTolerance(),s=new le(n,n);this._rawPxBounds&&(this._pxBounds=new T([this._rawPxBounds.min.subtract(s),this._rawPxBounds.max.add(s)]))},_projectLatlngs:function(n,s,o){var d=n[0]instanceof ge,g=n.length,S,z;if(d){for(z=[],S=0;S<g;S++)z[S]=this._map.latLngToLayerPoint(n[S]),o.extend(z[S]);s.push(z)}else for(S=0;S<g;S++)this._projectLatlngs(n[S],s,o)},_clipPoints:function(){var n=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}var s=this._parts,o,d,g,S,z,Y,te;for(o=0,g=0,S=this._rings.length;o<S;o++)for(te=this._rings[o],d=0,z=te.length;d<z-1;d++)Y=oo(te[d],te[d+1],n,d,!0),Y&&(s[g]=s[g]||[],s[g].push(Y[0]),(Y[1]!==te[d+1]||d===z-2)&&(s[g].push(Y[1]),g++))}},_simplifyPoints:function(){for(var n=this._parts,s=this.options.smoothFactor,o=0,d=n.length;o<d;o++)n[o]=io(n[o],s)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(n,s){var o,d,g,S,z,Y,te=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(o=0,S=this._parts.length;o<S;o++)for(Y=this._parts[o],d=0,z=Y.length,g=z-1;d<z;g=d++)if(!(!s&&d===0)&&so(n,Y[g],Y[d])<=te)return!0;return!1}});function Qc(n,s){return new Da(n,s)}Da._flat=nl;var qi=Da.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ao(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(n){var s=Da.prototype._convertLatLngs.call(this,n),o=s.length;return o>=2&&s[0]instanceof ge&&s[0].equals(s[o-1])&&s.pop(),s},_setLatLngs:function(n){Da.prototype._setLatLngs.call(this,n),Dn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Dn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var n=this._renderer._bounds,s=this.options.weight,o=new le(s,s);if(n=new T(n.min.subtract(o),n.max.add(o)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}for(var d=0,g=this._rings.length,S;d<g;d++)S=no(this._rings[d],n,!0),S.length&&this._parts.push(S)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(n){var s=!1,o,d,g,S,z,Y,te,me;if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(S=0,te=this._parts.length;S<te;S++)for(o=this._parts[S],z=0,me=o.length,Y=me-1;z<me;Y=z++)d=o[z],g=o[Y],d.y>n.y!=g.y>n.y&&n.x<(g.x-d.x)*(n.y-d.y)/(g.y-d.y)+d.x&&(s=!s);return s||Da.prototype._containsPoint.call(this,n,!0)}});function Wc(n,s){return new qi(n,s)}var Ba=_a.extend({initialize:function(n,s){H(this,s),this._layers={},n&&this.addData(n)},addData:function(n){var s=q(n)?n:n.features,o,d,g;if(s){for(o=0,d=s.length;o<d;o++)g=s[o],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var S=this.options;if(S.filter&&!S.filter(n))return this;var z=hn(n,S);return z?(z.feature=ol(n),z.defaultOptions=z.options,this.resetStyle(z),S.onEachFeature&&S.onEachFeature(n,z),this.addLayer(z)):this},resetStyle:function(n){return n===void 0?this.eachLayer(this.resetStyle,this):(n.options=p({},n.defaultOptions),this._setLayerStyle(n,this.options.style),this)},setStyle:function(n){return this.eachLayer(function(s){this._setLayerStyle(s,n)},this)},_setLayerStyle:function(n,s){n.setStyle&&(typeof s=="function"&&(s=s(n.feature)),n.setStyle(s))}});function hn(n,s){var o=n.type==="Feature"?n.geometry:n,d=o?o.coordinates:null,g=[],S=s&&s.pointToLayer,z=s&&s.coordsToLatLng||ll,Y,te,me,Ne;if(!d&&!o)return null;switch(o.type){case"Point":return Y=z(d),Ii(S,n,Y,s);case"MultiPoint":for(me=0,Ne=d.length;me<Ne;me++)Y=z(d[me]),g.push(Ii(S,n,Y,s));return new _a(g);case"LineString":case"MultiLineString":return te=Ls(d,o.type==="LineString"?0:1,z),new Da(te,s);case"Polygon":case"MultiPolygon":return te=Ls(d,o.type==="Polygon"?1:2,z),new qi(te,s);case"GeometryCollection":for(me=0,Ne=o.geometries.length;me<Ne;me++){var Pe=hn({geometry:o.geometries[me],type:"Feature",properties:n.properties},s);Pe&&g.push(Pe)}return new _a(g);case"FeatureCollection":for(me=0,Ne=o.features.length;me<Ne;me++){var Fe=hn(o.features[me],s);Fe&&g.push(Fe)}return new _a(g);default:throw new Error("Invalid GeoJSON object.")}}function Ii(n,s,o,d){return n?n(s,o):new Ts(o,d&&d.markersInheritOptions&&d)}function ll(n){return new ge(n[1],n[0],n[2])}function Ls(n,s,o){for(var d=[],g=0,S=n.length,z;g<S;g++)z=s?Ls(n[g],s-1,o):(o||ll)(n[g]),d.push(z);return d}function rl(n,s){return n=ye(n),n.alt!==void 0?[k(n.lng,s),k(n.lat,s),k(n.alt,s)]:[k(n.lng,s),k(n.lat,s)]}function As(n,s,o,d){for(var g=[],S=0,z=n.length;S<z;S++)g.push(s?As(n[S],Dn(n[S])?0:s-1,o,d):rl(n[S],d));return!s&&o&&g.length>0&&g.push(g[0].slice()),g}function Ka(n,s){return n.feature?p({},n.feature,{geometry:s}):ol(s)}function ol(n){return n.type==="Feature"||n.type==="FeatureCollection"?n:{type:"Feature",properties:{},geometry:n}}var Xa={toGeoJSON:function(n){return Ka(this,{type:"Point",coordinates:rl(this.getLatLng(),n)})}};Ts.include(Xa),sl.include(Xa),Zi.include(Xa),Da.include({toGeoJSON:function(n){var s=!Dn(this._latlngs),o=As(this._latlngs,s?1:0,!1,n);return Ka(this,{type:(s?"Multi":"")+"LineString",coordinates:o})}}),qi.include({toGeoJSON:function(n){var s=!Dn(this._latlngs),o=s&&!Dn(this._latlngs[0]),d=As(this._latlngs,o?2:s?1:0,!0,n);return s||(d=[d]),Ka(this,{type:(o?"Multi":"")+"Polygon",coordinates:d})}}),Hi.include({toMultiPoint:function(n){var s=[];return this.eachLayer(function(o){s.push(o.toGeoJSON(n).geometry.coordinates)}),Ka(this,{type:"MultiPoint",coordinates:s})},toGeoJSON:function(n){var s=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(s==="MultiPoint")return this.toMultiPoint(n);var o=s==="GeometryCollection",d=[];return this.eachLayer(function(g){if(g.toGeoJSON){var S=g.toGeoJSON(n);if(o)d.push(S.geometry);else{var z=ol(S);z.type==="FeatureCollection"?d.push.apply(d,z.features):d.push(z)}}}),o?Ka(this,{geometries:d,type:"GeometryCollection"}):{type:"FeatureCollection",features:d}}});function cl(n,s){return new Ba(n,s)}var ks=cl,Gi=ta.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(n,s,o){this._url=n,this._bounds=he(s),H(this,o)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(re(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){_t(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(n){return this.options.opacity=n,this._image&&this._updateOpacity(),this},setStyle:function(n){return n.opacity&&this.setOpacity(n.opacity),this},bringToFront:function(){return this._map&&Vt(this._image),this},bringToBack:function(){return this._map&&X(this._image),this},setUrl:function(n){return this._url=n,this._image&&(this._image.src=n),this},setBounds:function(n){return this._bounds=he(n),this._map&&this._reset(),this},getEvents:function(){var n={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var n=this._url.tagName==="IMG",s=this._image=n?this._url:Xe("img");if(re(s,"leaflet-image-layer"),this._zoomAnimated&&re(s,"leaflet-zoom-animated"),this.options.className&&re(s,this.options.className),s.onselectstart=w,s.onmousemove=w,s.onload=j(this.fire,this,"load"),s.onerror=j(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(s.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),n){this._url=s.src;return}s.src=this._url,s.alt=this.options.alt},_animateZoom:function(n){var s=this._map.getZoomScale(n.zoom),o=this._map._latLngBoundsToNewLayerBounds(this._bounds,n.zoom,n.center).min;za(this._image,o,s)},_reset:function(){var n=this._image,s=new T(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),o=s.getSize();Et(n,s.min),n.style.width=o.x+"px",n.style.height=o.y+"px"},_updateOpacity:function(){Qe(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var n=this.options.errorOverlayUrl;n&&this._url!==n&&(this._url=n,this._image.src=n)},getCenter:function(){return this._bounds.getCenter()}}),go=function(n,s,o){return new Gi(n,s,o)},Qa=Gi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var n=this._url.tagName==="VIDEO",s=this._image=n?this._url:Xe("video");if(re(s,"leaflet-image-layer"),this._zoomAnimated&&re(s,"leaflet-zoom-animated"),this.options.className&&re(s,this.options.className),s.onselectstart=w,s.onmousemove=w,s.onloadeddata=j(this.fire,this,"load"),n){for(var o=s.getElementsByTagName("source"),d=[],g=0;g<o.length;g++)d.push(o[g].src);this._url=o.length>0?d:[s.src];return}q(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(s.style,"objectFit")&&(s.style.objectFit="fill"),s.autoplay=!!this.options.autoplay,s.loop=!!this.options.loop,s.muted=!!this.options.muted,s.playsInline=!!this.options.playsInline;for(var S=0;S<this._url.length;S++){var z=Xe("source");z.src=this._url[S],s.appendChild(z)}}});function Vi(n,s,o){return new Qa(n,s,o)}var ul=Gi.extend({_initImage:function(){var n=this._image=this._url;re(n,"leaflet-image-layer"),this._zoomAnimated&&re(n,"leaflet-zoom-animated"),this.options.className&&re(n,this.options.className),n.onselectstart=w,n.onmousemove=w}});function vo(n,s,o){return new ul(n,s,o)}var fn=ta.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(n,s){n&&(n instanceof ge||q(n))?(this._latlng=ye(n),H(this,s)):(H(this,n),this._source=s),this.options.content&&(this._content=this.options.content)},openOn:function(n){return n=arguments.length?n:this._source._map,n.hasLayer(this)||n.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(n){return this._map?this.close():(arguments.length?this._source=n:n=this._source,this._prepareOpen(),this.openOn(n._map)),this},onAdd:function(n){this._zoomAnimated=n._zoomAnimated,this._container||this._initLayout(),n._fadeAnimated&&Qe(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),n._fadeAnimated&&Qe(this._container,1),this.bringToFront(),this.options.interactive&&(re(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(n){n._fadeAnimated?(Qe(this._container,0),this._removeTimeout=setTimeout(j(_t,void 0,this._container),200)):_t(this._container),this.options.interactive&&(ve(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(n){return this._latlng=ye(n),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(n){return this._content=n,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var n={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Vt(this._container),this},bringToBack:function(){return this._map&&X(this._container),this},_prepareOpen:function(n){var s=this._source;if(!s._map)return!1;if(s instanceof _a){s=null;var o=this._source._layers;for(var d in o)if(o[d]._map){s=o[d];break}if(!s)return!1;this._source=s}if(!n)if(s.getCenter)n=s.getCenter();else if(s.getLatLng)n=s.getLatLng();else if(s.getBounds)n=s.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(n),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var n=this._contentNode,s=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof s=="string")n.innerHTML=s;else{for(;n.hasChildNodes();)n.removeChild(n.firstChild);n.appendChild(s)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var n=this._map.latLngToLayerPoint(this._latlng),s=Z(this.options.offset),o=this._getAnchor();this._zoomAnimated?Et(this._container,n.add(o)):s=s.add(n).add(o);var d=this._containerBottom=-s.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+s.x;this._container.style.bottom=d+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});it.include({_initOverlay:function(n,s,o,d){var g=s;return g instanceof n||(g=new n(d).setContent(s)),o&&g.setLatLng(o),g}}),ta.include({_initOverlay:function(n,s,o,d){var g=o;return g instanceof n?(H(g,d),g._source=this):(g=s&&!d?s:new n(d,this),g.setContent(o)),g}});var Ms=fn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(n){return n=arguments.length?n:this._source._map,!n.hasLayer(this)&&n._popup&&n._popup.options.autoClose&&n.removeLayer(n._popup),n._popup=this,fn.prototype.openOn.call(this,n)},onAdd:function(n){fn.prototype.onAdd.call(this,n),n.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof xa||this._source.on("preclick",ea))},onRemove:function(n){fn.prototype.onRemove.call(this,n),n.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof xa||this._source.off("preclick",ea))},getEvents:function(){var n=fn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(n.preclick=this.close),this.options.keepInView&&(n.moveend=this._adjustPan),n},_initLayout:function(){var n="leaflet-popup",s=this._container=Xe("div",n+" "+(this.options.className||"")+" leaflet-zoom-animated"),o=this._wrapper=Xe("div",n+"-content-wrapper",s);if(this._contentNode=Xe("div",n+"-content",o),ui(s),ga(this._contentNode),Ge(s,"contextmenu",ea),this._tipContainer=Xe("div",n+"-tip-container",s),this._tip=Xe("div",n+"-tip",this._tipContainer),this.options.closeButton){var d=this._closeButton=Xe("a",n+"-close-button",s);d.setAttribute("role","button"),d.setAttribute("aria-label","Close popup"),d.href="#close",d.innerHTML='<span aria-hidden="true">&#215;</span>',Ge(d,"click",function(g){Ht(g),this.close()},this)}},_updateLayout:function(){var n=this._contentNode,s=n.style;s.width="",s.whiteSpace="nowrap";var o=n.offsetWidth;o=Math.min(o,this.options.maxWidth),o=Math.max(o,this.options.minWidth),s.width=o+1+"px",s.whiteSpace="",s.height="";var d=n.offsetHeight,g=this.options.maxHeight,S="leaflet-popup-scrolled";g&&d>g?(s.height=g+"px",re(n,S)):ve(n,S),this._containerWidth=this._container.offsetWidth},_animateZoom:function(n){var s=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center),o=this._getAnchor();Et(this._container,s.add(o))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var n=this._map,s=parseInt(oi(this._container,"marginBottom"),10)||0,o=this._container.offsetHeight+s,d=this._containerWidth,g=new le(this._containerLeft,-o-this._containerBottom);g._add(Ya(this._container));var S=n.layerPointToContainerPoint(g),z=Z(this.options.autoPanPadding),Y=Z(this.options.autoPanPaddingTopLeft||z),te=Z(this.options.autoPanPaddingBottomRight||z),me=n.getSize(),Ne=0,Pe=0;S.x+d+te.x>me.x&&(Ne=S.x+d-me.x+te.x),S.x-Ne-Y.x<0&&(Ne=S.x-Y.x),S.y+o+te.y>me.y&&(Pe=S.y+o-me.y+te.y),S.y-Pe-Y.y<0&&(Pe=S.y-Y.y),(Ne||Pe)&&(this.options.keepInView&&(this._autopanning=!0),n.fire("autopanstart").panBy([Ne,Pe]))}},_getAnchor:function(){return Z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),_o=function(n,s){return new Ms(n,s)};it.mergeOptions({closePopupOnClick:!0}),it.include({openPopup:function(n,s,o){return this._initOverlay(Ms,n,s,o).openOn(this),this},closePopup:function(n){return n=arguments.length?n:this._popup,n&&n.close(),this}}),ta.include({bindPopup:function(n,s){return this._popup=this._initOverlay(Ms,this._popup,n,s),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(n){return this._popup&&(this instanceof _a||(this._popup._source=this),this._popup._prepareOpen(n||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(n){return this._popup&&this._popup.setContent(n),this},getPopup:function(){return this._popup},_openPopup:function(n){if(!(!this._popup||!this._map)){$a(n);var s=n.layer||n.target;if(this._popup._source===s&&!(s instanceof xa)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(n.latlng);return}this._popup._source=s,this.openPopup(n.latlng)}},_movePopup:function(n){this._popup.setLatLng(n.latlng)},_onKeyPress:function(n){n.originalEvent.keyCode===13&&this._openPopup(n)}});var zs=fn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(n){fn.prototype.onAdd.call(this,n),this.setOpacity(this.options.opacity),n.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(n){fn.prototype.onRemove.call(this,n),n.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var n=fn.prototype.getEvents.call(this);return this.options.permanent||(n.preclick=this.close),n},_initLayout:function(){var n="leaflet-tooltip",s=n+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Xe("div",s),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+y(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(n){var s,o,d=this._map,g=this._container,S=d.latLngToContainerPoint(d.getCenter()),z=d.layerPointToContainerPoint(n),Y=this.options.direction,te=g.offsetWidth,me=g.offsetHeight,Ne=Z(this.options.offset),Pe=this._getAnchor();Y==="top"?(s=te/2,o=me):Y==="bottom"?(s=te/2,o=0):Y==="center"?(s=te/2,o=me/2):Y==="right"?(s=0,o=me/2):Y==="left"?(s=te,o=me/2):z.x<S.x?(Y="right",s=0,o=me/2):(Y="left",s=te+(Ne.x+Pe.x)*2,o=me/2),n=n.subtract(Z(s,o,!0)).add(Ne).add(Pe),ve(g,"leaflet-tooltip-right"),ve(g,"leaflet-tooltip-left"),ve(g,"leaflet-tooltip-top"),ve(g,"leaflet-tooltip-bottom"),re(g,"leaflet-tooltip-"+Y),Et(g,n)},_updatePosition:function(){var n=this._map.latLngToLayerPoint(this._latlng);this._setPosition(n)},setOpacity:function(n){this.options.opacity=n,this._container&&Qe(this._container,n)},_animateZoom:function(n){var s=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center);this._setPosition(s)},_getAnchor:function(){return Z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Jc=function(n,s){return new zs(n,s)};it.include({openTooltip:function(n,s,o){return this._initOverlay(zs,n,s,o).openOn(this),this},closeTooltip:function(n){return n.close(),this}}),ta.include({bindTooltip:function(n,s){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(zs,this._tooltip,n,s),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(n){if(!(!n&&this._tooltipHandlersAdded)){var s=n?"off":"on",o={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?o.add=this._openTooltip:(o.mouseover=this._openTooltip,o.mouseout=this.closeTooltip,o.click=this._openTooltip,this._map?this._addFocusListeners():o.add=this._addFocusListeners),this._tooltip.options.sticky&&(o.mousemove=this._moveTooltip),this[s](o),this._tooltipHandlersAdded=!n}},openTooltip:function(n){return this._tooltip&&(this instanceof _a||(this._tooltip._source=this),this._tooltip._prepareOpen(n)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(n){return this._tooltip&&this._tooltip.setContent(n),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(n){var s=typeof n.getElement=="function"&&n.getElement();s&&(Ge(s,"focus",function(){this._tooltip._source=n,this.openTooltip()},this),Ge(s,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(n){var s=typeof n.getElement=="function"&&n.getElement();s&&s.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(n){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var s=this;this._map.once("moveend",function(){s._openOnceFlag=!1,s._openTooltip(n)});return}this._tooltip._source=n.layer||n.target,this.openTooltip(this._tooltip.options.sticky?n.latlng:void 0)}},_moveTooltip:function(n){var s=n.latlng,o,d;this._tooltip.options.sticky&&n.originalEvent&&(o=this._map.mouseEventToContainerPoint(n.originalEvent),d=this._map.containerPointToLayerPoint(o),s=this._map.layerPointToLatLng(d)),this._tooltip.setLatLng(s)}});var yo=ya.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(n){var s=n&&n.tagName==="DIV"?n:document.createElement("div"),o=this.options;if(o.html instanceof Element?(jn(s),s.appendChild(o.html)):s.innerHTML=o.html!==!1?o.html:"",o.bgPos){var d=Z(o.bgPos);s.style.backgroundPosition=-d.x+"px "+-d.y+"px"}return this._setIconStyles(s,"icon"),s},createShadow:function(){return null}});function eu(n){return new yo(n)}ya.Default=Cs;var Yi=ta.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Me.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(n){H(this,n)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(n){n._addZoomLimit(this)},onRemove:function(n){this._removeAllTiles(),_t(this._container),n._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Vt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(X(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(n){return this.options.opacity=n,this._updateOpacity(),this},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var n=this._clampZoom(this._map.getZoom());n!==this._tileZoom&&(this._tileZoom=n,this._updateLevels()),this._update()}return this},getEvents:function(){var n={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=x(this._onMoveEnd,this.options.updateInterval,this)),n.move=this._onMove),this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},createTile:function(){return document.createElement("div")},getTileSize:function(){var n=this.options.tileSize;return n instanceof le?n:new le(n,n)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(n){for(var s=this.getPane().children,o=-n(-1/0,1/0),d=0,g=s.length,S;d<g;d++)S=s[d].style.zIndex,s[d]!==this._container&&S&&(o=n(o,+S));isFinite(o)&&(this.options.zIndex=o+n(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Me.ielt9){Qe(this._container,this.options.opacity);var n=+new Date,s=!1,o=!1;for(var d in this._tiles){var g=this._tiles[d];if(!(!g.current||!g.loaded)){var S=Math.min(1,(n-g.loaded)/200);Qe(g.el,S),S<1?s=!0:(g.active?o=!0:this._onOpaqueTile(g),g.active=!0)}}o&&!this._noPrune&&this._pruneTiles(),s&&(Ae(this._fadeFrame),this._fadeFrame=we(this._updateOpacity,this))}},_onOpaqueTile:w,_initContainer:function(){this._container||(this._container=Xe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var n=this._tileZoom,s=this.options.maxZoom;if(n!==void 0){for(var o in this._levels)o=Number(o),this._levels[o].el.children.length||o===n?(this._levels[o].el.style.zIndex=s-Math.abs(n-o),this._onUpdateLevel(o)):(_t(this._levels[o].el),this._removeTilesAtZoom(o),this._onRemoveLevel(o),delete this._levels[o]);var d=this._levels[n],g=this._map;return d||(d=this._levels[n]={},d.el=Xe("div","leaflet-tile-container leaflet-zoom-animated",this._container),d.el.style.zIndex=s,d.origin=g.project(g.unproject(g.getPixelOrigin()),n).round(),d.zoom=n,this._setZoomTransform(d,g.getCenter(),g.getZoom()),w(d.el.offsetWidth),this._onCreateLevel(d)),this._level=d,d}},_onUpdateLevel:w,_onRemoveLevel:w,_onCreateLevel:w,_pruneTiles:function(){if(this._map){var n,s,o=this._map.getZoom();if(o>this.options.maxZoom||o<this.options.minZoom){this._removeAllTiles();return}for(n in this._tiles)s=this._tiles[n],s.retain=s.current;for(n in this._tiles)if(s=this._tiles[n],s.current&&!s.active){var d=s.coords;this._retainParent(d.x,d.y,d.z,d.z-5)||this._retainChildren(d.x,d.y,d.z,d.z+2)}for(n in this._tiles)this._tiles[n].retain||this._removeTile(n)}},_removeTilesAtZoom:function(n){for(var s in this._tiles)this._tiles[s].coords.z===n&&this._removeTile(s)},_removeAllTiles:function(){for(var n in this._tiles)this._removeTile(n)},_invalidateAll:function(){for(var n in this._levels)_t(this._levels[n].el),this._onRemoveLevel(Number(n)),delete this._levels[n];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(n,s,o,d){var g=Math.floor(n/2),S=Math.floor(s/2),z=o-1,Y=new le(+g,+S);Y.z=+z;var te=this._tileCoordsToKey(Y),me=this._tiles[te];return me&&me.active?(me.retain=!0,!0):(me&&me.loaded&&(me.retain=!0),z>d?this._retainParent(g,S,z,d):!1)},_retainChildren:function(n,s,o,d){for(var g=2*n;g<2*n+2;g++)for(var S=2*s;S<2*s+2;S++){var z=new le(g,S);z.z=o+1;var Y=this._tileCoordsToKey(z),te=this._tiles[Y];if(te&&te.active){te.retain=!0;continue}else te&&te.loaded&&(te.retain=!0);o+1<d&&this._retainChildren(g,S,o+1,d)}},_resetView:function(n){var s=n&&(n.pinch||n.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),s,s)},_animateZoom:function(n){this._setView(n.center,n.zoom,!0,n.noUpdate)},_clampZoom:function(n){var s=this.options;return s.minNativeZoom!==void 0&&n<s.minNativeZoom?s.minNativeZoom:s.maxNativeZoom!==void 0&&s.maxNativeZoom<n?s.maxNativeZoom:n},_setView:function(n,s,o,d){var g=Math.round(s);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var S=this.options.updateWhenZooming&&g!==this._tileZoom;(!d||S)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(n),o||this._pruneTiles(),this._noPrune=!!o),this._setZoomTransforms(n,s)},_setZoomTransforms:function(n,s){for(var o in this._levels)this._setZoomTransform(this._levels[o],n,s)},_setZoomTransform:function(n,s,o){var d=this._map.getZoomScale(o,n.zoom),g=n.origin.multiplyBy(d).subtract(this._map._getNewPixelOrigin(s,o)).round();Me.any3d?za(n.el,g,d):Et(n.el,g)},_resetGrid:function(){var n=this._map,s=n.options.crs,o=this._tileSize=this.getTileSize(),d=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=s.wrapLng&&!this.options.noWrap&&[Math.floor(n.project([0,s.wrapLng[0]],d).x/o.x),Math.ceil(n.project([0,s.wrapLng[1]],d).x/o.y)],this._wrapY=s.wrapLat&&!this.options.noWrap&&[Math.floor(n.project([s.wrapLat[0],0],d).y/o.x),Math.ceil(n.project([s.wrapLat[1],0],d).y/o.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(n){var s=this._map,o=s._animatingZoom?Math.max(s._animateToZoom,s.getZoom()):s.getZoom(),d=s.getZoomScale(o,this._tileZoom),g=s.project(n,this._tileZoom).floor(),S=s.getSize().divideBy(d*2);return new T(g.subtract(S),g.add(S))},_update:function(n){var s=this._map;if(s){var o=this._clampZoom(s.getZoom());if(n===void 0&&(n=s.getCenter()),this._tileZoom!==void 0){var d=this._getTiledPixelBounds(n),g=this._pxBoundsToTileRange(d),S=g.getCenter(),z=[],Y=this.options.keepBuffer,te=new T(g.getBottomLeft().subtract([Y,-Y]),g.getTopRight().add([Y,-Y]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var me in this._tiles){var Ne=this._tiles[me].coords;(Ne.z!==this._tileZoom||!te.contains(new le(Ne.x,Ne.y)))&&(this._tiles[me].current=!1)}if(Math.abs(o-this._tileZoom)>1){this._setView(n,o);return}for(var Pe=g.min.y;Pe<=g.max.y;Pe++)for(var Fe=g.min.x;Fe<=g.max.x;Fe++){var ln=new le(Fe,Pe);if(ln.z=this._tileZoom,!!this._isValidTile(ln)){var Zt=this._tiles[this._tileCoordsToKey(ln)];Zt?Zt.current=!0:z.push(ln)}}if(z.sort(function(ut,dt){return ut.distanceTo(S)-dt.distanceTo(S)}),z.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var An=document.createDocumentFragment();for(Fe=0;Fe<z.length;Fe++)this._addTile(z[Fe],An);this._level.el.appendChild(An)}}}},_isValidTile:function(n){var s=this._map.options.crs;if(!s.infinite){var o=this._globalTileRange;if(!s.wrapLng&&(n.x<o.min.x||n.x>o.max.x)||!s.wrapLat&&(n.y<o.min.y||n.y>o.max.y))return!1}if(!this.options.bounds)return!0;var d=this._tileCoordsToBounds(n);return he(this.options.bounds).overlaps(d)},_keyToBounds:function(n){return this._tileCoordsToBounds(this._keyToTileCoords(n))},_tileCoordsToNwSe:function(n){var s=this._map,o=this.getTileSize(),d=n.scaleBy(o),g=d.add(o),S=s.unproject(d,n.z),z=s.unproject(g,n.z);return[S,z]},_tileCoordsToBounds:function(n){var s=this._tileCoordsToNwSe(n),o=new oe(s[0],s[1]);return this.options.noWrap||(o=this._map.wrapLatLngBounds(o)),o},_tileCoordsToKey:function(n){return n.x+":"+n.y+":"+n.z},_keyToTileCoords:function(n){var s=n.split(":"),o=new le(+s[0],+s[1]);return o.z=+s[2],o},_removeTile:function(n){var s=this._tiles[n];s&&(_t(s.el),delete this._tiles[n],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(n)}))},_initTile:function(n){re(n,"leaflet-tile");var s=this.getTileSize();n.style.width=s.x+"px",n.style.height=s.y+"px",n.onselectstart=w,n.onmousemove=w,Me.ielt9&&this.options.opacity<1&&Qe(n,this.options.opacity)},_addTile:function(n,s){var o=this._getTilePos(n),d=this._tileCoordsToKey(n),g=this.createTile(this._wrapCoords(n),j(this._tileReady,this,n));this._initTile(g),this.createTile.length<2&&we(j(this._tileReady,this,n,null,g)),Et(g,o),this._tiles[d]={el:g,coords:n,current:!0},s.appendChild(g),this.fire("tileloadstart",{tile:g,coords:n})},_tileReady:function(n,s,o){s&&this.fire("tileerror",{error:s,tile:o,coords:n});var d=this._tileCoordsToKey(n);o=this._tiles[d],o&&(o.loaded=+new Date,this._map._fadeAnimated?(Qe(o.el,0),Ae(this._fadeFrame),this._fadeFrame=we(this._updateOpacity,this)):(o.active=!0,this._pruneTiles()),s||(re(o.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:o.el,coords:n})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Me.ielt9||!this._map._fadeAnimated?we(this._pruneTiles,this):setTimeout(j(this._pruneTiles,this),250)))},_getTilePos:function(n){return n.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(n){var s=new le(this._wrapX?E(n.x,this._wrapX):n.x,this._wrapY?E(n.y,this._wrapY):n.y);return s.z=n.z,s},_pxBoundsToTileRange:function(n){var s=this.getTileSize();return new T(n.min.unscaleBy(s).floor(),n.max.unscaleBy(s).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var n in this._tiles)if(!this._tiles[n].loaded)return!1;return!0}});function xo(n){return new Yi(n)}var Wa=Yi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(n,s){this._url=n,s=H(this,s),s.detectRetina&&Me.retina&&s.maxZoom>0?(s.tileSize=Math.floor(s.tileSize/2),s.zoomReverse?(s.zoomOffset--,s.minZoom=Math.min(s.maxZoom,s.minZoom+1)):(s.zoomOffset++,s.maxZoom=Math.max(s.minZoom,s.maxZoom-1)),s.minZoom=Math.max(0,s.minZoom)):s.zoomReverse?s.minZoom=Math.min(s.maxZoom,s.minZoom):s.maxZoom=Math.max(s.minZoom,s.maxZoom),typeof s.subdomains=="string"&&(s.subdomains=s.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(n,s){return this._url===n&&s===void 0&&(s=!0),this._url=n,s||this.redraw(),this},createTile:function(n,s){var o=document.createElement("img");return Ge(o,"load",j(this._tileOnLoad,this,s,o)),Ge(o,"error",j(this._tileOnError,this,s,o)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(o.referrerPolicy=this.options.referrerPolicy),o.alt="",o.src=this.getTileUrl(n),o},getTileUrl:function(n){var s={r:Me.retina?"@2x":"",s:this._getSubdomain(n),x:n.x,y:n.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var o=this._globalTileRange.max.y-n.y;this.options.tms&&(s.y=o),s["-y"]=o}return D(this._url,p(s,this.options))},_tileOnLoad:function(n,s){Me.ielt9?setTimeout(j(n,this,null,s),0):n(null,s)},_tileOnError:function(n,s,o){var d=this.options.errorTileUrl;d&&s.getAttribute("src")!==d&&(s.src=d),n(o,s)},_onTileRemove:function(n){n.tile.onload=null},_getZoomForUrl:function(){var n=this._tileZoom,s=this.options.maxZoom,o=this.options.zoomReverse,d=this.options.zoomOffset;return o&&(n=s-n),n+d},_getSubdomain:function(n){var s=Math.abs(n.x+n.y)%this.options.subdomains.length;return this.options.subdomains[s]},_abortLoading:function(){var n,s;for(n in this._tiles)if(this._tiles[n].coords.z!==this._tileZoom&&(s=this._tiles[n].el,s.onload=w,s.onerror=w,!s.complete)){s.src=F;var o=this._tiles[n].coords;_t(s),delete this._tiles[n],this.fire("tileabort",{tile:s,coords:o})}},_removeTile:function(n){var s=this._tiles[n];if(s)return s.el.setAttribute("src",F),Yi.prototype._removeTile.call(this,n)},_tileReady:function(n,s,o){if(!(!this._map||o&&o.getAttribute("src")===F))return Yi.prototype._tileReady.call(this,n,s,o)}});function Bn(n,s){return new Wa(n,s)}var Rs=Wa.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(n,s){this._url=n;var o=p({},this.defaultWmsParams);for(var d in s)d in this.options||(o[d]=s[d]);s=H(this,s);var g=s.detectRetina&&Me.retina?2:1,S=this.getTileSize();o.width=S.x*g,o.height=S.y*g,this.wmsParams=o},onAdd:function(n){this._crs=this.options.crs||n.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var s=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[s]=this._crs.code,Wa.prototype.onAdd.call(this,n)},getTileUrl:function(n){var s=this._tileCoordsToNwSe(n),o=this._crs,d=$(o.project(s[0]),o.project(s[1])),g=d.min,S=d.max,z=(this._wmsVersion>=1.3&&this._crs===er?[g.y,g.x,S.y,S.x]:[g.x,g.y,S.x,S.y]).join(","),Y=Wa.prototype.getTileUrl.call(this,n);return Y+V(this.wmsParams,Y,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+z},setParams:function(n,s){return p(this.wmsParams,n),s||this.redraw(),this}});function Pn(n,s){return new Rs(n,s)}Wa.WMS=Rs,Bn.wms=Pn;var wn=ta.extend({options:{padding:.1},initialize:function(n){H(this,n),y(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),re(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var n={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(n.zoomanim=this._onAnimZoom),n},_onAnimZoom:function(n){this._updateTransform(n.center,n.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(n,s){var o=this._map.getZoomScale(s,this._zoom),d=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,s),S=d.multiplyBy(-o).add(g).subtract(this._map._getNewPixelOrigin(n,s));Me.any3d?za(this._container,S,o):Et(this._container,S)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var n in this._layers)this._layers[n]._reset()},_onZoomEnd:function(){for(var n in this._layers)this._layers[n]._project()},_updatePaths:function(){for(var n in this._layers)this._layers[n]._update()},_update:function(){var n=this.options.padding,s=this._map.getSize(),o=this._map.containerPointToLayerPoint(s.multiplyBy(-n)).round();this._bounds=new T(o,o.add(s.multiplyBy(1+n*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),dl=wn.extend({options:{tolerance:0},getEvents:function(){var n=wn.prototype.getEvents.call(this);return n.viewprereset=this._onViewPreReset,n},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){wn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var n=this._container=document.createElement("canvas");Ge(n,"mousemove",this._onMouseMove,this),Ge(n,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ge(n,"mouseout",this._handleMouseOut,this),n._leaflet_disable_events=!0,this._ctx=n.getContext("2d")},_destroyContainer:function(){Ae(this._redrawRequest),delete this._ctx,_t(this._container),yt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var n;this._redrawBounds=null;for(var s in this._layers)n=this._layers[s],n._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){wn.prototype._update.call(this);var n=this._bounds,s=this._container,o=n.getSize(),d=Me.retina?2:1;Et(s,n.min),s.width=d*o.x,s.height=d*o.y,s.style.width=o.x+"px",s.style.height=o.y+"px",Me.retina&&this._ctx.scale(2,2),this._ctx.translate(-n.min.x,-n.min.y),this.fire("update")}},_reset:function(){wn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(n){this._updateDashArray(n),this._layers[y(n)]=n;var s=n._order={layer:n,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=s),this._drawLast=s,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(n){this._requestRedraw(n)},_removePath:function(n){var s=n._order,o=s.next,d=s.prev;o?o.prev=d:this._drawLast=d,d?d.next=o:this._drawFirst=o,delete n._order,delete this._layers[y(n)],this._requestRedraw(n)},_updatePath:function(n){this._extendRedrawBounds(n),n._project(),n._update(),this._requestRedraw(n)},_updateStyle:function(n){this._updateDashArray(n),this._requestRedraw(n)},_updateDashArray:function(n){if(typeof n.options.dashArray=="string"){var s=n.options.dashArray.split(/[, ]+/),o=[],d,g;for(g=0;g<s.length;g++){if(d=Number(s[g]),isNaN(d))return;o.push(d)}n.options._dashArray=o}else n.options._dashArray=n.options.dashArray},_requestRedraw:function(n){this._map&&(this._extendRedrawBounds(n),this._redrawRequest=this._redrawRequest||we(this._redraw,this))},_extendRedrawBounds:function(n){if(n._pxBounds){var s=(n.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new T,this._redrawBounds.extend(n._pxBounds.min.subtract([s,s])),this._redrawBounds.extend(n._pxBounds.max.add([s,s]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var n=this._redrawBounds;if(n){var s=n.getSize();this._ctx.clearRect(n.min.x,n.min.y,s.x,s.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var n,s=this._redrawBounds;if(this._ctx.save(),s){var o=s.getSize();this._ctx.beginPath(),this._ctx.rect(s.min.x,s.min.y,o.x,o.y),this._ctx.clip()}this._drawing=!0;for(var d=this._drawFirst;d;d=d.next)n=d.layer,(!s||n._pxBounds&&n._pxBounds.intersects(s))&&n._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(n,s){if(this._drawing){var o,d,g,S,z=n._parts,Y=z.length,te=this._ctx;if(Y){for(te.beginPath(),o=0;o<Y;o++){for(d=0,g=z[o].length;d<g;d++)S=z[o][d],te[d?"lineTo":"moveTo"](S.x,S.y);s&&te.closePath()}this._fillStroke(te,n)}}},_updateCircle:function(n){if(!(!this._drawing||n._empty())){var s=n._point,o=this._ctx,d=Math.max(Math.round(n._radius),1),g=(Math.max(Math.round(n._radiusY),1)||d)/d;g!==1&&(o.save(),o.scale(1,g)),o.beginPath(),o.arc(s.x,s.y/g,d,0,Math.PI*2,!1),g!==1&&o.restore(),this._fillStroke(o,n)}},_fillStroke:function(n,s){var o=s.options;o.fill&&(n.globalAlpha=o.fillOpacity,n.fillStyle=o.fillColor||o.color,n.fill(o.fillRule||"evenodd")),o.stroke&&o.weight!==0&&(n.setLineDash&&n.setLineDash(s.options&&s.options._dashArray||[]),n.globalAlpha=o.opacity,n.lineWidth=o.weight,n.strokeStyle=o.color,n.lineCap=o.lineCap,n.lineJoin=o.lineJoin,n.stroke())},_onClick:function(n){for(var s=this._map.mouseEventToLayerPoint(n),o,d,g=this._drawFirst;g;g=g.next)o=g.layer,o.options.interactive&&o._containsPoint(s)&&(!(n.type==="click"||n.type==="preclick")||!this._map._draggableMoved(o))&&(d=o);this._fireEvent(d?[d]:!1,n)},_onMouseMove:function(n){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var s=this._map.mouseEventToLayerPoint(n);this._handleMouseHover(n,s)}},_handleMouseOut:function(n){var s=this._hoveredLayer;s&&(ve(this._container,"leaflet-interactive"),this._fireEvent([s],n,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(n,s){if(!this._mouseHoverThrottled){for(var o,d,g=this._drawFirst;g;g=g.next)o=g.layer,o.options.interactive&&o._containsPoint(s)&&(d=o);d!==this._hoveredLayer&&(this._handleMouseOut(n),d&&(re(this._container,"leaflet-interactive"),this._fireEvent([d],n,"mouseover"),this._hoveredLayer=d)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,n),this._mouseHoverThrottled=!0,setTimeout(j(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(n,s,o){this._map._fireDOMEvent(s,o||s.type,n)},_bringToFront:function(n){var s=n._order;if(s){var o=s.next,d=s.prev;if(o)o.prev=d;else return;d?d.next=o:o&&(this._drawFirst=o),s.prev=this._drawLast,this._drawLast.next=s,s.next=null,this._drawLast=s,this._requestRedraw(n)}},_bringToBack:function(n){var s=n._order;if(s){var o=s.next,d=s.prev;if(d)d.next=o;else return;o?o.prev=d:d&&(this._drawLast=d),s.prev=null,s.next=this._drawFirst,this._drawFirst.prev=s,this._drawFirst=s,this._requestRedraw(n)}}});function Os(n){return Me.canvas?new dl(n):null}var Ja=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(n){return document.createElement("<lvml:"+n+' class="lvml">')}}catch{}return function(n){return document.createElement("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),tr={_initContainer:function(){this._container=Xe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(wn.prototype._update.call(this),this.fire("update"))},_initPath:function(n){var s=n._container=Ja("shape");re(s,"leaflet-vml-shape "+(this.options.className||"")),s.coordsize="1 1",n._path=Ja("path"),s.appendChild(n._path),this._updateStyle(n),this._layers[y(n)]=n},_addPath:function(n){var s=n._container;this._container.appendChild(s),n.options.interactive&&n.addInteractiveTarget(s)},_removePath:function(n){var s=n._container;_t(s),n.removeInteractiveTarget(s),delete this._layers[y(n)]},_updateStyle:function(n){var s=n._stroke,o=n._fill,d=n.options,g=n._container;g.stroked=!!d.stroke,g.filled=!!d.fill,d.stroke?(s||(s=n._stroke=Ja("stroke")),g.appendChild(s),s.weight=d.weight+"px",s.color=d.color,s.opacity=d.opacity,d.dashArray?s.dashStyle=q(d.dashArray)?d.dashArray.join(" "):d.dashArray.replace(/( *, *)/g," "):s.dashStyle="",s.endcap=d.lineCap.replace("butt","flat"),s.joinstyle=d.lineJoin):s&&(g.removeChild(s),n._stroke=null),d.fill?(o||(o=n._fill=Ja("fill")),g.appendChild(o),o.color=d.fillColor||d.color,o.opacity=d.fillOpacity):o&&(g.removeChild(o),n._fill=null)},_updateCircle:function(n){var s=n._point.round(),o=Math.round(n._radius),d=Math.round(n._radiusY||o);this._setPath(n,n._empty()?"M0 0":"AL "+s.x+","+s.y+" "+o+","+d+" 0,"+65535*360)},_setPath:function(n,s){n._path.v=s},_bringToFront:function(n){Vt(n._container)},_bringToBack:function(n){X(n._container)}},ba=Me.vml?Ja:Gt,$i=wn.extend({_initContainer:function(){this._container=ba("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ba("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){_t(this._container),yt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){wn.prototype._update.call(this);var n=this._bounds,s=n.getSize(),o=this._container;(!this._svgSize||!this._svgSize.equals(s))&&(this._svgSize=s,o.setAttribute("width",s.x),o.setAttribute("height",s.y)),Et(o,n.min),o.setAttribute("viewBox",[n.min.x,n.min.y,s.x,s.y].join(" ")),this.fire("update")}},_initPath:function(n){var s=n._path=ba("path");n.options.className&&re(s,n.options.className),n.options.interactive&&re(s,"leaflet-interactive"),this._updateStyle(n),this._layers[y(n)]=n},_addPath:function(n){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(n._path),n.addInteractiveTarget(n._path)},_removePath:function(n){_t(n._path),n.removeInteractiveTarget(n._path),delete this._layers[y(n)]},_updatePath:function(n){n._project(),n._update()},_updateStyle:function(n){var s=n._path,o=n.options;s&&(o.stroke?(s.setAttribute("stroke",o.color),s.setAttribute("stroke-opacity",o.opacity),s.setAttribute("stroke-width",o.weight),s.setAttribute("stroke-linecap",o.lineCap),s.setAttribute("stroke-linejoin",o.lineJoin),o.dashArray?s.setAttribute("stroke-dasharray",o.dashArray):s.removeAttribute("stroke-dasharray"),o.dashOffset?s.setAttribute("stroke-dashoffset",o.dashOffset):s.removeAttribute("stroke-dashoffset")):s.setAttribute("stroke","none"),o.fill?(s.setAttribute("fill",o.fillColor||o.color),s.setAttribute("fill-opacity",o.fillOpacity),s.setAttribute("fill-rule",o.fillRule||"evenodd")):s.setAttribute("fill","none"))},_updatePoly:function(n,s){this._setPath(n,Yn(n._parts,s))},_updateCircle:function(n){var s=n._point,o=Math.max(Math.round(n._radius),1),d=Math.max(Math.round(n._radiusY),1)||o,g="a"+o+","+d+" 0 1,0 ",S=n._empty()?"M0 0":"M"+(s.x-o)+","+s.y+g+o*2+",0 "+g+-o*2+",0 ";this._setPath(n,S)},_setPath:function(n,s){n._path.setAttribute("d",s)},_bringToFront:function(n){Vt(n._path)},_bringToBack:function(n){X(n._path)}});Me.vml&&$i.include(tr);function Ds(n){return Me.svg||Me.vml?new $i(n):null}it.include({getRenderer:function(n){var s=n.options.renderer||this._getPaneRenderer(n.options.pane)||this.options.renderer||this._renderer;return s||(s=this._renderer=this._createRenderer()),this.hasLayer(s)||this.addLayer(s),s},_getPaneRenderer:function(n){if(n==="overlayPane"||n===void 0)return!1;var s=this._paneRenderers[n];return s===void 0&&(s=this._createRenderer({pane:n}),this._paneRenderers[n]=s),s},_createRenderer:function(n){return this.options.preferCanvas&&Os(n)||Ds(n)}});var hi=qi.extend({initialize:function(n,s){qi.prototype.initialize.call(this,this._boundsToLatLngs(n),s)},setBounds:function(n){return this.setLatLngs(this._boundsToLatLngs(n))},_boundsToLatLngs:function(n){return n=he(n),[n.getSouthWest(),n.getNorthWest(),n.getNorthEast(),n.getSouthEast()]}});function tu(n,s){return new hi(n,s)}$i.create=ba,$i.pointsToPath=Yn,Ba.geometryToLayer=hn,Ba.coordsToLatLng=ll,Ba.coordsToLatLngs=Ls,Ba.latLngToCoords=rl,Ba.latLngsToCoords=As,Ba.getFeature=Ka,Ba.asFeature=ol,it.mergeOptions({boxZoom:!0});var Sn=va.extend({initialize:function(n){this._map=n,this._container=n._container,this._pane=n._panes.overlayPane,this._resetStateTimeout=0,n.on("unload",this._destroy,this)},addHooks:function(){Ge(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){yt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){_t(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(n){if(!n.shiftKey||n.which!==1&&n.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),zi(),Qs(),this._startPoint=this._map.mouseEventToContainerPoint(n),Ge(document,{contextmenu:$a,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(n){this._moved||(this._moved=!0,this._box=Xe("div","leaflet-zoom-box",this._container),re(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(n);var s=new T(this._point,this._startPoint),o=s.getSize();Et(this._box,s.min),this._box.style.width=o.x+"px",this._box.style.height=o.y+"px"},_finish:function(){this._moved&&(_t(this._box),ve(this._container,"leaflet-crosshair")),pa(),_s(),yt(document,{contextmenu:$a,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(n){if(!(n.which!==1&&n.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(j(this._resetState,this),0);var s=new oe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(s).fire("boxzoomend",{boxZoomBounds:s})}},_onKeyDown:function(n){n.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});it.addInitHook("addHandler","boxZoom",Sn),it.mergeOptions({doubleClickZoom:!0});var hl=va.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(n){var s=this._map,o=s.getZoom(),d=s.options.zoomDelta,g=n.originalEvent.shiftKey?o-d:o+d;s.options.doubleClickZoom==="center"?s.setZoom(g):s.setZoomAround(n.containerPoint,g)}});it.addInitHook("addHandler","doubleClickZoom",hl),it.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ja=va.extend({addHooks:function(){if(!this._draggable){var n=this._map;this._draggable=new Fa(n._mapPane,n._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),n.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),n.on("zoomend",this._onZoomEnd,this),n.whenReady(this._onZoomEnd,this))}re(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ve(this._map._container,"leaflet-grab"),ve(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var n=this._map;if(n._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var s=he(this._map.options.maxBounds);this._offsetLimit=$(this._map.latLngToContainerPoint(s.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(s.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;n.fire("movestart").fire("dragstart"),n.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(n){if(this._map.options.inertia){var s=this._lastTime=+new Date,o=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(o),this._times.push(s),this._prunePositions(s)}this._map.fire("move",n).fire("drag",n)},_prunePositions:function(n){for(;this._positions.length>1&&n-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var n=this._map.getSize().divideBy(2),s=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=s.subtract(n).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(n,s){return n-(n-s)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var n=this._draggable._newPos.subtract(this._draggable._startPos),s=this._offsetLimit;n.x<s.min.x&&(n.x=this._viscousLimit(n.x,s.min.x)),n.y<s.min.y&&(n.y=this._viscousLimit(n.y,s.min.y)),n.x>s.max.x&&(n.x=this._viscousLimit(n.x,s.max.x)),n.y>s.max.y&&(n.y=this._viscousLimit(n.y,s.max.y)),this._draggable._newPos=this._draggable._startPos.add(n)}},_onPreDragWrap:function(){var n=this._worldWidth,s=Math.round(n/2),o=this._initialWorldOffset,d=this._draggable._newPos.x,g=(d-s+o)%n+s-o,S=(d+s+o)%n-s-o,z=Math.abs(g+o)<Math.abs(S+o)?g:S;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=z},_onDragEnd:function(n){var s=this._map,o=s.options,d=!o.inertia||n.noInertia||this._times.length<2;if(s.fire("dragend",n),d)s.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),S=(this._lastTime-this._times[0])/1e3,z=o.easeLinearity,Y=g.multiplyBy(z/S),te=Y.distanceTo([0,0]),me=Math.min(o.inertiaMaxSpeed,te),Ne=Y.multiplyBy(me/te),Pe=me/(o.inertiaDeceleration*z),Fe=Ne.multiplyBy(-Pe/2).round();!Fe.x&&!Fe.y?s.fire("moveend"):(Fe=s._limitOffset(Fe,s.options.maxBounds),we(function(){s.panBy(Fe,{duration:Pe,easeLinearity:z,noMoveStart:!0,animate:!0})}))}}});it.addInitHook("addHandler","dragging",ja),it.mergeOptions({keyboard:!0,keyboardPanDelta:80});var nr=va.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(n){this._map=n,this._setPanDelta(n.options.keyboardPanDelta),this._setZoomDelta(n.options.zoomDelta)},addHooks:function(){var n=this._map._container;n.tabIndex<=0&&(n.tabIndex="0"),Ge(n,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),yt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var n=document.body,s=document.documentElement,o=n.scrollTop||s.scrollTop,d=n.scrollLeft||s.scrollLeft;this._map._container.focus(),window.scrollTo(d,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(n){var s=this._panKeys={},o=this.keyCodes,d,g;for(d=0,g=o.left.length;d<g;d++)s[o.left[d]]=[-1*n,0];for(d=0,g=o.right.length;d<g;d++)s[o.right[d]]=[n,0];for(d=0,g=o.down.length;d<g;d++)s[o.down[d]]=[0,n];for(d=0,g=o.up.length;d<g;d++)s[o.up[d]]=[0,-1*n]},_setZoomDelta:function(n){var s=this._zoomKeys={},o=this.keyCodes,d,g;for(d=0,g=o.zoomIn.length;d<g;d++)s[o.zoomIn[d]]=n;for(d=0,g=o.zoomOut.length;d<g;d++)s[o.zoomOut[d]]=-n},_addHooks:function(){Ge(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){yt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(n){if(!(n.altKey||n.ctrlKey||n.metaKey)){var s=n.keyCode,o=this._map,d;if(s in this._panKeys){if(!o._panAnim||!o._panAnim._inProgress)if(d=this._panKeys[s],n.shiftKey&&(d=Z(d).multiplyBy(3)),o.options.maxBounds&&(d=o._limitOffset(Z(d),o.options.maxBounds)),o.options.worldCopyJump){var g=o.wrapLatLng(o.unproject(o.project(o.getCenter()).add(d)));o.panTo(g)}else o.panBy(d)}else if(s in this._zoomKeys)o.setZoom(o.getZoom()+(n.shiftKey?3:1)*this._zoomKeys[s]);else if(s===27&&o._popup&&o._popup.options.closeOnEscapeKey)o.closePopup();else return;$a(n)}}});it.addInitHook("addHandler","keyboard",nr),it.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Bs=va.extend({addHooks:function(){Ge(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){yt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(n){var s=gn(n),o=this._map.options.wheelDebounceTime;this._delta+=s,this._lastMousePos=this._map.mouseEventToContainerPoint(n),this._startTime||(this._startTime=+new Date);var d=Math.max(o-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(j(this._performZoom,this),d),$a(n)},_performZoom:function(){var n=this._map,s=n.getZoom(),o=this._map.options.zoomSnap||0;n._stop();var d=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(d))))/Math.LN2,S=o?Math.ceil(g/o)*o:g,z=n._limitZoom(s+(this._delta>0?S:-S))-s;this._delta=0,this._startTime=null,z&&(n.options.scrollWheelZoom==="center"?n.setZoom(s+z):n.setZoomAround(this._lastMousePos,s+z))}});it.addInitHook("addHandler","scrollWheelZoom",Bs);var fi=600;it.mergeOptions({tapHold:Me.touchNative&&Me.safari&&Me.mobile,tapTolerance:15});var fl=va.extend({addHooks:function(){Ge(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){yt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(n){if(clearTimeout(this._holdTimeout),n.touches.length===1){var s=n.touches[0];this._startPos=this._newPos=new le(s.clientX,s.clientY),this._holdTimeout=setTimeout(j(function(){this._cancel(),this._isTapValid()&&(Ge(document,"touchend",Ht),Ge(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",s))},this),fi),Ge(document,"touchend touchcancel contextmenu",this._cancel,this),Ge(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function n(){yt(document,"touchend",Ht),yt(document,"touchend touchcancel",n)},_cancel:function(){clearTimeout(this._holdTimeout),yt(document,"touchend touchcancel contextmenu",this._cancel,this),yt(document,"touchmove",this._onMove,this)},_onMove:function(n){var s=n.touches[0];this._newPos=new le(s.clientX,s.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(n,s){var o=new MouseEvent(n,{bubbles:!0,cancelable:!0,view:window,screenX:s.screenX,screenY:s.screenY,clientX:s.clientX,clientY:s.clientY});o._simulated=!0,s.target.dispatchEvent(o)}});it.addInitHook("addHandler","tapHold",fl),it.mergeOptions({touchZoom:Me.touch,bounceAtZoomLimits:!0});var ar=va.extend({addHooks:function(){re(this._map._container,"leaflet-touch-zoom"),Ge(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ve(this._map._container,"leaflet-touch-zoom"),yt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(n){var s=this._map;if(!(!n.touches||n.touches.length!==2||s._animatingZoom||this._zooming)){var o=s.mouseEventToContainerPoint(n.touches[0]),d=s.mouseEventToContainerPoint(n.touches[1]);this._centerPoint=s.getSize()._divideBy(2),this._startLatLng=s.containerPointToLatLng(this._centerPoint),s.options.touchZoom!=="center"&&(this._pinchStartLatLng=s.containerPointToLatLng(o.add(d)._divideBy(2))),this._startDist=o.distanceTo(d),this._startZoom=s.getZoom(),this._moved=!1,this._zooming=!0,s._stop(),Ge(document,"touchmove",this._onTouchMove,this),Ge(document,"touchend touchcancel",this._onTouchEnd,this),Ht(n)}},_onTouchMove:function(n){if(!(!n.touches||n.touches.length!==2||!this._zooming)){var s=this._map,o=s.mouseEventToContainerPoint(n.touches[0]),d=s.mouseEventToContainerPoint(n.touches[1]),g=o.distanceTo(d)/this._startDist;if(this._zoom=s.getScaleZoom(g,this._startZoom),!s.options.bounceAtZoomLimits&&(this._zoom<s.getMinZoom()&&g<1||this._zoom>s.getMaxZoom()&&g>1)&&(this._zoom=s._limitZoom(this._zoom)),s.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var S=o._add(d)._divideBy(2)._subtract(this._centerPoint);if(g===1&&S.x===0&&S.y===0)return;this._center=s.unproject(s.project(this._pinchStartLatLng,this._zoom).subtract(S),this._zoom)}this._moved||(s._moveStart(!0,!1),this._moved=!0),Ae(this._animRequest);var z=j(s._move,s,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=we(z,this,!0),Ht(n)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Ae(this._animRequest),yt(document,"touchmove",this._onTouchMove,this),yt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});it.addInitHook("addHandler","touchZoom",ar),it.BoxZoom=Sn,it.DoubleClickZoom=hl,it.Drag=ja,it.Keyboard=nr,it.ScrollWheelZoom=Bs,it.TapHold=fl,it.TouchZoom=ar,f.Bounds=T,f.Browser=Me,f.CRS=ke,f.Canvas=dl,f.Circle=sl,f.CircleMarker=Zi,f.Class=qe,f.Control=Ln,f.DivIcon=yo,f.DivOverlay=fn,f.DomEvent=el,f.DomUtil=Di,f.Draggable=Fa,f.Evented=K,f.FeatureGroup=_a,f.GeoJSON=Ba,f.GridLayer=Yi,f.Handler=va,f.Icon=ya,f.ImageOverlay=Gi,f.LatLng=ge,f.LatLngBounds=oe,f.Layer=ta,f.LayerGroup=Hi,f.LineUtil=Kc,f.Map=it,f.Marker=Ts,f.Mixin=Vc,f.Path=xa,f.Point=le,f.PolyUtil=Wl,f.Polygon=qi,f.Polyline=Da,f.Popup=Ms,f.PosAnimation=Bi,f.Projection=co,f.Rectangle=hi,f.Renderer=wn,f.SVG=$i,f.SVGOverlay=ul,f.TileLayer=Wa,f.Tooltip=zs,f.Transformation=Re,f.Util=He,f.VideoOverlay=Qa,f.bind=j,f.bounds=$,f.canvas=Os,f.circle=po,f.circleMarker=mo,f.control=Oa,f.divIcon=eu,f.extend=p,f.featureGroup=ho,f.geoJSON=cl,f.geoJson=ks,f.gridLayer=xo,f.icon=Ns,f.imageOverlay=go,f.latLng=ye,f.latLngBounds=he,f.layerGroup=Xc,f.map=Yl,f.marker=fo,f.point=Z,f.polygon=Wc,f.polyline=Qc,f.popup=_o,f.rectangle=tu,f.setOptions=H,f.stamp=y,f.svg=Ds,f.svgOverlay=vo,f.tileLayer=Bn,f.tooltip=Jc,f.transformation=We,f.version=m,f.videoOverlay=Vi;var ir=window.L;f.noConflict=function(){return window.L=ir,this},window.L=f}))})(Yr,Yr.exports)),Yr.exports}var Xs=Ky();const Ea=th(Xs);function Qr(r,h,f){return Object.freeze({instance:r,context:h,container:f})}function Pc(r,h){return h==null?function(m,p){const b=v.useRef(void 0);return b.current||(b.current=r(m,p)),b}:function(m,p){const b=v.useRef(void 0);b.current||(b.current=r(m,p));const j=v.useRef(m),{instance:C}=b.current;return v.useEffect(function(){j.current!==m&&(h(C,m,j.current),j.current=m)},[C,m,h]),b}}function Ag(r,h){v.useEffect(function(){return(h.layerContainer??h.map).addLayer(r.instance),function(){h.layerContainer?.removeLayer(r.instance),h.map.removeLayer(r.instance)}},[h,r])}function kg(r){return function(f){const m=Dc(),p=r(Bc(f,m),m);return Tg(m.map,f.attribution),fh(p.current,f.eventHandlers),Ag(p.current,m),p}}function Xy(r,h){const f=v.useRef(void 0);v.useEffect(function(){if(h.pathOptions!==f.current){const p=h.pathOptions??{};r.instance.setStyle(p),f.current=p}},[r,h])}function Qy(r){return function(f){const m=Dc(),p=r(Bc(f,m),m);return fh(p.current,f.eventHandlers),Ag(p.current,m),Xy(p.current,f),p}}function Mg(r,h){const f=Pc(r,h),m=kg(f);return Lg(m)}function Wy(r,h){const f=Pc(r),m=$y(f,h);return Vy(m)}function Jy(r,h){const f=Pc(r,h),m=Qy(f);return Lg(m)}function ex(r,h){const f=Pc(r,h),m=kg(f);return Yy(m)}function tx(r,h,f){const{opacity:m,zIndex:p}=h;m!=null&&m!==f.opacity&&r.setOpacity(m),p!=null&&p!==f.zIndex&&r.setZIndex(p)}function mh(){return Dc().map}function Xd(r,h){const f=mh();return v.useEffect(function(){return f.on(r,h),function(){f.off(r,h)}},[f,r,h]),f}const nx=Mg(function({children:h,...f},m){const p=new Xs.LayerGroup([],f);return Qr(p,dh(m,{layerContainer:p}))});function ax({bounds:r,boundsOptions:h,center:f,children:m,className:p,id:b,placeholder:j,style:C,whenReady:y,zoom:x,...E},w){const[k]=v.useState({className:p,id:b,style:C}),[M,B]=v.useState(null),H=v.useRef(void 0);v.useImperativeHandle(w,()=>M?.map??null,[M]);const V=v.useCallback(D=>{if(D!==null&&!H.current){const q=new Xs.Map(D,E);H.current=q,f!=null&&x!=null?q.setView(f,x):r!=null&&q.fitBounds(r,h),y!=null&&q.whenReady(y),B(Gy(q))}},[]);v.useEffect(()=>()=>{M?.map.remove()},[M]);const O=M?Bl.createElement(hh,{value:M},m):j??null;return Bl.createElement("div",{...k,ref:V},O)}const ix=v.forwardRef(ax),zg=Mg(function({position:h,...f},m){const p=new Xs.Marker(h,f);return Qr(p,dh(m,{overlayContainer:p}))},function(h,f,m){f.position!==m.position&&h.setLatLng(f.position),f.icon!=null&&f.icon!==m.icon&&h.setIcon(f.icon),f.zIndexOffset!=null&&f.zIndexOffset!==m.zIndexOffset&&h.setZIndexOffset(f.zIndexOffset),f.opacity!=null&&f.opacity!==m.opacity&&h.setOpacity(f.opacity),h.dragging!=null&&f.draggable!==m.draggable&&(f.draggable===!0?h.dragging.enable():h.dragging.disable())}),zp=Jy(function({positions:h,...f},m){const p=new Xs.Polygon(h,f);return Qr(p,dh(m,{overlayContainer:p}))},function(h,f,m){f.positions!==m.positions&&h.setLatLngs(f.positions)}),sx=Wy(function(h,f){const m=new Xs.Popup(h,f.overlayContainer);return Qr(m,f)},function(h,f,{position:m},p){v.useEffect(function(){const{instance:j}=h;function C(x){x.popup===j&&(j.update(),p(!0))}function y(x){x.popup===j&&p(!1)}return f.map.on({popupopen:C,popupclose:y}),f.overlayContainer==null?(m!=null&&j.setLatLng(m),j.openOn(f.map)):f.overlayContainer.bindPopup(j),function(){f.map.off({popupopen:C,popupclose:y}),f.overlayContainer?.unbindPopup(),f.map.removeLayer(j)}},[h,f,p,m])}),lx=ex(function({url:h,...f},m){const p=new Xs.TileLayer(h,Bc(f,m));return Qr(p,m)},function(h,f,m){tx(h,f,m);const{url:p}=f;p!=null&&p!==m.url&&h.setUrl(p)});function rx({location:r,onClose:h}){return r?i.jsxs("div",{className:"side-panel custom-scrollbar",children:[i.jsxs("div",{className:"side-panel-header",children:[i.jsx("h2",{children:r.name}),i.jsx("button",{className:"close-button",onClick:h,children:""})]}),i.jsx("div",{className:"side-panel-content",children:i.jsxs("div",{className:"location-info",children:[i.jsx("p",{className:"location-type",children:r.type}),i.jsxs("div",{className:"lore-section",children:[i.jsx("h3",{children:"Lore"}),i.jsx("p",{children:r.lore})]}),r.description&&i.jsxs("div",{className:"description-section",children:[i.jsx("h3",{children:"Description"}),i.jsx("p",{children:r.description})]})]})})]}):null}const ox=800;function cx({onFinish:r}){const[h,f]=v.useState(!1),m=v.useCallback(()=>{h||(f(!0),window.setTimeout(()=>{r()},ox))},[h,r]);return i.jsxs("div",{className:`intro-overlay ${h?"intro-overlay--closing":""}`,children:[i.jsx("div",{className:"intro-overlay__background"}),i.jsxs("div",{className:"intro-overlay__content",children:[i.jsx("p",{className:"intro-overlay__eyebrow",children:"Realm Entry Protocol"}),i.jsx("h1",{className:"intro-overlay__title",children:"Welcome to Azterra"}),i.jsx("p",{className:"intro-overlay__subtitle",children:"Chart the ancient world, uncover hidden lore, and prepare your party."}),i.jsx("button",{type:"button",className:"intro-overlay__button",onClick:m,children:"Begin Exploring"})]})]})}const Rg=v.createContext(null);function ux({children:r}){const[h,f]=v.useState([]),[m,p]=v.useState(null),b=v.useCallback(C=>{p(C)},[]),j=v.useMemo(()=>({locations:h,setLocations:f,selectedLocationId:m,selectLocation:b}),[h,m,b]);return i.jsx(Rg.Provider,{value:j,children:r})}function Uc(){const r=v.useContext(Rg);if(!r)throw new Error("useLocationData must be used within a LocationDataProvider");return r}const Og=v.createContext(null);function dx({children:r}){const[h,f]=v.useState([]),[m,p]=v.useState(null),b=v.useCallback(C=>{p(C)},[]),j=v.useMemo(()=>({regions:h,setRegions:f,selectedRegionId:m,selectRegion:b}),[h,m,b]);return i.jsx(Og.Provider,{value:j,children:r})}function Wr(){const r=v.useContext(Og);if(!r)throw new Error("useRegions must be used within a RegionDataProvider");return r}function hx({isOpen:r,draft:h,onFieldChange:f,onSave:m,onCancel:p,canAutoSave:b=!1,saveWarning:j="",canDelete:C=!1,onDelete:y}){const{locations:x,selectedLocationId:E}=Uc(),w=x.find(O=>O.id===E),k=w?.name??"Unknown Location",{regions:M}=Wr(),B=w?.regionId?M.find(O=>O.id===w.regionId)?.name:null;if(!r||!h)return null;const H=O=>{O.preventDefault(),m()},V=O=>D=>{f(O,D.target.value)};return i.jsxs("aside",{className:"editor-info-panel","aria-label":"Editor info panel",children:[i.jsxs("div",{className:"editor-info-panel__header",children:[i.jsx("h2",{children:"Editor Info Panel"}),i.jsx("button",{type:"button",className:"editor-info-panel__close",onClick:p,"aria-label":"Close editor info panel",children:""})]}),i.jsxs("p",{className:"editor-info-panel__subtitle",children:["Editing: ",k]}),B&&i.jsxs("p",{className:"editor-info-panel__subtitle",children:["Region: ",i.jsx("strong",{children:B})]}),i.jsxs("form",{className:"editor-info-panel__form",onSubmit:H,children:[i.jsxs("label",{className:"editor-info-panel__field",children:[i.jsx("span",{children:"Name"}),i.jsx("input",{type:"text",value:h.name??"",onChange:V("name")})]}),i.jsxs("label",{className:"editor-info-panel__field",children:[i.jsx("span",{children:"Type / Category"}),i.jsx("input",{type:"text",value:h.type??"",onChange:V("type")})]}),i.jsxs("label",{className:"editor-info-panel__field",children:[i.jsx("span",{children:"Description"}),i.jsx("textarea",{rows:4,value:h.description??"",onChange:V("description")})]}),i.jsxs("div",{className:"editor-info-panel__actions",children:[i.jsx("button",{type:"button",className:"panel-button",onClick:p,children:"Cancel"}),C&&i.jsx("button",{type:"button",className:"panel-button panel-button--danger",onClick:y,children:"Delete"}),i.jsx("button",{type:"submit",className:"panel-button panel-button--primary",children:"Save"})]}),(!b||j)&&i.jsx("p",{className:"editor-warning",children:b?j:"Only approved editors can save changes to the shared map."})]})]})}function fx(r,h=[]){if(!h||h.length===0)return!0;const f=r?.role||"guest";return h.includes(f)}function mx(r,h){return h?(Array.isArray(r?.unlockedSecrets)?r.unlockedSecrets:[]).includes(h):!0}function Qd(r,{roles:h=[],secretId:f}={}){return fx(r,h)&&mx(r,f)}const Dg=v.createContext({user:null,role:"guest",token:null,loading:!1,login:async()=>{},updateAccount:async()=>{},googleLogin:async()=>{},signup:async()=>{},logout:()=>{},refreshUser:async()=>{},isSecretUnlocked:()=>!1,canView:()=>!1}),Wd="http://localhost:4000/api".replace(/\/$/,""),_c=r=>{if(!r)return null;const h=Array.isArray(r.unlockedSecrets)?r.unlockedSecrets:[],f=Array.isArray(r.favorites)?r.favorites:[],m=r.featuredCharacter??null,p=Array.isArray(r.friends)?r.friends:[],b={incoming:Array.isArray(r.friendRequests?.incoming)?r.friendRequests.incoming:[],outgoing:Array.isArray(r.friendRequests?.outgoing)?r.friendRequests.outgoing:[]},j={bio:r.profile?.bio||"",labelOne:r.profile?.labelOne||"",labelTwo:r.profile?.labelTwo||"",documents:Array.isArray(r.profile?.documents)?r.profile.documents:[],viewFavorites:Array.isArray(r.profile?.viewFavorites)?r.profile.viewFavorites:[]};return{...r,unlockedSecrets:h,favorites:f,featuredCharacter:m,profile:j,friends:p,friendRequests:b}};async function Hd({path:r,method:h="GET",body:f,headers:m={}}){const p={method:h,headers:{"Content-Type":"application/json",...m},credentials:"include"};f!==void 0&&(p.body=typeof f=="string"?f:JSON.stringify(f));const b=await fetch(`${Wd}${r}`,p),C=(b.headers.get("content-type")||"").includes("application/json")?await b.json().catch(()=>({})):{};if(!b.ok)throw new Error(C.error||"Request failed.");return C}function px({children:r}){const[h,f]=v.useState(null),[m,p]=v.useState(null),[b,j]=v.useState(!0),[C,y]=v.useState(null),x=_c(h),E=x?.role||"guest";v.useEffect(()=>{let D=!0;return j(!0),Hd({path:"/auth/me"}).then(q=>{D&&(f(_c(q.user)),p("session-cookie"))}).catch(()=>{D&&(f(null),p(null))}).finally(()=>{D&&j(!1)}),()=>{D=!1}},[]);const w=v.useCallback(({provider:D}={})=>{const q=D?`?provider=${encodeURIComponent(D)}`:"";window.location.href=`${Wd}/auth/login${q}`},[]),k=async({username:D,profilePicture:q,profile:ae})=>{y(null);try{const F=await Hd({path:"/auth/me",method:"PUT",body:{username:D,profilePicture:q,profile:ae}});return f(_c(F.user)),F.user}catch(F){throw y(F.message),F}},M=async()=>w({}),B=async()=>w({}),H=v.useCallback(async()=>{try{await fetch(`${Wd}/auth/logout`,{method:"POST",credentials:"include"})}catch{}finally{f(null),p(null)}},[]),V=async()=>{const D=await Hd({path:"/auth/me"});return f(_c(D.user)),p("session-cookie"),D.user},O=v.useMemo(()=>({user:x,role:E,token:m,loading:b,error:C,login:B,updateAccount:k,googleLogin:w,signup:M,logout:H,refreshUser:V,isSecretUnlocked:D=>Array.isArray(x?.unlockedSecrets)&&x.unlockedSecrets.includes(D),canView:D=>Qd(x,D)}),[x,E,m,b,C,w,H]);return i.jsx(Dg.Provider,{value:O,children:r})}function Cn(){return v.useContext(Dg)}const Bg=v.createContext({cloudsEnabled:!0,fogEnabled:!0,vignetteEnabled:!0,heatmapMode:"none",intensities:{clouds:.9,fog:.9,vignette:1},setCloudsEnabled:()=>{},setFogEnabled:()=>{},setVignetteEnabled:()=>{},setHeatmapMode:()=>{},setIntensity:()=>{}});function gx({children:r}){const[h,f]=v.useState(!0),[m,p]=v.useState(!0),[b,j]=v.useState(!0),[C,y]=v.useState("none"),[x,E]=v.useState({clouds:.9,fog:.9,vignette:1}),w=(M,B)=>{E(H=>({...H,[M]:B}))},k=v.useMemo(()=>({cloudsEnabled:h,fogEnabled:m,vignetteEnabled:b,heatmapMode:C,intensities:x,setCloudsEnabled:f,setFogEnabled:p,setVignetteEnabled:j,setHeatmapMode:y,setIntensity:w}),[h,m,b,C,x]);return i.jsx(Bg.Provider,{value:k,children:r})}function Pg(){return v.useContext(Bg)}const vx=["lore","note","region","location","character","npc","quest","item"],_x=["complete","draft","placeholder"],yx="draft",xx=r=>{const h=typeof r=="string"?r.toLowerCase().trim():"";return _x.includes(h)?h:yx},bx=r=>typeof r=="string"?r.toLowerCase().trim():"",jx=(r={})=>{const h=r.id??r.slug??"",f=bx(r.type);return{...r,id:h==null?"":String(h),type:f,title:typeof r.title=="string"?r.title.trim():r.title??"",status:xx(r.status),tags:Array.isArray(r.tags)?r.tags.map(m=>String(m)):[],summary:typeof r.summary=="string"?r.summary.trim():r.summary??"",body:typeof r.body=="string"?r.body:r.body??"",obsidianPath:typeof r.obsidianPath=="string"?r.obsidianPath.trim():r.obsidianPath??"",mapLocationId:r.mapLocationId===null||r.mapLocationId===void 0?null:r.mapLocationId,imageDescription:typeof r.imageDescription=="string"?r.imageDescription.trim():r.imageDescription??""}},Rp=r=>Array.isArray(r)?r.map(h=>jx(h)):[],wx=[{id:"aurora-ember-primer",type:"lore",title:"Aurora Ember Primer",status:"draft",tags:["secret","aurora"],summary:"A briefing on the auroral embers rumored beneath the vault.",body:"Placeholder: the full write-up will be imported from Obsidian once the pipeline is ready.",obsidianPath:"Lore/Aurora Ember.md",mapLocationId:12},{id:"silent-archive-report",type:"region",title:"Silent Archive Annex",status:"complete",tags:["region","library"],summary:"Notes on the archive hidden within Silent Stacks.",body:"Placeholder: import structured write-up from the Obsidian vault.",obsidianPath:"Regions/Silent Archive.md",mapLocationId:13},{id:"gilded-horizon-teaser",type:"note",title:"Gilded Horizon Teaser",status:"placeholder",tags:["teaser","hook"],summary:"A placeholder breadcrumb pointing toward the gilded horizon outpost.",obsidianPath:"Hooks/Gilded Horizon.md",mapLocationId:14}],Sx={entries:wx},Ug=v.createContext(null),yc="http://localhost:4000/api";function Nx({children:r}){const[h,f]=v.useState([]),[m,p]=v.useState(null),[b,j]=v.useState(!1),[C,y]=v.useState(""),[x,E]=v.useState(null),[w,k]=v.useState({enabled:!1,checked:!1}),[M,B]=v.useState({}),H=v.useCallback(async()=>{j(!0),y("");try{const ce=await fetch(`${yc}/content`,{credentials:"include"}),U=await ce.json();if(!ce.ok)throw new Error(U.error||"Failed to load content.");const be=Rp(U.entries||[]);f(be),p(U.diagnostics||U.issues||null),E(new Date().toISOString())}catch(ce){const U=Rp(Sx?.entries||[]);f(U),p(null),y(ce.message||"Unable to load content."),E(new Date().toISOString())}finally{j(!1)}},[]);v.useEffect(()=>{H()},[H]),v.useEffect(()=>{(async()=>{try{const U=await fetch(`${yc}/portraits/config`,{credentials:"include"}),be=await U.json();U.ok?k({enabled:!!be.enabled,checked:!0}):k(we=>({...we,checked:!0}))}catch{k(U=>({...U,checked:!0}))}})()},[]);const V=v.useCallback(ce=>{if(!ce)return h;const U=String(ce).toLowerCase();return h.filter(be=>String(be.type).toLowerCase()===U)},[h]),O=v.useCallback(ce=>{if(!ce)return h;const U=String(ce).toLowerCase();return h.filter(be=>String(be.category||"").toLowerCase()===U)},[h]),D=v.useCallback(ce=>h.find(U=>String(U.id)===String(ce))||null,[h]),q=v.useCallback(async ce=>{if(!ce)return null;try{const U=await fetch(`${yc}/portraits/${encodeURIComponent(ce)}/status`,{credentials:"include"}),be=await U.json();return U.ok?(B(we=>({...we,[ce]:be})),be):null}catch{return null}},[]),ae=v.useCallback(async ce=>{if(!ce)return{error:"Auth and id required"};try{const U=await fetch(`${yc}/portraits/${encodeURIComponent(ce)}/generate`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}),be=await U.json();return U.ok?(B(we=>({...we,[ce]:{exists:!0,url:be.url}})),{url:be.url}):{error:be.error||"Failed to generate portrait"}}catch(U){return{error:U.message||"Failed to generate portrait"}}},[]),F=v.useMemo(()=>{const ce=new Set;return h.forEach(U=>{U.type&&ce.add(String(U.type).toLowerCase())}),Array.from(ce)},[h]),xe=v.useMemo(()=>{const ce=new Set;return h.forEach(U=>{U.category&&ce.add(String(U.category).toLowerCase())}),Array.from(ce)},[h]),J=v.useMemo(()=>({entries:h,issues:m,loading:b,error:C,lastLoadedAt:x,refresh:H,getByType:V,getByCategory:O,getById:D,availableTypes:F,availableCategories:xe,portraitConfig:w,portraitStatus:M,refreshPortraitStatus:q,generatePortrait:ae}),[h,m,b,C,x,H,V,O,D,F,xe,w,M,q,ae]);return i.jsx(Ug.Provider,{value:J,children:r})}function Hg(){const r=v.useContext(Ug);if(!r)throw new Error("useContent must be used within a ContentProvider");return r}const Op=(r,h,f)=>Math.min(Math.max(r,h),f);function Cx({enabled:r=!0,intensity:h=1,onDiagnostics:f}){const m=Op(h,0,1.25),p=Op(m,0,1);return v.useEffect(()=>{if(!r){f?.("vignette",{status:"off",message:"Vignette disabled"});return}f?.("vignette",{status:"ok",message:`Vignette strength ${m.toFixed(2)}`})},[r,m,f]),r?i.jsx("div",{className:"map-layer map-layer--vignette",style:{"--layer-opacity":p,"--vignette-strength":m,opacity:p},"aria-hidden":"true"}):null}const Dp=["fog/fog-1.png","fog/fog-2.png","fog/fog-3.png"],Bp=(r=0)=>r>=6?0:r>=4?.08:.14,Pp=(r,h,f)=>Math.min(Math.max(r,h),f);function Ex({enabled:r=!0,map:h,intensity:f=1,onDiagnostics:m}){const p=v.useRef(null),[b,j]=v.useState(!1),[C,y]=v.useState(()=>Bp(h?.getZoom?.()??0)),x=v.useMemo(()=>`/p15/${Dp[Math.floor(Math.random()*Dp.length)]}`,[]);if(v.useEffect(()=>{if(!x)return;const k=new Image;return k.onload=()=>{j(!0),m?.("fog",{status:"ok",message:"Fog texture loaded",src:x})},k.onerror=()=>{j(!1),m?.("fog",{status:"error",message:"Fog texture missing",src:x})},k.src=x,()=>{k.onload=null,k.onerror=null}},[x,m]),v.useEffect(()=>{if(!h)return;const k=()=>y(Bp(h.getZoom()));return h.on("zoomend",k),()=>h.off("zoomend",k)},[h]),v.useEffect(()=>{if(!r){m?.("fog",{status:"off",message:"Fog layer disabled"});return}if(!h){m?.("fog",{status:"pending",message:"Fog layer waiting for map"});return}if(b){const k=Pp(C*f,0,1);m?.("fog",{status:"ok",message:`Fog layer active (opacity ${k.toFixed(2)})`})}},[r,b,C,f,m,h]),!r||!h)return null;const E=Pp(C*f,0,1),w=b?E:0;return i.jsx("div",{ref:p,className:"map-layer map-layer--fog",style:{"--layer-opacity":w,backgroundImage:`url(${x}), radial-gradient(circle, rgba(255,255,255,0.12), transparent 65%)`,backgroundSize:"1200px auto, cover",backgroundRepeat:"repeat, no-repeat",opacity:w},"aria-hidden":"true"})}const Up=["clouds/cloud-1.png","clouds/cloud-2.png","clouds/cloud-3.png"],Hp=(r=0)=>r>=6?.05:r>=4?.08:.12,Zp=(r,h,f)=>Math.min(Math.max(r,h),f);function Tx({enabled:r=!0,map:h,intensity:f=1,onDiagnostics:m}){const p=v.useRef(null),[b,j]=v.useState(!1),[C,y]=v.useState(()=>Hp(h?.getZoom?.()??0)),x=v.useMemo(()=>`/p15/${Up[Math.floor(Math.random()*Up.length)]}`,[]);if(v.useEffect(()=>{if(!x)return;const k=new Image;return k.onload=()=>{j(!0),m?.("clouds",{status:"ok",message:"Cloud texture loaded",src:x})},k.onerror=()=>{j(!1),m?.("clouds",{status:"error",message:"Cloud texture missing",src:x})},k.src=x,()=>{k.onload=null,k.onerror=null}},[x,m]),v.useEffect(()=>{if(!h)return;const k=()=>y(Hp(h.getZoom()));return h.on("zoomend",k),()=>h.off("zoomend",k)},[h]),v.useEffect(()=>{if(!r){m?.("clouds",{status:"off",message:"Cloud layer disabled"});return}if(!h){m?.("clouds",{status:"pending",message:"Cloud layer waiting for map"});return}if(b){const k=Zp(C*f,0,1);m?.("clouds",{status:"ok",message:`Cloud layer active (opacity ${k.toFixed(2)})`})}},[r,b,C,f,m,h]),!r||!h)return null;const E=Zp(C*f,0,1),w=b?E:0;return i.jsx("div",{ref:p,className:"map-layer map-layer--clouds",style:{"--layer-opacity":w,backgroundImage:`url(${x}), radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.2), transparent 60%)`,backgroundSize:"900px auto, cover",backgroundRepeat:"repeat, no-repeat",opacity:w},"aria-hidden":"true"})}const ph=(r,h,f)=>Math.min(Math.max(r,h),f),qp=(r=0)=>r<=3.5?0:r>=5.5?1:ph((r-3.5)/2,0,1),Lx=(r,h)=>{const m=(r.heat||{})?.[h];if(typeof m=="number")return ph(m>1?m/100:m,0,1);const p=(r.type||"generic").toLowerCase();return h==="magic"?1:h==="danger"?p==="dungeon"||p==="ruins"?1:p==="city"||p==="town"?.3:.5:h==="population"?p==="city"?1:p==="town"?.7:.2:0},Ax=r=>{const h=[{stop:0,color:[59,130,246]},{stop:.5,color:[34,197,94]},{stop:.75,color:[245,158,11]},{stop:1,color:[239,68,68]}];for(let m=0;m<h.length-1;m+=1){const p=h[m],b=h[m+1];if(r>=p.stop&&r<=b.stop){const j=(r-p.stop)/(b.stop-p.stop),C=Math.round(p.color[0]+(b.color[0]-p.color[0])*j),y=Math.round(p.color[1]+(b.color[1]-p.color[1])*j),x=Math.round(p.color[2]+(b.color[2]-p.color[2])*j);return`rgba(${C}, ${y}, ${x}, 0.7)`}}const f=h[h.length-1];return`rgba(${f.color[0]}, ${f.color[1]}, ${f.color[2]}, 0.7)`},kx=(r,h=60)=>{const f=r?.getZoom?.()??4,m=h*Math.pow(.75,f-4);return ph(m,15,140)};function Mx({enabled:r=!0,map:h,locations:f=[],heatmapMode:m="none",onDiagnostics:p}){const b=v.useRef(null),j=v.useRef(null),[C,y]=v.useState(()=>qp(h?.getZoom?.()??0)),x=v.useRef(C),E=v.useRef({enabled:r,heatmapMode:m,locations:f});v.useEffect(()=>{x.current=C},[C]),v.useEffect(()=>{E.current={enabled:r,heatmapMode:m,locations:f}},[r,m,f]);const w=()=>{j.current&&cancelAnimationFrame(j.current),j.current=requestAnimationFrame(()=>k())},k=()=>{const M=b.current;if(!M||!h)return;const B=M.getContext("2d");if(!B)return;const H=window.devicePixelRatio||1,V=h.getSize();(M.width!==V.x*H||M.height!==V.y*H)&&(M.width=V.x*H,M.height=V.y*H,M.style.width=`${V.x}px`,M.style.height=`${V.y}px`,B.scale(H,H)),B.clearRect(0,0,V.x,V.y);const{enabled:O,heatmapMode:D,locations:q}=E.current;if(!(O&&D!=="none"&&x.current>0)||!q.length)return;const F=kx(h);q.forEach(xe=>{const J=Lx(xe,D);if(J<=0)return;const ce=Ea.latLng(xe.lat,xe.lng),U=h.latLngToContainerPoint(ce);if(U.x<-F||U.y<-F||U.x>V.x+F||U.y>V.y+F)return;const be=B.createRadialGradient(U.x,U.y,0,U.x,U.y,F);be.addColorStop(0,Ax(J)),be.addColorStop(1,"rgba(255,255,255,0)"),B.fillStyle=be,B.fillRect(U.x-F,U.y-F,F*2,F*2)})};return v.useEffect(()=>{if(!h)return;const M=b.current;if(!M)return;const B=()=>{const D=h.getZoom(),q=qp(D);y(q);const ae=!r||m==="none",F=!ae&&q>0;p?.("heatmap",{status:ae?"off":F?"ok":"warn",message:ae?"Heatmap disabled":F?`Heatmap (${m}) active @ zoom ${D.toFixed(2)} (opacity ${q.toFixed(2)})`:`Heatmap (${m}) ready, awaiting closer zoom`})},H=()=>{if(!h)return;const D=h.getSize(),q=window.devicePixelRatio||1;M.width=D.x*q,M.height=D.y*q,M.style.width=`${D.x}px`,M.style.height=`${D.y}px`;const ae=M.getContext("2d");ae&&(ae.setTransform(1,0,0,1,0,0),ae.scale(q,q)),w()};H(),B(),window.addEventListener("resize",H);const V=()=>w(),O=()=>{B(),w()};return h.on("moveend",V),h.on("zoomend",O),()=>{window.removeEventListener("resize",H),h.off("moveend",V),h.off("zoomend",O)}},[h,r,m,p]),v.useEffect(()=>{w()},[r,f,m,C]),v.useEffect(()=>()=>{j.current&&cancelAnimationFrame(j.current)},[]),h?i.jsx("canvas",{ref:b,className:"map-layer map-layer--heatmap",style:{opacity:r&&m!=="none"?C:0},"aria-hidden":"true"}):null}const Ip=(r=[])=>r.map(([h,f])=>[f,h]),Zd=r=>{const h=Array.isArray(r.points)&&r.points.length>=3?[r.points]:[],f=Array.isArray(r.parts)?r.parts.filter(m=>Array.isArray(m)&&m.length>=3):[];return[...h,...f]},zx=(r=[])=>{if(!r.length)return{width:0,height:0};let h=1/0,f=-1/0,m=1/0,p=-1/0;return r.forEach(([b,j])=>{h=Math.min(h,b),f=Math.max(f,b),m=Math.min(m,j),p=Math.max(p,j)}),{width:Math.max(0,f-h),height:Math.max(0,p-m)}},Rx=(r,h,f)=>{const m=r.labelScaleWithZoom!==!1,p=Math.max(20,Math.min(h.width*.05,60)),b=Math.max(h.width-p*2,140),j=Number.isFinite(r.labelWidth)?r.labelWidth:1,C=Math.max(150,Math.min(b*.9*j,540)),y=m?C:Math.max(160,Math.min(320*j,520)),x=Math.max(h.height*.28,y*.26),E=Math.min(x,y*.42),w=Math.min(E*.4,180),M=Math.max(.8,Math.min(m?f:4,6)),B=Math.min(Math.max(y/(6.3-M*.35),18),52),H=Math.min(Math.max(B*(r.labelSize||1),10),80),V=Math.min(H/2.3,10);r.borderColor;const O=r.labelColor||"#fef3c7",D="rgba(0,0,0,0.45)",q=`region-label-path-${r.id}`,ae=Math.min(y*.95,Math.max(y*.7*j,160)),F=(r.name||"Region").trim()||"Region";return{width:y,height:E,html:`
      <svg class="region-label-svg" width="${y}" height="${E}" viewBox="0 0 ${y} ${E}" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: visible;">
        <defs>
          <path id="${q}" d="M 0 ${E/2} Q ${y/2} ${E/2-w} ${y} ${E/2}" />
          <filter id="${q}-shadow" x="-50%" y="-50%" width="200%" height="200%">
            <feGaussianBlur in="SourceAlpha" stdDeviation="3" />
            <feOffset dx="0" dy="2" result="offsetblur" />
            <feFlood flood-color="${D}" flood-opacity="1" />
            <feComposite in2="offsetblur" operator="in" />
            <feMerge>
              <feMergeNode />
              <feMergeNode in="SourceGraphic" />
            </feMerge>
          </filter>
        </defs>
        <text
          class="region-label-text"
          font-size="${H}"
          letter-spacing="${V}"
          fill="${O}"
          filter="url(#${q}-shadow)"
        >
          <textPath href="#${q}" xlink:href="#${q}" startOffset="50%" text-anchor="middle" lengthAdjust="spacingAndGlyphs" textLength="${ae}">
            ${F}
          </textPath>
        </text>
      </svg>
    `}};function Ox({regions:r=[],draftPoints:h=[],selectedRegionId:f=null,onRegionClick:m,interactionEnabled:p=!1,showLabels:b=!1,zoomLevel:j=4}){const C=v.useMemo(()=>Ip(h),[h]),y=v.useMemo(()=>b?r.filter(x=>x.labelEnabled!==!1&&Zd(x).some(E=>Array.isArray(E)&&E.length>2)).map(x=>{const E=Zd(x).flat(),w=E.reduce((V,[O,D])=>(V.sumX+=O,V.sumY+=D,V),{sumX:0,sumY:0}),k=E.length||1,M=w.sumX/k,B=w.sumY/k,H=zx(E);return{id:x.id,name:x.name||"Region",centroid:[B,M],bounds:H}}):[],[r,b]);return i.jsxs(nx,{children:[r.map(x=>{const E=Zd(x);return E.length?E.map((w,k)=>{const M=Ip(w),B=`${x.id}-part-${k}`;return i.jsx(zp,{positions:M,pathOptions:{color:x.borderColor||"#ea580c",weight:x.id===f?4:2,fillColor:x.color||"#f97316",fillOpacity:x.opacity??.3,pane:"overlayPane"},interactive:p,eventHandlers:p&&m?{click:H=>{H.originalEvent?.stopPropagation(),m(x.id)}}:void 0},B)}):null}),C.length>=2&&i.jsx(zp,{positions:C,pathOptions:{color:"#f97316",weight:2,dashArray:"8",fillOpacity:.15,pane:"overlayPane"},interactive:!1}),b&&y.map(x=>{const E=Rx(r.find(B=>B.id===x.id)||{},x.bounds,j),w=r.find(B=>B.id===x.id)||{},k=w.labelOffsetX||0,M=w.labelOffsetY||0;return i.jsx(zg,{position:x.centroid,icon:Ea.divIcon({className:"region-label-icon",html:E.html,iconSize:[E.width,E.height],iconAnchor:[E.width/2-k,E.height/2.1-M]}),interactive:!1},`label-${x.id}`)})]})}const Gp=(r,h,f)=>Math.min(Math.max(r,h),f),Vp=(r,h,f)=>r+(h-r)*f;function Dx({enabled:r=!0,map:h,containerRef:f,onDiagnostics:m}){const p=v.useRef(null),b=v.useRef({x:0,y:0,zoom:0}),j=v.useRef({x:0,y:0}),C=v.useRef(0),y=x=>{const E=f?.current;E&&(E.style.setProperty("--cloud-parallax-x",`${x.clouds.x.toFixed(2)}px`),E.style.setProperty("--cloud-parallax-y",`${x.clouds.y.toFixed(2)}px`),E.style.setProperty("--fog-parallax-x",`${x.fog.x.toFixed(2)}px`),E.style.setProperty("--fog-parallax-y",`${x.fog.y.toFixed(2)}px`),E.style.setProperty("--vignette-parallax-x",`${x.vignette.x.toFixed(2)}px`),E.style.setProperty("--vignette-parallax-y",`${x.vignette.y.toFixed(2)}px`))};return v.useEffect(()=>{if(!r){y({clouds:{x:0,y:0},fog:{x:0,y:0},vignette:{x:0,y:0}}),m?.("parallax",{status:"off",message:"Parallax disabled"});return}if(!h||!f?.current){m?.("parallax",{status:"warn",message:"Parallax waiting for map"});return}const x=()=>{const w=j.current,k=b.current,M={x:Vp(w.x,k.x,.12),y:Vp(w.y,k.y,.12)};j.current=M;const B=1-Gp((k.zoom-3)*.08,0,.6),H={clouds:{x:M.x*1.4*B,y:M.y*1.2*B},fog:{x:M.x*.7*B,y:M.y*.6*B},vignette:{x:M.x*.25*B,y:M.y*.2*B}};y(H);const V=performance.now();(!C.current||V-C.current>400)&&(C.current=V,m?.("parallax",{status:"ok",message:`Parallax offsets cloud (${H.clouds.x.toFixed(1)}, ${H.clouds.y.toFixed(1)})`})),Math.abs(M.x-k.x)>.25||Math.abs(M.y-k.y)>.25?p.current=requestAnimationFrame(x):p.current=null},E=()=>{const w=h.getCenter(),k=h.getZoom(),M=1-Gp((k-3)*.06,0,.5),B=(w.lng%2048/2048-.5)*48*M,H=(w.lat%2048/2048-.5)*36*M;b.current={x:B,y:H,zoom:k},p.current||(p.current=requestAnimationFrame(x))};return E(),h.on("move",E),h.on("zoomend",E),()=>{h.off("move",E),h.off("zoomend",E),p.current&&cancelAnimationFrame(p.current),p.current=null}},[r,h,f?.current,m]),r?i.jsx("div",{className:"map-layer map-layer--parallax","aria-hidden":"true"}):null}const Yp=["error","warn","pending","off","ok"];function Bx({diagnostics:r={},onRefresh:h,intensities:f,onIntensityChange:m}){const[p,b]=v.useState(!1),j=v.useMemo(()=>Object.entries(r).sort((C,y)=>{const x=Yp.indexOf(C[1]?.status||"pending"),E=Yp.indexOf(y[1]?.status||"pending");return x-E||C[0].localeCompare(y[0])}),[r]);return i.jsxs("div",{className:`diag-panel ${p?"diag-panel--open":""}`,children:[i.jsx("button",{type:"button",className:"diag-panel__toggle",onClick:()=>b(C=>!C),children:p?"Hide Diagnostics":"Show Diagnostics"}),p&&i.jsxs("div",{className:"diag-panel__body",children:[i.jsxs("div",{className:"diag-panel__header",children:[i.jsx("h4",{children:"Admin Diagnostics"}),i.jsx("button",{type:"button",className:"diag-panel__refresh",onClick:h,children:"Refresh"})]}),i.jsx("ul",{className:"diag-panel__list",children:j.map(([C,y])=>i.jsxs("li",{className:`diag-panel__item diag-panel__item--${y?.status||"pending"}`,children:[i.jsx("span",{className:"diag-panel__label",children:C}),i.jsx("span",{className:"diag-panel__status",children:y?.status||"pending"}),y?.message?i.jsx("span",{className:"diag-panel__message",children:y.message}):null]},C))}),f&&m&&i.jsxs("div",{className:"diag-panel__controls",children:[i.jsxs("div",{className:"diag-panel__control",children:[i.jsx("label",{htmlFor:"cloudIntensity",children:"Clouds"}),i.jsx("input",{id:"cloudIntensity",type:"range",min:"0",max:"1",step:"0.05",value:f.clouds,onChange:C=>m("clouds",parseFloat(C.target.value))})]}),i.jsxs("div",{className:"diag-panel__control",children:[i.jsx("label",{htmlFor:"fogIntensity",children:"Fog"}),i.jsx("input",{id:"fogIntensity",type:"range",min:"0",max:"1",step:"0.05",value:f.fog,onChange:C=>m("fog",parseFloat(C.target.value))})]}),i.jsxs("div",{className:"diag-panel__control",children:[i.jsx("label",{htmlFor:"vignetteIntensity",children:"Vignette"}),i.jsx("input",{id:"vignetteIntensity",type:"range",min:"0",max:"1",step:"0.05",value:f.vignette,onChange:C=>m("vignette",parseFloat(C.target.value))})]})]})]})]})}function Px({isEditorMode:r,options:h,selectedOption:f,onSelect:m,categoryOptions:p=[],groupByCategory:b=!1}){if(!r)return null;const j=v.useMemo(()=>p.reduce((x,E)=>(x[E.id]=E.label,x),{}),[p]),C=v.useMemo(()=>{if(!b)return[];const x=p.map(M=>({id:M.id,label:M.label,options:[]})),E={id:"other",label:"Other",options:[]},w=x.reduce((M,B)=>(M[B.id]=B,M),{});h.forEach(M=>{(w[M.type]||E).options.push(M)});const k=[...x];return E.options.length&&k.push(E),k.filter(M=>M.options.length)},[p,b,h]),y=x=>i.jsxs("button",{type:"button",className:`marker-palette__item ${f&&f.iconKey===x.iconKey?"marker-palette__item--active":""}`,onClick:()=>m(x),children:[i.jsx("img",{src:`/icons/cities/${x.iconKey}.png`,alt:x.label,width:32,height:32,loading:"lazy"}),i.jsx("span",{children:x.label}),b&&i.jsx("small",{children:j[x.type]||"Other"})]},x.iconKey);return i.jsxs("div",{className:"marker-palette",children:[i.jsxs("div",{className:"marker-palette__header",children:[i.jsx("h3",{children:"Marker Palette"}),i.jsx("p",{children:"Select an icon, then click the map to place it."})]}),b?i.jsx("div",{className:"marker-palette__groups",children:C.map(x=>i.jsxs("div",{className:"marker-palette__group",children:[i.jsxs("div",{className:"marker-palette__group-header",children:[i.jsx("span",{children:x.label}),i.jsxs("small",{children:[x.options.length," icons"]})]}),i.jsx("div",{className:"marker-palette__grid",children:x.options.map(y)})]},x.id))}):i.jsx("div",{className:"marker-palette__grid",children:h.map(y)})]})}const gh=["continent","kingdom","province","territory","faction","danger","wilds","other"],Hc=gh[0],Ux=(r,h=0,f=1)=>typeof r!="number"||Number.isNaN(r)?h:Math.min(f,Math.max(h,r)),$p=(r={})=>{const h=(p=[])=>Array.isArray(p)?p.filter(b=>Array.isArray(b)&&b.length>=2).map(([b,j])=>[Number(b)||0,Number(j)||0]):[],f=h(r.points),m=Array.isArray(r.parts)?r.parts.map(p=>h(p)).filter(p=>p.length>=3):[];return{...r,id:r.id||(r.name?`region-${r.name.toLowerCase().replace(/\s+/g,"-")}`:`region-${Date.now()}`),name:r.name||"New Region",color:r.color||"#f97316",borderColor:r.borderColor||r.color||"#ea580c",opacity:r.opacity!==void 0?Ux(r.opacity,0,1):.3,category:r.category||Hc,labelEnabled:r.labelEnabled!==!1,points:f,parts:m}};function Hx({region:r,isOpen:h,onFieldChange:f,onDelete:m,onClose:p,onMergeRegion:b}){const{regions:j,selectedRegionId:C}=Wr(),y=r||j.find(O=>O.id===C),[x,E]=Bl.useState(""),[w,k]=Bl.useState(!1);if(!(h!==void 0?h:!!y)||!y)return null;const B=O=>D=>{const q=D.target.value,F=["opacity","labelSize","labelWidth","labelOffsetX","labelOffsetY"].includes(O)?parseFloat(q):q;f?.(y.id,O,F)},H=O=>D=>{f?.(y.id,O,D.target.checked)},V=j.filter(O=>O.id!==y.id);return i.jsxs("aside",{className:"editor-info-panel region-info-panel","aria-label":"Region info panel",children:[i.jsxs("div",{className:"editor-info-panel__header",children:[i.jsx("h2",{children:"Region Info"}),i.jsx("button",{type:"button",className:"editor-info-panel__close",onClick:()=>p?.(y.id),"aria-label":"Close region info panel",children:""})]}),i.jsxs("form",{className:"editor-info-panel__form",children:[i.jsxs("label",{className:"editor-info-panel__field",children:[i.jsx("span",{children:"Name"}),i.jsx("input",{type:"text",value:y.name||"",onChange:B("name")})]}),i.jsxs("label",{className:"editor-info-panel__field",children:[i.jsx("span",{children:"Fill Color"}),i.jsx("input",{type:"color",value:y.color||"#f97316",onChange:B("color")})]}),i.jsxs("label",{className:"editor-info-panel__field",children:[i.jsx("span",{children:"Category"}),i.jsx("select",{value:y.category||Hc,onChange:B("category"),children:gh.map(O=>i.jsx("option",{value:O,children:O},O))})]}),i.jsxs("label",{className:"editor-info-panel__field editor-info-panel__field--inline",children:[i.jsx("span",{children:"Label"}),i.jsx("input",{type:"checkbox",checked:y.labelEnabled!==!1,onChange:O=>f("labelEnabled",O.target.checked)}),i.jsx("small",{children:"Show region title on map"})]}),i.jsxs("label",{className:"editor-info-panel__field",children:[i.jsx("span",{children:"Opacity"}),i.jsx("input",{type:"number",min:"0",max:"1",step:"0.05",value:y.opacity??.3,onChange:B("opacity")})]}),i.jsxs("label",{className:"editor-info-panel__field editor-info-panel__field--inline",children:[i.jsx("span",{children:"Scale With Zoom"}),i.jsx("input",{type:"checkbox",checked:y.labelScaleWithZoom!==!1,onChange:H("labelScaleWithZoom")})]}),i.jsxs("label",{className:"editor-info-panel__field",children:[i.jsx("span",{children:"Vertical Text Size"}),i.jsx("input",{type:"range",min:"0.25",max:"3",step:"0.05",value:y.labelSize??1,onChange:B("labelSize")})]}),i.jsxs("label",{className:"editor-info-panel__field",children:[i.jsx("span",{children:"Label Width"}),i.jsx("input",{type:"range",min:"0.4",max:"2.4",step:"0.05",value:y.labelWidth??1,onChange:B("labelWidth")})]}),i.jsxs("label",{className:"editor-info-panel__field",children:[i.jsx("span",{children:"Label Offset X"}),i.jsx("input",{type:"range",min:"-400",max:"400",step:"5",value:y.labelOffsetX??0,onChange:B("labelOffsetX")})]}),i.jsxs("label",{className:"editor-info-panel__field",children:[i.jsx("span",{children:"Label Offset Y"}),i.jsx("input",{type:"range",min:"-400",max:"400",step:"5",value:y.labelOffsetY??0,onChange:B("labelOffsetY")})]}),i.jsxs("div",{className:"editor-info-panel__field",children:[i.jsx("span",{children:"Merge Regions"}),w?i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsxs("select",{value:x,onChange:O=>E(O.target.value),style:{flex:1,borderRadius:"8px",padding:"0.45rem 0.5rem",border:"1px solid rgba(255,255,255,0.25)",background:"rgba(10,16,30,0.8)",color:"#f8fafc"},children:[i.jsx("option",{value:"",children:"Select region"}),V.map(O=>i.jsx("option",{value:O.id,children:O.name||O.id},O.id))]}),i.jsx("button",{type:"button",className:"panel-button panel-button--danger",onClick:()=>{E(""),k(!1)},children:"Cancel"})]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsx("button",{type:"button",className:"panel-button",disabled:!x,onClick:()=>{x&&b&&(b(y.id,x),E(""),k(!1))},children:"Merge Selected"}),i.jsx("button",{type:"button",className:"panel-button panel-button--ghost",onClick:()=>k(!1),children:"Back"})]}),i.jsx("small",{children:"Merging keeps this region's settings and removes the other. Use Back to exit without merging."})]}):i.jsx("button",{type:"button",className:"panel-button",onClick:()=>k(!0),children:"Merge Another Region"})]}),i.jsxs("div",{className:"editor-info-panel__actions",children:[i.jsx("button",{type:"button",className:"panel-button",onClick:()=>p?.(y.id),children:"Close"}),i.jsx("button",{type:"button",className:"panel-button panel-button--danger",onClick:()=>m?.(y.id),children:"Delete Region"})]})]})]})}const Ca={HOME:"home",MARKERS:"markers",REGIONS:"regions"};function Zx({isEditorMode:r,markerPalette:h,markerToolbox:f,locationEditor:m,regions:p=[],activeRegionId:b,onSelectRegion:j,onFocusRegion:C,onDeleteRegion:y,onRegionFieldChange:x,onMergeRegion:E,onStartSubregion:w,onCancelSubregion:k,regionDraftTargetId:M,canAutoSave:B=!1,isRegionMode:H,onToggleRegionMode:V,regionDraftPoints:O=[],onFinishRegion:D,onResetRegionDraft:q,canAssignSelection:ae=!1,onAssignSelection:F,selectedRegionName:xe="",selectedLocationName:J=""}){const[ce,U]=v.useState(Ca.HOME),[be,we]=v.useState("palette"),[Ae,He]=v.useState(360),[qe,_e]=v.useState(()=>new Set),A=Bl.useRef(!1),K=oe=>{oe.preventDefault(),A.current=!0;const he=oe.clientX,ge=Ae,ye=Se=>{if(!A.current)return;const Be=Se.clientX-he,Je=Math.min(Math.max(ge+Be,280),520);He(Je)},ke=()=>{A.current=!1,window.removeEventListener("mousemove",ye),window.removeEventListener("mouseup",ke)};window.addEventListener("mousemove",ye),window.addEventListener("mouseup",ke)};v.useEffect(()=>{r||U(Ca.HOME)},[r]);const le=v.useMemo(()=>p.length?`${p.length} region${p.length===1?"":"s"}`:"No regions yet",[p]);if(!r)return null;const je=()=>i.jsxs("div",{className:"editor-side-panel__home-grid",children:[i.jsxs("button",{type:"button",className:"editor-side-panel__home-card",onClick:()=>U(Ca.MARKERS),children:[i.jsx("span",{className:"editor-side-panel__home-eyebrow",children:"Tools"}),i.jsx("strong",{children:"Markers"}),i.jsx("p",{children:"Drop, edit, and manage icons on the map."})]}),i.jsxs("button",{type:"button",className:"editor-side-panel__home-card",onClick:()=>U(Ca.REGIONS),children:[i.jsx("span",{className:"editor-side-panel__home-eyebrow",children:"Tools"}),i.jsx("strong",{children:"Regions"}),i.jsx("p",{children:"Create areas, adjust colors, and assign markers."})]}),i.jsxs("div",{className:"editor-side-panel__home-card editor-side-panel__home-card--disabled",children:[i.jsx("span",{className:"editor-side-panel__home-eyebrow",children:"Coming Soon"}),i.jsx("strong",{children:"World Settings"}),i.jsx("p",{children:"Shared editor presets and automation will live here."})]})]}),Z=()=>i.jsxs("div",{className:"editor-side-panel__section",children:[i.jsxs("div",{className:"editor-side-panel__tabs editor-side-panel__tabs--sub",children:[i.jsx("button",{type:"button",className:be==="palette"?"active":"",onClick:()=>we("palette"),children:"Palette"}),i.jsx("button",{type:"button",className:be==="data"?"active":"",onClick:()=>we("data"),children:"Data"}),i.jsx("button",{type:"button",className:be==="edit"?"active":"",onClick:()=>we("edit"),children:"Edit"})]}),i.jsxs("div",{className:"editor-side-panel__section-body",children:[be==="palette"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"editor-side-panel__section-header",children:[i.jsx("h3",{children:"Marker Palette"}),i.jsx("p",{children:"Select a category and drag icons into place."})]}),h]}),be==="data"&&f&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"editor-side-panel__section-header",children:[i.jsx("h3",{children:"Data"}),i.jsx("p",{children:"Import or export marker data."})]}),f]}),be==="edit"&&m&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"editor-side-panel__section-header",children:[i.jsx("h3",{children:"Edit Marker"}),i.jsx("p",{children:"Update the highlighted marker's details."})]}),m]})]})]}),T=()=>i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"editor-side-panel__section",children:i.jsxs("div",{className:"editor-side-panel__section-body",children:[i.jsx("div",{className:"editor-side-panel__actions-grid",children:i.jsxs("article",{className:"editor-side-panel__action-card",children:[i.jsxs("header",{children:[i.jsx("h4",{children:"Create / Edit Regions"}),i.jsx("p",{children:"Enable region mode to plot new areas or detached parts."})]}),i.jsx("button",{type:"button",className:"toolbox-button",onClick:V,disabled:!B,children:H?"Exit Region Mode":"Start Region Mode"}),H&&i.jsxs("div",{className:"editor-side-panel__region-draft",children:[i.jsxs("span",{children:["Draft points: ",O.length]}),i.jsxs("div",{children:[i.jsx("button",{type:"button",className:"toolbox-button",onClick:D,disabled:O.length<3,children:"Finish"}),i.jsx("button",{type:"button",className:"toolbox-button toolbox-button--ghost",onClick:q,children:"Clear"})]})]})]})}),i.jsxs("div",{className:"editor-side-panel__section-header",children:[i.jsx("h3",{children:"Regions"}),i.jsx("p",{children:le})]}),i.jsxs("div",{className:"region-list custom-scrollbar",children:[p.length===0&&i.jsx("p",{className:"region-list__empty",children:"No regions yet. Start region mode to add one."}),p.map(oe=>i.jsxs("div",{className:`region-item ${b===oe.id?"region-item--active":""}`,children:[i.jsxs("button",{type:"button",className:"region-item__select",onClick:()=>{j(oe.id),_e(he=>{const ge=new Set(he);return ge.has(oe.id)?ge.delete(oe.id):ge.add(oe.id),ge})},children:[i.jsx("span",{className:"region-item__color",style:{backgroundColor:oe.color||"#f97316"}}),oe.name]}),i.jsxs("div",{className:"region-item__actions",children:[i.jsx("button",{type:"button",onClick:()=>C(oe.id),children:"Focus"}),i.jsx("button",{type:"button",onClick:()=>y(oe.id),children:"Delete"})]}),qe.has(oe.id)&&i.jsx("div",{className:"region-item__details",children:i.jsx(Hx,{region:oe,isOpen:!0,onFieldChange:(he,ge,ye)=>x?.(ge,ye,he),onDelete:he=>y(he),onClose:()=>_e(he=>{const ge=new Set(he);return ge.delete(oe.id),ge}),onMergeRegion:(he,ge)=>E?.(he,ge)})})]},oe.id))]})]})}),ae&&i.jsx("div",{className:"editor-side-panel__section",children:i.jsxs("button",{type:"button",className:"assign-region-button",onClick:F,children:["Assign ",J||"marker"," to ",xe||"region"]})})]}),$=()=>ce===Ca.MARKERS?Z():ce===Ca.REGIONS?T():je();return i.jsxs("aside",{className:"editor-side-panel","aria-label":"Map editor panel",style:{width:`${Ae}px`},children:[i.jsx("div",{className:"editor-side-panel__resizer",onMouseDown:K}),i.jsxs("header",{className:"editor-side-panel__header",children:[i.jsxs("div",{children:[i.jsx("p",{className:"editor-side-panel__label",children:"Editor Mode"}),i.jsx("h2",{children:"World Builder"})]}),i.jsxs("div",{className:"editor-side-panel__tabs",children:[i.jsx("button",{type:"button",className:ce===Ca.HOME?"active":"",onClick:()=>U(Ca.HOME),children:"Home"}),i.jsx("button",{type:"button",className:ce===Ca.MARKERS?"active":"",onClick:()=>U(Ca.MARKERS),children:"Markers"}),i.jsx("button",{type:"button",className:ce===Ca.REGIONS?"active":"",onClick:()=>U(Ca.REGIONS),children:"Regions"})]})]}),i.jsx("div",{className:"editor-side-panel__body custom-scrollbar",children:$()})]})}const qx=[{key:"city",label:"Cities"},{key:"dungeon",label:"Dungeons"},{key:"ruins",label:"Ruins"},{key:"town",label:"Towns"},{key:"landmark",label:"Landmarks"},{key:"npc",label:"NPCs"},{key:"custom",label:"Custom"},{key:"generic",label:"Other"}],Ix=[{key:"snow",label:"Snow"},{key:"leaves",label:"Leaves"},{key:"embers",label:"Embers"},{key:"magic",label:"Magic Particles"},{key:"weather",label:"Weather Overlays"}];function xc({title:r,children:h}){return i.jsxs("section",{className:"filter-hover-tab__section",children:[i.jsx("h4",{children:r}),i.jsx("div",{className:"filter-hover-tab__grid",children:h})]})}function fs({label:r,checked:h,onChange:f}){return i.jsxs("label",{className:"filter-hover-tab__toggle",children:[i.jsx("input",{type:"checkbox",checked:h,onChange:m=>f(m.target.checked)}),i.jsx("span",{children:r})]})}function Gx({isOpen:r=!1,onToggleOpen:h=()=>{},showMarkers:f,markerFilters:m={},onToggleMarkers:p,onToggleMarkerCategory:b,showRegions:j,onToggleRegions:C,particleFilters:y={},onToggleParticle:x}){const{cloudsEnabled:E,fogEnabled:w,vignetteEnabled:k,heatmapMode:M,setCloudsEnabled:B,setFogEnabled:H,setVignetteEnabled:V,setHeatmapMode:O}=Pg(),D=M!=="none",q=()=>{O(D?"none":"population")};return i.jsx("div",{className:`filter-hover-tab ${r?"filter-hover-tab--open":""}`,"aria-label":"Map filters",children:i.jsxs("div",{className:"filter-hover-tab__panel",role:"region","aria-hidden":!r,children:[i.jsxs(xc,{title:"Markers",children:[i.jsx(fs,{label:"Show all markers",checked:f,onChange:p}),qx.map(ae=>i.jsx(fs,{label:ae.label,checked:m[ae.key]!==!1,onChange:F=>b(ae.key,F)},ae.key))]}),i.jsx(xc,{title:"Regions",children:i.jsx(fs,{label:"Show regions",checked:j,onChange:C})}),i.jsx(xc,{title:"Particles",children:Ix.map(ae=>i.jsx(fs,{label:ae.label,checked:y[ae.key]!==!1,onChange:F=>x(ae.key,F)},ae.key))}),i.jsxs(xc,{title:"Map Effects",children:[i.jsx(fs,{label:"Fog",checked:w,onChange:ae=>H(ae)}),i.jsx(fs,{label:"Clouds",checked:E,onChange:ae=>B(ae)}),i.jsx(fs,{label:"Vignette",checked:k,onChange:ae=>V(ae)}),i.jsx(fs,{label:"Heatmap",checked:D,onChange:q})]})]})})}function Vx(r=[],h={}){const{knownTypes:f=vx,locationIds:m=[]}=h,p=Array.isArray(r)?r:[],b=new Set,j=new Set;let C=0;p.forEach(O=>{const D=O?.id;if(D==null||D===""){C+=1;return}const q=String(D);b.has(q)?j.add(q):b.add(q)});const y=new Set((f||[]).map(O=>String(O).toLowerCase())),x=p.filter(O=>{const D=String(O?.type||"").toLowerCase();return D?y.size?!y.has(D):!1:!0}).map(O=>O?.id||"(missing id)"),E=p.filter(O=>!O?.title).map(O=>O?.id||"(missing id)"),w=p.filter(O=>!O?.summary).map(O=>O?.id||"(missing id)"),k=new Set((m||[]).map(O=>String(O))),M=p.filter(O=>O?.mapLocationId!==null&&O?.mapLocationId!==void 0&&!k.has(String(O.mapLocationId))).map(O=>O?.id||String(O?.mapLocationId)),B=C+j.size+x.length+E.length+w.length+M.length;let H="ok";C||j.size?H="error":(x.length||E.length||w.length||M.length)&&(H="warn");const V=p.length?`${p.length} entries; missing ids=${C}; duplicates=${j.size}; unknown types=${x.length}; missing titles=${E.length}; missing summaries=${w.length}; broken location refs=${M.length}`:"No content entries loaded.";return{status:p.length?H:"warn",message:V,details:{missingIds:C,duplicateIds:Array.from(j),unknownTypes:x,missingTitles:E,missingSummaries:w,badReferences:M,issueCount:B}}}const Yx=[{id:3,name:"New City",type:"city",iconKey:"city-gold",lat:1756.0650955576998,lng:3728.0286197132973,x:1756.0650955576998,y:3728.0286197132973,description:"EEEEEEEEE",category:"City",tags:[],regionId:null,glowColor:"#F7B267"},{id:4,name:"Elverdeen",type:"city",iconKey:"city-gold",lat:2025.2667108661888,lng:3491.4714675071104,x:2025.2667108661888,y:3491.4714675071104,description:"",category:"City",tags:[],regionId:null,glowColor:"#F7B267"},{id:6,name:"New Landmark",type:"landmark",iconKey:"landmark-spire",lat:1727.9970735273573,lng:1703.9943215214932,x:1718.5013656101964,y:1688.6999038528006,description:"",category:"Landmark",tags:[],regionId:null,glowColor:"#FFDAB9"},{id:8,name:"New City",type:"city",iconKey:"city-gold",lat:2281.6840983741195,lng:2971.7851213461317,x:2281.6840983741195,y:2971.7851213461317,description:"",category:"City",tags:[],regionId:null,glowColor:"#F7B267"},{id:9,name:"New Gilded City",type:"city",iconKey:"city-gold",lat:2609.7062798096904,lng:2260.329564201985,x:2609.7062798096904,y:2260.329564201985,description:"",category:"City",tags:[],regionId:null,glowColor:"#F7B267"},{id:10,name:"New Abyss Dungeon",type:"dungeon",iconKey:"dungeon-abyss",lat:2713.94564143529,lng:1913.8802411174543,x:2713.94564143529,y:1913.8802411174543,description:"Hello There",category:"Dungeon",tags:[],regionId:null,glowColor:"#8E7CC3"},{id:11,name:"New Azure Port",type:"city",iconKey:"port-azure",lat:1947.6926748142037,lng:4090.8052655876722,x:1947.6926748142037,y:4090.8052655876722,description:"",category:"City",tags:[],regionId:null,glowColor:"#F7B267"},{id:12,name:"Ember Vault",type:"dungeon",iconKey:"dungeon-ember",lat:1400,lng:1800,x:1400,y:1800,description:"A vault suffused with auroral embers.",category:"Dungeon",tags:[],regionId:null,glowColor:"#f59e0b",secretId:"aurora-ember"},{id:13,name:"Silent Stacks",type:"city",iconKey:"city-gold",lat:1600,lng:1900,x:1600,y:1900,description:"A hidden annex of the archivists.",category:"City",tags:[],regionId:null,glowColor:"#fcd34d",secretId:"silent-archive"},{id:14,name:"Gilded Horizon Outpost",type:"landmark",iconKey:"landmark-obelisk",lat:1800,lng:2100,x:1800,y:2100,description:"An outpost that glows when the horizon turns gold.",category:"Landmark",tags:[],regionId:null,glowColor:"#fbbf24",secretId:"gilded-horizon"}],Jd={locations:Yx},Zg=(r,h,f)=>Math.min(Math.max(r,h),f),qg="/p15/",$x=`${qg}icons/cities/`,bc="http://localhost:4000/api",Fp=()=>Jd.map(r=>({...r}));delete Ea.Icon.Default.prototype._getIconUrl;Ea.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const Ul=[{id:"city",label:"City",glowColor:"#F7B267"},{id:"town",label:"Town",glowColor:"#74c2e1"},{id:"dungeon",label:"Dungeon",glowColor:"#8E7CC3"},{id:"landmark",label:"Landmark",glowColor:"#FFDAB9"}],Hl={id:"generic",label:"Generic",glowColor:"#9ca3af"},Fx=Ul.reduce((r,h)=>({...r,[h.id]:h}),{[Hl.id]:Hl});[...Ul.map(r=>({id:r.id,label:r.label})),(Hl.id,Hl.label)];const Dl={city:"city-gold",town:"town-oak",dungeon:"dungeon-abyss",landmark:"landmark-spire",generic:"city-gold"},Kx=[{iconKey:"city-gold",label:"Gilded City",type:"city"},{iconKey:"city-blue",label:"Azure City",type:"city"},{iconKey:"city-crimson",label:"Crimson City",type:"city"},{iconKey:"city-emerald",label:"Emerald City",type:"city"},{iconKey:"town-oak",label:"Oak Town",type:"town"},{iconKey:"town-harbor",label:"Harbor Town",type:"town"},{iconKey:"town-river",label:"River Town",type:"town"},{iconKey:"dungeon-abyss",label:"Abyss Dungeon",type:"dungeon"},{iconKey:"dungeon-ember",label:"Ember Dungeon",type:"dungeon"},{iconKey:"landmark-spire",label:"Sun Spire",type:"landmark"},{iconKey:"landmark-obelisk",label:"Obelisk",type:"landmark"},{iconKey:"port-azure",label:"Azure Port",type:"city"},{iconKey:"port-sunset",label:"Sunset Port",type:"city"},{iconKey:"citadel-iron",label:"Iron Citadel",type:"city"},{iconKey:"citadel-sun",label:"Sun Citadel",type:"city"},{iconKey:"village-meadow",label:"Meadow Village",type:"town"},{iconKey:"village-sand",label:"Sand Village",type:"town"},{iconKey:"camp-northern",label:"Northern Camp",type:"landmark"},{iconKey:"camp-jungle",label:"Jungle Camp",type:"landmark"},{iconKey:"academy-star",label:"Star Academy",type:"landmark"}],Xx=gh.map(r=>({id:r,label:r.charAt(0).toUpperCase()+r.slice(1)})),Qx=()=>Xx.reduce((r,h)=>(r[h.id]=!0,r),{}),Kp=r=>!r||typeof r!="string"?Hc:r.toLowerCase(),vh=r=>Dl[r]||Dl.generic,_h=r=>{if(!r)return Hl;const h=typeof r=="string"?r.toLowerCase():r;return Fx[h]||Hl},Lc=r=>r.iconKey||vh(r.type),$r=r=>`${$x}${r}.png`,eh=r=>{const h=_h(r.type),f=r.iconKey||vh(h.id),m=r.lat??r.x??0,p=r.lng??r.y??0;return{id:r.id,name:r.name||`${h.label}`,type:h.id,iconKey:f,lat:m,lng:p,x:r.x??m,y:r.y??p,description:r.description??"",category:r.category??h.label,tags:Array.isArray(r.tags)?r.tags:[],regionId:r.regionId??null,glowColor:r.glowColor||h.glowColor}},Hr=r=>r.map(h=>eh(h)),Wx=r=>{const h=(r||"").toLowerCase();return["city","town","dungeon","ruins","landmark","npc"].includes(h)?h:h==="generic"?"generic":"custom"},Jx=({paletteItem:r,activeTypeId:h})=>{if(r)return{typeId:r.type,label:r.label,iconKey:r.iconKey};if(h){const f=_h(h);return{typeId:f.id,label:f.label,iconKey:vh(f.id)}}return null},Fr=256,eb=0,Ig=5,Xp=7,Qp=3,Gg=Fr*20,yh=Fr*15,tb=[yh/2,Gg/2],nb={right:Fr*.8,bottom:Fr*.8},ab=`${qg}tiles/{z}/{x}/{y}.jpg`,jc=200,ib=.25,sb=.5,lb=100,Wp=Math.pow(2,Ig),rb=Ea.extend({},Ea.CRS.Simple,{scale:r=>Math.pow(2,r)/Wp,zoom:r=>Math.log(r*Wp)/Math.LN2,transformation:new Ea.Transformation(1,0,-1,yh)});let Jp=!1;function ob(){const r=mh();return v.useEffect(()=>{const h=f=>{const m=r.getCenter();switch(f.key){case"ArrowUp":case"w":case"W":r.panTo([m.lat-jc,m.lng]);break;case"ArrowDown":case"s":case"S":r.panTo([m.lat+jc,m.lng]);break;case"ArrowLeft":case"a":case"A":r.panTo([m.lat,m.lng-jc]);break;case"ArrowRight":case"d":case"D":r.panTo([m.lat,m.lng+jc]);break}};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[r]),null}function cb(){const r=mh();return i.jsxs("div",{className:"zoom-controls",children:[i.jsx("button",{className:"zoom-button",type:"button","aria-label":"Zoom in",onClick:()=>r.zoomIn(),children:"+"}),i.jsx("button",{className:"zoom-button",type:"button","aria-label":"Zoom out",onClick:()=>r.zoomOut(),children:"-"})]})}function ub({isEditorMode:r,selectedTypeId:h,onSelectType:f,jsonBuffer:m,onJsonChange:p,onExportJson:b,onImportJson:j,importError:C,showTypeButtons:y=!0}){if(!r)return null;const x=Ul.find(E=>E.id===h);return i.jsxs("div",{className:"editor-toolbox","aria-label":"Editor toolbox",children:[i.jsxs("div",{className:"editor-toolbox__header",children:[i.jsx("p",{children:"Editor Toolbox"}),y&&i.jsx("span",{className:"editor-toolbox__status",children:x?`Placing: ${x.label}`:"Select a marker type"})]}),y&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"editor-toolbox__buttons",children:Ul.map(E=>i.jsx("button",{type:"button",className:`toolbox-button ${h===E.id?"toolbox-button--active":""}`,onClick:()=>f(h===E.id?null:E.id),children:E.label},E.id))}),x&&i.jsxs("p",{className:"editor-toolbox__hint",children:["Click anywhere on the map to place a ",x.label,"."]})]}),i.jsxs("div",{className:"editor-toolbox__data",children:[i.jsxs("div",{className:"editor-toolbox__data-actions",children:[i.jsx("button",{type:"button",className:"toolbox-button toolbox-button--ghost",onClick:b,children:"Export JSON"}),i.jsx("button",{type:"button",className:"toolbox-button toolbox-button--primary",onClick:j,children:"Import JSON"})]}),i.jsx("textarea",{className:"editor-toolbox__textarea",placeholder:"Paste JSON array here...",value:m,onChange:E=>p(E.target.value),rows:6}),C&&i.jsx("p",{className:"editor-toolbox__error",children:C})]})]})}function db({isEnabled:r,onPlaceMarker:h}){return Xd("click",f=>{r&&h(f.latlng)}),null}function hb({isActive:r,onAddPoint:h,onFinish:f}){return Xd("click",m=>{r&&h(m.latlng)}),Xd("dblclick",m=>{r&&(m.originalEvent?.preventDefault(),f())}),null}function fb({location:r,onLocationClick:h,isSelected:f,isEditorMode:m,onDragEnd:p,zoomLevel:b,resolveIcon:j}){const[C,y]=v.useState(!1),x=(()=>{const H=1+(b-4)*.08;return Zg(36*H,20,64)})(),E=$r(Dl.generic),k=(j?j(r):{src:$r(Lc(r))})?.src||E,M=(r.name||"").replace(/"/g,"&quot;");return i.jsx(zg,{position:[r.lat,r.lng],draggable:m,icon:Ea.divIcon({className:`custom-marker custom-marker--${r.type} ${f?"custom-marker--selected":""}`,html:`
          <div class="custom-marker__wrapper ${C?"is-hovered":""}">
            <img src="${k}" alt="${M}"
              class="custom-marker__image" loading="lazy"
              style="width:${x}px;height:${x}px;"
              onerror="this.onerror=null;this.dataset.missing='1';this.src='${E}'" />
          </div>
        `,iconSize:[x,x],iconAnchor:[x/2,x]}),eventHandlers:{mouseover:()=>y(!0),mouseout:()=>y(!1),click:()=>h(r),dragend:B=>{if(!m||!p)return;const{lat:H,lng:V}=B.target.getLatLng();p(r.id,{lat:H,lng:V})}},children:C&&i.jsx(sx,{children:i.jsx("div",{className:"location-popup",children:i.jsx("h3",{children:r.name})})})})}function mb({isEditorMode:r=!1,filtersOpen:h=!1,onToggleFilters:f}){const{role:m,user:p}=Cn(),{cloudsEnabled:b,fogEnabled:j,vignetteEnabled:C,heatmapMode:y,intensities:x,setIntensity:E}=Pg(),{locations:w,setLocations:k,selectedLocationId:M,selectLocation:B}=Uc(),{regions:H,setRegions:V,selectedRegionId:O,selectRegion:D}=Wr(),{entries:q,loading:ae,error:F,issues:xe}=Hg(),[J,ce]=v.useState(null),[U,be]=v.useState(null),[we,Ae]=v.useState(null),[He,qe]=v.useState(""),[_e,A]=v.useState(""),[K,le]=v.useState(()=>!Jp),[je,Z]=v.useState(null),[T,$]=v.useState(2),[oe,he]=v.useState(!1),[ge,ye]=v.useState([]),[ke,Se]=v.useState(null),[Be,Je]=v.useState(!0),[Re,We]=v.useState({city:!0,town:!0,dungeon:!0,ruins:!0,landmark:!0,npc:!0,custom:!0,generic:!0}),[Ct,Kt]=v.useState(!0),[Gt,Yn]=v.useState(()=>Qx()),[En,ca]=v.useState({snow:!0,leaves:!0,embers:!0,magic:!0,weather:!0}),Xt=v.useRef(null),cn=v.useRef("[]"),tn=v.useRef(!1),xn=v.useRef(null),ua=v.useRef("[]"),Bt=v.useRef(null),$n=v.useRef(new Set),[da,ct]=v.useState(""),[zn,Ai]=v.useState({}),[Ia,li]=v.useState(0),[La,Rn]=v.useState({}),Pt=m==="admin",pn=tb,nn=2;Ul.find(X=>X.id===U);const kt=v.useMemo(()=>JSON.stringify(w),[w]),ki=v.useMemo(()=>JSON.stringify(H),[H]),un=m==="editor"||m==="admin",Fn=v.useMemo(()=>Be?w.filter(X=>{const ue=Wx(X.type);return Re[ue]!==!1}):[],[w,Re,Be]),dn=v.useMemo(()=>!Ct&&!oe?[]:H.filter(X=>{if(oe&&X.id===O)return!0;const ue=Kp(X.category);return Gt[ue]!==!1}),[H,Gt,oe,O,Ct]),an=dn.some(X=>X.labelEnabled!==!1),gt=v.useCallback((X,ue)=>{Ai(re=>{const ve=re[X]||{},Ce={...ve,...ue};return ve.status===Ce.status&&ve.message===Ce.message?re:{...re,[X]:Ce}})},[]),Ga=()=>{$n.current=new Set,Rn({}),li(X=>X+1),gt("marker-icons",{status:"pending",message:"Rechecking icon sprites..."})},Aa=(X,ue)=>{const re=Zg(ue,0,1.25);E(X,re)},ms=v.useCallback(X=>{const ue=Lc(X),re=La[ue];return re?.status==="ok"?{key:ue,src:re.src}:re?.status==="error"?{key:ue,src:$r(Dl.generic),fallback:!0}:{key:ue,src:$r(ue)}},[La]),ha=v.useMemo(()=>{const X=nb;return Ea.latLngBounds([-204.8,-204.8],[yh+X.bottom,Gg+X.right])},[]),ka=.95;v.useEffect(()=>{let X=!0;return(async()=>{try{const re=await fetch(`${bc}/locations`),ve=await re.json();if(!re.ok)throw new Error(ve.error||"Failed to load locations.");const Ce=Array.isArray(ve.locations)?Hr(ve.locations):Hr(Fp());X&&(k(Ce),cn.current=JSON.stringify(Ce),tn.current=!0)}catch(re){if(console.error("Unable to load locations",re),X){const ve=Hr(Fp());k(ve),cn.current=JSON.stringify(ve),tn.current=!0}}})(),()=>{X=!1}},[]),v.useEffect(()=>{let X=!0;return(async()=>{try{const re=await fetch(`${bc}/regions`),ve=await re.json();if(!re.ok)throw new Error(ve.error||"Failed to load regions.");if(X){const Ce=Array.isArray(ve.regions)?ve.regions.map($p):[];V(Ce),ua.current=JSON.stringify(Ce)}}catch(re){console.error("Unable to load regions",re),X&&(V([]),ua.current="[]")}})(),()=>{X=!1}},[V]),v.useEffect(()=>{Yn(X=>{let ue=!1;const re={...X};return H.forEach(ve=>{const Ce=Kp(ve.category);Ce in re||(re[Ce]=!0,ue=!0)}),ue?re:X})},[H]),v.useEffect(()=>{const X=new Set(w.map(ue=>Lc(ue)));X.add(Dl.generic),X.forEach(ue=>{if(!ue||$n.current.has(ue))return;$n.current.add(ue);const re=$r(ue),ve=new Image;ve.onload=()=>{Rn(Ce=>Ce[ue]?.status==="ok"?Ce:{...Ce,[ue]:{status:"ok",src:re}})},ve.onerror=()=>{Rn(Ce=>Ce[ue]?.status==="error"?Ce:{...Ce,[ue]:{status:"error",src:re}})},ve.src=re})},[w,Ia]),v.useEffect(()=>{const X=new Set(w.map(Qe=>Lc(Qe)));X.add(Dl.generic);let ue=0,re=0,ve=0;X.forEach(Qe=>{const Qn=La[Qe]?.status;Qn==="ok"?re+=1:Qn==="error"?ue+=1:ve+=1});const Ce=`${w.length} markers; ${re}/${X.size} icons loaded${ue?`; ${ue} using fallback`:""}${ve?`; ${ve} pending`:""}`;gt("marker-icons",{status:ue?"warn":ve?"pending":"ok",message:Ce})},[w,La,gt]),v.useEffect(()=>{if(ae){gt("content",{status:"pending",message:"Loading content entries..."});return}if(!w.length){gt("content",{status:"pending",message:"Waiting for map data to validate content references."});return}const X=w.map(ve=>ve.id),{status:ue,message:re}=Vx(q,{locationIds:X});gt("content",{status:ue,message:re})},[q,ae,w,gt]),v.useEffect(()=>{if(!xe)return;const X=xe.unreadableFiles||[];if(X.length){gt("content-importer",{status:"warn",message:`Unreadable files: ${X.map(ve=>ve.path).join(", ")}`});return}const ue=xe.issueCount||0,re=ue?xe.status||"warn":"ok";gt("content-importer",{status:re,message:ue?`Importer reported ${ue} issues across ${xe.entryCount||q.length} entries.`:`Importer validated ${xe.entryCount||q.length} entries.`})},[xe,q.length,gt]),v.useEffect(()=>{F&&gt("content",{status:"warn",message:`Using fallback content: ${F}`})},[F,gt]);const Kn=X=>{if(B(X.id),r){ce({id:X.id,draft:{name:X.name||"",type:X.type||"",description:X.description||""}});return}const ue="/p15/";window.location.href=`${ue}location/${X.id}`},ps=()=>B(null),Mi=(X,ue)=>{k(re=>re.map(ve=>ve.id===X?{...ve,lat:ue.lat,lng:ue.lng}:ve))},fa=X=>{ye(ue=>[...ue,[X.lng,X.lat]])},Va=X=>{if(!je)return;const ue=H.find(Mt=>Mt.id===X);if(!ue)return;const ve=Ot(ue).flat();if(!ve.length)return;const Ce=ve.map(([Mt,Qe])=>Ea.latLng(Qe,Mt));je.fitBounds(Ea.latLngBounds(Ce).pad(.2))},Ot=v.useCallback(X=>{if(!X)return[];const ue=Array.isArray(X.points)&&X.points.length>=3?[X.points]:[],re=Array.isArray(X.parts)?X.parts.filter(ve=>Array.isArray(ve)&&ve.length>=3):[];return[...ue,...re]},[]),Me=(X,ue,re)=>{V(ve=>ve.map(Ce=>Ce.id===X?{...Ce,[ue]:ue==="opacity"?Math.min(Math.max(Number(re)||0,0),1):ue==="labelEnabled"?!!re:re}:Ce))},Ma=()=>{ye(X=>{if(X.length<3)return X;if(ke)return V(ve=>ve.map(Ce=>{if(Ce.id!==ke)return Ce;const Mt=Ot(Ce),[Qe,...Qn]=Mt,Yt=Qe?[...Qn,X]:[...Qn];return{...Ce,points:Qe||X,parts:Yt}})),[];const ue=crypto.randomUUID?crypto.randomUUID():`region-${Date.now()}`,re={id:ue,name:"New Region",color:"#f97316",borderColor:"#ea580c",opacity:.3,category:Hc,labelEnabled:!0,points:X.map(([ve,Ce])=>[ve,Ce]),parts:[]};return V(ve=>[...ve,re]),D(ue),[]})},ri=()=>{ye([])},Tn=X=>{!X||!un||(ye([]),Se(X),he(!0),D(X))},Lt=()=>{ye([]),Se(null)},Ut=X=>{Ae(ue=>{const re=ue&&ue.iconKey===X.iconKey?null:X;return be(re?re.type:null),re})},Xn=()=>{un&&he(X=>{const ue=!X;return ue?(Ae(null),be(null),Se(null),ye([]),D(null)):(ye([]),D(null),Se(null)),ue})},I=(X,ue,re=O)=>{re&&Me(re,X,ue)},ie=(X=O)=>{X&&window.confirm("Delete this region?")&&(V(ue=>ue.filter(re=>re.id!==X)),O===X&&D(null))},Ee=X=>{if(r)D(X),ye([]);else{const ue="/p15/";window.location.href=`${ue}region/${X}`}},ee=(X,ue)=>{!X||!ue||X===ue||(V(re=>{const ve=re.find(Yt=>Yt.id===X),Ce=re.find(Yt=>Yt.id===ue);if(!ve||!Ce)return re;const Mt=[...Ot(ve),...Ot(Ce)];if(!Mt.length)return re.filter(Yt=>Yt.id!==ue);const[Qe,...Qn]=Mt;return re.filter(Yt=>Yt.id!==ue).map(Yt=>Yt.id===X?{...Yt,points:Qe,parts:Qn}:Yt)}),D(X),Se(null),ye([]))},Oe=()=>{!sn||!O||k(X=>X.map(ue=>ue.id===sn.id?{...ue,regionId:O}:ue))},Ze=X=>{be(X),X&&Ae(null)},Te=X=>{const ue=Jx({paletteItem:we,activeTypeId:U});if(!ue)return;const re=_h(ue.typeId),ve=w.reduce((Mt,Qe)=>typeof Qe.id=="number"?Math.max(Mt,Qe.id):Mt,0)+1,Ce=eh({id:ve,name:ue.label?`New ${ue.label}`:`New ${re.label}`,type:ue.typeId,iconKey:ue.iconKey,description:"",category:re.label,tags:[],regionId:null,lat:X.lat,lng:X.lng});k(Mt=>[...Mt,Ce]),B(Ce.id),ce({id:Ce.id,draft:{name:Ce.name,type:Ce.type,description:Ce.description}})},Le=X=>{qe(X),A("")},vt=()=>{qe(JSON.stringify(w,null,2)),A("")},Ye=()=>{try{const X=He.trim();if(!X)throw new Error("Please provide JSON to import.");const ue=JSON.parse(X);if(!Array.isArray(ue))throw new Error("JSON must be an array of locations.");const re=ue.map((Ce,Mt)=>({id:typeof Ce.id=="number"?Ce.id:Mt+1,name:Ce.name??`Location ${Mt+1}`,type:Ce.type??"generic",description:Ce.description??"",lore:Ce.lore??"",lat:typeof Ce.lat=="number"?Ce.lat:0,lng:typeof Ce.lng=="number"?Ce.lng:0,glowColor:Ce.glowColor})),ve=Hr(re);k(ve),tn.current=!0,B(null),ce(null),A(""),qe(JSON.stringify(ve,null,2))}catch(X){A(X.message||"Unable to import JSON.")}},rt=v.useCallback(async X=>{if(!p){ct("Please sign in again to save changes.");return}try{const ue=await fetch(`${bc}/locations/save`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({locations:X})}),re=await ue.json();if(!ue.ok)throw new Error(re.error||"Failed to save locations.");tn.current=!0;const ve=Hr(re.locations);k(ve),cn.current=JSON.stringify(ve),ct("")}catch(ue){console.error("Unable to save locations",ue),ct(ue.message||"Unable to save locations right now.")}},[p]),bn=v.useCallback(async X=>{if(p)try{const ue=await fetch(`${bc}/regions/save`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({regions:X})}),re=await ue.json();if(!ue.ok)throw new Error(re.error||"Failed to save regions.");const ve=Array.isArray(re.regions)?re.regions.map($p):[];V(ve),ua.current=JSON.stringify(ve)}catch(ue){console.error("Unable to save regions",ue)}},[p,V]);v.useEffect(()=>{r?B(null):(ce(null),be(null),he(!1),ye([]),D(null))},[r,B,D]),v.useEffect(()=>{if(r)return()=>{he(!1),ye([])}},[r]),v.useEffect(()=>{if(!r){Xt.current&&(clearTimeout(Xt.current),Xt.current=null),cn.current=kt,ct("");return}if(!un){kt!==cn.current&&(ct("Only approved editors can save changes to the shared map."),cn.current=kt);return}if(!p){ct("Please sign in again to save changes.");return}if(ct(""),tn.current){tn.current=!1,cn.current=kt;return}if(kt!==cn.current)return Xt.current&&clearTimeout(Xt.current),Xt.current=setTimeout(()=>{Xt.current=null,rt(w)},400),()=>{Xt.current&&(clearTimeout(Xt.current),Xt.current=null)}},[kt,r,un,rt,w,p]),v.useEffect(()=>{if(!(!un||!p)&&ki!==ua.current)return xn.current&&clearTimeout(xn.current),xn.current=setTimeout(()=>{xn.current=null,bn(H)},500),()=>{xn.current&&(clearTimeout(xn.current),xn.current=null)}},[ki,un,bn,H,p]),v.useEffect(()=>()=>{Xt.current&&clearTimeout(Xt.current),xn.current&&clearTimeout(xn.current)},[]);const sn=w.find(X=>X.id===M)||null,at=H.find(X=>X.id===O)||null,ot=(X,ue)=>{ce(re=>re&&{...re,draft:{...re.draft,[X]:ue}})},ma=()=>{J&&(k(X=>X.map(ue=>ue.id===J.id?eh({...ue,...J.draft}):ue)),ce(null),un||ct("Only approved editors can save changes to the shared map."))},gs=()=>{ce(null)},vs=()=>{if(!J)return;if(!un){ct("Only approved editors can save changes to the shared map.");return}if(!(typeof window>"u"?!0:window.confirm("Are you sure you want to delete this location?")))return;const ue=J.id;k(re=>re.filter(ve=>ve.id!==ue)),ce(null),M===ue&&B(null)},oi=J?.draft??null,Xe=i.jsx(Px,{isEditorMode:r,options:Kx,selectedOption:we,onSelect:Ut,categoryOptions:Ul,groupByCategory:!0}),_t=i.jsx(ub,{isEditorMode:r,selectedTypeId:U,onSelectType:Ze,jsonBuffer:He,onJsonChange:Le,onExportJson:vt,onImportJson:Ye,importError:_e,showTypeButtons:!1}),jn=r?i.jsx(hx,{isOpen:!!J,draft:oi,onFieldChange:ot,onSave:ma,onCancel:gs,canAutoSave:un,saveWarning:da,canDelete:un,onDelete:vs}):null;v.useEffect(()=>{if(!je)return;$(je.getZoom());const X=()=>{$(je.getZoom())};return je.on("zoomend",X),()=>je.off("zoomend",X)},[je]),v.useEffect(()=>{const X=Bt.current;if(!X)return;const ue=Ce=>{Ce.ctrlKey&&Ce.preventDefault()},re=Ce=>{(Ce.ctrlKey||Ce.metaKey)&&["+","-","=","_","0"].includes(Ce.key)&&Ce.preventDefault()},ve=Ce=>Ce.preventDefault();return X.addEventListener("wheel",ue,{passive:!1}),window.addEventListener("keydown",re,{passive:!1}),window.addEventListener("gesturestart",ve,{passive:!1}),window.addEventListener("gesturechange",ve,{passive:!1}),()=>{X.removeEventListener("wheel",ue),window.removeEventListener("keydown",re),window.removeEventListener("gesturestart",ve),window.removeEventListener("gesturechange",ve)}},[]),v.useEffect(()=>{je&&je.invalidateSize()},[je,r]),v.useEffect(()=>{!je||!je.doubleClickZoom||(oe?je.doubleClickZoom.disable():je.doubleClickZoom.enable())},[oe,je]),v.useEffect(()=>{if(!oe)return;const X=ue=>{ue.key==="Escape"&&ye([])};return window.addEventListener("keydown",X),()=>window.removeEventListener("keydown",X)},[oe]),v.useEffect(()=>{if(!je)return;[je.dragging,je.scrollWheelZoom,je.doubleClickZoom,je.boxZoom,je.keyboard,je.touchZoom].forEach(ue=>{ue&&(K&&ue.disable?ue.disable():!K&&ue.enable&&ue.enable())})},[je,K]),v.useEffect(()=>{if(!K)return;const X=ve=>{ve.ctrlKey&&ve.preventDefault()},ue=ve=>{(ve.ctrlKey||ve.metaKey)&&["+","-","=","_","0"].includes(ve.key)&&ve.preventDefault()},re=ve=>{ve.preventDefault()};return window.addEventListener("wheel",X,{passive:!1}),window.addEventListener("keydown",ue,{passive:!1}),window.addEventListener("gesturestart",re,{passive:!1}),window.addEventListener("gesturechange",re,{passive:!1}),()=>{window.removeEventListener("wheel",X),window.removeEventListener("keydown",ue),window.removeEventListener("gesturestart",re),window.removeEventListener("gesturechange",re)}},[K]);const Vt=()=>{Jp=!0,le(!1)};return v.useEffect(()=>{if(je){if(r){const X=Ea.latLngBounds([-1e7,-1e7],[1e7,1e7]);je.setMaxBounds(X),je.options.maxBounds=X,je.options.maxBoundsViscosity=0,je.dragging?.enable();return}ha&&(je.setMaxBounds(ha),je.options.maxBoundsViscosity=ka,je.panInsideBounds(ha,{animate:!1}))}},[je,ha,ka,r]),i.jsxs("div",{className:`map-wrapper ${K?"map-wrapper--locked":""}`,children:[i.jsxs("div",{className:"map-layout",children:[r&&i.jsx(Zx,{isEditorMode:r,markerPalette:Xe,markerToolbox:_t,locationEditor:jn,regions:H,activeRegionId:O,onSelectRegion:D,onFocusRegion:Va,onDeleteRegion:ie,canAutoSave:un,isRegionMode:oe,onToggleRegionMode:Xn,regionDraftPoints:ge,onFinishRegion:Ma,onResetRegionDraft:ri,canAssignSelection:!!(r&&sn&&O),onAssignSelection:Oe,selectedRegionName:at?.name||"",selectedLocationName:sn?.name||"",onRegionFieldChange:I,onMergeRegion:ee,onStartSubregion:Tn,onCancelSubregion:Lt,regionDraftTargetId:ke}),i.jsx("div",{className:"map-layout__canvas",children:i.jsxs("div",{className:"map-container-wrapper",ref:Bt,children:[i.jsxs(ix,{center:pn,zoom:nn,minZoom:Qp,maxZoom:Xp,...r?{}:{maxBounds:ha,maxBoundsViscosity:ka},crs:rb,className:"leaflet-map",scrollWheelZoom:!0,dragging:!0,doubleClickZoom:!0,zoomControl:!1,zoomSnap:ib,zoomDelta:sb,wheelPxPerZoomLevel:lb,whenCreated:Z,style:{height:"100%",width:"100%"},children:[i.jsx(lx,{url:ab,tileSize:Fr,minZoom:Qp,maxZoom:Xp,maxNativeZoom:Ig,minNativeZoom:eb,noWrap:!0,keepBuffer:4}),i.jsx(db,{isEnabled:r&&!J&&!oe&&!!(we||U),onPlaceMarker:Te}),i.jsx(hb,{isActive:r&&oe,onAddPoint:fa,onFinish:Ma}),i.jsx(ob,{}),i.jsx(cb,{}),Fn.map(X=>i.jsx(fb,{location:X,onLocationClick:Kn,isSelected:sn&&sn.id===X.id,isEditorMode:r,onDragEnd:Mi,zoomLevel:T,resolveIcon:ms},X.id)),i.jsx(Ox,{regions:dn,draftPoints:ge,selectedRegionId:O,onRegionClick:Ee,interactionEnabled:!oe,showLabels:an,zoomLevel:T})]}),i.jsx(Cx,{enabled:C,intensity:x.vignette,onDiagnostics:gt}),i.jsx(Ex,{enabled:j,map:je,intensity:x.fog,onDiagnostics:gt}),i.jsx(Tx,{enabled:b,map:je,intensity:x.clouds,onDiagnostics:gt}),i.jsx(Mx,{enabled:y!=="none",map:je,locations:Fn,heatmapMode:y,onDiagnostics:gt}),i.jsx(Dx,{enabled:!0,map:je,containerRef:Bt,onDiagnostics:gt})]})})]}),sn&&i.jsx(rx,{location:sn,onClose:ps}),K&&i.jsx(cx,{onFinish:Vt}),Pt&&i.jsx(Bx,{diagnostics:zn,onRefresh:Ga,intensities:x,onIntensityChange:Aa}),i.jsx(Gx,{isOpen:h,onToggleOpen:f,showMarkers:Be,markerFilters:Re,onToggleMarkers:()=>Je(X=>!X),onToggleMarkerCategory:(X,ue)=>We(re=>({...re,[X]:ue})),showRegions:Ct,onToggleRegions:()=>Kt(X=>!X),particleFilters:En,onToggleParticle:(X,ue)=>ca(re=>({...re,[X]:ue}))})]})}function pb(){const[r,h]=v.useState(!1),[f,m]=v.useState(!1),p=()=>{h(j=>!j)},b=()=>m(j=>!j);return i.jsxs("div",{className:"map-page map-page--full",children:[i.jsxs("div",{className:"map-toolbar",children:[i.jsxs("div",{className:"map-toolbar__brand",children:[i.jsx("div",{className:"map-ribbon__sigil",children:"A"}),i.jsxs("div",{children:[i.jsx("p",{className:"map-eyebrow",children:"World Map"}),i.jsx("h1",{className:"map-title",children:"Azterra"})]})]}),i.jsxs("div",{className:"map-toolbar__actions",children:[i.jsx(Mn,{to:"/about#map",className:"map-link",children:"About this map"}),i.jsx("button",{type:"button",className:`editor-toggle ${r?"editor-toggle--active":""}`,onClick:p,"aria-pressed":r,children:r?"Editing mode":"View mode"}),i.jsx("button",{type:"button",className:"map-filter-toggle",onClick:b,"aria-expanded":f,children:"Filters"})]})]}),i.jsx("div",{className:"map-page__frame",children:i.jsx("div",{className:"map-page__canvas",children:i.jsx(mb,{isEditorMode:r,filtersOpen:f,onToggleFilters:b})})})]})}const gb=`#version 300 es
precision highp float;
uniform float u_time;
uniform vec2 u_resolution;
uniform vec4 u_modA;  // Accepts the modA prop
out vec4 out_color;

void main() {
    vec2 I = gl_FragCoord.xy;
    float t = u_time*0.2, z = 0.0, d = 0.0, s = 0.0;
    float i = 0.0;
    vec4 O = vec4(0.0);

    for(O*=i; i++<8e1; O+=(cos(s+u_modA)+1.0)/d*z) {  // <--- uses uniform
        vec3 p = z * normalize(vec3(I+I,0.0)-vec3(u_resolution, u_resolution.y));
        vec3 a = normalize(cos(vec3(1,2,0)+t-d*8.0));
        p.z += 5.0;
        a = a * dot(a,p) - cross(a,p);

        for(d=1.0; d++<9.0;)
            a += sin(a*d+t).yzx/d;

        z += d = .1*abs(length(p)-3.0) + .04 * abs(s=a.y);
    }
    out_color = tanh(O/3e4);
}
`,vb=`#version 300 es
in vec2 a_position;
void main() {
    gl_Position = vec4(a_position, 0.0, 1.0);
}
`;function eg(r,h,f){const m=r.createShader(h);return r.shaderSource(m,f),r.compileShader(m),r.getShaderParameter(m,r.COMPILE_STATUS)?m:(console.error("Shader compile error:",r.getShaderInfoLog(m)),r.deleteShader(m),null)}function _b(r,h,f){const m=eg(r,r.VERTEX_SHADER,h),p=eg(r,r.FRAGMENT_SHADER,f);if(!m||!p)return null;const b=r.createProgram();return r.attachShader(b,m),r.attachShader(b,p),r.linkProgram(b),r.getProgramParameter(b,r.LINK_STATUS)?(r.deleteShader(m),r.deleteShader(p),b):(console.error("Program link error:",r.getProgramInfoLog(b)),r.deleteProgram(b),null)}function yb(r){const{clientWidth:h,clientHeight:f}=r;return r.width!==h||r.height!==f?(r.width=h,r.height=f,!0):!1}function xb({modA:r=[0,1,2,0]}){const h=v.useRef(null),f=v.useRef(r);return v.useEffect(()=>{f.current=r},[r]),v.useEffect(()=>{const m=h.current;if(!m)return;const p=m.getContext("webgl2",{antialias:!1});if(!p){console.warn("WebGL2 not supported in this browser.");return}const b=_b(p,vb,gb);if(!b)return;p.useProgram(b);const j=p.createBuffer();p.bindBuffer(p.ARRAY_BUFFER,j);const C=new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]);p.bufferData(p.ARRAY_BUFFER,C,p.STATIC_DRAW);const y=p.getAttribLocation(b,"a_position");p.enableVertexAttribArray(y),p.vertexAttribPointer(y,2,p.FLOAT,!1,0,0);const x=p.getUniformLocation(b,"u_time"),E=p.getUniformLocation(b,"u_resolution"),w=p.getUniformLocation(b,"u_modA");let k=performance.now(),M;const B=H=>{const V=(H-k)/1e3;yb(p.canvas),p.viewport(0,0,p.canvas.width,p.canvas.height),p.uniform1f(x,V),p.uniform2f(E,p.canvas.width,p.canvas.height),p.uniform4fv(w,f.current),p.drawArrays(p.TRIANGLES,0,6),M=requestAnimationFrame(B)};return M=requestAnimationFrame(B),()=>{cancelAnimationFrame(M),p.deleteBuffer(j),p.deleteProgram(b)}},[]),i.jsx("canvas",{ref:h,className:"gl-shader-canvas"})}const bb=[{name:"Silverwake Citadel",type:"Capital Stronghold",blurb:"A gleaming fortress where Azterras council gathers. The marble courtyards shimmer beneath the astral veil."},{name:"Evershade Wilds",type:"Primordial Forest",blurb:"Ancient trees whisper rites of the First Druids. Spirits guide travelers who respect the woodland accord."},{name:"Starforged Observatory",type:"Arcane Watchtower",blurb:"A lone spire that tracks the movements of twin moons. Seers interpret omens for guilds across the realm."}];function jb(){return i.jsxs("div",{className:"characters-page almanac-layout custom-scrollbar",children:[i.jsx(xb,{}),i.jsx("div",{className:"sun-overlay","aria-hidden":"true"}),i.jsx("h1",{className:"page-title",children:"Almanac of Azterra"}),i.jsx("section",{className:"almanac-content",children:bb.map(r=>i.jsxs("article",{className:"almanac-card",children:[i.jsxs("header",{children:[i.jsx("p",{className:"almanac-type",children:r.type}),i.jsx("h2",{children:r.name})]}),i.jsx("p",{children:r.blurb})]},r.name))})]})}function wb(){const h=Math.floor(Math.random()*10),f=Math.floor(Math.random()*10),m=Math.floor(Math.random()*10),p=Math.floor(Math.random()*10);return[h,f,m,p]}const Sb=[{id:1,name:"Aelar",title:"The Arcane Sage",race:"Elf",class:"Wizard",level:5,alignment:"Chaotic Good",background:"Sage of the Spire of Echoes, former Arcanum archivist who charts celestial anomalies",hp:31,ac:13,speed:30,stats:{str:8,dex:14,con:12,int:18,wis:15,cha:10},passivePerception:12,inspiration:!1,profBonus:3,skills:["Arcana","History","Investigation"],abilities:["Arcane Recovery","Spellcasting"],spells:["Magic Missile","Shield","Fireball"],equipment:["Amber-tipped staff etched with constellations","Spellbook bound in dragonhide, pages rimed with stasis-ink","Rope","Crystal lens for reading the weave","Starlit chalk for tracing warding circles"],notes:"Wears a blue cloak. Keeps a notebook of dream-fragments and sketched glyphs; refuses to travel without it.",lore:"Aelar spent decades within the Spire of Echoes, studying ancient scrolls that predate the Sundering. His fascination with the arcane is not merely academic; he seeks to understand the very fabric of reality to prevent a catastrophe he saw in a vision. Though often lost in thought, his mastery of the weave is undeniable, capable of bending the elements to his will with a mere whisper. He once froze an avalanche in place to evacuate a mountain pass caravan, then rewove the falling snow into shimmering sigils that guided the travelers to safety. Aelar now wanders Azterra to confirm whether the symbols from his vision match those appearing in ruins across the continent.",sheet:{core:{hitDie:"d6",raceTraits:["Darkvision","Keen Senses","Fey Ancestry","Trance"],classFeatures:["Spellcasting","Arcane Recovery"],backgroundFeature:"Researcher (Sage)",appearance:"Lean elf wrapped in layered scholar's robes, fingers smudged with ink and starlit chalk.",backstory:"Decades within the Spire of Echoes cataloging omens; now hunts matching glyphs across Azterra."},abilityMethod:"Point Buy",abilityScores:{str:8,dex:14,con:12,int:18,wis:15,cha:10},proficiencies:{savingThrows:["Intelligence","Wisdom"],armorWeapons:["Daggers","Quarterstaff","Light crossbows"],tools:["Calligrapher's supplies"],skills:["Arcana","History","Investigation"],languages:["Common","Elvish","Draconic"]},combat:{armorClass:13,initiative:"+2 (Dex)",speed:"30 ft (Elf)",hitPoints:"31",hitDice:"5d6",passivePerception:12,proficiencyBonus:"+3"},attacks:[{name:"Fire Bolt",bonus:"+7",damage:"1d10 fire",tags:["Cantrip","120 ft"]},{name:"Quarterstaff",bonus:"+2",damage:"1d6 bludgeoning",tags:["Melee"]},{name:"Magic Missile",bonus:"Auto",damage:"3 darts / 1d4+1 force each",tags:["Spell"]}],equipmentDetail:{starting:["Amber-tipped staff etched with constellations","Spellbook bound in dragonhide","Explorer's pack","Crystal lens focus"],wealth:"25 gp and assorted arcane inks"},features:{classFeatures:["Spellcasting (rituals)","Arcane Recovery"],racialTraits:["Keen Senses","Fey Ancestry","Trance"],background:"Researcher - knows where to find lore quickly",feats:[]},spellsDetail:{ability:"Intelligence",saveDC:15,attackBonus:"+7",prepared:"9 prepared / ritual casting",known:["Magic Missile","Shield","Fireball"],slots:"1st:4, 2nd:3, 3rd:2"},personality:{traits:["Keeps a meticulous star journal","Soft-spoken until discussing magic"],ideals:["Knowledge prevents catastrophe"],bonds:["Sworn to the mentors of the Spire of Echoes"],flaws:["Overanalyzes when action is needed"]},extras:{languages:["Common","Elvish","Draconic"],inventoryWeight:"42 lb",notes:"Mana hue: deep sapphire. Uses a crystal lens as arcane focus."}}},{id:2,name:"Brog",title:"The Ironbreaker",race:"Half-Orc",class:"Barbarian",level:4,alignment:"Neutral",background:"Outlander",hp:44,ac:15,speed:40,stats:{str:17,dex:13,con:16,int:8,wis:12,cha:9},passivePerception:10,inspiration:!0,profBonus:2,skills:["Athletics","Survival"],abilities:["Rage","Unarmored Defense"],spells:[],equipment:["Greataxe","Javelin (4)","Explorer's Pack"],notes:"Has a scar over left eye.",lore:"Born in the harsh badlands of Karkoth, Brog learned early that strength was the only law that mattered. He earned the name 'Ironbreaker' after shattering a warlord's shield with a single blow. Despite his fearsome reputation, Brog possesses a quiet wisdom about the natural world, respecting the spirits of the land as much as the steel in his hand.",sheet:{core:{hitDie:"d12",raceTraits:["Darkvision","Relentless Endurance","Savage Attacks"],classFeatures:["Rage (+2 damage)","Unarmored Defense"],backgroundFeature:"Wanderer (knows terrain and food sources)",appearance:"Broad-shouldered half-orc with a scarred brow and weathered travel cloak.",backstory:"Raised in the Karkoth badlands; wanders to measure strength against worthy foes."},abilityMethod:"Standard Array",abilityScores:{str:17,dex:13,con:16,int:8,wis:12,cha:9},proficiencies:{savingThrows:["Strength","Constitution"],armorWeapons:["Light/Medium armor","Shields","Simple & martial weapons"],tools:["Drum"],skills:["Athletics","Survival"],languages:["Common","Orc"]},combat:{armorClass:15,initiative:"+1 (Dex)",speed:"40 ft (fast movement)",hitPoints:"44",hitDice:"4d12",passivePerception:10,proficiencyBonus:"+2"},attacks:[{name:"Greataxe",bonus:"+5",damage:"1d12+3 slashing (+2 rage)",tags:["Melee","Heavy","Two-Handed"]},{name:"Javelin",bonus:"+5",damage:"1d6+3 piercing (30/120)",tags:["Thrown"]}],equipmentDetail:{starting:["Greataxe","Javelin (4)","Explorer's Pack","Bedroll"],wealth:"8 gp and carved clan totem"},features:{classFeatures:["Rage (3/day)","Unarmored Defense"],racialTraits:["Relentless Endurance","Savage Attacks","Darkvision"],background:"Wanderer - recalls maps and safe paths",feats:["Prefers Great Weapon Master style feats"]},spellsDetail:{ability:"None",saveDC:"",attackBonus:"",prepared:"",known:["Non-caster"],slots:""},personality:{traits:["Quiet observer of storms","Protective once angered"],ideals:["Strength proves worth"],bonds:["Keeps carved clan totem close"],flaws:["Rushes toward the loudest battle"]},extras:{languages:["Common","Orc"],inventoryWeight:"68 lb",notes:"Prefers open-sky camps; trophies hang from the explorer's pack."}}},{id:3,name:"Celeste",title:"Lightbringer",race:"Human",class:"Cleric",level:5,alignment:"Lawful Good",background:"Acolyte",hp:38,ac:18,speed:30,stats:{str:12,dex:11,con:14,int:12,wis:18,cha:15},passivePerception:15,inspiration:!0,profBonus:3,skills:["Insight","Medicine","Religion"],abilities:["Channel Divinity","Divine Domain"],spells:["Guiding Bolt","Spiritual Weapon","Mass Healing Word"],equipment:["Mace","Shield","Holy Symbol","Chain Mail"],notes:"Carries a small silver bell blessed by her temple.",lore:"Celeste was found on the steps of the Temple of Solara as an infant, bathed in the morning light. Raised by the priesthood, she has dedicated her life to bringing hope to the darkest corners of Azterra. Her faith is unwavering, a beacon that rallies her allies even in the direst of circumstances. It is said that her prayers can turn the tide of battle, calling down the very wrath of the sun.",sheet:{core:{hitDie:"d8",raceTraits:["Versatile","Bonus training from temple"],classFeatures:["Channel Divinity","Divine Domain: Light"],backgroundFeature:"Shelter of the Faithful",appearance:"Sun-embossed shield and silver holy bell, eyes warm like sunrise.",backstory:"Raised by Solara's priesthood; travels to carry that light into shadowed places."},abilityMethod:"Standard Array",abilityScores:{str:12,dex:11,con:14,int:12,wis:18,cha:15},proficiencies:{savingThrows:["Wisdom","Charisma"],armorWeapons:["Light/Medium armor","Shields","Simple weapons"],tools:["Herbalism kit"],skills:["Insight","Medicine","Religion"],languages:["Common","Celestial"]},combat:{armorClass:18,initiative:"+0 (Dex)",speed:"30 ft",hitPoints:"38",hitDice:"5d8",passivePerception:15,proficiencyBonus:"+3"},attacks:[{name:"Mace",bonus:"+4",damage:"1d6+1 bludgeoning",tags:["Melee"]},{name:"Guiding Bolt",bonus:"+7",damage:"4d6 radiant",tags:["Spell","120 ft"]},{name:"Spiritual Weapon",bonus:"+7",damage:"1d8+4 force (bonus action)",tags:["Spell"]}],equipmentDetail:{starting:["Mace","Shield","Holy Symbol","Chain Mail","Priest pack"],wealth:"15 gp tithe held for the temple"},features:{classFeatures:["Channel Divinity (2/rest)","Domain: Light"],racialTraits:["Versatile and adaptable"],background:"Shelter of the Faithful - temple lodging",feats:[]},spellsDetail:{ability:"Wisdom",saveDC:15,attackBonus:"+7",prepared:"10 prepared including domain",known:["Guiding Bolt","Spiritual Weapon","Mass Healing Word"],slots:"1st:4, 2nd:3, 3rd:2"},personality:{traits:["Comforts the wounded with song","Walks with sunrise calm"],ideals:["Hope is a shared light"],bonds:["Bell relic from Solara's altar"],flaws:["Overextends to protect strangers"]},extras:{languages:["Common","Celestial"],inventoryWeight:"56 lb",notes:"Keeps a travel journal of miracles witnessed."}}},{id:4,name:"Drusk",title:"Dragon's Shield",race:"Dragonborn",class:"Paladin",level:6,alignment:"Lawful Neutral",background:"Soldier",hp:54,ac:19,speed:30,stats:{str:18,dex:10,con:16,int:10,wis:12,cha:14},passivePerception:12,inspiration:!1,profBonus:3,skills:["Athletics","Intimidation","Persuasion"],abilities:["Lay on Hands","Divine Smite"],spells:["Bless","Shield of Faith"],equipment:["Greatsword","Plate Armor","Insignia of rank"],notes:"Armor is etched with bronze dragon motifs.",lore:"A veteran of the Scale Wars, Drusk swore an oath of vengeance against those who would threaten the innocent. His bronze scales are scarred from countless battles, each a testament to his resilience. He views himself as a living shield, placing himself between danger and his companions without hesitation. His code is strict, but his heart burns with the fire of his ancestors.",sheet:{core:{hitDie:"d10",raceTraits:["Draconic Ancestry (Bronze)","Breath Weapon (lightning)","Damage Resistance: Lightning"],classFeatures:["Lay on Hands","Divine Smite","Fighting Style: Defense"],backgroundFeature:"Military Rank",appearance:"Bronze scales scarred from war, armor engraved with draconic script.",backstory:"Veteran of the Scale Wars; sworn to stand between danger and the innocent."},abilityMethod:"Standard Array",abilityScores:{str:18,dex:10,con:16,int:10,wis:12,cha:14},proficiencies:{savingThrows:["Wisdom","Charisma"],armorWeapons:["All armor","Shields","Simple & martial weapons"],tools:["Vehicles (land)"],skills:["Athletics","Intimidation","Persuasion"],languages:["Common","Draconic"]},combat:{armorClass:19,initiative:"+0 (Dex)",speed:"30 ft",hitPoints:"54",hitDice:"6d10",passivePerception:12,proficiencyBonus:"+3"},attacks:[{name:"Greatsword",bonus:"+7",damage:"2d6+4 slashing (+2d8 radiant smite)",tags:["Melee","Heavy"]},{name:"Lay on Hands",bonus:"",damage:"Restore 30 hp pool",tags:["Healing"]},{name:"Breath Weapon",bonus:"DC 13",damage:"2d6 lightning (5x30 ft line)",tags:["Racial","Recharge"]}],equipmentDetail:{starting:["Greatsword","Plate Armor","Insignia of rank","Traveler's pack"],wealth:"20 gp and a polished bronze holy symbol"},features:{classFeatures:["Lay on Hands","Divine Smite","Fighting Style: Defense"],racialTraits:["Breath Weapon","Lightning Resistance"],background:"Military Rank - respects of other soldiers",feats:[]},spellsDetail:{ability:"Charisma",saveDC:13,attackBonus:"+5",prepared:"8 prepared (Cha mod + level)",known:["Bless","Shield of Faith"],slots:"1st:4, 2nd:3"},personality:{traits:["Stands as the first shield in danger","Polishes armor nightly"],ideals:["Discipline maintains order"],bonds:["Oathbound to fallen comrades' families"],flaws:["Overly rigid with personal codes"]},extras:{languages:["Common","Draconic"],inventoryWeight:"110 lb",notes:"Prefers to keep armor on even while resting; drinks only water on duty."}}},{id:5,name:"Elyra",title:"Songweaver",race:"Half-Elf",class:"Bard",level:5,alignment:"Chaotic Neutral",background:"Entertainer",hp:32,ac:15,speed:30,stats:{str:10,dex:14,con:12,int:13,wis:11,cha:18},passivePerception:13,inspiration:!0,profBonus:3,skills:["Performance","Deception","Persuasion","Stealth"],abilities:["Bardic Inspiration","Jack of All Trades"],spells:["Dissonant Whispers","Hypnotic Pattern","Cure Wounds"],equipment:["Rapier","Lute","Pan flute","Leather Armor"],notes:"Collects stories from every tavern she visits.",lore:"Elyra believes that the world is made of stories, and she intends to learn them all. A wanderer by nature, she weaves magic into her music, charming kings and calming beasts alike. Her laughter is infectious, but beneath her playful exterior lies a sharp wit and a keen observer. She chronicles the party's deeds, ensuring their legend will be sung for generations to come.",sheet:{core:{hitDie:"d8",raceTraits:["Darkvision","Fey Ancestry","Skill Versatility"],classFeatures:["Bardic Inspiration (d8)","Jack of All Trades","Song of Rest"],backgroundFeature:"By Popular Demand",appearance:"Half-elf with braided silver hair and a lute etched with constellations.",backstory:"Travels tavern to tavern collecting legends to weave into new songs."},abilityMethod:"Point Buy",abilityScores:{str:10,dex:14,con:12,int:13,wis:11,cha:18},proficiencies:{savingThrows:["Dexterity","Charisma"],armorWeapons:["Light armor","Simple weapons","Hand crossbows","Longswords","Rapiers","Shortswords"],tools:["Lute","Pan flute","Disguise kit"],skills:["Performance","Deception","Persuasion","Stealth"],languages:["Common","Elvish","Sylvan"]},combat:{armorClass:15,initiative:"+2 (Dex)",speed:"30 ft",hitPoints:"32",hitDice:"5d8",passivePerception:13,proficiencyBonus:"+3"},attacks:[{name:"Rapier",bonus:"+5",damage:"1d8+2 piercing",tags:["Melee","Finesse"]},{name:"Dissonant Whispers",bonus:"DC 15",damage:"3d6 psychic (1st)",tags:["Spell","Wis save"]},{name:"Hypnotic Pattern",bonus:"DC 15",damage:"Charm/incapacitate",tags:["Spell","Area control"]}],equipmentDetail:{starting:["Rapier","Lute","Pan flute","Leather Armor","Entertainer's pack"],wealth:"28 gp in performance tips"},features:{classFeatures:["Bardic Inspiration (d8)","Jack of All Trades","Song of Rest"],racialTraits:["Fey Ancestry","Skill Versatility"],background:"By Popular Demand - always finds a stage",feats:[]},spellsDetail:{ability:"Charisma",saveDC:15,attackBonus:"+7",prepared:"Knows 11 spells / 3 cantrips",known:["Dissonant Whispers","Hypnotic Pattern","Cure Wounds"],slots:"1st:4, 2nd:3, 3rd:2"},personality:{traits:["Turns every scene into a story prompt","Laughs easily, schemes quietly"],ideals:["Freedom to wander and collect songs"],bonds:["Protects the tales of those who trust her"],flaws:["Keeps secrets for the sake of a better story"]},extras:{languages:["Common","Elvish","Sylvan"],inventoryWeight:"34 lb",notes:"Writes nightly ballads about the day's heroes and villains."}}},{id:6,name:"Flint",title:"The Tinkerer",race:"Dwarf",class:"Artificer",level:4,alignment:"Neutral Good",background:"Guild Artisan",hp:34,ac:16,speed:25,stats:{str:11,dex:12,con:15,int:17,wis:10,cha:9},passivePerception:11,inspiration:!1,profBonus:2,skills:["Arcana","Investigation","Tinker's Tools"],abilities:["Infuse Item","Magical Tinkering"],spells:["Faerie Fire","Cure Wounds"],equipment:["Handaxe","Light Crossbow","Tinker satchel"],notes:"Has a mechanical raven familiar named Cog.",lore:"Flint sees magic not as a mystical force, but as a puzzle to be solved. Exiled from his clan for his unorthodox experiments, he travels the world seeking rare materials for his inventions. His mechanical companion, Cog, is his masterpiece, a testament to his genius. Flint is always tinkering, improving, and optimizing, believing that with enough gears and mana, anything is possible.",sheet:{core:{hitDie:"d8",raceTraits:["Darkvision","Dwarven Resilience","Stonecunning"],classFeatures:["Magical Tinkering","Infuse Item (2 infusions)"],backgroundFeature:"Guild Membership",appearance:"Stocky dwarf with soot-stained gloves and bronze lenses perched on his brow.",backstory:"Exiled for unorthodox experiments; roams to find rare materials for inventions."},abilityMethod:"Point Buy",abilityScores:{str:11,dex:12,con:15,int:17,wis:10,cha:9},proficiencies:{savingThrows:["Constitution","Intelligence"],armorWeapons:["Light/Medium armor","Shields","Simple weapons"],tools:["Tinker's tools","Thieves' tools","Smith's tools"],skills:["Arcana","Investigation","Tinker's Tools"],languages:["Common","Dwarvish","Gnomish"]},combat:{armorClass:16,initiative:"+1 (Dex)",speed:"25 ft",hitPoints:"34",hitDice:"4d8",passivePerception:11,proficiencyBonus:"+2"},attacks:[{name:"Light Crossbow",bonus:"+3",damage:"1d8+1 piercing",tags:["Ranged","Infused bolts"]},{name:"Handaxe",bonus:"+2",damage:"1d6 slashing",tags:["Melee","Light"]},{name:"Gadget Burst",bonus:"DC 13",damage:"1d8 thunder (prototype)",tags:["Infusion","Close burst"]}],equipmentDetail:{starting:["Handaxe","Light Crossbow","Tinker satchel","Cog the mechanical raven"],wealth:"35 gp held for guild dues"},features:{classFeatures:["Magical Tinkering","Infuse Item (2 infusions)"],racialTraits:["Dwarven Resilience","Stonecunning"],background:"Guild Membership - workshop access",feats:[]},spellsDetail:{ability:"Intelligence",saveDC:13,attackBonus:"+5",prepared:"5 prepared artificer spells",known:["Faerie Fire","Cure Wounds"],slots:"1st:3, 2nd:1"},personality:{traits:["Talks to his inventions","Records observations in gear-etched shorthand"],ideals:["Innovation makes the world safer"],bonds:["Protects Cog as proof of his craft"],flaws:["Tinkers instead of resting"]},extras:{languages:["Common","Dwarvish","Gnomish"],inventoryWeight:"62 lb",notes:"Travels with Cog the mechanical raven; keeps spare springs in beard braid."}}},{id:7,name:"Ghita",title:"Shadowbound",race:"Tiefling",class:"Warlock",level:5,alignment:"Neutral Evil",background:"Charlatan",hp:30,ac:14,speed:30,stats:{str:8,dex:14,con:13,int:11,wis:12,cha:18},passivePerception:13,inspiration:!1,profBonus:3,skills:["Arcana","Deception","Sleight of Hand"],abilities:["Eldritch Invocations","Pact of the Tome"],spells:["Eldritch Blast","Hex","Shadow of Moil"],equipment:["Dagger","Component pouch","Silken robes"],notes:"Eyes glow faint purple when channeling her patron.",lore:"Ghita struck a bargain with a shadowy entity to save her own life, a debt she is now forever paying. She walks the line between light and dark, using her deceptive charm to manipulate those around her. While her methods are questionable, her power is undeniable. She seeks a way to break her pact, but the whispers in the dark are growing louder every day.",sheet:{core:{hitDie:"d8",raceTraits:["Darkvision","Hellish Resistance","Infernal Legacy"],classFeatures:["Eldritch Invocations","Pact of the Tome"],backgroundFeature:"False Identity",appearance:"Tiefling with deep violet eyes, fine robes hiding concealed daggers.",backstory:"Bound to a shadowed patron to escape death; walks the line between need and freedom."},abilityMethod:"Point Buy",abilityScores:{str:8,dex:14,con:13,int:11,wis:12,cha:18},proficiencies:{savingThrows:["Wisdom","Charisma"],armorWeapons:["Light armor","Simple weapons"],tools:["Disguise kit","Forgery kit"],skills:["Arcana","Deception","Sleight of Hand"],languages:["Common","Infernal"]},combat:{armorClass:14,initiative:"+2 (Dex)",speed:"30 ft",hitPoints:"30",hitDice:"5d8",passivePerception:13,proficiencyBonus:"+3"},attacks:[{name:"Eldritch Blast",bonus:"+7",damage:"1d10+4 force (Agonizing)",tags:["Spell","120 ft"]},{name:"Dagger",bonus:"+5",damage:"1d4+2 piercing",tags:["Melee","Thrown"]},{name:"Hex",bonus:"Bonus",damage:"+1d6 necrotic to target",tags:["Curse","Concentration"]}],equipmentDetail:{starting:["Dagger","Component pouch","Silken robes","Book of shadows"],wealth:"15 gp hidden across false identities"},features:{classFeatures:["Eldritch Invocations","Pact of the Tome"],racialTraits:["Hellish Resistance","Infernal Legacy"],background:"False Identity - forged papers",feats:[]},spellsDetail:{ability:"Charisma",saveDC:15,attackBonus:"+7",prepared:"Knows 8 spells / 3 cantrips",known:["Eldritch Blast","Hex","Shadow of Moil"],slots:"2 pact slots (3rd level)"},personality:{traits:["Smiles while scheming","Asks questions instead of giving answers"],ideals:["Freedom from the pact above all"],bonds:["Book of shadows contains true name rune"],flaws:["Takes risks to prove she controls the darkness"]},extras:{languages:["Common","Infernal"],inventoryWeight:"29 lb",notes:"Eyes glow violet when channeling; keeps black candles for patron rites."}}},{id:8,name:"Harran",title:"Stonefist",race:"Goliath",class:"Fighter",level:5,alignment:"Chaotic Neutral",background:"Mercenary",hp:52,ac:17,speed:30,stats:{str:18,dex:12,con:16,int:9,wis:13,cha:10},passivePerception:12,inspiration:!0,profBonus:3,skills:["Athletics","Survival","Perception"],abilities:["Second Wind","Action Surge","Battlemaster Maneuvers"],spells:[],equipment:["Maul","Heavy Crossbow","Chain Mail"],notes:"Keeps tally marks engraved on his maul's haft.",lore:"Harran descends from a tribe of mountain dwellers who value strength above all else. He left his home to test his might against the strongest champions of the lowlands. His maul, 'Earthshaker', has felled giants and beasts alike. Though he speaks little, his actions speak volumes. He fights not for gold or glory, but for the thrill of the challenge and the honor of his ancestors.",sheet:{core:{hitDie:"d10",raceTraits:["Powerful Build","Stone's Endurance","Mountain Born"],classFeatures:["Second Wind","Action Surge","Battlemaster Maneuvers"],backgroundFeature:"Mercenary Life (job board contacts)",appearance:"Towering goliath with shale-grey skin and tally marks etched into his maul.",backstory:"Left the peaks to test strength against lowland champions and earn renown."},abilityMethod:"Standard Array",abilityScores:{str:18,dex:12,con:16,int:9,wis:13,cha:10},proficiencies:{savingThrows:["Strength","Constitution"],armorWeapons:["All armor","Shields","Simple & martial weapons"],tools:["Vehicles (land)","Dice set"],skills:["Athletics","Survival","Perception"],languages:["Common","Giant"]},combat:{armorClass:17,initiative:"+1 (Dex)",speed:"30 ft",hitPoints:"52",hitDice:"5d10",passivePerception:12,proficiencyBonus:"+3"},attacks:[{name:"Maul 'Earthshaker'",bonus:"+7",damage:"2d6+4 bludgeoning",tags:["Melee","Heavy","Two-Handed"]},{name:"Heavy Crossbow",bonus:"+4",damage:"1d10+1 piercing (100/400)",tags:["Ranged","Loading"]},{name:"Precision Attack",bonus:"+d8",damage:"Superiority die to hit",tags:["Maneuver"]}],equipmentDetail:{starting:["Maul","Heavy Crossbow","Chain Mail","Traveler's kit"],wealth:"35 gp and carved dice set"},features:{classFeatures:["Second Wind","Action Surge","Battlemaster Maneuvers"],racialTraits:["Powerful Build","Stone's Endurance","Mountain Born"],background:"Mercenary Life - access to job boards",feats:[]},spellsDetail:{ability:"None",saveDC:"",attackBonus:"",prepared:"",known:["Non-caster"],slots:""},personality:{traits:["Speaks with actions more than words","Measures foes with a steady gaze"],ideals:["Honor through tested strength"],bonds:["Earthshaker maul is his rite of passage"],flaws:["Seeks the toughest fight even when tactically unwise"]},extras:{languages:["Common","Giant"],inventoryWeight:"92 lb",notes:"Tallies foes on the maul; keeps quiet watch by the campfire."}}}],jt=Sb.map(r=>({...r,color:wb()})),Nb=`#version 300 es
precision highp float;
uniform float u_fade;
uniform float u_time;
uniform vec2 u_resolution;
uniform vec4 u_modA;
uniform vec4 u_modB;
out vec4 out_color;

vec4 core(vec4 params) {
    vec2 I = gl_FragCoord.xy;
    float t = u_time*0.5, z = 0.0, d = 0.0, s = 0.0;
    float i = 0.0;
    vec4 O = vec4(0.0);
    for(O*=i; i++<8e1; O+=(cos(s+params)+1.0)/d*z) {
        vec3 p = z*normalize(vec3(I+I,0.0)-vec3(u_resolution, u_resolution.y));
        vec3 a = normalize(cos(vec3(1,2,0)+t-d*7.0));
        p.z+=5.0;
        a = a*dot(a,p)-cross(a,p);
        z+=d=.1*abs(length(p)-3.0)+.04*abs(s=a.y);
    }
    return tanh(O/3e4);
}

void main() {
    vec4 colorA = core(u_modA);
    vec4 colorB = core(u_modB);
    out_color = mix(colorA, colorB, u_fade);
}
`,Cb=`#version 300 es
in vec2 a_position;
void main() {
    gl_Position = vec4(a_position, 0.0, 1.0);
}`;function tg(r,h,f){const m=r.createShader(h);return r.shaderSource(m,f),r.compileShader(m),r.getShaderParameter(m,r.COMPILE_STATUS)?m:(console.error("Shader compile error:",r.getShaderInfoLog(m)),r.deleteShader(m),null)}function Eb(r,h,f){const m=tg(r,r.VERTEX_SHADER,h),p=tg(r,r.FRAGMENT_SHADER,f);if(!m||!p)return null;const b=r.createProgram();return r.attachShader(b,m),r.attachShader(b,p),r.linkProgram(b),r.getProgramParameter(b,r.LINK_STATUS)?(r.deleteShader(m),r.deleteShader(p),b):(console.error("Program link error:",r.getProgramInfoLog(b)),r.deleteProgram(b),null)}function Tb(r){const{clientWidth:h,clientHeight:f}=r;return r.width!==h||r.height!==f?(r.width=h,r.height=f,!0):!1}function Lb({modA:r=[0,1,2,0],modB:h=[4,1,8,2],fade:f=0}){const m=v.useRef(null),p=v.useRef(f),b=v.useRef(r),j=v.useRef(h);return v.useEffect(()=>{p.current=f},[f]),v.useEffect(()=>{b.current=r},[r]),v.useEffect(()=>{j.current=h},[h]),v.useEffect(()=>{const C=m.current;if(!C)return;const y=C.getContext("webgl2",{antialias:!1});if(!y){console.warn("WebGL2 not supported in this browser.");return}const x=Eb(y,Cb,Nb);if(!x)return;y.useProgram(x);const E=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,E),y.bufferData(y.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),y.STATIC_DRAW);const w=y.getAttribLocation(x,"a_position");y.enableVertexAttribArray(w),y.vertexAttribPointer(w,2,y.FLOAT,!1,0,0);const k=y.getUniformLocation(x,"u_time"),M=y.getUniformLocation(x,"u_resolution"),B=y.getUniformLocation(x,"u_fade"),H=y.getUniformLocation(x,"u_modA"),V=y.getUniformLocation(x,"u_modB");let O=performance.now(),D;const q=ae=>{const F=(ae-O)/1e3;Tb(y.canvas),y.viewport(0,0,y.canvas.width,y.canvas.height),y.uniform1f(k,F),y.uniform2f(M,y.canvas.width,y.canvas.height),y.uniform1f(B,p.current),y.uniform4fv(H,b.current),y.uniform4fv(V,j.current),y.drawArrays(y.TRIANGLES,0,6),D=requestAnimationFrame(q)};return D=requestAnimationFrame(q),()=>{cancelAnimationFrame(D),y.deleteBuffer(E),y.deleteProgram(x)}},[]),i.jsx("canvas",{ref:m,className:"gl-shader-canvas",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:-10,pointerEvents:"none"},tabIndex:-1})}const Ab=`#version 300 es
precision highp float;
uniform float u_fade;
uniform float u_time;
uniform vec2 u_resolution;
uniform vec4 u_modA;
uniform vec4 u_modB;
out vec4 out_color;

vec4 core(vec4 params) {
    vec2 I = gl_FragCoord.xy;
    float t = u_time, z = 0.0, d = 0.0, s = 0.0;
    float i = 0.0;
    vec4 O = vec4(0.0);
    for(O*=i; i++<8e1; O+=(cos(s+params)+1.0)/d*z) {
        vec3 p = z*normalize(vec3(I+I,0.0)-vec3(u_resolution, u_resolution.y));
        vec3 a = normalize(cos(vec3(1,2,0)+t-d*1.0));
        p.z+=4.0;
        a = a*dot(a,p)-cross(a,p);
        z+=d=.1*abs(length(p)-3.0)+.04*abs(s=a.y);
    }
    return tanh(O/3e4);
}

void main() {
    vec4 colorA = core(u_modA);
    vec4 colorB = core(u_modB);
    out_color = mix(colorA, colorB, u_fade);
}
`,kb=`#version 300 es
in vec2 a_position;
void main() {
    gl_Position = vec4(a_position, 0.0, 1.0);
}
`;function ng(r,h,f){const m=r.createShader(h);return r.shaderSource(m,f),r.compileShader(m),r.getShaderParameter(m,r.COMPILE_STATUS)?m:(console.error("Shader compile error:",r.getShaderInfoLog(m)),r.deleteShader(m),null)}function Mb(r,h,f){const m=ng(r,r.VERTEX_SHADER,h),p=ng(r,r.FRAGMENT_SHADER,f);if(!m||!p)return null;const b=r.createProgram();return r.attachShader(b,m),r.attachShader(b,p),r.linkProgram(b),r.getProgramParameter(b,r.LINK_STATUS)?(r.deleteShader(m),r.deleteShader(p),b):(console.error("Program link error:",r.getProgramInfoLog(b)),r.deleteProgram(b),null)}function zb(r){const{clientWidth:h,clientHeight:f}=r;return r.width!==h||r.height!==f?(r.width=h,r.height=f,!0):!1}function Rb({modA:r=[0,1,2,0],modB:h=[4,1,8,2],fade:f=0}){const m=v.useRef(null),p=v.useRef(f),b=v.useRef(r),j=v.useRef(h);return v.useEffect(()=>{p.current=f},[f]),v.useEffect(()=>{b.current=r},[r]),v.useEffect(()=>{j.current=h},[h]),v.useEffect(()=>{const C=m.current;if(!C)return;const y=C.getContext("webgl2",{antialias:!1});if(!y){console.warn("WebGL2 not supported in this browser.");return}const x=Mb(y,kb,Ab);if(!x)return;y.useProgram(x);const E=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,E),y.bufferData(y.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),y.STATIC_DRAW);const w=y.getAttribLocation(x,"a_position");y.enableVertexAttribArray(w),y.vertexAttribPointer(w,2,y.FLOAT,!1,0,0);const k=y.getUniformLocation(x,"u_time"),M=y.getUniformLocation(x,"u_resolution"),B=y.getUniformLocation(x,"u_fade"),H=y.getUniformLocation(x,"u_modA"),V=y.getUniformLocation(x,"u_modB");let O=performance.now(),D;const q=ae=>{const F=(ae-O)/1e3;zb(y.canvas),y.viewport(0,0,y.canvas.width,y.canvas.height),y.uniform1f(k,F),y.uniform2f(M,y.canvas.width,y.canvas.height),y.uniform1f(B,p.current),y.uniform4fv(H,b.current),y.uniform4fv(V,j.current),y.drawArrays(y.TRIANGLES,0,6),D=requestAnimationFrame(q)};return D=requestAnimationFrame(q),()=>{cancelAnimationFrame(D),y.deleteBuffer(E),y.deleteProgram(x)}},[]),i.jsx("canvas",{ref:m,className:"card-shader-canvas",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"inherit",pointerEvents:"none"},tabIndex:-1})}function Ob({character:r,onToggleFavorite:h,isFavorite:f,onFeature:m,isFeatured:p}){const b=r.name?r.name.charAt(0).toUpperCase():"?",C=`hsl(${r.id*47%360}, 70%, 60%)`,y=r.portraitUrl||r.image;return i.jsxs("article",{className:"card-shell",style:{"--portrait-accent":C},children:[i.jsxs("div",{className:"card-portrait","aria-hidden":"true",children:[y?i.jsx("img",{src:y,alt:`${r.name} portrait`}):i.jsx("span",{className:"card-initial",children:b}),i.jsx("div",{className:"card-portrait-glow"})]}),i.jsxs("div",{className:"card-summary",children:[i.jsxs("div",{className:"card-title-row",children:[i.jsx("h2",{className:"card-name",children:r.name}),i.jsxs("span",{className:"chip chip-level",children:["Level ",r.level]})]}),r.title&&i.jsx("div",{className:"card-subtitle",children:r.title}),i.jsxs("div",{className:"card-stats-grid",children:[i.jsxs("div",{className:"stat-box",children:[i.jsx("span",{className:"stat-label",children:"Race"}),i.jsx("span",{className:"stat-value",children:r.race})]}),i.jsxs("div",{className:"stat-box",children:[i.jsx("span",{className:"stat-label",children:"Class"}),i.jsx("span",{className:"stat-value",children:r.class})]}),i.jsxs("div",{className:"stat-box",children:[i.jsx("span",{className:"stat-label",children:"Alignment"}),i.jsx("span",{className:"stat-value",children:r.alignment})]})]}),(h||m)&&i.jsxs("div",{className:"card-fav",children:[h&&i.jsx("button",{type:"button",className:`fav-btn ${f?"fav-btn--active":""}`,onClick:h,children:f?"Unfavorite":"Favorite"}),m&&i.jsx("button",{type:"button",className:`feature-btn ${p?"feature-btn--active":""}`,onClick:m,children:p?"Featured":"Set Featured"})]})]})]})}const on=["details","background","showcase"],qd={details:"Details",background:"Background",showcase:"Mana"};function Db({character:r,onClose:h,onNext:f,onPrev:m,nextName:p,prevName:b}){const[j,C]=v.useState("details"),[y,x]=v.useState(!0),[E,w]=v.useState(!1),[k,M]=v.useState(null),[B,H]=v.useState(!1),[V,O]=v.useState(!1),[D,q]=v.useState(!1),[ae,F]=v.useState(r),xe=250,J=v.useRef(null),ce=v.useRef(null);if(!r||!ae)return null;const U=ae.sheet||{},be=U.abilityScores||ae.stats||{},we=U.proficiencies||{},Ae=U.combat||{armorClass:ae.ac,initiative:"+0",speed:`${ae.speed} ft`,hitPoints:String(ae.hp),hitDice:"",passivePerception:ae.passivePerception,proficiencyBonus:`+${ae.profBonus}`},He=U.spellsDetail||{},qe=U.equipmentDetail||{starting:ae.equipment||[],wealth:""},_e=(Se=[],Be="None listed")=>i.jsx("div",{className:"detail-chip-row",children:Se.length>0?Se.map(Je=>i.jsx("span",{className:"detail-chip",children:Je},Je)):i.jsx("span",{className:"detail-chip detail-chip--muted",children:Be})});v.useEffect(()=>{x(!1);const Se=setTimeout(()=>{F(r),x(!0)},xe);return()=>clearTimeout(Se)},[r?.id]),v.useEffect(()=>{x(!1);const Se=setTimeout(()=>x(!0),xe);return()=>clearTimeout(Se)},[j]),v.useEffect(()=>{j!=="showcase"&&H(!1)},[j]),v.useEffect(()=>{if(j==="showcase"&&!V){q(!0),O(!0);const Se=setTimeout(()=>q(!1),300);return()=>clearTimeout(Se)}},[j,V]),v.useEffect(()=>{J.current&&y&&J.current.focus({preventScroll:!0})},[y]),v.useEffect(()=>{if(!E)return;const Se=setTimeout(()=>w(!1),xe);return()=>clearTimeout(Se)},[E]),v.useEffect(()=>{if(!k)return;const Se=Be=>{Be.key==="Escape"&&M(null)};return window.addEventListener("keydown",Se),()=>window.removeEventListener("keydown",Se)},[k]),v.useEffect(()=>{k&&ce.current&&ce.current.focus({preventScroll:!0})},[k]);const A=()=>{if(E)return;w(!0);const Be=(on.indexOf(j)-1+on.length)%on.length;C(on[Be])},K=()=>{if(E)return;w(!0);const Be=(on.indexOf(j)+1)%on.length;C(on[Be])},le=()=>{E||(w(!0),m())},je=()=>{E||(w(!0),f())},Z=on.indexOf(j),T=qd[on[(Z-1+on.length)%on.length]],$=qd[on[(Z+1)%on.length]],oe=-(100/on.length)*Z,he=Se=>{M(Se)},ge=(Se,Be)=>{(Se.key==="Enter"||Se.key===" ")&&(Se.preventDefault(),he(Be))},ye={core:"Core Character Information",abilities:"Ability Scores",proficiencies:"Proficiencies",combat:"Combat Stats",attacks:"Attacks & Weapons",equipment:"Equipment & Wealth",features:"Features & Traits",spells:"Spells & Spellcasting",extras:"Extras & Languages",background:"Background & Description",personality:"Personality & Roleplay",notes:"Notes"},ke=(Se,{showHeading:Be=!0}={})=>{switch(Se){case"core":return i.jsxs(i.Fragment,{children:[Be&&i.jsx("h3",{children:"Core Character Information"}),i.jsxs("div",{className:"detail-pill-row",children:[i.jsxs("div",{className:"detail-mini-block",children:[i.jsx("p",{className:"detail-eyebrow",children:"Class & Level"}),i.jsxs("p",{className:"detail-line",children:[ae.class,"  Level ",ae.level," (Hit Die ",U.core?.hitDie||"",")"]})]}),i.jsxs("div",{className:"detail-mini-block",children:[i.jsx("p",{className:"detail-eyebrow",children:"Race"}),i.jsx("p",{className:"detail-line",children:ae.race})]}),i.jsxs("div",{className:"detail-mini-block",children:[i.jsx("p",{className:"detail-eyebrow",children:"Alignment"}),i.jsx("p",{className:"detail-line",children:ae.alignment})]}),i.jsxs("div",{className:"detail-mini-block",children:[i.jsx("p",{className:"detail-eyebrow",children:"Background"}),i.jsx("p",{className:"detail-line",children:ae.background}),U.core?.backgroundFeature&&i.jsx("p",{className:"detail-line detail-line--muted",children:U.core.backgroundFeature})]})]}),i.jsx("div",{className:"detail-divider"}),i.jsx("p",{className:"detail-eyebrow",children:"Racial Traits"}),_e(U.core?.raceTraits),i.jsx("p",{className:"detail-eyebrow",style:{marginTop:"0.8rem"},children:"Class Features"}),_e(U.core?.classFeatures)]});case"abilities":return i.jsxs(i.Fragment,{children:[Be&&i.jsx("h3",{children:"Ability Scores"}),i.jsx("p",{className:"detail-line detail-line--muted",children:U.abilityMethod||"Manual entry"}),i.jsx("div",{className:"stat-grid custom-scrollbar expanded-stat-grid",children:Object.entries(be).map(([Je,Re])=>i.jsxs("div",{className:"stat-pill",children:[i.jsx("span",{className:"stat-pill__label",children:Je.toUpperCase()}),i.jsx("span",{className:"stat-pill__value",children:Re})]},Je))})]});case"proficiencies":return i.jsxs(i.Fragment,{children:[Be&&i.jsx("h3",{children:"Proficiencies"}),i.jsxs("div",{className:"detail-list-grid",children:[i.jsxs("div",{children:[i.jsx("p",{className:"detail-eyebrow",children:"Saving Throws"}),_e(we.savingThrows)]}),i.jsxs("div",{children:[i.jsx("p",{className:"detail-eyebrow",children:"Armor & Weapons"}),_e(we.armorWeapons)]}),i.jsxs("div",{children:[i.jsx("p",{className:"detail-eyebrow",children:"Tools"}),_e(we.tools)]}),i.jsxs("div",{children:[i.jsx("p",{className:"detail-eyebrow",children:"Skills"}),_e(we.skills||ae.skills)]}),i.jsxs("div",{children:[i.jsx("p",{className:"detail-eyebrow",children:"Languages"}),_e(we.languages||U.extras?.languages)]})]})]});case"combat":return i.jsxs(i.Fragment,{children:[Be&&i.jsx("h3",{children:"Combat Stats"}),i.jsx("div",{className:"stat-grid custom-scrollbar",children:[{label:"Armor Class",value:Ae.armorClass??ae.ac},{label:"Initiative",value:Ae.initiative||"+0"},{label:"Speed",value:Ae.speed||`${ae.speed} ft`},{label:"Hit Points",value:Ae.hitPoints||ae.hp},{label:"Hit Dice",value:Ae.hitDice||""},{label:"Passive Perception",value:Ae.passivePerception||ae.passivePerception},{label:"Proficiency",value:Ae.proficiencyBonus||`+${ae.profBonus}`}].map(Je=>i.jsxs("div",{className:"stat-pill",children:[i.jsx("span",{className:"stat-pill__label",children:Je.label}),i.jsx("span",{className:"stat-pill__value stat-pill__value--tight",children:Je.value})]},Je.label))})]});case"attacks":return!U.attacks||U.attacks.length===0?i.jsxs(i.Fragment,{children:[Be&&i.jsx("h3",{children:"Attacks & Weapons"}),i.jsx("p",{className:"detail-line",children:"No attacks listed yet."})]}):i.jsxs(i.Fragment,{children:[Be&&i.jsx("h3",{children:"Attacks & Weapons"}),i.jsx("div",{className:"detail-attack-list",children:(U.attacks||[]).map(Je=>i.jsxs("div",{className:"attack-row",children:[i.jsxs("div",{children:[i.jsx("p",{className:"detail-line",children:Je.name}),i.jsx("p",{className:"detail-line detail-line--muted",children:Je.tags?.join("  ")})]}),i.jsxs("div",{className:"attack-metrics",children:[i.jsx("span",{className:"detail-chip",children:Je.bonus}),i.jsx("span",{className:"detail-chip",children:Je.damage})]})]},Je.name))})]});case"equipment":return i.jsxs(i.Fragment,{children:[Be&&i.jsx("h3",{children:"Equipment & Wealth"}),i.jsx("div",{className:"detail-block",children:qe.starting?.map(Je=>i.jsxs("span",{className:"detail-line",children:["- ",Je]},Je))}),qe.wealth&&i.jsxs("p",{className:"detail-line detail-line--muted",style:{marginTop:"0.6rem"},children:["Wealth: ",qe.wealth]})]});case"features":return i.jsxs(i.Fragment,{children:[Be&&i.jsx("h3",{children:"Features & Traits"}),i.jsxs("div",{className:"detail-list-grid",children:[i.jsxs("div",{children:[i.jsx("p",{className:"detail-eyebrow",children:"Class Features"}),_e(U.features?.classFeatures)]}),i.jsxs("div",{children:[i.jsx("p",{className:"detail-eyebrow",children:"Racial Traits"}),_e(U.features?.racialTraits||U.core?.raceTraits)]}),i.jsxs("div",{children:[i.jsx("p",{className:"detail-eyebrow",children:"Background"}),_e([U.features?.background].filter(Boolean))]}),i.jsxs("div",{children:[i.jsx("p",{className:"detail-eyebrow",children:"Feats"}),_e(U.features?.feats)]})]})]});case"spells":return!He.ability||He.ability==="None"?i.jsxs(i.Fragment,{children:[Be&&i.jsx("h3",{children:"Spellcasting"}),i.jsx("p",{className:"detail-line",children:"This character does not cast spells at level 1."})]}):i.jsxs(i.Fragment,{children:[Be&&i.jsx("h3",{children:"Spellcasting"}),i.jsxs("div",{className:"detail-pill-row",children:[i.jsxs("div",{className:"detail-mini-block",children:[i.jsx("p",{className:"detail-eyebrow",children:"Spellcasting Ability"}),i.jsx("p",{className:"detail-line",children:He.ability})]}),i.jsxs("div",{className:"detail-mini-block",children:[i.jsx("p",{className:"detail-eyebrow",children:"Spell Save DC"}),i.jsx("p",{className:"detail-line",children:He.saveDC})]}),i.jsxs("div",{className:"detail-mini-block",children:[i.jsx("p",{className:"detail-eyebrow",children:"Spell Attack Bonus"}),i.jsx("p",{className:"detail-line",children:He.attackBonus})]})]}),He.slots&&i.jsxs("p",{className:"detail-line detail-line--muted",children:["Slots: ",He.slots]}),He.prepared&&i.jsxs("p",{className:"detail-line detail-line--muted",children:["Prepared/Known: ",He.prepared]}),i.jsx("div",{className:"detail-block",style:{marginTop:"0.6rem"},children:_e(He.known||ae.spells||[])})]});case"extras":return i.jsxs(i.Fragment,{children:[Be&&i.jsx("h3",{children:"Extras & Languages"}),i.jsxs("div",{className:"detail-mini-block",children:[i.jsx("p",{className:"detail-eyebrow",children:"Languages"}),_e(U.extras?.languages||we.languages)]}),U.extras?.inventoryWeight&&i.jsxs("p",{className:"detail-line detail-line--muted",style:{marginTop:"0.6rem"},children:["Inventory Weight: ",U.extras.inventoryWeight]}),(U.extras?.notes||ae.notes)&&i.jsx("p",{className:"detail-line",style:{marginTop:"0.4rem"},children:U.extras?.notes||ae.notes})]});case"background":return i.jsxs(i.Fragment,{children:[Be&&i.jsx("h3",{children:"Background & Description"}),U.core?.appearance&&i.jsx("p",{className:"detail-line",children:U.core.appearance}),U.core?.backstory&&i.jsx("p",{className:"detail-line detail-line--muted",style:{marginTop:"0.5rem"},children:U.core.backstory}),ae.lore&&i.jsx("p",{className:"detail-line",style:{marginTop:"0.8rem"},children:ae.lore})]});case"personality":return i.jsxs(i.Fragment,{children:[Be&&i.jsx("h3",{children:"Personality & Role-Play"}),i.jsxs("div",{className:"detail-list-grid",children:[i.jsxs("div",{children:[i.jsx("p",{className:"detail-eyebrow",children:"Traits"}),_e(U.personality?.traits)]}),i.jsxs("div",{children:[i.jsx("p",{className:"detail-eyebrow",children:"Ideals"}),_e(U.personality?.ideals)]}),i.jsxs("div",{children:[i.jsx("p",{className:"detail-eyebrow",children:"Bonds"}),_e(U.personality?.bonds)]}),i.jsxs("div",{children:[i.jsx("p",{className:"detail-eyebrow",children:"Flaws"}),_e(U.personality?.flaws)]})]})]});case"notes":return i.jsxs(i.Fragment,{children:[Be&&i.jsx("h3",{children:"Notes"}),i.jsx("p",{className:"detail-line",children:ae.notes})]});default:return null}};return i.jsxs("div",{className:`character-detail-overlay custom-scrollbar ${j==="showcase"?"is-showcase":""}`,children:[i.jsxs("div",{className:"detail-header",children:[i.jsxs("div",{className:"detail-hero",children:[i.jsx("h1",{className:"detail-name",children:ae.name}),i.jsx("p",{className:"detail-title",children:ae.title}),i.jsxs("p",{className:"detail-meta",children:[ae.race," ",ae.class," - Level ",ae.level]})]}),i.jsxs("div",{className:"expanded-toolbar",children:[i.jsx("button",{type:"button",className:"back-btn",onClick:h,children:"< Back to Character List"}),i.jsxs("div",{className:"detail-nav",children:[i.jsxs("button",{className:"detail-nav-btn",onClick:le,title:`Previous: ${b}`,children:["< ",i.jsx("span",{className:"detail-nav-label",children:b})]}),i.jsx("span",{className:"detail-nav-divider",children:""}),i.jsxs("button",{className:"detail-nav-btn",onClick:je,title:`Next: ${p}`,children:[i.jsx("span",{className:"detail-nav-label",children:p})," >"]})]})]})]}),i.jsxs("div",{className:"detail-tab-bar",role:"presentation",style:{gridTemplateColumns:`repeat(${on.length}, 1fr)`,"--detail-slide-count":on.length},children:[on.map(Se=>i.jsx("button",{type:"button",onClick:()=>C(Se),className:`detail-tab-bar__segment ${j===Se?"is-active":""}`,children:i.jsx("span",{children:qd[Se]})},Se)),i.jsx("div",{className:"detail-tab-bar__indicator",style:{transform:`translateX(${Z*100}%)`,width:`${100/on.length}%`},"aria-hidden":"true"})]}),i.jsxs("div",{className:"detail-viewport",children:[i.jsxs("div",{className:"detail-track","data-state":y?"visible":"fading","data-fade":y?"in":"out",style:{"--detail-slide-count":on.length,transform:`translateX(${oe}%) translateY(var(--detail-shift, 0px))`},children:[i.jsx("div",{className:"detail-slide custom-scrollbar",role:"region","aria-label":"Character details","data-visible":y?"in":"out",children:i.jsxs("div",{className:"detail-content",tabIndex:0,ref:J,children:[i.jsxs("div",{className:"detail-columns detail-columns--tight",children:[i.jsxs("div",{className:"detail-card detail-card--interactive",role:"button",tabIndex:0,"aria-label":"Expand core information panel",onClick:()=>he("core"),onKeyDown:Se=>ge(Se,"core"),children:[ke("core"),i.jsx("span",{className:"detail-card__hint",children:"Click to view"})]}),i.jsxs("div",{className:"detail-card detail-card--interactive",role:"button",tabIndex:0,"aria-label":"Expand ability scores panel",onClick:()=>he("abilities"),onKeyDown:Se=>ge(Se,"abilities"),children:[ke("abilities"),i.jsx("span",{className:"detail-card__hint",children:"Click to view"})]})]}),i.jsxs("div",{className:"detail-columns detail-columns--tight",children:[i.jsxs("div",{className:"detail-card detail-card--interactive",role:"button",tabIndex:0,"aria-label":"Expand proficiencies panel",onClick:()=>he("proficiencies"),onKeyDown:Se=>ge(Se,"proficiencies"),children:[ke("proficiencies"),i.jsx("span",{className:"detail-card__hint",children:"Click to view"})]}),i.jsxs("div",{className:"detail-card detail-card--interactive",role:"button",tabIndex:0,"aria-label":"Expand combat stats panel",onClick:()=>he("combat"),onKeyDown:Se=>ge(Se,"combat"),children:[ke("combat"),i.jsx("span",{className:"detail-card__hint",children:"Click to view"})]})]}),i.jsxs("div",{className:"detail-columns detail-columns--tight",children:[i.jsxs("div",{className:"detail-card detail-card--interactive",role:"button",tabIndex:0,"aria-label":"Expand attacks panel",onClick:()=>he("attacks"),onKeyDown:Se=>ge(Se,"attacks"),children:[ke("attacks"),i.jsx("span",{className:"detail-card__hint",children:"Click to view"})]}),i.jsxs("div",{className:"detail-card detail-card--interactive",role:"button",tabIndex:0,"aria-label":"Expand equipment panel",onClick:()=>he("equipment"),onKeyDown:Se=>ge(Se,"equipment"),children:[ke("equipment"),i.jsx("span",{className:"detail-card__hint",children:"Click to view"})]})]}),i.jsxs("div",{className:"detail-columns detail-columns--tight",children:[i.jsxs("div",{className:"detail-card detail-card--interactive",role:"button",tabIndex:0,"aria-label":"Expand features panel",onClick:()=>he("features"),onKeyDown:Se=>ge(Se,"features"),children:[ke("features"),i.jsx("span",{className:"detail-card__hint",children:"Click to view"})]}),i.jsxs("div",{className:"detail-card detail-card--interactive",role:"button",tabIndex:0,"aria-label":"Expand spellcasting panel",onClick:()=>he("spells"),onKeyDown:Se=>ge(Se,"spells"),children:[ke("spells"),i.jsx("span",{className:"detail-card__hint",children:"Click to view"})]})]})]})}),i.jsx("div",{className:"detail-slide custom-scrollbar",role:"region","aria-label":"Character background and role-play","data-visible":y?"in":"out",children:i.jsxs("div",{className:"detail-content",tabIndex:0,children:[i.jsxs("div",{className:"detail-card detail-card--interactive",role:"button",tabIndex:0,"aria-label":"Expand background panel",onClick:()=>he("background"),onKeyDown:Se=>ge(Se,"background"),children:[ke("background"),i.jsx("span",{className:"detail-card__hint",children:"Click to view"})]}),i.jsxs("div",{className:"detail-columns detail-columns--tight",children:[i.jsxs("div",{className:"detail-card detail-card--interactive",role:"button",tabIndex:0,"aria-label":"Expand personality panel",onClick:()=>he("personality"),onKeyDown:Se=>ge(Se,"personality"),children:[ke("personality"),i.jsx("span",{className:"detail-card__hint",children:"Click to view"})]}),i.jsxs("div",{className:"detail-card detail-card--interactive",role:"button",tabIndex:0,"aria-label":"Expand extras panel",onClick:()=>he("extras"),onKeyDown:Se=>ge(Se,"extras"),children:[ke("extras"),i.jsx("span",{className:"detail-card__hint",children:"Click to view"})]})]}),ae.notes&&i.jsxs("div",{className:"detail-card detail-card--interactive",role:"button",tabIndex:0,"aria-label":"Expand notes panel",onClick:()=>he("notes"),onKeyDown:Se=>ge(Se,"notes"),children:[ke("notes"),i.jsx("span",{className:"detail-card__hint",children:"Click to view"})]})]})}),i.jsx("div",{className:"detail-slide backdrop-slide custom-scrollbar",role:"region","aria-label":"Mana view","data-visible":y?"in":"out",children:i.jsx("div",{className:"detail-content backdrop-content",tabIndex:0,children:i.jsx("div",{className:"backdrop-info-area",children:i.jsxs("div",{className:"backdrop-info-wrapper",children:[i.jsx("button",{type:"button",className:"backdrop-info","aria-label":"What is this glowing circle?","aria-describedby":"backdrop-info-desc",onClick:()=>H(Se=>!Se),children:"What is this glowing circle?"}),i.jsx("span",{id:"backdrop-info-desc",className:"sr-only",children:"This is the color of your mana, visit the almanac to learn more!"}),B&&i.jsx("div",{className:"backdrop-tooltip",role:"status","data-animate":D?"pulse":"rest",children:"This is the color of your mana, visit the almanac to learn more!"})]})})})})]}),i.jsxs("div",{className:"detail-carousel-bottom",children:[i.jsx("button",{type:"button",onClick:A,"aria-label":`Previous section: ${T}`,children:`< ${T}`}),i.jsx("button",{type:"button",onClick:K,"aria-label":`Next section: ${$}`,children:`${$} >`})]})]}),k&&i.jsxs("div",{className:"detail-modal",role:"dialog","aria-modal":"true","aria-label":`Expanded view of ${ye[k]}`,children:[i.jsx("div",{className:"detail-modal__backdrop",onClick:()=>M(null)}),i.jsxs("div",{className:"detail-modal__body",role:"document",children:[i.jsxs("header",{className:"detail-modal__header",children:[i.jsxs("div",{children:[i.jsx("p",{className:"detail-eyebrow",children:"Expanded View"}),i.jsx("h2",{className:"detail-modal__title",children:ye[k]})]}),i.jsx("button",{type:"button",className:"detail-modal__close",onClick:()=>M(null),"aria-label":"Close expanded panel",ref:ce,children:"Close"})]}),i.jsx("div",{className:"detail-modal__content custom-scrollbar",children:ke(k,{showHeading:!1})})]})]})]})}const Bb=(r,h,f)=>{if(r===h)return"card card-active";const m=(h-1+f)%f,p=(h+1)%f;return r===m?"card card-left":r===p?"card card-right":"card card-hidden"};function Pb(){const[r,h]=v.useState(jt[0].color),[f,m]=v.useState(jt[0].color),[p,b]=v.useState(0),j=v.useRef(),[C,y]=v.useState(null),[x,E]=v.useState(0),w=C!==null,k=w?jt[C]:null;function M(D){j.current&&cancelAnimationFrame(j.current);let q;p>0&&p<1?q=[r[0]+(f[0]-r[0])*p,r[1]+(f[1]-r[1])*p,r[2]+(f[2]-r[2])*p,r[3]+(f[3]-r[3])*p]:q=f,h(q),m(D),b(0);let ae=performance.now();function F(xe){let J=Math.min(1,(xe-ae)/800);b(J),J<1?j.current=requestAnimationFrame(F):(h(D),b(0),j.current=null)}j.current=requestAnimationFrame(F)}v.useEffect(()=>{M(jt[x].color)},[x]);const B=v.useCallback(()=>{E(D=>(D-1+jt.length)%jt.length)},[]),H=v.useCallback(()=>{E(D=>(D+1)%jt.length)},[]),V=v.useCallback(D=>{E(D),D===x&&(y(D),window.scrollTo({top:0,behavior:"smooth"}))},[x]),O=v.useCallback(()=>{y(null)},[]);return i.jsxs("div",{className:`characters-page custom-scrollbar ${w?"is-expanded":""}`,children:[i.jsx(Lb,{modA:r,modB:f,fade:p}),i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:`carousel-section ${w?"fade-out":""}`,children:[i.jsx("h1",{className:"page-title",children:"Stars of Azterra"}),i.jsxs("div",{className:"characters-wrapper",children:[i.jsx("p",{className:"nav-hint",children:"Use the on-screen controls to view our Heroes"}),i.jsxs("div",{className:"carousel-controls",children:[i.jsx("button",{className:"arrow-btn arrow-left",onClick:B,"aria-label":"Previous character",disabled:w,children:""}),i.jsxs("div",{className:"carousel-frame",role:"region","aria-live":"polite",children:[i.jsx("div",{className:"sun-overlay","aria-hidden":"true"}),i.jsx("div",{className:"carousel-track",children:jt.map((D,q)=>{const ae=q===x;return i.jsxs("div",{className:Bb(q,x,jt.length),onClick:()=>V(q),children:[ae&&i.jsx(Rb,{modA:r,modB:f,fade:p}),i.jsx(Ob,{character:D})]},D.id)})})]}),i.jsx("button",{className:"arrow-btn arrow-right",onClick:H,"aria-label":"Next character",disabled:w,children:""})]})]})]}),w&&i.jsx(Db,{character:k,onClose:O,onNext:()=>{H(),y(D=>(D+1)%jt.length)},onPrev:()=>{B(),y(D=>(D-1+jt.length)%jt.length)},nextName:jt[(C+1)%jt.length].name,prevName:jt[(C-1+jt.length)%jt.length].name})]})]})}const Zr="/p15/",Ub=[{id:"human",name:"Human",image:`${Zr}images/races/human.jpg`,blurb:"Adaptable folk found in every corner of the world.",tags:["Size: 5-6+ ft","Speed: 30 ft walking speed","Alignment: None"],description:"Humans are known for their ambition and versatility. They build kingdoms, trading cities, and frontier towns, and can be found in almost any rolefrom humble farmer to archmage.",traits:["Ability Score Flexibility: Humans can excel in many different classes","Cultural Variety: Traditions, dress, and beliefs change from region to region","Shorter Lives: Human lives are brief compared to many other peoples, encouraging bold choices"]},{id:"elf",name:"Elf",image:`${Zr}images/races/elf.jpg`,blurb:"Graceful, long-lived people attuned to magic and nature.",tags:["Size: 5-6 ft","Speed: 30 ft walking speed","Alignment: Chaotic Good / Evil (Drows)"],description:"Elves are lithe and perceptive, with sharp senses and a natural gift for magic. Many dwell in ancient forests or hidden enclaves, carefully guarding their traditions.",traits:["Keen Senses: Elves are hard to surprise and quick to notice details - proficient in the Perception skill","Trance: Rather than sleeping, elves enter a light meditation for 4 hours a day","Fey Ancestry: Magic is unable to put elves to sleep and elves have advantage against being charmed"]},{id:"dwarf",name:"Dwarf",image:`${Zr}images/races/dwarf.jpg`,blurb:"Stout, hardy folk with a deep love of stone and metal.",tags:["Size: 4-5 ft","Speed: 25 ft walking speed","Alignment: Lawful good"],description:"Dwarves are sturdy and determined. Many live in mountain halls or underground cities, where they mine ore and forge renowned weapons, tools, and armor.",traits:["Darkvision: Dwarves have superior vision in dark and dim conditions","Resilience: Dwarves are resistant to various poisons","Craftsmanship: Many dwarves are skilled smiths, masons, or engineers","Weapon Proficiency: Dwarves are proficient with battleaxes, handaxes, throwing hammers, and warhammers"]},{id:"halfling",name:"Halfling",image:`${Zr}images/races/halfling.jpg`,blurb:"Small, cheerful wanderers with uncanny luck.",tags:["Size: 3ft","Speed: 25 ft walking speed","Alignment: Lawful good"],description:"Halflings value comfort, good food, and close-knit communities. Many travel the world as traders or guides, using their knack for avoiding danger to stay out of trouble.",traits:["Brave: Halflings have advantage on saving throws from being frightened","Nimble: Their size makes them quick and agile in tight spaces and can move through larger creatures","Lucky: Halflings can reroll the die on a 1 roll"]},{id:"dragonborn",name:"Dragonborn",image:`${Zr}images/races/dragonborn.jpg`,blurb:"Proud, draconic humanoids who breathe elemental power.",tags:["Size: 6ft+","Speed: 30 ft walking speed","Alignment: Extreme Good / Bad"],description:"Dragonborn carry echoes of dragon heritage in their blood. Many are driven by honor, personal excellence, or the expectations of their clan or ancestry.",traits:["Breath Weapon: Dragonborn can exhale elemental energy in combat","Scaled Resilience: Their draconic ancestry often grants resistance to a damage type","Strong Identity: Each dragonborns ancestry is a key part of their story"]}];function Hb(){const[r,h]=v.useState(null),f=m=>{h(p=>p===m?null:m)};return i.jsxs("div",{className:"characters-page world-races-page custom-scrollbar",children:[i.jsx("div",{className:"sun-overlay","aria-hidden":"true"}),i.jsxs("div",{className:"world-races-content",children:[i.jsx("h1",{className:"page-title",children:"Races of Azterra"}),i.jsx("p",{className:"world-intro",children:"Explore the peoples of Azterra. Select a race to reveal deeper lore, cultural roots, and the gifts that shape their place in the realm."}),i.jsx("div",{className:"race-grid",role:"list",children:Ub.map(m=>{const p=r===m.id,b=`race-details-${m.id}`;return i.jsxs("article",{role:"listitem",className:`race-card ${p?"race-card--expanded":""}`,onClick:()=>f(m.id),children:[m.image&&i.jsx("div",{className:"race-image-wrapper",children:i.jsx("img",{src:m.image,alt:m.name,className:"race-image",loading:"lazy"})}),i.jsxs("div",{className:"race-header",children:[i.jsxs("div",{children:[i.jsx("h2",{children:m.name}),m.blurb&&i.jsx("p",{className:"race-blurb",children:m.blurb})]}),i.jsx("button",{type:"button",className:"race-toggle","aria-expanded":p,"aria-controls":b,onClick:j=>{j.stopPropagation(),f(m.id)},children:p?"Hide details":"View details"})]}),m.tags&&m.tags.length>0&&i.jsx("div",{className:"race-tags","aria-label":"Race quick facts",children:m.tags.map(j=>i.jsx("span",{className:"race-tag",children:j},j))}),i.jsxs("div",{id:b,className:"race-details","aria-hidden":!p,children:[m.description&&i.jsx("p",{className:"race-description",children:m.description}),m.traits&&m.traits.length>0&&i.jsx("ul",{className:"race-traits",children:m.traits.map((j,C)=>i.jsx("li",{children:j},C))})]})]},m.id)})})]})]})}const ag="http://localhost:4000/api",Zb=[{value:"pending",label:"Pending"},{value:"editor",label:"Editor"},{value:"admin",label:"Admin"}];function qb(){const{role:r,user:h}=Cn(),[f,m]=v.useState([]),[p,b]=v.useState(!0),[j,C]=v.useState(""),y=r==="admin";v.useEffect(()=>{if(!y||!h){m([]),b(!1);return}(async()=>{b(!0),C("");try{const w=await fetch(`${ag}/admin/users`,{credentials:"include"}),k=await w.json();if(!w.ok)throw new Error(k.error||"Unable to load users.");m(k.users)}catch(w){C(w.message||"Unable to load users.")}finally{b(!1)}})()},[y,h]);const x=async(E,w)=>{if(h)try{const k=await fetch(`${ag}/admin/updateRole`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({userId:E,newRole:w})}),M=await k.json();if(!k.ok)throw new Error(M.error||"Unable to update role.");m(B=>B.map(H=>H.id===M.user.id?{...H,role:M.user.role}:H))}catch(k){C(k.message||"Unable to update role.")}};return y?i.jsxs("div",{className:"page-container",children:[i.jsx("h1",{children:"Admin Dashboard"}),j&&i.jsx("p",{className:"editor-warning",children:j}),p?i.jsx("p",{children:"Loading users..."}):i.jsx("div",{className:"admin-table-wrapper",children:i.jsxs("table",{className:"admin-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Name"}),i.jsx("th",{children:"Email"}),i.jsx("th",{children:"Role"}),i.jsx("th",{children:"Created"}),i.jsx("th",{children:"Actions"})]})}),i.jsx("tbody",{children:f.map(E=>i.jsxs("tr",{children:[i.jsx("td",{children:E.name}),i.jsx("td",{children:E.email}),i.jsx("td",{children:E.role}),i.jsx("td",{children:new Date(E.createdAt).toLocaleString()}),i.jsx("td",{children:i.jsx("div",{className:"admin-actions",children:Zb.map(w=>i.jsx("button",{type:"button",className:`admin-action-button ${E.role===w.value?"admin-action-button--active":""}`,onClick:()=>x(E.id,w.value),disabled:E.id===h?.id&&w.value!=="admin",children:w.label},w.value))})})]},E.id))})]})})]}):i.jsxs("div",{className:"page-container",children:[i.jsx("h1",{children:"Admin Dashboard"}),i.jsx("p",{children:"You must be an admin to view this page."})]})}const ig=[{id:"kingdoms",title:"Kingdoms & Capitals",subtitle:"Seat of power, trade, and intrigue.",accent:"#facc15",keywords:["city","capital","citadel","kingdom","harbor","port","town"],icon:"K"},{id:"dungeons",title:"Dungeons & Vaults",subtitle:"Forgotten halls that hoard danger and treasure alike.",accent:"#f472b6",keywords:["dungeon","ruins","vault","crypt","catacomb","cavern","lair","temple"],icon:"D"},{id:"regions",title:"Regions & Landmarks",subtitle:"Defining features that shape the realm.",accent:"#60a5fa",keywords:["region","landmark","forest","grove","mountain","library","tower","harbor"],icon:"R"},{id:"wilds",title:"Monsters & Wilds",subtitle:"Unruly frontiers and creatures that haunt them.",accent:"#34d399",keywords:["monster","beast","dragon","wyrm","den","nest","jungle","wild"],icon:"W"}],Ib=(r="")=>r.toLowerCase(),Gb=r=>{const h=[r.type,r.category,r.subtype,r.name,r.description,r.lore];return Array.isArray(r.tags)&&h.push(r.tags.join(" ")),h.filter(Boolean).join(" ").toLowerCase()},Vb=r=>{const f=[r.heroImage,r.imageUrl,r.cover,r.banner].find(Boolean);return f?f.startsWith("http")?f:`/p15/${f.replace(/^\//,"")}`:null};function Yb(){const{locations:r}=Uc(),{regions:h=[]}=Wr(),[f,m]=v.useState(()=>ig[0].id),[p,b]=v.useState(null),j=v.useMemo(()=>{const w=new Map;return h.forEach(k=>{w.set(String(k.id),k.name)}),w},[h]),C=v.useMemo(()=>{const w=new Map;return ig.map(k=>{const M=r.filter(B=>{if(!B)return!1;const H=Ib(B.type);if(k.keywords.some(O=>H.includes(O)))return!0;let V=w.get(B.id);return V||(V=Gb(B),w.set(B.id,V)),k.keywords.some(O=>V.includes(O))});return{...k,locations:M}})},[r]),y=v.useMemo(()=>C.reduce((w,k)=>w+k.locations.length,0),[C]),x=w=>{m(k=>{const M=k===w?null:w;return M!==k&&b(null),M})},E=w=>{b(k=>k===w?null:w)};return i.jsxs("div",{className:"locations-atlas custom-scrollbar",children:[i.jsxs("header",{className:"locations-atlas__hero",children:[i.jsx("p",{className:"eyebrow",children:"World Atlas"}),i.jsx("h1",{children:"A curated look at Azterra's most storied places."}),i.jsx("p",{className:"lede",children:"Tap a realm to unfurl its tales. Every card draws directly from the interactive map but presents it in a gallery meant for readers, not cartographers."}),i.jsxs("div",{className:"locations-atlas__meta",children:[i.jsx("span",{className:"atlas-pill",children:"Live map entries"}),i.jsx("span",{className:"atlas-pill",children:"Lore-safe for players"}),i.jsx("span",{className:"atlas-pill atlas-pill--ghost",children:"Click to reveal"})]})]}),i.jsxs("div",{className:"locations-atlas__stats",children:[i.jsxs("div",{className:"atlas-stat-card",children:[i.jsx("p",{className:"atlas-stat__label",children:"Entries"}),i.jsx("p",{className:"atlas-stat__value",children:y}),i.jsx("p",{className:"atlas-stat__hint",children:"Mapped across all categories"})]}),i.jsxs("div",{className:"atlas-stat-card",children:[i.jsx("p",{className:"atlas-stat__label",children:"Regions"}),i.jsx("p",{className:"atlas-stat__value",children:h.length||""}),i.jsx("p",{className:"atlas-stat__hint",children:"Drawn from your campaign map"})]}),i.jsxs("div",{className:"atlas-stat-card",children:[i.jsx("p",{className:"atlas-stat__label",children:"Story hooks"}),i.jsx("p",{className:"atlas-stat__value",children:"Player ready"}),i.jsx("p",{className:"atlas-stat__hint",children:"Use badges to filter encounters"})]})]}),i.jsx("div",{className:"locations-atlas__sections",children:C.map(w=>i.jsxs("article",{className:"atlas-section",children:[i.jsxs("button",{type:"button",className:`atlas-section__header ${f===w.id?"atlas-section__header--open":""}`,onClick:()=>x(w.id),style:{borderColor:w.accent},children:[i.jsx("span",{className:"atlas-section__icon","aria-hidden":"true",children:w.icon}),i.jsxs("div",{children:[i.jsx("h2",{children:w.title}),i.jsx("p",{children:w.subtitle})]}),i.jsx("span",{className:"atlas-section__badge",children:w.locations.length})]}),f===w.id&&i.jsx("div",{className:"atlas-section__body",children:w.locations.length?i.jsx("div",{className:"atlas-gallery",children:w.locations.map(k=>{const M=p===k.id,B=Vb(k),H=j.get(String(k.regionId))||"Uncharted Region";return i.jsxs("div",{className:`atlas-card ${M?"atlas-card--expanded":""}`,children:[i.jsxs("button",{type:"button",className:"atlas-card__trigger",onClick:()=>E(k.id),"aria-expanded":M,children:[i.jsx("div",{className:"atlas-card__media",style:B?{backgroundImage:`url(${B})`}:void 0,"data-placeholder":!B,children:!B&&i.jsx("span",{children:w.icon})}),i.jsxs("div",{className:"atlas-card__meta",children:[i.jsx("p",{className:"atlas-card__eyebrow",children:H}),i.jsx("h3",{children:k.name}),i.jsx("p",{className:"atlas-card__type",children:k.type||"Unknown type"})]}),i.jsx("span",{className:"atlas-card__chevron","aria-hidden":"true",children:"v"})]}),M&&i.jsx("div",{className:"atlas-card__details",children:i.jsx("p",{children:k.description||k.lore||"No description yet."})})]},k.id)})}):i.jsx("p",{className:"atlas-section__empty",children:"No entries yet. Check back soon!"})})]},w.id))})]})}const Ac=[{id:"all",label:"All Features"},{id:"cities",label:"Cities",keywords:["city","town","village","harbor","port","citadel","capital","settlement"]},{id:"dungeons",label:"Dungeons",keywords:["dungeon","ruins","crypt","vault","catacomb","temple","cavern","lair"]},{id:"monsters",label:"Monsters",keywords:["monster","beast","dragon","wyrm","den","nest","encounter","hunt"]},{id:"landmarks",label:"Landmarks",keywords:["landmark","library","tower","monument","statue","grove","forest","mountain"]}],sg={search:"",region:"all",type:"all"},lg=(r,h)=>{if(h==="all")return!0;const f=Ac.find(({id:p})=>p===h);if(!f||!f.keywords?.length)return!0;const m=[(r.type||"").toLowerCase(),(r.category||"").toLowerCase(),(r.subtype||"").toLowerCase(),(r.name||"").toLowerCase(),(r.description||"").toLowerCase(),(r.lore||"").toLowerCase()];return Array.isArray(r.tags)&&r.tags.forEach(p=>m.push(String(p).toLowerCase())),f.keywords.some(p=>m.some(b=>b&&b.includes(p.toLowerCase())))};function $b(){const{locations:r,setLocations:h,selectLocation:f,selectedLocationId:m}=Uc(),{regions:p=[]}=Wr(),{role:b,user:j}=Cn(),[C,y]=v.useState("all"),[x,E]=v.useState(()=>({...sg})),[w,k]=v.useState(""),M=v.useMemo(()=>[...p].sort((J,ce)=>J.name.localeCompare(ce.name)),[p]),B=v.useMemo(()=>{const J=new Map;return r.forEach(ce=>{const U=(ce.type||"").trim();if(!U)return;const be=U.toLowerCase();J.has(be)||J.set(be,U)}),Array.from(J.entries()).map(([ce,U])=>({value:ce,label:U})).sort((ce,U)=>ce.label.localeCompare(U.label))},[r]),H=v.useMemo(()=>{const J=Ac.reduce((ce,U)=>({...ce,[U.id]:0}),{});return r.forEach(ce=>{Ac.forEach(U=>{lg(ce,U.id)&&(J[U.id]=(J[U.id]||0)+1)})}),J},[r]),V=v.useMemo(()=>{const J=x.search.trim().toLowerCase();return r.filter(ce=>!(!lg(ce,C)||x.type!=="all"&&(ce.type||"").toLowerCase()!==x.type||x.region!=="all"&&String(ce.regionId??"")!==x.region||J&&![ce.name,ce.description,ce.lore,ce.type,ce.category,Array.isArray(ce.tags)?ce.tags.join(" "):""].filter(Boolean).join(" ").toLowerCase().includes(J)))},[r,C,x]),O=(J,ce)=>{E(U=>({...U,[J]:ce}))},D=()=>{E({...sg})},q=!!x.search.trim()||x.region!=="all"||x.type!=="all",ae=(J,ce,U)=>{h(be=>be.map(we=>we.id===J?{...we,[ce]:ce==="regionId"?U||null:U}:we))},F=async()=>{if(!j||b!=="editor"&&b!=="admin"){k("Only editors/admins can save."),setTimeout(()=>k(""),3e3);return}k("Saving changes...");try{const J=await fetch("/api/locations/save",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({locations:r})}),ce=await J.json();if(!J.ok)throw new Error(ce.error||"Save failed");Array.isArray(ce.locations)&&h(ce.locations),k("Saved.")}catch(J){console.error("Save failed",J),k(J.message||"Save failed.")}finally{setTimeout(()=>k(""),3e3)}},xe=J=>J?p.find(U=>String(U.id)===String(J))?.name||"Unknown Region":"No region";return i.jsxs("div",{className:"locations-page",children:[i.jsxs("header",{className:"locations-header",children:[i.jsxs("div",{className:"locations-header__title",children:[i.jsx("h1",{children:"Atlas Editor"}),i.jsx("p",{className:"locations-subtitle",children:"Curate and organize every map feature before publishing it to the reader-friendly atlas."})]}),i.jsxs("div",{className:"locations-header__cta",children:[i.jsx("button",{type:"button",className:"save-button",onClick:F,children:"Save Changes"}),w&&i.jsx("p",{className:"save-status",children:w})]})]}),i.jsx("section",{className:"locations-tabs",role:"tablist","aria-label":"Location categories",children:Ac.map(J=>i.jsxs("button",{type:"button",role:"tab","aria-selected":C===J.id,className:`locations-tab ${C===J.id?"locations-tab--active":""}`,tabIndex:C===J.id?0:-1,onClick:()=>y(J.id),children:[i.jsx("span",{children:J.label}),i.jsx("span",{className:"locations-tab__count",children:H[J.id]??0})]},J.id))}),i.jsxs("section",{className:"locations-filter-panel","aria-label":"Location filters",children:[i.jsxs("div",{className:"filter-field filter-field--search",children:[i.jsx("label",{htmlFor:"locations-search",children:"Search"}),i.jsx("input",{id:"locations-search",type:"search",placeholder:"Name, lore, description...",value:x.search,onChange:J=>O("search",J.target.value)})]}),i.jsxs("div",{className:"filter-field",children:[i.jsx("label",{htmlFor:"locations-region",children:"Region"}),i.jsxs("select",{id:"locations-region",value:x.region,onChange:J=>O("region",J.target.value),children:[i.jsx("option",{value:"all",children:"All Regions"}),M.map(J=>i.jsx("option",{value:String(J.id),children:J.name},J.id))]})]}),i.jsxs("div",{className:"filter-field",children:[i.jsx("label",{htmlFor:"locations-type",children:"Type"}),i.jsxs("select",{id:"locations-type",value:x.type,onChange:J=>O("type",J.target.value),children:[i.jsx("option",{value:"all",children:"All Types"}),B.map(J=>i.jsx("option",{value:J.value,children:J.label},J.value))]})]}),i.jsx("div",{className:"filter-actions",children:i.jsx("button",{type:"button",className:"filter-clear",onClick:D,disabled:!q,children:"Clear Filters"})})]}),i.jsxs("section",{className:"locations-grid",children:[V.map(J=>i.jsxs("article",{className:`location-card ${m===J.id?"location-card--selected":""}`,onClick:()=>f(J.id),role:"button",tabIndex:0,onKeyDown:ce=>{ce.key==="Enter"&&f(J.id)},children:[i.jsxs("div",{className:"location-card__header",children:[i.jsx("input",{type:"text",value:J.name||"",onChange:ce=>ae(J.id,"name",ce.target.value),placeholder:"Location name"}),i.jsxs("select",{value:J.type||"generic",onChange:ce=>ae(J.id,"type",ce.target.value),children:[i.jsx("option",{value:"city",children:"City"}),i.jsx("option",{value:"town",children:"Town"}),i.jsx("option",{value:"dungeon",children:"Dungeon"}),i.jsx("option",{value:"landmark",children:"Landmark"}),i.jsx("option",{value:"generic",children:"Generic"})]})]}),i.jsx("textarea",{value:J.description||"",onChange:ce=>ae(J.id,"description",ce.target.value),placeholder:"Description",rows:3}),i.jsxs("p",{className:"location-card__region",children:["Region: ",xe(J.regionId)]})]},J.id)),!V.length&&i.jsx("p",{className:"locations-empty",children:"No locations match this filter."})]})]})}const qr="http://localhost:4000/api";function Fb(){const{user:r,role:h,updateAccount:f,refreshUser:m}=Cn(),[p,b]=v.useState(""),[j,C]=v.useState(""),[y,x]=v.useState(""),[E,w]=v.useState(""),[k,M]=v.useState(""),[B,H]=v.useState([]),[V,O]=v.useState(!1),[D,q]=v.useState(""),[ae,F]=v.useState(""),[xe,J]=v.useState(!1),[ce,U]=v.useState(""),[be,we]=v.useState(""),[Ae,He]=v.useState(!1),[qe,_e]=v.useState(!1),[A,K]=v.useState(""),[le,je]=v.useState([]),[Z,T]=v.useState([]);v.useEffect(()=>{b(r?.username||""),C(r?.profilePicture||""),x(r?.profile?.bio||""),w(r?.profile?.labelOne||""),M(r?.profile?.labelTwo||""),H(Array.isArray(r?.profile?.documents)?r.profile.documents:[])},[r]);const $=v.useMemo(()=>(r?.username||r?.googleName||r?.name||r?.email||"?").charAt(0).toUpperCase(),[r]),oe=()=>{const Re=(p||$||"azterra").replace(/\s+/g,"-");return`https://api.dicebear.com/9.x/fantasy/svg?seed=${encodeURIComponent(Re)}`},he=async()=>{if(r){_e(!0),K("");try{const Re=await fetch(`${qr}/secrets/progress`,{credentials:"include"}),We=await Re.json();if(!Re.ok)throw new Error(We.error||"Unable to load secret progress.");je(We.unlocked||[]),T(We.details||[])}catch(Re){K(Re.message||"Unable to load secret progress.")}finally{_e(!1)}}};if(v.useEffect(()=>{he()},[r]),!r)return i.jsxs("div",{className:"page-container",children:[i.jsx("h1",{children:"Account Settings"}),i.jsx("p",{children:"You need to be logged in to view your account."})]});const ge=async Re=>{Re.preventDefault(),O(!0),q(""),F("");try{await f({username:p,profilePicture:j,profile:{bio:y,labelOne:E,labelTwo:k}}),q("Account updated.")}catch(We){F(We.message||"Unable to update account.")}finally{O(!1)}},ye=()=>{C(oe()),q("")},ke=async Re=>{if(Re.preventDefault(),!!be.trim()){He(!0),K("");try{const We=await fetch(`${qr}/secrets/unlock`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({phrase:be})}),Ct=await We.json();if(!We.ok)throw new Error(Ct.error||"Unable to check secret.");je(Ct.unlocked||[]),T(Ct.details||[]),we(""),await m()}catch(We){K(We.message||"Unable to check secret.")}finally{He(!1)}}},Se=async Re=>{const We=Array.from(Re.target.files||[]);if(!(!We.length||!r)){J(!0),U("");try{const Ct=new FormData;We.forEach(Yn=>Ct.append("files",Yn));const Kt=await fetch(`${qr}/files/upload`,{method:"POST",credentials:"include",body:Ct}),Gt=await Kt.json();if(!Kt.ok)throw new Error(Gt.error||"Unable to upload files.");H(Gt.documents||[]),await m(),Re.target.value=""}catch(Ct){U(Ct.message||"Unable to upload files.")}finally{J(!1)}}},Be=async Re=>{if(r){J(!0),U("");try{const We=await fetch(`${qr}/files/${Re}`,{method:"DELETE",credentials:"include"}),Ct=await We.json();if(!We.ok)throw new Error(Ct.error||"Unable to remove file.");H(Ct.documents||[]),await m()}catch(We){U(We.message||"Unable to remove file.")}finally{J(!1)}}},Je=async Re=>{if(!(!r||!Re?.id))try{const We=await fetch(`${qr}/files/download/${Re.id}`,{credentials:"include"});if(!We.ok)throw new Error("Unable to download file.");const Ct=await We.blob(),Kt=window.URL.createObjectURL(Ct),Gt=document.createElement("a");Gt.href=Kt,Gt.download=Re.originalName||"file",document.body.appendChild(Gt),Gt.click(),Gt.remove(),window.URL.revokeObjectURL(Kt)}catch(We){U(We.message||"Unable to download file.")}};return i.jsxs("div",{className:"page-container account-grid",children:[i.jsxs("div",{className:"account-card",children:[i.jsxs("header",{className:"account-card__header",children:[i.jsxs("div",{children:[i.jsx("p",{className:"account-card__eyebrow",children:"Account"}),i.jsx("h1",{children:"Account Settings"}),i.jsx("p",{className:"account-card__subtitle",children:"Personalize your presence and see your permissions."})]}),i.jsx("div",{className:"account-avatar",children:j?i.jsx("img",{src:j,alt:"Profile"}):i.jsx("span",{children:$})})]}),i.jsxs("form",{className:"account-form",onSubmit:ge,children:[i.jsxs("label",{className:"account-field",children:[i.jsx("span",{children:"Email"}),i.jsx("input",{type:"email",value:r.email,disabled:!0})]}),i.jsxs("label",{className:"account-field",children:[i.jsx("span",{children:"Permission Level"}),i.jsx("input",{type:"text",value:h,disabled:!0})]}),i.jsxs("label",{className:"account-field",children:[i.jsx("span",{children:"Username"}),i.jsx("input",{type:"text",value:p,onChange:Re=>b(Re.target.value),placeholder:"Pick a display name"})]}),i.jsxs("label",{className:"account-field",children:[i.jsx("span",{children:"Bio"}),i.jsx("textarea",{value:y,onChange:Re=>x(Re.target.value),placeholder:"Write a short bio",rows:4})]}),i.jsxs("label",{className:"account-field",children:[i.jsx("span",{children:"Label One"}),i.jsx("input",{type:"text",value:E,onChange:Re=>w(Re.target.value),placeholder:"Optional label"})]}),i.jsxs("label",{className:"account-field",children:[i.jsx("span",{children:"Label Two"}),i.jsx("input",{type:"text",value:k,onChange:Re=>M(Re.target.value),placeholder:"Optional label"})]}),i.jsxs("label",{className:"account-field",children:[i.jsx("span",{children:"Profile Picture URL"}),i.jsx("input",{type:"url",value:j,onChange:Re=>C(Re.target.value),placeholder:"https://..."}),i.jsxs("div",{className:"account-field__actions",children:[i.jsx("button",{type:"button",onClick:ye,children:"Generate Avatar"}),i.jsx("button",{type:"button",onClick:()=>C(""),children:"Clear"})]})]}),i.jsxs("div",{className:"account-actions",children:[i.jsx("button",{type:"submit",disabled:V,children:V?"Saving...":"Save changes"}),D&&i.jsx("span",{className:"account-message",children:D}),ae&&i.jsx("span",{className:"account-error",children:ae})]})]}),i.jsxs("section",{className:"account-upload",children:[i.jsxs("div",{className:"account-field",children:[i.jsx("span",{children:"Upload documents (PDF or text)"}),i.jsx("input",{type:"file",accept:".pdf,text/plain",multiple:!0,onChange:Se,disabled:!r||xe}),ce&&i.jsx("p",{className:"account-error",children:ce}),xe&&i.jsx("p",{className:"account-muted",children:"Uploading..."})]}),i.jsxs("div",{className:"list-panel",children:[i.jsx("h3",{children:"Your uploads"}),(!B||!B.length)&&i.jsx("p",{className:"account-muted",children:"No documents uploaded."}),B&&B.length>0&&i.jsx("ul",{className:"simple-list",children:B.map(Re=>i.jsxs("li",{className:"upload-row",children:[i.jsxs("div",{children:[i.jsx("strong",{children:Re.originalName}),i.jsxs("p",{className:"account-muted",children:[(Re.size/1024).toFixed(1)," KB  ",new Date(Re.uploadedAt).toLocaleString()]})]}),i.jsxs("div",{className:"upload-actions",children:[i.jsx("button",{type:"button",onClick:()=>Je(Re),disabled:xe,children:"Download"}),i.jsx("button",{type:"button",onClick:()=>Be(Re.id),disabled:xe,children:"Remove"})]})]},Re.id))})]})]})]}),i.jsxs("div",{className:"account-card",children:[i.jsx("header",{className:"account-card__header",children:i.jsxs("div",{children:[i.jsx("p",{className:"account-card__eyebrow",children:"Secrets"}),i.jsx("h2",{children:"Secret Unlocks"}),i.jsx("p",{className:"account-card__subtitle",children:"Enter phrases to reveal hidden lore and progression."})]})}),i.jsxs("form",{className:"account-form",onSubmit:ke,children:[i.jsxs("label",{className:"account-field",children:[i.jsx("span",{children:"Secret Phrase"}),i.jsx("input",{type:"text",value:be,onChange:Re=>we(Re.target.value),placeholder:"Whisper a phrase...",required:!0})]}),i.jsx("button",{type:"submit",disabled:Ae||!be.trim(),children:Ae?"Checking...":"Unlock"}),A&&i.jsx("p",{className:"account-error",children:A})]}),i.jsxs("div",{className:"account-progress",children:[i.jsxs("div",{className:"account-progress__header",children:[i.jsx("h3",{children:"Progress"}),qe&&i.jsx("span",{className:"account-message",children:"Loading..."})]}),Z.length===0&&!qe?i.jsx("p",{className:"account-muted",children:"No secrets unlocked yet."}):i.jsx("ul",{className:"secret-list",children:Z.map(Re=>i.jsxs("li",{className:"secret-list__item",children:[i.jsxs("div",{children:[i.jsx("p",{className:"secret-list__title",children:Re.title}),i.jsx("p",{className:"secret-list__desc",children:Re.description})]}),i.jsx("span",{className:"secret-list__badge",children:"Unlocked"})]},Re.id))})]})]})]})}const Id="http://localhost:4000/api";function Kb(){const{refreshUser:r,role:h,user:f}=Cn(),m=h==="admin",[p,b]=v.useState(""),[j,C]=v.useState(!1),[y,x]=v.useState(!1),[E,w]=v.useState(""),[k,M]=v.useState([]),[B,H]=v.useState({}),[V,O]=v.useState(null),[D,q]=v.useState(!1),ae=async()=>{if(!f){M([]),H({});return}x(!0),w("");try{const U=await fetch(`${Id}/secrets/progress`,{credentials:"include"}),be=await U.json();if(!U.ok)throw new Error(be.error||"Unable to load progress.");const we=be.details||[];M(we),H(we.reduce((Ae,He)=>(Ae[He.id]={title:He.title||"",description:He.description||"",keyword:He.keyword||""},Ae),{}))}catch(U){w(U.message||"Unable to load progress.")}finally{x(!1)}};v.useEffect(()=>{ae()},[f]),v.useEffect(()=>{m||q(!1)},[m]);const F=async U=>{if(U.preventDefault(),!(!p.trim()||!f)){C(!0),w("");try{const be=await fetch(`${Id}/secrets/unlock`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({phrase:p})}),we=await be.json();if(!be.ok)throw new Error(we.error||"Unable to check secret.");const Ae=we.details||[];M(Ae),H(Ae.reduce((He,qe)=>(He[qe.id]={title:qe.title||"",description:qe.description||"",keyword:qe.keyword||""},He),{})),b(""),await r()}catch(be){w(be.message||"Unable to check secret.")}finally{C(!1)}}},xe=(U,be,we)=>{H(Ae=>({...Ae,[U]:{...Ae[U]||{},[be]:we}}))},J=U=>{const be=k.find(we=>we.id===U);be&&H(we=>({...we,[U]:{title:be.title||"",description:be.description||"",keyword:be.keyword||""}}))},ce=async U=>{if(!(!f||!B[U])){O(U),w("");try{const be=await fetch(`${Id}/secrets/${U}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(B[U])}),we=await be.json();if(!be.ok)throw new Error(we.error||"Unable to save secret.");M(Ae=>Ae.map(He=>He.id===U?we.secret:He)),H(Ae=>({...Ae,[U]:{title:we.secret.title||"",description:we.secret.description||"",keyword:we.secret.keyword||""}}))}catch(be){w(be.message||"Unable to save secret.")}finally{O(null)}}};return i.jsxs("div",{className:"page-container progression",children:[i.jsx("header",{className:"progression__header",children:i.jsxs("div",{children:[i.jsx("p",{className:"progression__eyebrow",children:"Progression"}),i.jsx("h1",{children:"Hidden Paths"}),i.jsx("p",{className:"progression__subtitle",children:"Enter phrases to unlock secrets. The page grows as you uncover more."})]})}),m&&i.jsxs("div",{className:"progression__admin-controls",children:[i.jsx("button",{type:"button",onClick:()=>q(U=>!U),children:D?"Exit Edit Mode":"Admin Edit Mode"}),i.jsx("p",{className:"progression__muted",children:"Admin mode reveals every secret and enables inline edits."})]}),i.jsxs("form",{className:"progression__form",onSubmit:F,children:[i.jsx("input",{type:"text",value:p,onChange:U=>b(U.target.value),placeholder:"Enter a secret phrase",disabled:!f}),i.jsx("button",{type:"submit",disabled:!f||j||!p.trim(),children:j?"Checking...":"Submit"}),E&&i.jsx("p",{className:"progression__error",children:E}),!f&&i.jsx("p",{className:"progression__muted",children:"Login to record your progress."})]}),!y&&k.length===0&&i.jsx("div",{className:"progression__empty",children:i.jsx("p",{children:"Nothing unlocked yet. Keep exploring."})}),y&&i.jsx("p",{className:"progression__muted",children:"Loading your progress..."}),k.length>0&&i.jsxs(i.Fragment,{children:[i.jsx("section",{className:"progression__grid",children:k.map(U=>i.jsxs("article",{className:"progression__card",children:[i.jsx("p",{className:"progression__badge",children:m?"Admin":"Unlocked"}),D&&m?i.jsxs("div",{className:"progression__card-edit",children:[i.jsxs("label",{children:[i.jsx("span",{children:"Title"}),i.jsx("input",{type:"text",value:B[U.id]?.title||"",onChange:be=>xe(U.id,"title",be.target.value)})]}),i.jsxs("label",{children:[i.jsx("span",{children:"Keyword"}),i.jsx("input",{type:"text",value:B[U.id]?.keyword||"",onChange:be=>xe(U.id,"keyword",be.target.value)})]}),i.jsxs("label",{children:[i.jsx("span",{children:"Description"}),i.jsx("textarea",{rows:3,value:B[U.id]?.description||"",onChange:be=>xe(U.id,"description",be.target.value)})]}),i.jsxs("div",{className:"progression__card-actions",children:[i.jsx("button",{type:"button",onClick:()=>ce(U.id),disabled:V===U.id,children:V===U.id?"Saving...":"Save"}),i.jsx("button",{type:"button",className:"progression__ghost-button",onClick:()=>J(U.id),disabled:V===U.id,children:"Reset"})]})]}):i.jsxs(i.Fragment,{children:[i.jsx("h2",{children:U.title}),U.keyword&&i.jsxs("p",{className:"progression__keyword",children:["Keyword: ",i.jsx("code",{children:U.keyword})]}),i.jsx("p",{children:U.description})]})]},U.id))}),k.length>=2&&i.jsxs("section",{className:"progression__steps",children:[i.jsx("h3",{children:"New paths available"}),i.jsx("p",{className:"progression__muted",children:"Sections appear as you progress."}),i.jsxs("div",{className:"progression__grid",children:[i.jsxs("article",{className:"progression__card subtle",children:[i.jsx("p",{className:"progression__badge",children:"Lore"}),i.jsx("p",{children:"Unlocked fragments are now visible in their respective lore entries."})]}),k.length>=3&&i.jsxs("article",{className:"progression__card subtle",children:[i.jsx("p",{className:"progression__badge",children:"Clues"}),i.jsx("p",{children:"Future clues may surface as more secrets unlock."})]})]})]})]})]})}function Xb({secretId:r,fallback:h=null,children:f}){const{isSecretUnlocked:m}=Cn();return m(r)?i.jsx(i.Fragment,{children:f}):h??null}const Qb={"aurora-ember":{title:"Aurora Ember - PLACEHOLDER",body:"PLACEHOLDER: A faint ember in the northern sky awaits completed lore text."},"silent-archive":{title:"Silent Archive - PLACEHOLDER",body:"PLACEHOLDER: A sealed folio in the archivists' stacks will be described here."},"gilded-horizon":{title:"Gilded Horizon - PLACEHOLDER",body:"PLACEHOLDER: A distant golden horizon mark hides further narrative."}};function Gd({secretId:r}){const h=Qb[r]||{title:"Hidden Lore - PLACEHOLDER",body:"PLACEHOLDER: Content to be filled in later."};return i.jsx("div",{className:"page-container",children:i.jsx(Xb,{secretId:r,fallback:i.jsxs("div",{className:"lore-locked",children:[i.jsx("h1",{children:"Hidden Lore"}),i.jsx("p",{children:"This section remains locked. Discover and enter the right phrase to reveal it."}),i.jsx(Mn,{to:"/progress",className:"lore-locked__link",children:"Go to Progression"})]}),children:i.jsxs("div",{className:"lore-placeholder",children:[i.jsx("p",{className:"lore-placeholder__eyebrow",children:"Unlocked Secret"}),i.jsx("h1",{children:h.title}),i.jsx("p",{className:"lore-placeholder__body",children:h.body}),i.jsx("p",{className:"lore-placeholder__note",children:"This is a placeholder template for future lore content."})]})})})}const Ir="http://localhost:4000/api",Vd=r=>Array.isArray(r)?r.map(h=>Number(h)).filter(h=>Number.isFinite(h)):[],Gr=async r=>{const h=await r.text();if(!h)return{};try{return JSON.parse(h)}catch{throw new Error("Unexpected response from server. Is the API running?")}};function Wb(){const{user:r}=Cn(),[h,f]=v.useState([]),[m,p]=v.useState(!0),[b,j]=v.useState(""),[C,y]=v.useState("players"),[x,E]=v.useState(!1),[w,k]=v.useState(""),[M,B]=v.useState({friends:[],incoming:[],outgoing:[]}),[H,V]=v.useState(""),[O,D]=v.useState({}),q=v.useMemo(()=>{const A=new Map;return jt.forEach(K=>A.set(K.id,K)),A},[]),ae=v.useMemo(()=>{const A=new Map;return h.forEach(K=>A.set(K.id,K)),A},[h]);v.useEffect(()=>{(async()=>{if(!r){f([]),p(!1);return}p(!0),j("");try{const K=await fetch(`${Ir}/characters/player-view`,{credentials:"include"}),le=await Gr(K);if(!K.ok)throw new Error(le.error||"Unable to load players.");f(le.users||[])}catch(K){j(K.message||"Unable to load players.")}finally{p(!1)}})()},[r]);const F=v.useCallback(A=>{B({friends:Vd(A?.friends),incoming:Vd(A?.incoming),outgoing:Vd(A?.outgoing)})},[]),xe=v.useCallback(async()=>{if(!r){B({friends:[],incoming:[],outgoing:[]});return}E(!0),k("");try{const A=await fetch(`${Ir}/users/friends`,{credentials:"include"}),K=await Gr(A);if(!A.ok)throw new Error(K.error||"Unable to load friends.");F(K)}catch(A){k(A.message||"Unable to load friends.")}finally{E(!1)}},[F,r]);v.useEffect(()=>{xe(),D({})},[xe,r]);const J=async A=>{if(!(!r||!A)){E(!0),k("");try{const K=await fetch(`${Ir}/users/friends/request`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({targetId:A})}),le=await Gr(K);if(!K.ok)throw new Error(le.error||"Unable to send request.");F(le)}catch(K){k(K.message||"Unable to send request.")}finally{E(!1)}}},ce=async(A,K)=>{if(!(!r||!A)){E(!0),k("");try{const le=await fetch(`${Ir}/users/friends/respond`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({requesterId:A,accept:K})}),je=await Gr(le);if(!le.ok)throw new Error(je.error||"Unable to update request.");F(je)}catch(le){k(le.message||"Unable to update request.")}finally{E(!1)}}},U=async A=>{if(!(!r||!A)){E(!0),k("");try{const K=await fetch(`${Ir}/users/friends/remove`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({targetId:A})}),le=await Gr(K);if(!K.ok)throw new Error(le.error||"Unable to update friends.");F(le),D(je=>{const Z={...je};return delete Z[A],Z})}catch(K){k(K.message||"Unable to update friends.")}finally{E(!1)}}},be=A=>M.friends.includes(A)?"friends":M.incoming.includes(A)?"incoming":M.outgoing.includes(A)?"outgoing":"none",we=A=>{const K=[];return A?.featuredCharacter&&K.push(A.featuredCharacter),(A?.favorites||[]).forEach(le=>{K.includes(le)||K.push(le)}),K};if(!r)return i.jsxs("div",{className:"page-container",children:[i.jsx("h1",{children:"Players"}),i.jsx("p",{children:"Please log in to view player info."})]});const Ae=M.incoming.map(A=>ae.get(A)).filter(Boolean),He=M.friends.map(A=>ae.get(A)).filter(Boolean),qe=H.toLowerCase(),_e=h.filter(A=>A.id!==r?.id).filter(A=>!He.find(K=>K.id===A.id)).filter(A=>qe?(A.name||"").toLowerCase().includes(qe)||(A.username||"").toLowerCase().includes(qe):!0);return i.jsxs("div",{className:"page-container",children:[i.jsxs("div",{className:"players-page__header",children:[i.jsxs("div",{children:[i.jsx("h1",{children:"Players"}),i.jsx("p",{className:"progression__muted",children:"Visible profiles, favorites, and featured characters. Secrets stay hidden."})]}),i.jsxs("div",{className:"players-tabs",children:[i.jsx("button",{type:"button",className:`players-tab ${C==="players"?"players-tab--active":""}`,onClick:()=>y("players"),children:"Community"}),i.jsx("button",{type:"button",className:`players-tab ${C==="friends"?"players-tab--active":""}`,onClick:()=>y("friends"),children:"Friends"})]})]}),m&&i.jsx("p",{className:"progression__muted",children:"Loading players..."}),b&&i.jsx("p",{className:"account-error",children:b}),w&&i.jsx("p",{className:"account-error",children:w}),C==="players"&&i.jsx("div",{className:"players-grid",children:h.map(A=>{const K=A.featuredCharacter?q.get(A.featuredCharacter):null;return i.jsxs("div",{className:"player-card",children:[i.jsxs("div",{className:"player-card__header",children:[i.jsx("div",{className:"player-avatar",children:A.profilePicture?i.jsx("img",{src:A.profilePicture,alt:""}):i.jsx("span",{children:(A.username||A.name||"?")[0]})}),i.jsxs("div",{children:[i.jsx("p",{className:"player-eyebrow",children:A.role}),i.jsx("h3",{children:A.name}),A.username&&i.jsxs("p",{className:"player-username",children:["@",A.username]})]})]}),i.jsx("div",{className:"player-actions",children:i.jsx(Mn,{to:`/players/${A.id}`,className:"lore-locked__link",children:"View profile"})}),K&&i.jsxs("div",{className:"player-featured",children:[i.jsx("span",{children:"Featured"}),i.jsx("strong",{children:K.name})]}),i.jsxs("div",{children:[i.jsx("p",{className:"player-eyebrow",children:"Favorites"}),A.favorites&&A.favorites.length?i.jsx("ul",{className:"simple-list",children:A.favorites.map(le=>{const je=q.get(le);return i.jsx("li",{children:je?je.name:`Character ${le}`},`${A.id}-${le}`)})}):i.jsx("p",{className:"progression__muted",children:"No favorites yet."})]})]},A.id)})}),C==="friends"&&i.jsx("div",{className:"friends-layout",children:i.jsxs("div",{className:"friends-panel",children:[i.jsxs("div",{className:"friends-panel__header",children:[i.jsxs("div",{children:[i.jsx("p",{className:"player-eyebrow",children:"Roster"}),i.jsx("h2",{children:"Friends & Invites"}),i.jsx("p",{className:"progression__muted",children:"Add trusted players so you can share characters, hand out edit access, and drop campaign invites without slowing down table time."})]}),i.jsx("div",{className:"friend-actions",children:i.jsx("button",{type:"button",onClick:xe,disabled:x,children:x?"Syncing...":"Refresh"})})]}),Ae.length>0&&i.jsxs("div",{className:"friend-requests",children:[i.jsx("p",{className:"player-eyebrow",children:"Awaiting your approval"}),i.jsx("div",{className:"friend-chip-row",children:Ae.map(A=>i.jsxs("div",{className:"friend-chip",children:[i.jsxs("div",{children:[i.jsx("strong",{children:A.name}),A.username&&i.jsxs("span",{className:"player-username",children:["@",A.username]})]}),i.jsxs("div",{className:"friend-chip__actions",children:[i.jsx("button",{type:"button",onClick:()=>ce(A.id,!0),disabled:x,children:"Accept"}),i.jsx("button",{type:"button",onClick:()=>ce(A.id,!1),disabled:x,children:"Decline"})]})]},A.id))})]}),i.jsxs("div",{className:"friends-panel__section",children:[i.jsxs("div",{className:"friends-panel__subheader",children:[i.jsx("h3",{children:"Your table"}),i.jsxs("span",{className:"pill",children:[He.length," friends"]})]}),He.length===0&&i.jsx("p",{className:"progression__muted",children:"No friends yet. Add players you trust to start sharing characters."}),i.jsx("div",{className:"friends-grid",children:He.map(A=>{const K=A.featuredCharacter?q.get(A.featuredCharacter):null,le=we(A),je=O[A.id];return i.jsxs("div",{className:"friend-card",children:[i.jsxs("div",{className:"player-card__header",children:[i.jsx("div",{className:"player-avatar",children:A.profilePicture?i.jsx("img",{src:A.profilePicture,alt:""}):i.jsx("span",{children:(A.username||A.name||"?")[0]})}),i.jsxs("div",{children:[i.jsx("p",{className:"player-eyebrow",children:A.role}),i.jsx("h3",{children:A.name}),A.username&&i.jsxs("p",{className:"player-username",children:["@",A.username]})]})]}),K&&i.jsxs("div",{className:"player-featured",children:[i.jsx("span",{children:"Featured"}),i.jsx("strong",{children:K.name})]}),i.jsxs("div",{className:"friend-characters",children:[i.jsx("p",{className:"player-eyebrow",children:"Shareable characters"}),le.length===0&&i.jsx("p",{className:"progression__muted",children:"No shared characters yet."}),i.jsx("div",{className:"friend-character-row",children:le.map(Z=>{const T=q.get(Z),$=je===Z;return i.jsxs("button",{type:"button",className:`friend-character-btn ${$?"friend-character-btn--active":""}`,onClick:()=>D(oe=>({...oe,[A.id]:Z})),children:[T?T.name:`Character ${Z}`,$&&i.jsx("span",{className:"friend-character-tag",children:"Selected for invite"})]},`${A.id}-${Z}`)})}),i.jsx("p",{className:"friend-invite-note",children:"Pick who you plan to invite and grant edit access to. Keep this circle to players you trust."})]}),i.jsxs("div",{className:"friend-card__actions",children:[i.jsx(Mn,{to:`/players/${A.id}`,className:"lore-locked__link",children:"View profile"}),i.jsx("button",{type:"button",onClick:()=>U(A.id),disabled:x,children:"Remove"})]})]},A.id)})})]}),i.jsxs("div",{className:"friends-panel__section",children:[i.jsxs("div",{className:"friends-panel__subheader",children:[i.jsxs("div",{children:[i.jsx("h3",{children:"Add friends"}),i.jsx("p",{className:"progression__muted",children:"Invite fellow players so you can see their characters and loop them into campaigns."})]}),i.jsx("input",{type:"search",placeholder:"Search by name or @handle",value:H,onChange:A=>V(A.target.value),className:"friend-search"})]}),i.jsxs("div",{className:"players-grid",children:[_e.map(A=>{const K=A.featuredCharacter?q.get(A.featuredCharacter):null,le=be(A.id),je=le==="friends"||le==="outgoing",Z=le==="friends"?"Friends":le==="incoming"?"Accept request":le==="outgoing"?"Requested":"Add friend",T=()=>le==="incoming"?ce(A.id,!0):le==="friends"?null:J(A.id);return i.jsxs("div",{className:"player-card",children:[i.jsxs("div",{className:"player-card__header",children:[i.jsx("div",{className:"player-avatar",children:A.profilePicture?i.jsx("img",{src:A.profilePicture,alt:""}):i.jsx("span",{children:(A.username||A.name||"?")[0]})}),i.jsxs("div",{children:[i.jsx("p",{className:"player-eyebrow",children:A.role}),i.jsx("h3",{children:A.name}),A.username&&i.jsxs("p",{className:"player-username",children:["@",A.username]})]})]}),K&&i.jsxs("div",{className:"player-featured",children:[i.jsx("span",{children:"Featured"}),i.jsx("strong",{children:K.name})]}),i.jsx("div",{className:"player-actions",children:i.jsx("button",{type:"button",onClick:T,disabled:x||je,children:Z})}),i.jsxs("div",{children:[i.jsx("p",{className:"player-eyebrow",children:"Favorites"}),A.favorites&&A.favorites.length?i.jsx("ul",{className:"simple-list",children:A.favorites.slice(0,3).map($=>{const oe=q.get($);return i.jsx("li",{children:oe?oe.name:`Character ${$}`},`${A.id}-${$}`)})}):i.jsx("p",{className:"progression__muted",children:"No favorites yet."})]}),le==="outgoing"&&i.jsx("p",{className:"progression__muted",children:"Waiting for them to confirm."}),le==="incoming"&&i.jsx("p",{className:"progression__muted",children:"They want to connect."})]},A.id)}),_e.length===0&&i.jsx("p",{className:"progression__muted",children:"No other players available to add right now."})]})]}),Object.keys(O).length>0&&i.jsxs("div",{className:"friend-invite-summary",children:[i.jsx("p",{className:"player-eyebrow",children:"Invite queue"}),i.jsx("div",{className:"friend-chip-row",children:Object.entries(O).map(([A,K])=>{const le=ae.get(Number(A)),je=q.get(K);return le?i.jsxs("div",{className:"friend-chip",children:[i.jsxs("div",{children:[i.jsx("strong",{children:le.name}),i.jsxs("p",{className:"progression__muted",children:[je?je.name:`Character ${K}`," selected for campaign invite."]})]}),i.jsx("button",{type:"button",className:"friend-chip__remove",onClick:()=>D(Z=>{const T={...Z};return delete T[A],T}),children:"Clear"})]},A):null})})]})]})})]})}const Jb="http://localhost:4000/api";function e0(){const{id:r}=lh(),[h,f]=v.useState(null),[m,p]=v.useState(!0),[b,j]=v.useState(""),C=v.useMemo(()=>{const x=new Map;return jt.forEach(E=>x.set(E.id,E)),x},[]);if(v.useEffect(()=>{(async()=>{p(!0),j("");try{const E=await fetch(`${Jb}/characters/player-view`),w=await E.json();if(!E.ok)throw new Error(w.error||"Unable to load player.");const k=(w.users||[]).find(M=>String(M.id)===String(r));k?f(k):j("Player not found.")}catch(E){j(E.message||"Unable to load player.")}finally{p(!1)}})()},[r]),m)return i.jsx("div",{className:"page-container",children:i.jsx("p",{className:"progression__muted",children:"Loading player..."})});if(b||!h)return i.jsx("div",{className:"page-container",children:i.jsx("p",{className:"account-error",children:b||"Player not found."})});const y=h.featuredCharacter?C.get(h.featuredCharacter):null;return i.jsxs("div",{className:"page-container",children:[i.jsxs("div",{className:"dashboard-hero",children:[i.jsx("div",{className:"dashboard-avatar",children:h.profilePicture?i.jsx("img",{src:h.profilePicture,alt:""}):i.jsx("span",{children:(h.username||h.name||"?")[0]})}),i.jsxs("div",{children:[i.jsx("p",{className:"account-card__eyebrow",children:"Player"}),i.jsx("h1",{children:h.name}),h.username&&i.jsxs("p",{className:"player-username",children:["@",h.username]})]})]}),i.jsxs("div",{className:"dashboard-grid",children:[i.jsxs("section",{className:"dashboard-card",children:[i.jsx("header",{children:i.jsx("h3",{children:"Favorites"})}),h.favorites&&h.favorites.length?i.jsx("ul",{className:"simple-list",children:h.favorites.map(x=>{const E=C.get(x);return i.jsx("li",{children:E?E.name:`Character ${x}`},`${h.id}-${x}`)})}):i.jsx("p",{className:"account-muted",children:"No favorites shared."})]}),i.jsxs("section",{className:"dashboard-card",children:[i.jsx("header",{children:i.jsx("h3",{children:"Featured"})}),y?i.jsx("p",{children:y.name}):i.jsx("p",{className:"account-muted",children:"No featured character."})]})]})]})}const wc="http://localhost:4000/api";function t0(){const{user:r}=Cn(),[h,f]=v.useState({unlocked:[],details:[]}),[m,p]=v.useState([]),[b,j]=v.useState([]),[C,y]=v.useState([]),[x,E]=v.useState(""),w=v.useMemo(()=>{const M=new Map;return jt.forEach(B=>M.set(B.id,B)),M},[]);if(v.useEffect(()=>{const M=async()=>{if(r)try{const V=await fetch(`${wc}/secrets/progress`,{credentials:"include"}),O=await V.json();V.ok&&f({unlocked:O.unlocked||[],details:O.details||[]})}catch{}},B=async()=>{if(r)try{const V=await fetch(`${wc}/characters/visible`),O=await V.json();V.ok&&Array.isArray(O.visibleIds)&&j(O.visibleIds);const D=await fetch(`${wc}/characters/me`,{credentials:"include"}),q=await D.json();D.ok&&p(Array.isArray(q.favorites)?q.favorites:[])}catch{}},H=async()=>{if(r)try{const V=await fetch(`${wc}/files/list`,{credentials:"include"}),O=await V.json();V.ok&&y(Array.isArray(O.documents)?O.documents:[])}catch{}};M(),B(),H()},[r]),!r)return i.jsxs("div",{className:"page-container",children:[i.jsx("h1",{children:"Dashboard"}),i.jsx("p",{children:"Please log in to view your dashboard."})]});const k=m.filter(M=>b.includes(M)).map(M=>w.get(M)).filter(Boolean);return i.jsxs("div",{className:"page-container",children:[i.jsxs("div",{className:"dashboard-hero",children:[i.jsx("div",{className:"dashboard-avatar",children:r.profilePicture?i.jsx("img",{src:r.profilePicture,alt:""}):i.jsx("span",{children:(r.username||r.email||"?")[0]})}),i.jsxs("div",{children:[i.jsx("p",{className:"account-card__eyebrow",children:"Profile"}),i.jsx("h1",{children:r.username||r.name||"User"}),i.jsx("p",{className:"account-card__subtitle",children:r.profile?.bio||"No bio yet."}),i.jsxs("div",{className:"dashboard-labels",children:[r.profile?.labelOne&&i.jsx("span",{className:"tag",children:r.profile.labelOne}),r.profile?.labelTwo&&i.jsx("span",{className:"tag",children:r.profile.labelTwo})]})]})]}),i.jsxs("div",{className:"dashboard-grid",children:[i.jsxs("section",{className:"dashboard-card",children:[i.jsx("header",{children:i.jsx("h3",{children:"Unlocked Secrets"})}),h.details.length===0?i.jsx("p",{className:"account-muted",children:"No secrets unlocked yet."}):i.jsx("ul",{className:"simple-list",children:h.details.map(M=>i.jsx("li",{children:M.title},M.id))})]}),i.jsxs("section",{className:"dashboard-card",children:[i.jsx("header",{children:i.jsx("h3",{children:"Favorites"})}),k.length===0?i.jsx("p",{className:"account-muted",children:"No favorites selected."}):i.jsx("ul",{className:"simple-list",children:k.map(M=>i.jsx("li",{children:M.name},M.id))})]}),i.jsxs("section",{className:"dashboard-card",children:[i.jsx("header",{children:i.jsx("h3",{children:"Documents"})}),C.length===0?i.jsx("p",{className:"account-muted",children:"No uploads yet."}):i.jsx("ul",{className:"simple-list",children:C.map(M=>i.jsx("li",{children:i.jsx("strong",{children:M.originalName})},M.id))})]})]}),x&&i.jsx("p",{className:"account-error",children:x})]})}const n0=[{title:"Worldbuilding",body:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean commodo ligula eget dolor sed dignissim."},{title:"Campaign Vision",body:"Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu."},{title:"Community",body:"In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium."}],a0=[{label:"The Map",detail:'Our Map is the foundation of Azterra. We wanted this to be something you could use for any campaign, but this website also lets you build your own. This main map allows you to create your own campaign map using our prebuilt regions. To do this, simply log in and start editing! If you want to create your own map, you can do so by clicking on the "Create New Map" button in the top right corner. It will be stored and accessible within the Map tab.'},{label:"The Campaign",detail:'Our Campaign is the heart of Azterra. This is something we are still working on, but we are excited to see where it goes. This is simply our way of showing our inspiration for Azterra. If you want to create your own campaign, you can do so by clicking on the "Create New Campaign" button in the top right corner. It will be stored and accessible within the Campaign tab later on.'},{label:"The Whole",detail:"The whole of this website is for Dungeons & Dragons. We intended to make this website as a one place for information, campaign creation, and a place for community with our soon to be added features for sharing your campaign for others to see!"}];function i0(){return i.jsxs("div",{className:"about-page custom-scrollbar",children:[i.jsx("div",{className:"about-sheen","aria-hidden":"true"}),i.jsxs("section",{className:"about-hero",children:[i.jsx("div",{className:"about-hero__eyebrow",children:"About"}),i.jsx("h1",{className:"about-hero__title",children:"The Story Behind Azterra"}),i.jsx("p",{className:"about-hero__lead",children:"Welcome to Azterra! A home for Dungeon Masters to create and share their campaigns and maps with their players and the community."}),i.jsxs("div",{className:"about-hero__cta-row",children:[i.jsx("div",{className:"about-badge",children:"Handcrafted campaign setting"}),i.jsx("div",{className:"about-badge about-badge--ghost",children:"Updated as the story evolves"})]})]}),i.jsxs("section",{className:"about-section",children:[i.jsxs("div",{className:"about-section__header",children:[i.jsx("p",{className:"about-eyebrow",children:"What to know"}),i.jsx("h2",{className:"about-title",children:"Who we are & what we are building"}),i.jsx("p",{className:"about-subtitle",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec vitae sapien ut libero venenatis faucibus. Maecenas nec odio et ante tincidunt tempus."})]}),i.jsx("div",{className:"about-grid",children:n0.map(r=>i.jsxs("article",{className:"about-card",children:[i.jsx("div",{className:"about-card__shine","aria-hidden":"true"}),i.jsx("h3",{children:r.title}),i.jsx("p",{children:r.body})]},r.title))})]}),i.jsxs("section",{className:"about-section",children:[i.jsx("div",{className:"about-section__header about-section__header--inline",children:i.jsxs("div",{children:[i.jsx("p",{className:"about-eyebrow",children:"Creating"}),i.jsx("h2",{className:"about-title",children:"How to use Azterra"})]})}),i.jsx("div",{className:"about-timeline",children:a0.map(r=>i.jsxs("div",{className:"about-timeline__item",children:[i.jsx("div",{className:"about-timeline__dot"}),i.jsxs("div",{className:"about-timeline__content",children:[i.jsx("h3",{children:r.label}),i.jsx("p",{children:r.detail})]})]},r.label))})]}),i.jsxs("section",{className:"about-section",children:[i.jsxs("div",{className:"about-section__header",children:[i.jsx("p",{className:"about-eyebrow",children:"Heroes"}),i.jsx("h2",{className:"about-title",children:"Meet our characters"}),i.jsx("p",{className:"about-subtitle",children:"Peek at the legends shaping Azterra. Each hero card holds their origin, quirks, and the quests that forged them."})]}),i.jsxs("div",{className:"about-characters",children:[i.jsxs("div",{children:[i.jsx("h3",{children:"Step into their stories"}),i.jsx("p",{children:"Browse the full roster to see who is sworn to defend the realm, who is chasing secrets, and which allies might join your next session."})]}),i.jsx(Mn,{to:"/compendium/heroes",className:"about-characters__cta",children:"Explore heroes"})]})]}),i.jsxs("section",{className:"about-section about-section--soft",children:[i.jsxs("div",{className:"about-section__header",children:[i.jsx("p",{className:"about-eyebrow",children:"Join in"}),i.jsx("h2",{className:"about-title",children:"We save a seat for every explorer"}),i.jsx("p",{className:"about-subtitle",children:"Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus."})]}),i.jsxs("div",{className:"about-highlight",children:[i.jsxs("div",{children:[i.jsx("h3",{children:"Bring your own legend"}),i.jsx("p",{children:"Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu."})]}),i.jsx("div",{className:"about-highlight__cta",children:"Lorem ipsum sit amet"})]})]}),i.jsxs("section",{className:"about-section",id:"map",children:[i.jsxs("div",{className:"about-section__header",children:[i.jsx("p",{className:"about-eyebrow",children:"Cartography"}),i.jsx("h2",{className:"about-title",children:"How the map and editor work"}),i.jsx("p",{className:"about-subtitle",children:"The Map tab opens directly to the canvas  drag to explore, shift-scroll to zoom, and click pins to read lore. Switch the Editor toggle to drop regions, rename landmarks, and sync them to your Atlas entries."})]}),i.jsxs("div",{className:"about-grid",children:[i.jsxs("article",{className:"about-card",children:[i.jsx("div",{className:"about-card__shine","aria-hidden":"true"}),i.jsx("h3",{children:"Player-safe view"}),i.jsx("p",{children:"Keep spoilers hidden while players browse. Editor off means only public notes show."})]}),i.jsxs("article",{className:"about-card",children:[i.jsx("div",{className:"about-card__shine","aria-hidden":"true"}),i.jsx("h3",{children:"Live region overlays"}),i.jsx("p",{children:"Regions you add on the map populate the Atlas so you can reference them in character sheets or sessions."})]}),i.jsxs("article",{className:"about-card",children:[i.jsx("div",{className:"about-card__shine","aria-hidden":"true"}),i.jsx("h3",{children:"Session flow"}),i.jsx("p",{children:"Prep ahead by bookmarking coordinates and moving between hotspots as the party travels."})]})]})]})]})}const rg=[{id:1,name:"Seren the Scout",role:"NPC",type:"Scout",blurb:"A sharp-eyed ranger who guides travelers."},{id:2,name:"Brother Caldus",role:"NPC",type:"Cleric",blurb:"Keeps quiet notes on every pilgrim."},{id:3,name:"Verrik the Scribe",role:"NPC",type:"Scribe",blurb:"Maintains the chronicle of deeds."},{id:4,name:"Captain Lyra",role:"NPC",type:"Captain",blurb:"Commands the watch in the harbor."},{id:5,name:"Mira of the Veil",role:"NPC",type:"Seer",blurb:"Speaks in half-hidden prophecies."},{id:6,name:"Keeper of the Ember Vault",role:"NPC",type:"Guardian",blurb:"Stands watch over a chamber of auroral embers.",secretId:"aurora-ember"},{id:7,name:"Archivist of Silence",role:"NPC",type:"Scholar",blurb:"Holds the keys to a silent archive beneath the stacks.",secretId:"silent-archive"},{id:8,name:"Gilded Horizon Herald",role:"NPC",type:"Messenger",blurb:"Arrives only when the horizon shines gold.",secretId:"gilded-horizon"},{id:9,name:"Amber Custodian",role:"NPC",type:"Warden",blurb:"Guards letters sealed in amber light.",secretId:"amber-archive"},{id:10,name:"Whisper from the Shadow Court",role:"NPC",type:"Agent",blurb:"A veiled envoy from the Shadow Court.",secretId:"shadow-court"}],ra="http://localhost:4000/api",s0=["npcs","players"],l0=["All","Main","Side"],kc=[{id:"aurora-ember",label:"Aurora Ember"},{id:"silent-archive",label:"Silent Archive"},{id:"gilded-horizon",label:"Gilded Horizon"},{id:"amber-archive",label:"Amber Archive"},{id:"shadow-court",label:"Shadow Court"}];kc.map(r=>r.id);const Yd=[{id:"sunset",label:"Sunset Mirage",background:"linear-gradient(135deg, rgba(247, 146, 86, 0.85), rgba(23, 14, 9, 0.95))",foreground:"#ffe5ba",accent:"#f79256"},{id:"aurora",label:"Aurora Veil",background:"linear-gradient(135deg, rgba(67, 206, 162, 0.8), rgba(24, 90, 157, 0.95))",foreground:"#e7f5ff",accent:"#43cea2"},{id:"nightfall",label:"Nightfall Alloy",background:"linear-gradient(135deg, rgba(41, 31, 53, 0.95), rgba(13, 13, 20, 0.95))",foreground:"#f6d7ff",accent:"#b084f7"},{id:"oasis",label:"Oasis Bloom",background:"linear-gradient(135deg, rgba(47, 72, 88, 0.92), rgba(24, 112, 105, 0.92))",foreground:"#d6ffea",accent:"#57c5b6"},{id:"emberstorm",label:"Ember Storm",background:"linear-gradient(145deg, rgba(191, 45, 28, 0.9), rgba(49, 4, 14, 0.95))",foreground:"#ffe3d4",accent:"#ff7b54"},{id:"luminant",label:"Luminant Frost",background:"linear-gradient(135deg, rgba(62, 70, 132, 0.9), rgba(31, 43, 72, 0.95))",foreground:"#e4f3ff",accent:"#9dbbff"},{id:"verdant",label:"Verdant Canopy",background:"linear-gradient(135deg, rgba(34, 68, 56, 0.9), rgba(12, 31, 23, 0.95))",foreground:"#d9ffe0",accent:"#6fcf97"},{id:"solstice",label:"Solstice Crown",background:"linear-gradient(135deg, rgba(232, 182, 56, 0.9), rgba(118, 67, 0, 0.95))",foreground:"#fff5d6",accent:"#f5c451"},{id:"tidal",label:"Tidal Horizon",background:"linear-gradient(135deg, rgba(19, 78, 112, 0.9), rgba(3, 30, 53, 0.95))",foreground:"#d6f1ff",accent:"#4cc9f0"},{id:"amethyst",label:"Amethyst Shroud",background:"linear-gradient(135deg, rgba(126, 67, 170, 0.9), rgba(35, 13, 53, 0.95))",foreground:"#f5e0ff",accent:"#d295ff"},{id:"foundry",label:"Iron Foundry",background:"linear-gradient(135deg, rgba(67, 70, 75, 0.92), rgba(20, 20, 24, 0.95))",foreground:"#f2f2f2",accent:"#f2a365"},{id:"crimsonwood",label:"Crimson Wood",background:"linear-gradient(135deg, rgba(120, 28, 44, 0.92), rgba(45, 10, 18, 0.95))",foreground:"#ffdada",accent:"#ff5e78"},{id:"auric",label:"Auric Temple",background:"linear-gradient(135deg, rgba(191, 161, 96, 0.9), rgba(42, 34, 18, 0.95))",foreground:"#fff6db",accent:"#f0d290"},{id:"cobalt",label:"Cobalt Drift",background:"linear-gradient(135deg, rgba(25, 53, 97, 0.9), rgba(10, 17, 30, 0.95))",foreground:"#d7e8ff",accent:"#5c7cfa"},{id:"dawnlight",label:"Dawnlight",background:"linear-gradient(135deg, rgba(255, 182, 133, 0.9), rgba(237, 118, 84, 0.95))",foreground:"#fff6ec",accent:"#ff9f68"},{id:"selenic",label:"Selenic Veil",background:"linear-gradient(135deg, rgba(32, 28, 61, 0.9), rgba(5, 5, 12, 0.95))",foreground:"#e0e0ff",accent:"#a5a6f6"},{id:"mistwood",label:"Mistwood Trail",background:"linear-gradient(135deg, rgba(56, 74, 60, 0.9), rgba(24, 33, 28, 0.95))",foreground:"#eaf8ef",accent:"#9ad1b4"},{id:"emberglow",label:"Emberglow Grove",background:"linear-gradient(135deg, rgba(208, 84, 48, 0.9), rgba(109, 29, 20, 0.95))",foreground:"#ffe8d9",accent:"#ffab76"}];function r0(){const{role:r,user:h}=Cn(),{portraitConfig:f,portraitStatus:m,refreshPortraitStatus:p,generatePortrait:b}=Hg(),j=r==="admin",[C,y]=v.useState("npcs"),[x,E]=v.useState("All"),[w,k]=v.useState(!1),[M,B]=v.useState([]),[H,V]=v.useState([]),[O,D]=v.useState([]),[q,ae]=v.useState([]),[F,xe]=v.useState([]),[J,ce]=v.useState([]),[U,be]=v.useState([]),[we,Ae]=v.useState([]),[He,qe]=v.useState(null),[_e,A]=v.useState([0,0,0,1]),[K,le]=v.useState([0,0,0,1]),[je,Z]=v.useState(0),[T,$]=v.useState(""),[oe,he]=v.useState(!1),[ge,ye]=v.useState({}),[ke,Se]=v.useState({}),[Be,Je]=v.useState({}),[Re,We]=v.useState(null),[Ct,Kt]=v.useState(null),[Gt,Yn]=v.useState(null),[En,ca]=v.useState([]),[Xt,cn]=v.useState({}),[tn,xn]=v.useState([]),[ua,Bt]=v.useState({locations:[],npcs:[],players:[]}),[$n,da]=v.useState(null),[ct,zn]=v.useState(null),[Ai,Ia]=v.useState("details"),[li,La]=v.useState({}),[Rn,Pt]=v.useState({});v.useEffect(()=>{(async()=>{$("");try{const ie=await fetch(`${ra}/view/characters`,{credentials:"include"}),Ee=await ie.json();ie.ok&&B(Ee.visibleIds||[]);const ee=await fetch(`${ra}/view/npcs`,{credentials:"include"}),Oe=await ee.json();if(ee.ok){const Le=Oe.items||[],vt=Le.filter(Ye=>Ye.visible!==!1).map(Ye=>Ye.id);V(vt),ae(Le),ce(Oe.truesightIds||[])}const Ze=await fetch(`${ra}/view/locations`,{credentials:"include"}),Te=await Ze.json();if(Ze.ok){const Le=Te.items||[],vt=Le.filter(Ye=>Ye.visible!==!1).map(Ye=>Ye.id);D(vt),xe(Le),be(Te.truesightIds||[])}if(h){const Le=await fetch(`${ra}/view/favorites`,{credentials:"include"}),vt=await Le.json();Le.ok&&ca(vt.viewFavorites||[]);const Ye=await fetch(`${ra}/view/players`,{credentials:"include"}),rt=await Ye.json();if(Ye.ok&&Ae(rt.users||[]),j){const bn=await fetch(`${ra}/entities/players`,{credentials:"include"});if(bn.ok){const sn=await bn.json(),at={};(sn.items||[]).forEach(ot=>{at[ot.id]=ot}),Pt(at)}}}}catch(ie){$(ie.message||"Unable to load view data.")}})()},[h,j]),v.useEffect(()=>{k(j)},[j]);const pn=v.useMemo(()=>[[255,213,128,.8],[247,146,86,.7],[255,215,0,.75]],[]),nn=(I,ie)=>I.truesight?!0:I.visible?Qd(ie,{roles:["guest","editor","admin","pending","player"],secretId:I.secretId}):!1,kt=v.useMemo(()=>{const I=(ee="Main")=>x==="All"||(ee||"Main")===x,Ee={role:w&&j?"admin":r,unlockedSecrets:j&&!w?tn:Array.isArray(h?.unlockedSecrets)?h.unlockedSecrets:[]};if(C==="npcs"){const Oe=(q.length?q:rg).map(Te=>({...Te,visible:Te.visible!==!1,truesight:J.includes(Te.id),campaign:Te.campaign||"Main"}));return(w&&j?Oe:Oe.filter(Te=>nn(Te,Ee))).filter(Te=>I(Te.campaign))}if(C==="players"){const ee=we.length&&w&&j?we:we.length?we.filter(Ze=>I(Ze.campaign)):jt.filter(Ze=>w&&j||M.includes(Ze.id)).map(Ze=>({id:Ze.id,name:Ze.name,character:Ze,campaign:Ze.campaign||"Main"})).filter(Ze=>I(Ze.campaign));return w&&j?ee:ee.filter(Ze=>Qd(Ee,{roles:["guest","editor","admin","pending","player"],secretId:Ze.secretId}))}return[]},[C,we,M,q,j,x,w,r,J,tn,h]);v.useEffect(()=>{if(C!=="players")return;const I=new Set;kt.forEach(ie=>{const Ee=ie.character||jt.find(ee=>ee.id===ie.featuredCharacter)||jt.find(ee=>ee.id===ie.id);Ee?.id&&I.add(Ee.id)}),I.forEach(ie=>p(ie))},[C,kt,p]),v.useEffect(()=>{Bt(I=>{const ie=kt.map(Te=>`${C}-${Te.id}`),Ee=(I[C]||[]).filter(Te=>ie.includes(Te)),ee=[...Ee,...ie.filter(Te=>!Ee.includes(Te))],Oe=I[C]||[];return ee.length===Oe.length&&ee.every((Te,Le)=>Te===Oe[Le])?I:{...I,[C]:ee}})},[kt,C]),v.useEffect(()=>{w||zn(null)},[w]),v.useEffect(()=>{if(!ct)return;(ct.type==="locations"?F:ct.type==="npcs"?q:we).some(Ee=>String(Ee.id)===String(ct.id))||zn(null)},[ct,F,q,we]);const ki=v.useMemo(()=>{const I=ua[C]||[],ie=new Map(kt.map(Oe=>[`${C}-${Oe.id}`,Oe])),Ee=I.map(Oe=>ie.get(Oe)).filter(Boolean),ee=kt.filter(Oe=>!I.includes(`${C}-${Oe.id}`));return[...Ee,...ee]},[ua,kt,C]);v.useEffect(()=>{if(!kt.length)return;const I=pn[(He??0)%pn.length];A(K),le(I),Z(0)},[He,kt.length,pn,K]);const un=async(I,ie)=>{if(!j||!h)return;const Ee=ie==="npc"?"npcs/visible":"locations/visible",ee=ie==="npc"?new Set(H):new Set(O);ee.has(I)?ee.delete(I):ee.add(I);const Oe={visibleIds:Array.from(ee)};try{await fetch(`${ra}/view/${Ee}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(Oe)}),ie==="npc"?(V(Oe.visibleIds),ae(Ze=>Ze.map(Te=>Te.id===I?{...Te,visible:Oe.visibleIds.includes(I)}:Te))):(D(Oe.visibleIds),xe(Ze=>Ze.map(Te=>Te.id===I?{...Te,visible:Oe.visibleIds.includes(I)}:Te)))}catch(Ze){$(Ze.message||"Unable to update visibility.")}},Fn=async(I,ie)=>{if(!j||!h)return;const Ee=ie==="npc"?"npcs/truesight":"locations/truesight",ee=ie==="npc"?new Set(J):new Set(U);ee.has(I)?ee.delete(I):ee.add(I);const Oe={truesightIds:Array.from(ee)};try{await fetch(`${ra}/view/${Ee}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(Oe)}),ie==="npc"?(ce(Oe.truesightIds),ae(Ze=>Ze.map(Te=>Te.id===I?{...Te,truesight:Oe.truesightIds.includes(I)}:Te))):(be(Oe.truesightIds),xe(Ze=>Ze.map(Te=>Te.id===I?{...Te,truesight:Oe.truesightIds.includes(I)}:Te)))}catch(Ze){$(Ze.message||"Unable to update truesight.")}},dn=(I,ie,Ee)=>{ye(ee=>({...ee,[I]:{...ee[I]||{},[ie]:Ee}}))},an=(I,ie,Ee)=>{Se(ee=>({...ee,[I]:{...ee[I]||{},[ie]:Ee}}))},gt=(I,ie)=>{if(!ie)return;if(!ie.type.startsWith("image/")){$("Please upload an image file (png, jpg, webp).");return}const Ee=new FileReader;Ee.onload=()=>{an(I,"heroImage",Ee.result)},Ee.readAsDataURL(ie)},Ga=(I,ie)=>{I.preventDefault(),I.stopPropagation();const Ee=I.dataTransfer?.files?.[0];gt(ie,Ee)},Aa=(I,ie)=>{const Ee=I.target.files?.[0];gt(ie,Ee),I.target.value=""},ms=(I,ie,Ee)=>{I.dataTransfer.effectAllowed="move",I.dataTransfer.setData("text/plain",Ee),da(Ee)},ha=(I,ie,Ee)=>{I.preventDefault(),!(!$n||$n===Ee)&&Bt(ee=>{const Oe=[...ee[ie]||[]],Ze=Oe.indexOf($n),Te=Oe.indexOf(Ee);return Ze===-1||Te===-1?ee:(Oe.splice(Ze,1),Oe.splice(Te,0,$n),{...ee,[ie]:Oe})})},ka=I=>{I.preventDefault(),da(null)},Kn=()=>{da(null)},ps=async I=>{if(!(!I||!j||!h)){La(ie=>({...ie,[I]:!0})),$("");try{const ie=await b(I);if(ie.error)throw new Error(ie.error);await p(I)}catch(ie){$(ie.message||"Unable to generate portrait.")}finally{La(ie=>{const Ee={...ie};return delete Ee[I],Ee})}}},Mi=(I,ie)=>{!w||!j||(zn({type:I,id:ie}),Ia("details"))},fa=()=>{ct&&cn(I=>{const ie={...I};return delete ie[`${ct.type}-${ct.id}`],ie}),zn(null)},Va=I=>({...I,...ge[I.id]||{}}),Ot=I=>({...I,...ke[I.id]||{}}),Me=I=>({...I,...Rn[I.id]||{},...Be[I.id]||{}}),Ma=async I=>{if(!j||!h)return;const ie=q.find(ee=>ee.id===I);if(!ie)return;const Ee=Va(ie);We(I),$("");try{const ee=await fetch(`${ra}/entities/npcs/save`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({...Ee,id:Ee.id,locationId:Ee.locationId||null,campaign:Ee.campaign||"Main"})}),Oe=await ee.json();if(!ee.ok)throw new Error(Oe.error||"Unable to save NPC.");const Ze=Array.isArray(Oe.items)?Oe.items:[Oe.item].filter(Boolean);ae(Ze.map(Te=>({...Te,visible:H.includes(Te.id),truesight:J.includes(Te.id)}))),ye(Te=>{const Le={...Te};return delete Le[I],Le})}catch(ee){$(ee.message||"Unable to save NPC.")}finally{We(null)}},ri=async I=>{if(!j||!h)return;const ie=ee=>{const{visible:Oe,truesight:Ze,...Te}=ee;return{...Te,campaign:ee.campaign||"Main",regionId:ee.regionId??null,markerId:ee.markerId??null}},Ee=F.map(ee=>ee.id===I?ie(Ot(ee)):ie(ee));Kt(I),$("");try{const ee=await fetch(`${ra}/locations/save`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({locations:Ee})}),Oe=await ee.json();if(!ee.ok)throw new Error(Oe.error||"Unable to save location.");const Ze=Array.isArray(Oe.locations)?Oe.locations:[];xe(Ze.map(Te=>({...Te,visible:O.includes(Te.id),truesight:U.includes(Te.id)}))),Se(Te=>{const Le={...Te};return delete Le[I],Le})}catch(ee){$(ee.message||"Unable to save location.")}finally{Kt(null)}},Tn=async I=>{if(!j||!h||!I)return;const ie=Me(I);Yn(I.id),$("");try{const Ee=await fetch(`${ra}/entities/players/save`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({...ie,id:I.id,name:ie.name||I.name,description:ie.description||""})}),ee=await Ee.json();if(!Ee.ok)throw new Error(ee.error||"Unable to save player metadata.");const Oe=Array.isArray(ee.items)?ee.items:[ee.item].filter(Boolean),Ze={};Oe.forEach(Te=>{Ze[Te.id]=Te}),Pt(Ze),Je(Te=>{const Le={...Te};return delete Le[I.id],Le})}catch(Ee){$(Ee.message||"Unable to save player metadata.")}finally{Yn(null)}},Lt=async I=>{if(h){he(!0);try{const ie=C==="players"?"character":C==="npcs"?"npc":"location";await fetch(`${ra}/view/favorite`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({type:ie,id:I,favorite:!En.includes(`${ie}:${I}`)})});const Ee=await fetch(`${ra}/view/favorites`,{credentials:"include"}),ee=await Ee.json();Ee.ok&&ca(ee.viewFavorites||[])}catch{}finally{he(!1)}}},Ut=(I,ie)=>{const Ee=`${C}-${I.id}`,ee=!!Xt[Ee],Oe=$n===Ee,Ze=()=>{qe(ie);const Le=!ee;cn(vt=>({...vt,[Ee]:Le})),w&&j&&(Le?Mi(C,I.id):ct&&ct.type===C&&String(ct.id)===String(I.id)&&fa())},Te={draggable:!0,onDragStart:Le=>ms(Le,C,Ee),onDragOver:Le=>ha(Le,C,Ee),onDragEnd:Kn,onDrop:ka};if(C==="players"){const Le=I.character||jt.find(ot=>ot.id===I.featuredCharacter)||jt.find(ot=>ot.id===I.id),vt=Me(I),Ye=jt.filter(ot=>w&&j||M.includes(ot.id)),rt=Le?m[Le.id]:null,bn=rt?.url,sn=j&&w&&Le&&(Le.imageDescription||I.imageDescription),at=f.checked&&!f.enabled;return i.jsxs("div",{className:`view-card ${ee?"view-card--expanded":""} ${Oe?"view-card--dragging":""}`,onClick:Ze,role:"button",tabIndex:0,...Te,children:[i.jsxs("div",{className:"view-card__header",children:[i.jsxs("div",{children:[i.jsx("p",{className:"account-card__eyebrow",children:I.username?`@${I.username}`:"Player"}),i.jsx("h3",{children:I.name||Le?.name})]}),Le&&i.jsx("button",{type:"button",className:`fav-btn ${En.includes(`character:${Le.id}`)?"fav-btn--active":""}`,onClick:ot=>{ot.stopPropagation(),Lt(Le.id)},disabled:oe,children:En.includes(`character:${Le.id}`)?"":""})]}),Le&&i.jsxs("div",{className:"view-card__body",children:[bn?i.jsx("div",{className:"view-card__media",style:{maxHeight:220},children:i.jsx("img",{src:bn,alt:`${Le.name} portrait`})}):i.jsx("p",{className:"account-muted",children:"No portrait yet."}),i.jsxs("p",{className:"account-muted",children:[Le.class,"  ",Le.race]}),j&&w?i.jsxs("label",{className:"admin-field",children:[i.jsx("span",{children:"Description"}),i.jsx("textarea",{value:vt.description||"",rows:3,onClick:ot=>ot.stopPropagation(),onChange:ot=>Je(ma=>({...ma,[I.id]:{...ma[I.id]||{},description:ot.target.value}}))})]}):vt.description&&i.jsx("p",{className:"account-muted",children:vt.description})]}),ee&&i.jsxs("div",{className:"view-card__body",children:[i.jsx("p",{className:"account-muted",children:"Visible Characters"}),i.jsx("div",{className:"mini-list",children:Ye.length?Ye.map(ot=>i.jsx("span",{children:ot.name},ot.id)):i.jsx("span",{children:"No characters visible."})}),Le&&sn&&i.jsxs("div",{className:"view-card__actions",onClick:ot=>ot.stopPropagation(),children:[i.jsx("button",{type:"button",className:"admin-toggle-btn",disabled:at||li[Le.id],title:at?"Image generation unavailable (missing API key)":"",onClick:()=>ps(Le.id),children:li[Le.id]?"Generating...":rt?.exists?"Regenerate Portrait":"Generate Portrait"}),at&&i.jsx("p",{className:"account-muted",children:"Portrait generation disabled (no key)."})]}),j&&w&&i.jsx("div",{className:"view-card__actions",onClick:ot=>ot.stopPropagation(),children:i.jsx("button",{type:"button",className:"admin-toggle-btn",disabled:Gt===I.id,onClick:()=>Tn(I),children:Gt===I.id?"Saving...":"Save Description"})}),j&&w&&I.secretId&&i.jsx("div",{className:"secret-meta",children:i.jsxs("p",{className:"account-muted",children:["Requires secret: ",I.secretId]})})]})]})}if(C==="npcs"){const Le=Va(I),vt=(F.length?F:Jd.locations||[]).sort((Ye,rt)=>(Ye.name||"").localeCompare(rt.name||""));return i.jsxs("div",{className:`view-card ${ee?"view-card--expanded":""} ${Oe?"view-card--dragging":""}`,onClick:Ze,role:"button",tabIndex:0,...Te,children:[i.jsxs("div",{className:"view-card__header",children:[i.jsxs("div",{children:[i.jsx("p",{className:"account-card__eyebrow",children:I.type}),i.jsx("h3",{children:I.name})]}),i.jsx("div",{className:"view-card__actions",children:h&&i.jsx("button",{type:"button",className:`fav-btn ${En.includes(`npc:${I.id}`)?"fav-btn--active":""}`,onClick:Ye=>{Ye.stopPropagation(),Lt(I.id)},disabled:oe,children:En.includes(`npc:${I.id}`)?"":""})})]}),j&&w?i.jsxs("label",{className:"admin-field",onClick:Ye=>Ye.stopPropagation(),children:[i.jsx("span",{children:"Description"}),i.jsx("textarea",{value:Le.blurb||"",rows:2,onChange:Ye=>dn(Le.id,"blurb",Ye.target.value)})]}):i.jsx("p",{className:"account-muted",children:I.blurb}),ee&&i.jsxs("div",{className:"view-card__body",children:[i.jsx("p",{className:"account-muted",children:"Related Locations"}),i.jsx("div",{className:"mini-list",children:vt.length?vt.filter(Ye=>Le.locationId&&String(Ye.id)===String(Le.locationId)).map(Ye=>i.jsx("span",{children:Ye.name},Ye.id)):i.jsx("span",{children:"None linked."})}),j&&w&&i.jsx("div",{className:"view-card__actions",onClick:Ye=>Ye.stopPropagation(),children:i.jsx("button",{type:"button",className:"admin-toggle-btn",disabled:Re===I.id,onClick:()=>Ma(I.id),children:Re===I.id?"Saving...":"Save NPC"})}),j&&w&&I.secretId&&i.jsx("div",{className:"secret-meta",children:i.jsxs("p",{className:"account-muted",children:["Requires secret: ",I.secretId]})})]})]})}if(C==="locations"){const Le=Ot(I),vt=(q.length?q:rg).filter(at=>at.locationId&&String(at.locationId)===String(Le.id)),Ye=we.filter(at=>at.locationId&&String(at.locationId)===String(Le.id)),rt=Le.heroImage||Le.image||Le.imageUrl||"",bn=Yd.find(at=>at.id===Le.cardStyle)||Yd[0],sn=w&&j?i.jsxs("div",{children:[i.jsx("p",{className:"account-card__eyebrow",children:Le.category||Le.type}),i.jsx("h3",{children:Le.name})]}):i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"account-card__eyebrow",children:I.category||I.type}),i.jsx("h3",{children:I.name})]});return i.jsxs("div",{className:`view-card view-card--media ${ee?"view-card--expanded":""} ${Oe?"view-card--dragging":""}`,style:{background:bn.background,color:bn.foreground},onClick:Ze,role:"button",tabIndex:0,...Te,children:[i.jsxs("div",{className:"view-card__media",children:[rt?i.jsx("img",{src:rt,alt:`${Le.name} illustration`}):i.jsx("div",{className:"view-card__media-placeholder",children:"No image yet. Drop one in editor mode."}),i.jsxs("div",{className:"view-card__title-overlay",children:[i.jsx("div",{children:sn}),i.jsx("div",{className:"view-card__media-actions",children:(ee||w&&j)&&h&&i.jsx("button",{type:"button",className:`fav-btn ${En.includes(`location:${I.id}`)?"fav-btn--active":""}`,onClick:at=>{at.stopPropagation(),Lt(I.id)},disabled:oe,children:En.includes(`location:${I.id}`)?"":""})})]})]}),ee&&i.jsx("div",{className:`view-card__expanded ${w&&j?"view-card__expanded--admin":""}`,onClick:at=>at.stopPropagation(),children:i.jsxs("div",{className:"view-card__details",children:[i.jsxs("div",{className:"view-card__detail-block",children:[i.jsx("p",{className:"detail-label",children:"Description"}),i.jsx("p",{children:Le.description||"No description provided."})]}),i.jsxs("div",{className:"view-card__detail-block",children:[i.jsx("p",{className:"detail-label",children:"NPCs here"}),i.jsx("div",{className:"mini-list",children:vt.length?vt.map(at=>i.jsx("span",{children:at.name},at.id)):i.jsx("span",{children:"No NPCs linked."})})]}),i.jsxs("div",{className:"view-card__detail-block",children:[i.jsx("p",{className:"detail-label",children:"Characters here"}),i.jsx("div",{className:"mini-list",children:Ye.length?Ye.map(at=>i.jsx("span",{children:at.name},at.id)):i.jsx("span",{children:"No characters linked."})})]}),rt&&i.jsx("div",{className:"view-card__detail-image",children:i.jsx("img",{src:rt,alt:`${Le.name} detail`})}),j&&w&&I.secretId&&i.jsx("div",{className:"secret-meta",children:i.jsxs("p",{className:"account-muted",children:["Requires secret: ",I.secretId]})})]})})]})}return null},Xn=()=>{if(!w||!j||!ct)return null;if(ct.type==="locations"){const I=F.find(ee=>String(ee.id)===String(ct.id));if(!I)return null;const ie=Ot(I),Ee=ie.heroImage||ie.image||ie.imageUrl||"";return i.jsx("div",{className:"editor-panel-overlay",onClick:fa,children:i.jsxs("div",{className:"editor-panel",onClick:ee=>ee.stopPropagation(),children:[i.jsxs("div",{className:"editor-panel__header",children:[i.jsxs("div",{children:[i.jsx("p",{className:"editor-panel__eyebrow",children:"Location Editor"}),i.jsx("h2",{children:ie.name||"Unnamed Location"})]}),i.jsx("button",{type:"button",className:"editor-panel__close",onClick:fa,"aria-label":"Close editor",children:"X"})]}),i.jsx("div",{className:"editor-panel__tabs",children:["details","visual"].map(ee=>i.jsx("button",{type:"button",className:`editor-panel__tab ${Ai===ee?"editor-panel__tab--active":""}`,onClick:()=>Ia(ee),children:ee==="details"?"Details":"Visual"},ee))}),Ai==="details"?i.jsxs("div",{className:"editor-panel__content",children:[i.jsxs("label",{className:"admin-field",children:[i.jsx("span",{children:"Category"}),i.jsx("input",{value:ie.category||"",onChange:ee=>an(ie.id,"category",ee.target.value)})]}),i.jsxs("label",{className:"admin-field",children:[i.jsx("span",{children:"Name"}),i.jsx("input",{value:ie.name||"",onChange:ee=>an(ie.id,"name",ee.target.value)})]}),i.jsxs("label",{className:"admin-field",children:[i.jsx("span",{children:"Description"}),i.jsx("textarea",{value:ie.description||"",onChange:ee=>an(ie.id,"description",ee.target.value),rows:3})]}),i.jsxs("label",{className:"admin-field",children:[i.jsx("span",{children:"Campaign"}),i.jsx("input",{value:ie.campaign||"",onChange:ee=>an(ie.id,"campaign",ee.target.value)})]}),i.jsxs("label",{className:"admin-field",children:[i.jsx("span",{children:"Region ID"}),i.jsx("input",{value:ie.regionId??"",onChange:ee=>an(ie.id,"regionId",ee.target.value?Number(ee.target.value):null)})]}),i.jsxs("label",{className:"admin-field",children:[i.jsx("span",{children:"Marker ID"}),i.jsx("input",{value:ie.markerId??"",onChange:ee=>an(ie.id,"markerId",ee.target.value?Number(ee.target.value):null)})]}),i.jsxs("label",{className:"admin-field",children:[i.jsx("span",{children:"Secret"}),i.jsxs("select",{value:ie.secretId||"",onChange:ee=>an(ie.id,"secretId",ee.target.value||void 0),children:[i.jsx("option",{value:"",children:"None (public when visible)"}),kc.map(ee=>i.jsx("option",{value:ee.id,children:ee.label},ee.id))]})]}),i.jsxs("div",{className:"editor-panel__toggles",children:[i.jsxs("label",{className:"visibility-toggle",children:[i.jsx("input",{type:"checkbox",checked:ie.visible!==!1,onChange:()=>un(ie.id,"loc")}),i.jsx("span",{children:ie.visible!==!1?"Visible":"Hidden"})]}),i.jsxs("label",{className:"visibility-toggle",children:[i.jsx("input",{type:"checkbox",checked:ie.truesight||!1,onChange:()=>Fn(ie.id,"loc")}),i.jsx("span",{children:ie.truesight?"Truesight":"No Truesight"})]})]}),i.jsx("div",{className:"editor-panel__actions",children:i.jsx("button",{type:"button",className:"admin-toggle-btn",onClick:()=>ri(ie.id),disabled:Ct===ie.id,children:Ct===ie.id?"Saving...":"Save Location"})})]}):i.jsxs("div",{className:"editor-panel__content",children:[i.jsxs("div",{className:"view-card__image-drop",onDrop:ee=>Ga(ee,ie.id),onDragOver:ee=>{ee.preventDefault(),ee.stopPropagation()},children:[i.jsx("p",{children:"Drag & drop an image to update this location."}),i.jsxs("label",{className:"view-card__image-upload",children:["Browse",i.jsx("input",{type:"file",accept:"image/*",onChange:ee=>Aa(ee,ie.id)})]}),Ee&&i.jsx("img",{src:Ee,alt:`${ie.name} preview`})]}),i.jsx("p",{className:"detail-label",children:"Card Themes"}),i.jsx("div",{className:"visual-theme-grid",children:Yd.map(ee=>i.jsx("button",{type:"button",className:`visual-theme ${ie.cardStyle===ee.id?"visual-theme--active":""}`,style:{background:ee.background,color:ee.foreground},onClick:()=>an(ie.id,"cardStyle",ee.id),children:i.jsx("span",{children:ee.label})},ee.id))})]})]})})}if(ct.type==="npcs"){const I=q.find(ee=>String(ee.id)===String(ct.id));if(!I)return null;const ie=Va(I),Ee=(F.length?F:Jd.locations||[]).sort((ee,Oe)=>(ee.name||"").localeCompare(Oe.name||""));return i.jsx("div",{className:"editor-panel-overlay",onClick:fa,children:i.jsxs("div",{className:"editor-panel",onClick:ee=>ee.stopPropagation(),children:[i.jsxs("div",{className:"editor-panel__header",children:[i.jsxs("div",{children:[i.jsx("p",{className:"editor-panel__eyebrow",children:"NPC Editor"}),i.jsx("h2",{children:ie.name||"Unnamed NPC"})]}),i.jsx("button",{type:"button",className:"editor-panel__close",onClick:fa,"aria-label":"Close editor",children:"X"})]}),i.jsxs("div",{className:"editor-panel__content",children:[i.jsxs("label",{className:"admin-field",children:[i.jsx("span",{children:"Role"}),i.jsx("input",{value:ie.type||"",onChange:ee=>dn(ie.id,"type",ee.target.value)})]}),i.jsxs("label",{className:"admin-field",children:[i.jsx("span",{children:"Name"}),i.jsx("input",{value:ie.name||"",onChange:ee=>dn(ie.id,"name",ee.target.value)})]}),i.jsxs("label",{className:"admin-field",children:[i.jsx("span",{children:"Blurb"}),i.jsx("textarea",{value:ie.blurb||"",onChange:ee=>dn(ie.id,"blurb",ee.target.value),rows:3})]}),i.jsxs("label",{className:"admin-field",children:[i.jsx("span",{children:"Campaign"}),i.jsx("input",{value:ie.campaign||"",onChange:ee=>dn(ie.id,"campaign",ee.target.value)})]}),i.jsxs("label",{className:"admin-field",children:[i.jsx("span",{children:"Linked Location"}),i.jsxs("select",{value:ie.locationId||"",onChange:ee=>dn(ie.id,"locationId",ee.target.value?Number(ee.target.value):null),children:[i.jsx("option",{value:"",children:"No location"}),Ee.map(ee=>i.jsx("option",{value:ee.id,children:ee.name},ee.id))]})]}),i.jsxs("label",{className:"admin-field",children:[i.jsx("span",{children:"Secret"}),i.jsxs("select",{value:ie.secretId||"",onChange:ee=>dn(ie.id,"secretId",ee.target.value||void 0),children:[i.jsx("option",{value:"",children:"None (public when visible)"}),kc.map(ee=>i.jsx("option",{value:ee.id,children:ee.label},ee.id))]})]}),i.jsxs("div",{className:"editor-panel__toggles",children:[i.jsxs("label",{className:"visibility-toggle",children:[i.jsx("input",{type:"checkbox",checked:ie.visible!==!1,onChange:()=>un(ie.id,"npc")}),i.jsx("span",{children:ie.visible!==!1?"Visible":"Hidden"})]}),i.jsxs("label",{className:"visibility-toggle",children:[i.jsx("input",{type:"checkbox",checked:ie.truesight||!1,onChange:()=>Fn(ie.id,"npc")}),i.jsx("span",{children:ie.truesight?"Truesight":"No Truesight"})]})]}),i.jsx("div",{className:"editor-panel__actions",children:i.jsx("button",{type:"button",className:"admin-toggle-btn",onClick:()=>Ma(ie.id),disabled:Re===ie.id,children:Re===ie.id?"Saving...":"Save NPC"})})]})]})})}return null};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"page-container people-page",children:[i.jsx("div",{className:"people-page__scrim","aria-hidden":"true"}),i.jsxs("header",{className:"characters-header",children:[i.jsxs("div",{children:[i.jsx("p",{className:"account-card__eyebrow",children:"People"}),i.jsx("h1",{children:"Campaign View"}),i.jsx("p",{className:"nav-hint",children:"Browse visible players, NPCs, and locations. Admins can toggle visibility."})]}),j&&i.jsxs("div",{className:"admin-toggle",children:[i.jsx("button",{type:"button",className:`admin-toggle-btn ${w?"admin-toggle-btn--active":""}`,onClick:()=>k(I=>!I),children:w?"Admin View":"User View"}),!w&&i.jsx("div",{className:"mini-list","aria-label":"Preview secrets",children:kc.map(I=>i.jsxs("button",{type:"button",className:`secret-preview-button ${tn.includes(I.id)?"secret-preview-button--active":""}`,onClick:()=>xn(ie=>ie.includes(I.id)?ie.filter(Ee=>Ee!==I.id):[...ie,I.id]),children:[tn.includes(I.id)?"":""," ",I.label]},I.id))})]})]}),i.jsxs("div",{className:"characters-tabs",children:[s0.map(I=>i.jsxs("button",{className:`tab-btn ${C===I?"tab-btn--active":""}`,type:"button",onClick:()=>y(I),children:[I==="players"&&"Players / Characters",I==="npcs"&&"NPCs"]},I)),i.jsx("div",{className:"campaign-tabs",children:l0.map(I=>i.jsxs("button",{className:`tab-btn ${x===I?"tab-btn--active":""}`,type:"button",onClick:()=>E(I),children:[I," Campaign"]},I))})]}),T&&i.jsx("p",{className:"account-error",children:T}),i.jsx("div",{className:"view-grid",children:ki.map((I,ie)=>i.jsx("div",{children:Ut(I,ie)},`${C}-${I.id}`))})]}),Xn()]})}const Vr="http://localhost:4000/api",o0=[{id:"players",label:"Player Characters"},{id:"npcs",label:"NPCs"},{id:"majors",label:"Major Entities"}];function c0(){const{role:r,user:h}=Cn(),f=r==="admin",[m,p]=v.useState("players"),[b,j]=v.useState([]),[C,y]=v.useState([]),[x,E]=v.useState([]),[w,k]=v.useState([]),[M,B]=v.useState({id:"",name:"",description:"",entityType:"",campaign:"Main",regionId:"",markerId:"",image:"",visible:!0}),[H,V]=v.useState(""),[O,D]=v.useState(!1),q=async()=>{if(h)try{const F=await fetch(`${Vr}/entities/${m}`,{credentials:"include"}),xe=await F.json();if(!F.ok)throw new Error(xe.error||"Unable to load.");j(xe.items||[])}catch(F){V(F.message||"Unable to load.")}};if(v.useEffect(()=>{q()},[m,h]),v.useEffect(()=>{(async()=>{if(h)try{const xe=await fetch(`${Vr}/regions`),J=await xe.json();xe.ok&&y(J.regions||[]);const ce=await fetch(`${Vr}/locations`),U=await ce.json();ce.ok&&E(U.locations||[]),ce.ok&&k(U.locations||[])}catch{}})()},[h]),!f)return i.jsxs("div",{className:"page-container",children:[i.jsx("h1",{children:"Admin Entities"}),i.jsx("p",{children:"You must be an admin to manage entities."})]});const ae=async F=>{F.preventDefault(),D(!0),V("");try{const xe=await fetch(`${Vr}/entities/${m}/save`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(M)}),J=await xe.json();if(!xe.ok)throw new Error(J.error||"Unable to save.");B({id:"",name:"",description:"",entityType:"",campaign:"Main",regionId:"",markerId:"",image:"",visible:!0}),await q()}catch(xe){V(xe.message||"Unable to save.")}finally{D(!1)}};return i.jsxs("div",{className:"page-container",children:[i.jsx("h1",{children:"Admin Entities"}),i.jsx("div",{className:"characters-tabs",children:o0.map(F=>i.jsx("button",{type:"button",className:`tab-btn ${m===F.id?"tab-btn--active":""}`,onClick:()=>p(F.id),children:F.label},F.id))}),i.jsxs("form",{className:"list-panel",onSubmit:ae,children:[i.jsxs("div",{className:"account-field",children:[i.jsx("span",{children:"Name"}),i.jsx("input",{value:M.name,onChange:F=>B({...M,name:F.target.value}),required:!0})]}),i.jsxs("div",{className:"account-field",children:[i.jsx("span",{children:"Description"}),i.jsx("textarea",{value:M.description,onChange:F=>B({...M,description:F.target.value}),rows:3})]}),i.jsxs("div",{className:"account-field",children:[i.jsx("span",{children:"Type / Role"}),i.jsx("input",{value:M.entityType,onChange:F=>B({...M,entityType:F.target.value})})]}),i.jsxs("div",{className:"account-field",children:[i.jsx("span",{children:"Campaign"}),i.jsx("input",{value:M.campaign,onChange:F=>B({...M,campaign:F.target.value})})]}),i.jsxs("div",{className:"account-field",children:[i.jsx("span",{children:"Region"}),i.jsxs("select",{value:M.regionId,onChange:F=>B({...M,regionId:F.target.value}),children:[i.jsx("option",{value:"",children:" None "}),C.map(F=>i.jsx("option",{value:F.id,children:F.name||F.id},F.id))]})]}),i.jsxs("div",{className:"account-field",children:[i.jsx("span",{children:"Marker"}),i.jsxs("select",{value:M.markerId,onChange:F=>B({...M,markerId:F.target.value}),children:[i.jsx("option",{value:"",children:" None "}),x.map(F=>i.jsx("option",{value:F.id,children:F.name||F.id},F.id))]})]}),i.jsxs("div",{className:"account-field",children:[i.jsx("span",{children:"Linked Location"}),i.jsxs("select",{value:M.locationId,onChange:F=>B({...M,locationId:F.target.value}),children:[i.jsx("option",{value:"",children:" None "}),w.map(F=>i.jsx("option",{value:F.id,children:F.name||F.id},F.id))]})]}),i.jsxs("div",{className:"account-field",children:[i.jsx("span",{children:"Image URL"}),i.jsx("input",{value:M.image,onChange:F=>B({...M,image:F.target.value})})]}),i.jsxs("label",{className:"visibility-toggle",children:[i.jsx("input",{type:"checkbox",checked:M.visible,onChange:F=>B({...M,visible:F.target.checked})}),i.jsx("span",{children:"Visible"})]}),i.jsx("button",{type:"submit",disabled:O,children:O?"Saving...":"Save Entity"}),H&&i.jsx("p",{className:"account-error",children:H})]}),i.jsx("div",{className:"view-grid",children:b.map(F=>i.jsxs("div",{className:"view-card",children:[i.jsxs("div",{className:"view-card__header",children:[i.jsxs("div",{children:[i.jsx("p",{className:"account-card__eyebrow",children:F.entityType||m}),i.jsx("h3",{children:F.name})]}),i.jsxs("label",{className:"visibility-toggle",children:[i.jsx("input",{type:"checkbox",checked:F.visible!==!1,onChange:async()=>{await fetch(`${Vr}/entities/${m}/visibility`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({id:F.id,visible:F.visible!==!1})}),q()}}),i.jsx("span",{children:F.visible===!1?"Hidden":"Visible"})]})]}),i.jsx("p",{className:"account-muted",children:F.description}),i.jsxs("p",{className:"account-muted",children:["Campaign: ",F.campaign||"Main"]}),i.jsxs("p",{className:"account-muted",children:["Region: ",F.regionId||""," | Marker: ",F.markerId||""]}),i.jsxs("p",{className:"account-muted",children:["Location: ",F.locationId||""]}),i.jsx("button",{type:"button",className:"fav-btn",onClick:()=>B({...M,...F}),children:"Edit"})]},F.id))})]})}const u0="http://localhost:4000/api";function d0(){const{id:r}=lh(),h=Li(),[f,m]=v.useState(null),[p,b]=v.useState("");if(v.useEffect(()=>{(async()=>{try{const k=await fetch(`${u0}/view/region/${r}`),M=await k.json();if(!k.ok)throw new Error(M.error||"Unable to load region");m(M)}catch(k){b(k.message||"Unable to load region")}})()},[r]),p)return i.jsxs("div",{className:"page-container",children:[i.jsx("h1",{children:"Region"}),i.jsx("p",{className:"account-error",children:p})]});if(!f)return i.jsxs("div",{className:"page-container",children:[i.jsx("h1",{children:"Region"}),i.jsx("p",{className:"account-muted",children:"Loading..."})]});const{region:j,locations:C,npcs:y,players:x,majors:E}=f;return i.jsxs("div",{className:"page-container",children:[i.jsx("h1",{children:j?.name||"Region"}),i.jsxs("p",{className:"account-muted",children:["Category: ",j?.category||""]}),i.jsxs("p",{className:"account-muted",children:["Campaign: ",j?.campaign||"Main"]}),i.jsx("button",{type:"button",className:"tab-btn",onClick:()=>h("/people"),children:"View in Viewer Page"}),i.jsxs("div",{className:"view-grid",children:[i.jsxs("div",{className:"view-card",children:[i.jsx("h3",{children:"Locations"}),C?.length?C.map(w=>i.jsx("p",{children:w.name},w.id)):i.jsx("p",{className:"account-muted",children:"None linked."})]}),i.jsxs("div",{className:"view-card",children:[i.jsx("h3",{children:"NPCs"}),y?.length?y.map(w=>i.jsx("p",{children:w.name},w.id)):i.jsx("p",{className:"account-muted",children:"None linked."})]}),i.jsxs("div",{className:"view-card",children:[i.jsx("h3",{children:"Players"}),x?.length?x.map(w=>i.jsx("p",{children:w.name},w.id)):i.jsx("p",{className:"account-muted",children:"None linked."})]}),i.jsxs("div",{className:"view-card",children:[i.jsx("h3",{children:"Major Entities"}),E?.length?E.map(w=>i.jsx("p",{children:w.name},w.id)):i.jsx("p",{className:"account-muted",children:"None linked."})]})]})]})}const h0="http://localhost:4000/api";function f0(){const{id:r}=lh(),h=Li(),[f,m]=v.useState(null),[p,b]=v.useState("");if(v.useEffect(()=>{(async()=>{try{const w=await fetch(`${h0}/view/location/${r}`),k=await w.json();if(!w.ok)throw new Error(k.error||"Unable to load location");m(k)}catch(w){b(w.message||"Unable to load location")}})()},[r]),p)return i.jsxs("div",{className:"page-container",children:[i.jsx("h1",{children:"Location"}),i.jsx("p",{className:"account-error",children:p})]});if(!f)return i.jsxs("div",{className:"page-container",children:[i.jsx("h1",{children:"Location"}),i.jsx("p",{className:"account-muted",children:"Loading..."})]});const{location:j,npcs:C,players:y,majors:x}=f;return i.jsxs("div",{className:"page-container",children:[i.jsx("h1",{children:j?.name||"Location"}),i.jsx("p",{className:"account-muted",children:j?.description||"No description provided."}),i.jsxs("p",{className:"account-muted",children:["Campaign: ",j?.campaign||"Main"]}),i.jsx("button",{type:"button",className:"tab-btn",onClick:()=>h("/people"),children:"View in Viewer Page"}),i.jsxs("div",{className:"view-grid",children:[i.jsxs("div",{className:"view-card",children:[i.jsx("h3",{children:"NPCs"}),C?.length?C.map(E=>i.jsx("p",{children:E.name},E.id)):i.jsx("p",{className:"account-muted",children:"None linked."})]}),i.jsxs("div",{className:"view-card",children:[i.jsx("h3",{children:"Players"}),y?.length?y.map(E=>i.jsx("p",{children:E.name},E.id)):i.jsx("p",{className:"account-muted",children:"None linked."})]}),i.jsxs("div",{className:"view-card",children:[i.jsx("h3",{children:"Major Entities"}),x?.length?x.map(E=>i.jsx("p",{children:E.name},E.id)):i.jsx("p",{className:"account-muted",children:"None linked."})]})]})]})}function m0(){const r=Li(),{user:h,login:f}=Cn(),[m,p]=v.useState(""),[b,j]=v.useState(!1);v.useEffect(()=>{h&&r("/",{replace:!0})},[h,r]);const C=async()=>{if(p(""),!b){j(!0);try{await f()}catch(y){p(y?.message||"Unable to start login."),j(!1)}}};return i.jsx("div",{className:"auth-page",children:i.jsxs("div",{className:"auth-modal__content auth-page__content",children:[i.jsx("header",{className:"auth-modal__header",children:i.jsx("h2",{children:"Login"})}),i.jsxs("div",{className:"auth-modal__form",children:[i.jsx("p",{className:"auth-modal__note",children:"You'll be redirected to Supabase OAuth (e.g. GitHub) to sign in securely."}),i.jsx("button",{type:"button",className:"auth-modal__google",onClick:C,disabled:b,children:b?"Opening sign-in...":"Continue with OAuth"}),m&&i.jsx("p",{className:"auth-modal__error",children:m})]}),i.jsx("p",{className:"auth-modal__note",children:"Note: Editors must be approved by an admin before autosave is enabled."}),i.jsxs("div",{className:"auth-modal__switch",children:[i.jsx("span",{children:"New here?"}),i.jsx(Mn,{to:"/signup",className:"auth-modal__link",children:"Sign Up"})]})]})})}function p0(){const r=Li(),{user:h,signup:f}=Cn(),[m,p]=v.useState(""),[b,j]=v.useState(!1);v.useEffect(()=>{h&&r("/",{replace:!0})},[h,r]);const C=async()=>{if(p(""),!b){j(!0);try{await f()}catch(y){p(y?.message||"Unable to start signup."),j(!1)}}};return i.jsx("div",{className:"auth-page",children:i.jsxs("div",{className:"auth-modal__content auth-page__content",children:[i.jsx("header",{className:"auth-modal__header",children:i.jsx("h2",{children:"Sign Up"})}),i.jsxs("div",{className:"auth-modal__form",children:[i.jsx("p",{className:"auth-modal__note",children:"You'll be redirected to Supabase OAuth (e.g. GitHub) to create your account."}),i.jsx("button",{type:"button",className:"auth-modal__google",onClick:C,disabled:b,children:b?"Opening sign-up...":"Continue with OAuth"}),m&&i.jsx("p",{className:"auth-modal__error",children:m})]}),i.jsx("p",{className:"auth-modal__note",children:"New accounts start as pending until an admin approves them."}),i.jsxs("div",{className:"auth-modal__switch",children:[i.jsx("span",{children:"Already have an account?"}),i.jsx(Mn,{to:"/login",className:"auth-modal__link",children:"Login"})]})]})})}const Vn={compendium:i.jsx("svg",{viewBox:"0 0 24 24",role:"presentation",children:i.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),atlas:i.jsxs("svg",{viewBox:"0 0 24 24",role:"presentation",children:[i.jsx("path",{d:"M12 21s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 7.2c0 7.3-8 11.8-8 11.8z",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("circle",{cx:"12",cy:"10",r:"3",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),map:i.jsxs("svg",{viewBox:"0 0 24 24",role:"presentation",children:[i.jsx("path",{d:"M9 4 3.5 6.5v13L9 17l6 2.5 5.5-2.5v-13L15 6.5 9 4z",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round"}),i.jsx("path",{d:"M9 4v13M15 6.5V20",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]}),campaign:i.jsxs("svg",{viewBox:"0 0 24 24",role:"presentation",children:[i.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("polyline",{points:"14 2 14 8 20 8",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("line",{x1:"10",y1:"9",x2:"8",y2:"9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),viewing:i.jsxs("svg",{viewBox:"0 0 24 24",role:"presentation",children:[i.jsx("path",{d:"M2 12s4-7 10-7 10 7 10 7-4 7-10 7-10-7-10-7z",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"none",stroke:"currentColor",strokeWidth:"1.5"})]}),admin:i.jsxs("svg",{viewBox:"0 0 24 24",role:"presentation",children:[i.jsx("path",{d:"M12 3 6 5.8v6.4c0 4 2.8 7.9 6 8.8 3.2-.9 6-4.8 6-8.8V5.8L12 3z",fill:"none",stroke:"currentColor",strokeWidth:"1.4"}),i.jsx("path",{d:"M10 11.5 12 13l3-3",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"})]}),login:i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),i.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),logout:i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),i.jsx("polyline",{points:"16 17 21 12 16 7"}),i.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),account:i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"7",r:"4"}),i.jsx("path",{d:"M4 21a8 8 0 0 1 16 0"}),i.jsx("path",{d:"M16 5.5a4 4 0 0 1 0 7"})]}),players:i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"8",cy:"7",r:"3"}),i.jsx("circle",{cx:"17",cy:"7",r:"3"}),i.jsx("path",{d:"M2 21a6 6 0 0 1 12 0"}),i.jsx("path",{d:"M12 21a6 6 0 0 1 10 0"})]}),progress:i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"12",r:"9"}),i.jsx("path",{d:"M10 14 14 10"}),i.jsx("path",{d:"m12.5 7.5-1 5-5 1 10-3.5z"})]}),about:i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"12",r:"9"}),i.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),i.jsx("circle",{cx:"12",cy:"8",r:"0.8"})]})},og=[{to:"/",label:"Map",icon:Vn.map},{to:"/campaign",label:"Campaign",icon:Vn.campaign},{to:"/atlas",label:"Atlas",icon:Vn.atlas},{to:"/compendium",label:"Compendium",icon:Vn.compendium,children:[{to:"/compendium",label:"Almanac"},{to:"/compendium/societies",label:"Societies"},{to:"/compendium/cosmos",label:"Cosmos"},{to:"/compendium/heroes",label:"Heroes"}]},{to:"/people",label:"People",icon:Vn.viewing},{to:"/players",label:"Players",icon:Vn.players},{to:"/progress",label:"Progress",icon:Vn.progress},{to:"/about",label:"About",icon:Vn.about}];function g0(){const r=si(),h=Li(),{user:f,role:m,logout:p}=Cn(),[b,j]=v.useState(!1),C=v.useMemo(()=>`${"/p15/".replace(/\/$/,"")}/icon.svg`,[]),y=M=>{M.preventDefault(),j(B=>!B)},x=()=>j(!1),E=()=>j(!1);v.useEffect(()=>{r.pathname.startsWith("/compendium")||j(!1)},[r.pathname]);const w=()=>{p(),h("/")},k=m==="admin"?[...og,{to:"/admin",label:"Admin",icon:Vn.admin}]:og;return i.jsx(i.Fragment,{children:i.jsxs("aside",{className:"azterra-sidebar","aria-label":"Azterra navigation",onMouseLeave:x,children:[i.jsxs("div",{className:"azterra-sidebar__brand",children:[i.jsx("div",{className:"azterra-sidebar__brand-mark",children:i.jsx("img",{src:C,alt:"Azterra icon",className:"azterra-sidebar__brand-image"})}),i.jsx("div",{className:"azterra-sidebar__brand-text",children:i.jsx("span",{children:"Azterra"})})]}),i.jsx("nav",{className:"azterra-nav",children:k.map(({to:M,label:B,icon:H,children:V,isDisabled:O})=>{const D=r.pathname===M||M!=="/"&&r.pathname.startsWith(M),q=B==="Compendium",ae=q&&b||D,F=`azterra-nav__item ${V?"azterra-nav__item--parent":""} ${q?"azterra-nav__item--compendium":""} ${q&&b?"azterra-nav__item--open":""}`;return i.jsxs("div",{className:F,children:[i.jsxs(Mn,{to:M,className:`azterra-nav__link ${ae?"azterra-nav__link--active":""} ${O?"azterra-nav__link--disabled":""}`,"aria-current":ae?"page":void 0,"aria-haspopup":V?"true":void 0,"aria-expanded":q?b:void 0,"aria-disabled":O?"true":void 0,onClick:q?y:O?xe=>xe.preventDefault():void 0,children:[i.jsx("span",{className:"azterra-nav__icon","aria-hidden":"true",children:H}),i.jsx("span",{className:"azterra-nav__label",children:B}),q&&i.jsx("span",{className:`azterra-nav__chevron ${b?"azterra-nav__chevron--open":""}`,"aria-hidden":"true",children:i.jsx("svg",{viewBox:"0 0 24 24",role:"presentation",children:i.jsx("polyline",{points:"6 9 12 15 18 9",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),ae&&i.jsx("div",{className:"azterra-nav__indicator"})]}),V&&i.jsx("div",{className:"azterra-nav__submenu",role:"menu","aria-label":`${B} shortcuts`,children:V.map(xe=>{const J=r.pathname===xe.to;return i.jsx(Mn,{to:xe.to,className:`azterra-nav__sublink ${J?"azterra-nav__sublink--active":""}`,role:"menuitem",onClick:q?E:void 0,children:xe.label},xe.to)})})]},M)})}),i.jsxs("div",{className:"azterra-sidebar__footer",children:[!f&&i.jsxs("div",{className:"azterra-sidebar__guest",children:[i.jsxs(Mn,{to:"/login",className:"azterra-nav__link",title:"Login",children:[i.jsx("span",{className:"azterra-nav__icon text-[#ffd700]",children:Vn.login}),i.jsx("span",{className:"azterra-nav__label",children:"Login"})]}),i.jsxs(Mn,{to:"/signup",className:"azterra-nav__link",title:"Sign Up",children:[i.jsx("span",{className:"azterra-nav__icon text-[#ffd700]",children:Vn.account}),i.jsx("span",{className:"azterra-nav__label",children:"Sign Up"})]})]}),f&&i.jsxs("div",{className:"azterra-sidebar__account",children:[i.jsxs("div",{className:"azterra-sidebar__account-row",children:[i.jsx("span",{className:"azterra-nav__icon text-[#ffd700]",children:Vn.login}),i.jsxs("div",{className:"azterra-sidebar__account-text",children:[i.jsx("span",{className:"azterra-sidebar__account-name",children:f.name||"User"}),i.jsx("span",{className:"azterra-sidebar__account-role",children:m})]})]}),i.jsxs(Mn,{to:"/account",className:"azterra-nav__link",title:"Account settings","data-label":"Account",children:[i.jsx("span",{className:"azterra-nav__icon text-[#ffd700]",children:Vn.account}),i.jsx("span",{className:"azterra-nav__label",children:"Account"})]}),i.jsxs("button",{type:"button",className:"azterra-nav__link azterra-nav__link--muted",onClick:w,"data-label":"Logout",title:"Logout",children:[i.jsx("span",{className:"azterra-nav__icon",children:Vn.logout}),i.jsx("span",{className:"azterra-nav__label",children:"Logout"})]})]})]})]})})}function cg({title:r,tabs:h,renderBottomTabs:f=!1}){const m=si(),{activeIndex:p,prevTab:b,nextTab:j}=v.useMemo(()=>{if(!h||h.length===0)return{activeIndex:-1,prevTab:null,nextTab:null};const C=h.findIndex(E=>{const w=E.to||"";return E.end?m.pathname===(w.startsWith("/")?w:`/${w}`)||m.pathname===w:m.pathname.startsWith(w.startsWith("/")?w:`/${w}`)||m.pathname.startsWith(w)});if(C===-1)return{activeIndex:-1,prevTab:null,nextTab:null};const y=h[(C-1+h.length)%h.length],x=h[(C+1)%h.length];return{activeIndex:C,prevTab:y,nextTab:x}},[m.pathname,h]);return i.jsxs("div",{className:"page-fullscreen",children:[i.jsx("div",{className:"page-content-full",children:i.jsx(cy,{})}),f&&h&&h.length>0&&i.jsx("div",{className:"compendium-tabbar-wrapper",children:i.jsxs("nav",{className:"compendium-tabbar","aria-label":`${r} pages`,children:[b&&i.jsxs(Tc,{to:b.to,end:b.end,className:({isActive:C})=>`compendium-tab compendium-tab__arrow ${C?"compendium-tab--active":""}`,children:[" ",b.label]}),i.jsx("div",{className:"compendium-tabbar__list",children:h.map(C=>i.jsx(Tc,{to:C.to,end:C.end,className:({isActive:y})=>`compendium-tab ${y?"compendium-tab--active":""}`,children:C.label},C.to))}),j&&i.jsxs(Tc,{to:j.to,end:j.end,className:({isActive:C})=>`compendium-tab compendium-tab__arrow ${C?"compendium-tab--active":""}`,children:[j.label," "]})]})})]})}function v0(){const{user:r,loading:h}=Cn();return v.useEffect(()=>{!h&&r&&window.location.replace("/")},[r,h]),i.jsxs("div",{className:"page-container",children:[i.jsx("h1",{children:"Completing login"}),i.jsx("p",{children:"Finishing OAuth sign-in"})]})}function _0(){const r=Li(),{user:h,loading:f}=Cn();return v.useEffect(()=>{!f&&h&&r("/campaign",{replace:!0})},[h,f,r]),i.jsxs("div",{className:"page-container",children:[i.jsx("h1",{children:"Completing login"}),i.jsx("p",{children:"Hang tight while we finish signing you in."})]})}function Zc(r){return Math.floor((r-10)/2)}function Sc(r){return r>=0?`+${r}`:`${r}`}function y0(r,h,f){const m=Zc(r);return f?m+h:m}function Nc(r,h,f,m=!1){const p=Zc(r);return m?p+h*2:f?p+h:p}function $d(r,h=0){return 10+r+h}function x0(r,h=0){return Zc(r)+h}const Vg={Acrobatics:"dex","Animal Handling":"wis",Arcana:"int",Athletics:"str",Deception:"cha",History:"int",Insight:"wis",Intimidation:"cha",Investigation:"int",Medicine:"wis",Nature:"int",Perception:"wis",Performance:"cha",Persuasion:"cha",Religion:"int","Sleight of Hand":"dex",Stealth:"dex",Survival:"wis"},b0={str:"Strength",dex:"Dexterity",con:"Constitution",int:"Intelligence",wis:"Wisdom",cha:"Charisma"};function j0(){return Object.keys(Vg).sort()}const w0=["Actions","Spells","Inventory","Features","Description","Notes"],S0=["Attack","Action","Bonus","Reaction","Other"],N0=({type:r})=>{const h={melee:"",ranged:"",spell:"",default:""};return i.jsx("span",{children:h[r]||h.default})};function C0(){const[r,h]=v.useState(1),[f,m]=v.useState("Actions"),[p,b]=v.useState("Attack"),[j,C]=v.useState(null),[y,x]=v.useState(0),[E,w]=v.useState(0),[k,M]=v.useState(!1),[B,H]=v.useState(null),V=(Z,T="info")=>{H({message:Z,type:T}),setTimeout(()=>H(null),3e3)},O=v.useMemo(()=>jt.find(Z=>Z.id===r)||jt[0],[r]),D=O.sheet||{},q=D.abilityScores||O.stats||{},ae=D.proficiencies||{},F=D.combat||{},xe=O.profBonus||2,J=parseInt(F.hitPoints||O.hp)||0,ce=j!==null?j:J,U=v.useMemo(()=>{const Z={};return Object.entries(q).forEach(([T,$])=>{Z[T]=Zc($)}),Z},[q]),be=v.useMemo(()=>{const Z=ae.savingThrows||[];return{str:Z.some(T=>T.toLowerCase().includes("strength")),dex:Z.some(T=>T.toLowerCase().includes("dexterity")),con:Z.some(T=>T.toLowerCase().includes("constitution")),int:Z.some(T=>T.toLowerCase().includes("intelligence")),wis:Z.some(T=>T.toLowerCase().includes("wisdom")),cha:Z.some(T=>T.toLowerCase().includes("charisma"))}},[ae.savingThrows]),we=v.useMemo(()=>{const Z=ae.skills||O.skills||[];return new Set(Z.map($=>$.toLowerCase()))},[ae.skills,O.skills]),Ae=v.useMemo(()=>{const Z=Nc(q.wis||10,xe,we.has("perception")),T=Nc(q.int||10,xe,we.has("investigation")),$=Nc(q.wis||10,xe,we.has("insight"));return{perception:$d(Z),investigation:$d(T),insight:$d($)}},[q,xe,we]),He=D.attacks||[],qe=(F.hitDice||"").match(/(\d+)d(\d+)/),_e=qe?parseInt(qe[1]):O.level||1,A=qe?parseInt(qe[2]):8,K=Math.max(0,_e-E),le=()=>{if(K>0){const Z=U.con||0,T=Math.floor(A/2)+1+Z,$=Math.min(J,ce+T);C($),w(oe=>oe+1),V(` Short Rest: Healed ${T} HP (${K-1} hit dice remaining)`,"success")}else V(" Short Rest: No hit dice available to spend","warning")},je=()=>{C(J),x(0);const Z=Math.max(1,Math.floor(_e/2));w(T=>Math.max(0,T-Z)),V(` Long Rest: HP fully restored, ${Z} hit dice recovered`,"success")};return i.jsxs("div",{className:"character-sheet-page custom-scrollbar",children:[B&&i.jsx("div",{className:`sheet-toast sheet-toast--${B.type}`,children:B.message}),k&&i.jsx("div",{className:"sheet-modal-backdrop",onClick:()=>M(!1),children:i.jsxs("div",{className:"sheet-modal",onClick:Z=>Z.stopPropagation(),children:[i.jsxs("header",{className:"sheet-modal__header",children:[i.jsx("h2",{children:" Sheet Settings"}),i.jsx("button",{className:"sheet-modal__close",onClick:()=>M(!1),children:""})]}),i.jsxs("div",{className:"sheet-modal__content",children:[i.jsxs("div",{className:"sheet-modal__section",children:[i.jsx("h3",{className:"sheet-card__title",children:"Character Info"}),i.jsxs("p",{children:[i.jsx("strong",{children:"Name:"})," ",O.name]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Class:"})," ",O.class," (Level ",O.level,")"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Race:"})," ",O.race]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Background:"})," ",O.background]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Alignment:"})," ",O.alignment]})]}),i.jsxs("div",{className:"sheet-modal__section",children:[i.jsx("h3",{className:"sheet-card__title",children:"Resources"}),i.jsxs("p",{children:[i.jsx("strong",{children:"Hit Dice:"})," ",K," / ",_e," (d",A,")"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"HP:"})," ",ce," / ",J]}),y>0&&i.jsxs("p",{children:[i.jsx("strong",{children:"Temp HP:"})," ",y]})]}),i.jsxs("div",{className:"sheet-modal__section",children:[i.jsx("h3",{className:"sheet-card__title",children:"Quick Actions"}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[i.jsx("button",{className:"sheet-header__btn",onClick:()=>{C(J),V("HP reset to max","info")},children:"Reset HP"}),i.jsx("button",{className:"sheet-header__btn",onClick:()=>{w(0),V("Hit dice reset","info")},children:"Reset Hit Dice"}),i.jsx("button",{className:"sheet-header__btn",onClick:()=>{x(0),V("Temp HP cleared","info")},children:"Clear Temp HP"})]})]})]})]})}),i.jsxs("header",{className:"sheet-header",children:[i.jsx("div",{className:"sheet-header__profile",children:i.jsxs("div",{children:[i.jsx("h1",{className:"sheet-header__name",children:O.name}),i.jsxs("p",{className:"sheet-header__meta",children:[O.race," ",O.class,"  Level ",O.level]})]})}),i.jsxs("div",{className:"sheet-header__actions",children:[i.jsx("select",{className:"sheet-header__btn",value:r,onChange:Z=>{h(parseInt(Z.target.value)),C(null),w(0),x(0)},children:jt.map(Z=>i.jsx("option",{value:Z.id,children:Z.name},Z.id))}),i.jsx("button",{className:"sheet-header__btn sheet-header__btn--rest",onClick:le,title:`Spend a hit die to heal (${K} available)`,children:" Short Rest"}),i.jsx("button",{className:"sheet-header__btn sheet-header__btn--rest",onClick:je,title:"Restore all HP and recover half your hit dice",children:" Long Rest"}),i.jsx("button",{className:"sheet-header__btn",onClick:()=>M(!0),title:"Open settings",children:""}),i.jsx(Mn,{to:"/campaign",className:"sheet-header__btn",children:" Back"})]})]}),i.jsxs("div",{className:"sheet-grid",children:[i.jsxs("div",{className:"sheet-column sheet-column--stats",children:[i.jsxs("div",{className:"sheet-card",children:[i.jsx("h2",{className:"sheet-card__title",children:"Ability Scores"}),i.jsx("div",{className:"ability-scores",children:Object.entries(q).map(([Z,T])=>i.jsxs("div",{className:"ability-card",children:[i.jsx("span",{className:"ability-card__abbr",children:Z.toUpperCase()}),i.jsx("span",{className:"ability-card__mod",children:Sc(U[Z])}),i.jsx("span",{className:"ability-card__score",children:T})]},Z))})]}),i.jsxs("div",{className:"sheet-card",children:[i.jsx("h2",{className:"sheet-card__title",children:"Saving Throws"}),i.jsx("div",{className:"saving-throws",children:Object.entries(b0).map(([Z,T])=>{const $=be[Z],oe=y0(q[Z]||10,xe,$);return i.jsxs("div",{className:"save-row",children:[i.jsx("span",{className:`save-row__prof ${$?"save-row__prof--active":""}`}),i.jsx("span",{className:"save-row__name",children:T}),i.jsx("span",{className:"save-row__mod",children:Sc(oe)})]},Z)})})]}),i.jsxs("div",{className:"sheet-card",children:[i.jsx("h2",{className:"sheet-card__title",children:"Passive Senses"}),i.jsxs("div",{className:"passive-senses",children:[i.jsxs("div",{className:"passive-row",children:[i.jsx("span",{className:"passive-row__label",children:"Perception"}),i.jsx("span",{className:"passive-row__value",children:Ae.perception})]}),i.jsxs("div",{className:"passive-row",children:[i.jsx("span",{className:"passive-row__label",children:"Investigation"}),i.jsx("span",{className:"passive-row__value",children:Ae.investigation})]}),i.jsxs("div",{className:"passive-row",children:[i.jsx("span",{className:"passive-row__label",children:"Insight"}),i.jsx("span",{className:"passive-row__value",children:Ae.insight})]})]}),D.core?.raceTraits?.includes("Darkvision")&&i.jsxs("div",{className:"passive-row",style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px solid rgba(255,255,255,0.06)"},children:[i.jsx("span",{className:"passive-row__label",children:"Darkvision"}),i.jsx("span",{className:"passive-row__value",children:"60 ft"})]})]}),i.jsxs("div",{className:"sheet-card",children:[i.jsx("h2",{className:"sheet-card__title",children:"Proficiencies"}),i.jsxs("div",{className:"proficiency-list",children:[(ae.armorWeapons||[]).map((Z,T)=>i.jsx("span",{className:"proficiency-chip",children:Z},T)),(ae.tools||[]).map((Z,T)=>i.jsx("span",{className:"proficiency-chip",children:Z},`tool-${T}`))]})]})]}),i.jsxs("div",{className:"sheet-column sheet-column--skills",children:[i.jsx("div",{className:"sheet-card",children:i.jsxs("div",{className:"combat-stats",children:[i.jsxs("div",{className:"combat-stat combat-stat--shield",children:[i.jsx("span",{className:"combat-stat__label",children:"AC"}),i.jsx("span",{className:"combat-stat__value",children:F.armorClass||O.ac})]}),i.jsxs("div",{className:"combat-stat combat-stat--shield",children:[i.jsx("span",{className:"combat-stat__label",children:"Initiative"}),i.jsx("span",{className:"combat-stat__value",children:Sc(x0(q.dex||10))})]}),i.jsxs("div",{className:"combat-stat",children:[i.jsx("span",{className:"combat-stat__label",children:"Speed"}),i.jsx("span",{className:"combat-stat__value",children:O.speed||30})]})]})}),i.jsxs("div",{className:"sheet-card",children:[i.jsx("h2",{className:"sheet-card__title",children:"Hit Points"}),i.jsxs("div",{className:"hp-panel",children:[i.jsxs("div",{className:"hp-display",children:[i.jsx("input",{type:"number",className:"hp-input hp-input--current",value:ce,onChange:Z=>C(parseInt(Z.target.value)||0),min:0}),i.jsx("span",{className:"hp-divider",children:"/"}),i.jsx("input",{type:"number",className:"hp-input",value:J,readOnly:!0}),i.jsx("span",{className:"hp-divider",children:"+"}),i.jsx("input",{type:"number",className:"hp-input",value:y,onChange:Z=>x(parseInt(Z.target.value)||0),min:0,placeholder:"0"})]}),i.jsxs("div",{className:"hp-labels",children:[i.jsx("span",{children:"Current"}),i.jsx("span",{children:"Max"}),i.jsx("span",{children:"Temp"})]})]})]}),i.jsx("div",{className:"sheet-card",children:i.jsxs("div",{className:"combat-stats",style:{gridTemplateColumns:"1fr 1fr"},children:[i.jsxs("div",{className:"combat-stat",children:[i.jsx("span",{className:"combat-stat__label",children:"Proficiency"}),i.jsxs("span",{className:"combat-stat__value",children:["+",xe]})]}),i.jsxs("div",{className:"combat-stat",children:[i.jsx("span",{className:"combat-stat__label",children:"Hit Dice"}),i.jsx("span",{className:"combat-stat__value",style:{fontSize:"1rem"},children:F.hitDice||""})]})]})}),i.jsxs("div",{className:"sheet-card",style:{flex:1},children:[i.jsx("h2",{className:"sheet-card__title",children:"Skills"}),i.jsx("div",{className:"skills-table custom-scrollbar",children:j0().map(Z=>{const T=Vg[Z],$=we.has(Z.toLowerCase()),oe=Nc(q[T]||10,xe,$);return i.jsxs("div",{className:"skill-row",children:[i.jsx("span",{className:`skill-row__prof ${$?"skill-row__prof--active":""}`}),i.jsx("span",{className:"skill-row__ability",children:T.toUpperCase()}),i.jsx("span",{className:"skill-row__name",children:Z}),i.jsx("span",{className:"skill-row__mod",children:Sc(oe)})]},Z)})})]})]}),i.jsx("div",{className:"sheet-column sheet-column--actions",children:i.jsxs("div",{className:"sheet-card actions-panel",children:[i.jsx("div",{className:"actions-tabs",children:w0.map(Z=>i.jsx("button",{className:`actions-tab ${f===Z?"actions-tab--active":""}`,onClick:()=>m(Z),children:Z},Z))}),i.jsxs("div",{className:"actions-content custom-scrollbar",children:[f==="Actions"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"action-filters",children:S0.map(Z=>i.jsx("button",{className:`action-chip ${p===Z?"action-chip--active":""}`,onClick:()=>b(Z),children:Z},Z))}),i.jsx("div",{className:"attack-list",children:He.length>0?He.map((Z,T)=>i.jsxs("div",{className:"attack-item",children:[i.jsx("div",{className:"attack-item__icon",children:i.jsx(N0,{type:Z.tags?.includes("Melee")?"melee":Z.tags?.includes("Ranged")?"ranged":Z.tags?.includes("Spell")?"spell":"default"})}),i.jsx("span",{className:"attack-item__name",children:Z.name}),i.jsx("span",{className:"attack-item__range",children:Z.tags?.join(", ")}),i.jsx("span",{className:"attack-item__hit",children:Z.bonus}),i.jsx("span",{className:"attack-item__damage",children:Z.damage})]},T)):i.jsx("p",{style:{color:"var(--sheet-text-muted)",fontStyle:"italic"},children:"No attacks configured."})}),i.jsxs("div",{style:{marginTop:"1.5rem",paddingTop:"1rem",borderTop:"1px solid rgba(255,255,255,0.06)"},children:[i.jsx("h3",{className:"sheet-card__title",children:"Actions in Combat"}),i.jsx("div",{className:"proficiency-list",style:{gap:"0.5rem"},children:["Attack","Cast a Spell","Dash","Disengage","Dodge","Help","Hide","Ready","Search","Use an Object"].map(Z=>i.jsx("span",{className:"proficiency-chip",children:Z},Z))})]})]}),f==="Spells"&&i.jsx("div",{children:D.spellsDetail?.ability&&D.spellsDetail.ability!=="None"?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"combat-stats",style:{marginBottom:"1rem"},children:[i.jsxs("div",{className:"combat-stat",children:[i.jsx("span",{className:"combat-stat__label",children:"Spell DC"}),i.jsx("span",{className:"combat-stat__value",children:D.spellsDetail.saveDC})]}),i.jsxs("div",{className:"combat-stat",children:[i.jsx("span",{className:"combat-stat__label",children:"Attack"}),i.jsx("span",{className:"combat-stat__value",children:D.spellsDetail.attackBonus})]}),i.jsxs("div",{className:"combat-stat",children:[i.jsx("span",{className:"combat-stat__label",children:"Ability"}),i.jsx("span",{className:"combat-stat__value",style:{fontSize:"0.9rem"},children:D.spellsDetail.ability?.slice(0,3).toUpperCase()})]})]}),i.jsx("p",{style:{fontSize:"0.85rem",color:"var(--sheet-text-muted)",marginBottom:"0.75rem"},children:D.spellsDetail.slots}),i.jsx("div",{className:"proficiency-list",children:(D.spellsDetail.known||O.spells||[]).map((Z,T)=>i.jsx("span",{className:"proficiency-chip",children:Z},T))})]}):i.jsx("p",{style:{color:"var(--sheet-text-muted)",fontStyle:"italic"},children:"This character does not cast spells."})}),f==="Inventory"&&i.jsxs("div",{className:"proficiency-list",style:{gap:"0.5rem"},children:[(D.equipmentDetail?.starting||O.equipment||[]).map((Z,T)=>i.jsx("span",{className:"proficiency-chip",children:Z},T)),D.equipmentDetail?.wealth&&i.jsxs("span",{className:"proficiency-chip",style:{background:"rgba(207, 170, 104, 0.15)",borderColor:"var(--sheet-accent)"},children:[" ",D.equipmentDetail.wealth]})]}),f==="Features"&&i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("h3",{className:"sheet-card__title",children:"Class Features"}),i.jsx("div",{className:"proficiency-list",children:(D.features?.classFeatures||O.abilities||[]).map((Z,T)=>i.jsx("span",{className:"proficiency-chip",children:Z},T))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"sheet-card__title",children:"Racial Traits"}),i.jsx("div",{className:"proficiency-list",children:(D.features?.racialTraits||D.core?.raceTraits||[]).map((Z,T)=>i.jsx("span",{className:"proficiency-chip",children:Z},T))})]}),D.features?.feats?.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"sheet-card__title",children:"Feats"}),i.jsx("div",{className:"proficiency-list",children:D.features.feats.map((Z,T)=>i.jsx("span",{className:"proficiency-chip",children:Z},T))})]})]}),f==="Description"&&i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("h3",{className:"sheet-card__title",children:"Appearance"}),i.jsx("p",{style:{color:"var(--sheet-text)",lineHeight:1.6,margin:0},children:D.core?.appearance||"No appearance description."})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"sheet-card__title",children:"Backstory"}),i.jsx("p",{style:{color:"var(--sheet-text)",lineHeight:1.6,margin:0},children:D.core?.backstory||O.lore||"No backstory written."})]}),D.personality&&i.jsxs("div",{children:[i.jsx("h3",{className:"sheet-card__title",children:"Personality"}),i.jsx("div",{className:"proficiency-list",children:D.personality.traits?.map((Z,T)=>i.jsx("span",{className:"proficiency-chip",children:Z},T))})]})]}),f==="Notes"&&i.jsxs("div",{children:[i.jsx("p",{style:{color:"var(--sheet-text)",lineHeight:1.6,margin:0},children:D.extras?.notes||O.notes||"No notes."}),ae.languages&&i.jsxs("div",{style:{marginTop:"1rem"},children:[i.jsx("h3",{className:"sheet-card__title",children:"Languages"}),i.jsx("div",{className:"proficiency-list",children:ae.languages.map((Z,T)=>i.jsx("span",{className:"proficiency-chip",children:Z},T))})]})]})]})]})})]})]})}const Fd="http://localhost:4000/api";function E0(){const{user:r}=Cn(),h=Li(),[f,m]=v.useState([]),[p,b]=v.useState(!0),[j,C]=v.useState(""),[y,x]=v.useState(!1),[E,w]=v.useState(!1),[k,M]=v.useState(new Set),[B,H]=v.useState(new Set),[V,O]=v.useState(!1),[D,q]=v.useState(null),[ae,F]=v.useState(!1),xe=v.useCallback(async()=>{if(r){b(!0),C("");try{const _e=await fetch(`${Fd}/campaigns/me`,{credentials:"include"}),A=await _e.json();if(!_e.ok)throw new Error(A.error||"Failed to load campaigns");m(A.campaigns||[])}catch(_e){C(_e.message)}finally{b(!1)}}},[r]);v.useEffect(()=>{xe()},[xe]);const J=f.flatMap(_e=>(_e.characters||[]).map(A=>({...A,campaignId:_e.id,campaignName:_e.name}))),ce=[...f].sort((_e,A)=>(A.lastUsed||0)-(_e.lastUsed||0)),U=[...J].sort((_e,A)=>(A.lastUsed||0)-(_e.lastUsed||0)),be=_e=>{M(A=>{const K=new Set(A);return K.has(_e)?K.delete(_e):K.add(_e),K})},we=_e=>{H(A=>{const K=new Set(A);return K.has(_e)?K.delete(_e):K.add(_e),K})},Ae=_e=>{q(_e),O(!0)},He=async()=>{F(!0);try{if(D==="campaign"){for(const _e of k)await fetch(`${Fd}/campaigns/${_e}`,{method:"DELETE",credentials:"include"});M(new Set),x(!1)}else if(D==="character"){for(const _e of B){const[A,K]=_e.split("::");await fetch(`${Fd}/campaigns/${A}/character/${K}`,{method:"DELETE",credentials:"include"})}H(new Set),w(!1)}await xe()}catch(_e){C(_e.message)}finally{F(!1),O(!1)}},qe=_e=>{E?we(`${_e.campaignId}::${_e.id}`):h("/character-sheet",{state:{character:_e}})};return r?i.jsxs("div",{className:"campaigns-page custom-scrollbar",children:[i.jsx("h1",{className:"campaigns-title",children:"Your Campaigns"}),j&&i.jsx("p",{className:"campaigns-error",children:j}),p?i.jsx("p",{className:"campaigns-loading",children:"Loading your campaigns..."}):i.jsxs("div",{className:"campaigns-split-layout",children:[i.jsxs("section",{className:"campaigns-section",children:[i.jsxs("header",{className:"campaigns-section-header",children:[i.jsx("h2",{children:"Campaigns"}),i.jsxs("div",{className:"campaigns-action-bar",children:[i.jsx("button",{className:"campaigns-btn campaigns-btn--add",title:"Create Campaign (Coming Soon)",disabled:!0,children:"+"}),i.jsx("button",{className:`campaigns-btn ${y?"campaigns-btn--active":""}`,onClick:()=>{x(!y),M(new Set)},children:y?"Cancel":"Select"}),y&&k.size>0&&i.jsxs("button",{className:"campaigns-btn campaigns-btn--delete",onClick:()=>Ae("campaign"),children:["Delete (",k.size,")"]})]})]}),i.jsx("div",{className:"campaigns-card-list",children:ce.length===0?i.jsx("p",{className:"campaigns-empty",children:"No campaigns yet. Create one to get started!"}):ce.map(_e=>i.jsxs("div",{className:`campaigns-card campaigns-card--campaign ${k.has(_e.id)?"campaigns-card--selected":""}`,onClick:()=>y&&be(_e.id),children:[y&&i.jsx("div",{className:"campaigns-checkbox",children:k.has(_e.id)&&""}),i.jsx("h3",{className:"campaigns-card-name",children:_e.name}),i.jsxs("p",{className:"campaigns-card-owner",children:["Owned by ",_e.ownerName]}),i.jsxs("p",{className:"heroes-card-meta",children:[_e.characters?.length||0," character(s)"]})]},_e.id))})]}),i.jsxs("section",{className:"campaigns-section",children:[i.jsxs("header",{className:"campaigns-section-header",children:[i.jsx("h2",{children:"Characters"}),i.jsxs("div",{className:"campaigns-action-bar",children:[i.jsx("button",{className:"campaigns-btn campaigns-btn--add",title:"Create Character (Coming Soon)",disabled:!0,children:"+"}),i.jsx("button",{className:`campaigns-btn ${E?"campaigns-btn--active":""}`,onClick:()=>{w(!E),H(new Set)},children:E?"Cancel":"Select"}),E&&B.size>0&&i.jsxs("button",{className:"campaigns-btn campaigns-btn--delete",onClick:()=>Ae("character"),children:["Delete (",B.size,")"]})]})]}),i.jsx("div",{className:"campaigns-card-list",children:U.length===0?i.jsx("p",{className:"campaigns-empty",children:"No characters yet. Create one to get started!"}):U.map(_e=>{const A=`${_e.campaignId}::${_e.id}`;return i.jsxs("div",{className:`campaigns-card campaigns-card--character ${B.has(A)?"campaigns-card--selected":""}`,onClick:()=>qe(_e),role:"button",tabIndex:0,onKeyDown:K=>K.key==="Enter"&&qe(_e),children:[E&&i.jsx("div",{className:"campaigns-checkbox",children:B.has(A)&&""}),i.jsx("h3",{className:"campaigns-card-name",children:_e.name}),i.jsxs("div",{className:"campaigns-card-stats",children:[i.jsx("span",{className:"campaigns-stat",children:_e.class||"Unknown Class"}),i.jsx("span",{className:"campaigns-stat",children:_e.race||"Unknown Race"}),i.jsxs("span",{className:"campaigns-stat",children:["Lvl ",_e.level||1]})]}),i.jsxs("p",{className:"campaigns-card-meta",children:["From: ",_e.campaignName]})]},A)})})]})]}),V&&i.jsx("div",{className:"campaigns-modal-overlay",onClick:()=>O(!1),children:i.jsxs("div",{className:"campaigns-modal",onClick:_e=>_e.stopPropagation(),children:[i.jsx("h3",{children:"Confirm Deletion"}),i.jsxs("p",{children:["Are you sure you want to delete ",D==="campaign"?k.size:B.size," ",D,"(s)? This action cannot be undone."]}),i.jsxs("div",{className:"campaigns-modal-actions",children:[i.jsx("button",{className:"campaigns-btn",onClick:()=>O(!1),disabled:ae,children:"Cancel"}),i.jsx("button",{className:"campaigns-btn campaigns-btn--delete",onClick:He,disabled:ae,children:ae?"Deleting...":"Delete"})]})]})})]}):i.jsx("div",{className:"campaigns-page",children:i.jsxs("div",{className:"campaigns-login-required",children:[i.jsx("h2",{children:"Campaigns"}),i.jsx("p",{children:"Please log in to view your campaigns and characters."})]})})}const T0=({title:r})=>i.jsxs("div",{className:"text-center p-10 text-2xl text-[#f5e5c980] italic border border-[#d4af3733] rounded-xl bg-[#00000033]",children:[r," Content Coming Soon"]});function L0(){return i.jsx(zy,{children:i.jsxs("div",{className:"app-shell",children:[i.jsx(g0,{}),i.jsx("main",{className:"app-content",children:i.jsxs(jg,{children:[i.jsx(mt,{path:"/",element:i.jsx(pb,{})}),i.jsx(mt,{path:"/map",element:i.jsx(Ap,{to:"/",replace:!0})}),i.jsx(mt,{path:"/about",element:i.jsx(i0,{})}),i.jsx(mt,{path:"/campaign",element:i.jsx(E0,{})}),i.jsx(mt,{path:"/character-sheet",element:i.jsx(C0,{})}),i.jsxs(mt,{path:"/atlas",element:i.jsx(cg,{title:"World Atlas",tabs:[{to:"",label:"View Map",end:!0},{to:"editor",label:"Map Editor"}]}),children:[i.jsx(mt,{index:!0,element:i.jsx(Yb,{})}),i.jsx(mt,{path:"editor",element:i.jsx($b,{})})]}),i.jsxs(mt,{path:"/compendium",element:i.jsx(cg,{title:"Azterra Compendium",renderBottomTabs:!0,tabs:[{to:"",label:"Almanac",end:!0},{to:"societies",label:"Societies"},{to:"cosmos",label:"Cosmos"},{to:"heroes",label:"Heroes"}]}),children:[i.jsx(mt,{index:!0,element:i.jsx(jb,{})}),i.jsx(mt,{path:"societies",element:i.jsx(Hb,{})}),i.jsx(mt,{path:"cosmos",element:i.jsx(T0,{title:"Magic System"})}),i.jsx(mt,{path:"heroes",element:i.jsx(Pb,{})})]}),i.jsx(mt,{path:"/progress",element:i.jsx(Kb,{})}),i.jsx(mt,{path:"/lore/aurora-ember",element:i.jsx(Gd,{secretId:"aurora-ember"})}),i.jsx(mt,{path:"/lore/silent-archive",element:i.jsx(Gd,{secretId:"silent-archive"})}),i.jsx(mt,{path:"/lore/gilded-horizon",element:i.jsx(Gd,{secretId:"gilded-horizon"})}),i.jsx(mt,{path:"/account",element:i.jsx(Fb,{})}),i.jsx(mt,{path:"/dashboard",element:i.jsx(t0,{})}),i.jsx(mt,{path:"/login",element:i.jsx(m0,{})}),i.jsx(mt,{path:"/signup",element:i.jsx(p0,{})}),i.jsx(mt,{path:"/auth/callback",element:i.jsx(_0,{})}),i.jsx(mt,{path:"/players",element:i.jsx(Wb,{})}),i.jsx(mt,{path:"/players/:id",element:i.jsx(e0,{})}),i.jsx(mt,{path:"/people",element:i.jsx(r0,{})}),i.jsx(mt,{path:"/viewing",element:i.jsx(Ap,{to:"/people",replace:!0})}),i.jsx(mt,{path:"/admin/entities",element:i.jsx(c0,{})}),i.jsx(mt,{path:"/region/:id",element:i.jsx(d0,{})}),i.jsx(mt,{path:"/location/:id",element:i.jsx(f0,{})}),i.jsx(mt,{path:"/admin",element:i.jsx(qb,{})})]})})]})})}function A0(){const r="/p15/".replace(/\/$/,"");return typeof window<"u"&&window.location.pathname===`${r}/auth/callback`?i.jsx(My,{basename:r||"/",children:i.jsx(jg,{children:i.jsx(mt,{path:"/auth/callback",element:i.jsx(v0,{})})})}):i.jsx(L0,{})}v_.createRoot(document.getElementById("root")).render(i.jsx(px,{children:i.jsx(gx,{children:i.jsx(ux,{children:i.jsx(dx,{children:i.jsx(Nx,{children:i.jsx(A0,{})})})})})}));
